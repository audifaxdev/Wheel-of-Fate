var _NumberMAX_VALUE=Number.MAX_VALUE,_Mathtan=Math.tan,_Mathatan2=Math.atan,_Mathasin=Math.asin,_Mathacos=Math.acos,_Mathsin=Math.sin,_Mathcos=Math.cos,_Mathatan=Math.atan2,_Mathabs=Math.abs,_Mathsqrt=Math.sqrt,_Mathround=Math.round,_Mathpow=Math.pow,_Mathceil=Math.ceil,_MathLN=Math.LN2,_Mathlog=Math.log,_Mathmax=Math.max,_Mathmin=Math.min,_MathPI=Math.PI,_Mathsign=Math.sign,_Mathfloor=Math.floor,_NumberisInteger=Number.isInteger,_NumberEPSILON=Number.EPSILON;(function(E){function S(F){if(L[F])return L[F].exports;var U=L[F]={i:F,l:!1,exports:{}};return E[F].call(U.exports,U,U.exports,S),U.l=!0,U.exports}var A=window.webpackJsonp;window.webpackJsonp=function(U,O,G){for(var X=0,Y=[],H,W,Z;X<U.length;X++)W=U[X],D[W]&&Y.push(D[W][0]),D[W]=0;for(H in O)Object.prototype.hasOwnProperty.call(O,H)&&(E[H]=O[H]);for(A&&A(U,O,G);Y.length;)Y.shift()();if(G)for(X=0;X<G.length;X++)Z=S(S.s=G[X]);return Z};var L={},D={1:0};return S.e=function(U){function O(){X.onerror=X.onload=null,clearTimeout(Y);var Z=D[U];0!==Z&&(Z&&Z[1](new Error("Loading chunk "+U+" failed.")),D[U]=void 0)}var G=D[U];if(0===G)return new Promise(function(Z){Z()});if(G)return G[2];var H=new Promise(function(Z,J){G=D[U]=[Z,J]});G[2]=H;var W=document.getElementsByTagName("head")[0],X=document.createElement("script");X.type="text/javascript",X.charset="utf-8",X.async=!0,X.timeout=1.2e5,S.nc&&X.setAttribute("nonce",S.nc),X.src=S.p+""+U+".bundle.js";var Y=setTimeout(O,1.2e5);return X.onerror=X.onload=O,W.appendChild(X),H},S.m=E,S.c=L,S.i=function(F){return F},S.d=function(F,U,O){S.o(F,U)||Object.defineProperty(F,U,{configurable:!1,enumerable:!0,get:O})},S.n=function(F){var U=F&&F.__esModule?function(){return F["default"]}:function(){return F};return S.d(U,"a",U),U},S.o=function(F,U){return Object.prototype.hasOwnProperty.call(F,U)},S.p="/Users/audifax/projects/WheelOfFate/dist",S.oe=function(F){throw console.error(F),F},S(S.s=24)})([function(E,S,A){"use strict";function L(){}function D(Mm,Rm){this.x=Mm||0,this.y=Rm||0}function F(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function U(Mm,Rm,Cm,Pm){this._x=Mm||0,this._y=Rm||0,this._z=Cm||0,this._w=Pm===void 0?1:Pm}function O(Mm,Rm,Cm){this.x=Mm||0,this.y=Rm||0,this.z=Cm||0}function G(){this.elements=[1,0,0,0,1,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function H(Mm,Rm,Cm,Pm,Lm,Im,Bm,Nm,zm,Dm){Object.defineProperty(this,"id",{value:_p++}),this.uuid=yp.generateUUID(),this.name="",this.image=Mm===void 0?H.DEFAULT_IMAGE:Mm,this.mipmaps=[],this.mapping=Rm===void 0?H.DEFAULT_MAPPING:Rm,this.wrapS=Cm===void 0?rd:Cm,this.wrapT=Pm===void 0?rd:Pm,this.magFilter=Lm===void 0?pd:Lm,this.minFilter=Im===void 0?ud:Im,this.anisotropy=zm===void 0?1:zm,this.format=Bm===void 0?Rd:Bm,this.type=Nm===void 0?md:Nm,this.offset=new D(0,0),this.repeat=new D(1,1),this.center=new D(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new G,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=Dm===void 0?tp:Dm,this.version=0,this.onUpdate=null}function W(Mm,Rm,Cm,Pm){this.x=Mm||0,this.y=Rm||0,this.z=Cm||0,this.w=Pm===void 0?1:Pm}function X(Mm,Rm,Cm){this.uuid=yp.generateUUID(),this.width=Mm,this.height=Rm,this.scissor=new W(0,0,Mm,Rm),this.scissorTest=!1,this.viewport=new W(0,0,Mm,Rm),Cm=Cm||{},Cm.minFilter===void 0&&(Cm.minFilter=pd),this.texture=new H(void 0,void 0,Cm.wrapS,Cm.wrapT,Cm.magFilter,Cm.minFilter,Cm.format,Cm.type,Cm.anisotropy,Cm.encoding),this.depthBuffer=!(Cm.depthBuffer!==void 0)||Cm.depthBuffer,this.stencilBuffer=!(Cm.stencilBuffer!==void 0)||Cm.stencilBuffer,this.depthTexture=Cm.depthTexture===void 0?null:Cm.depthTexture}function Y(Mm,Rm,Cm){X.call(this,Mm,Rm,Cm),this.activeCubeFace=0,this.activeMipMapLevel=0}function Z(Mm,Rm,Cm,Pm,Lm,Im,Bm,Nm,zm,Dm,Fm,Um){H.call(this,null,Im,Bm,Nm,zm,Dm,Pm,Lm,Fm,Um),this.image={data:Mm,width:Rm,height:Cm},this.magFilter=zm===void 0?nd:zm,this.minFilter=Dm===void 0?nd:Dm,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function J(Mm,Rm,Cm,Pm,Lm,Im,Bm,Nm,zm,Dm){Mm=Mm===void 0?[]:Mm,Rm=Rm===void 0?Yl:Rm,H.call(this,Mm,Rm,Cm,Pm,Lm,Im,Bm,Nm,zm,Dm),this.flipY=!1}function Q(){this.seq=[],this.map={}}function K(Mm,Rm,Cm){var Pm=Mm[0];if(0>=Pm||0<Pm)return Mm;var Lm=Rm*Cm,Im=Ep[Lm];if(void 0===Im&&(Im=new Float32Array(Lm),Ep[Lm]=Im),0!==Rm){Pm.toArray(Im,0);for(var Bm=1,Nm=0;Bm!==Rm;++Bm)Nm+=Cm,Mm[Bm].toArray(Im,Nm)}return Im}function $(Mm,Rm){var Cm=Sp[Rm];Cm===void 0&&(Cm=new Int32Array(Rm),Sp[Rm]=Cm);for(var Pm=0;Pm!==Rm;++Pm)Cm[Pm]=Mm.allocTextureUnit();return Cm}function ee(Mm,Rm){Mm.uniform1f(this.addr,Rm)}function re(Mm,Rm){Mm.uniform1i(this.addr,Rm)}function oe(Mm,Rm){Rm.x===void 0?Mm.uniform2fv(this.addr,Rm):Mm.uniform2f(this.addr,Rm.x,Rm.y)}function ie(Mm,Rm){Rm.x===void 0?Rm.r===void 0?Mm.uniform3fv(this.addr,Rm):Mm.uniform3f(this.addr,Rm.r,Rm.g,Rm.b):Mm.uniform3f(this.addr,Rm.x,Rm.y,Rm.z)}function ne(Mm,Rm){Rm.x===void 0?Mm.uniform4fv(this.addr,Rm):Mm.uniform4f(this.addr,Rm.x,Rm.y,Rm.z,Rm.w)}function se(Mm,Rm){Mm.uniformMatrix2fv(this.addr,!1,Rm.elements||Rm)}function le(Mm,Rm){Rm.elements===void 0?Mm.uniformMatrix3fv(this.addr,!1,Rm):(wp.set(Rm.elements),Mm.uniformMatrix3fv(this.addr,!1,wp))}function pe(Mm,Rm){Rm.elements===void 0?Mm.uniformMatrix4fv(this.addr,!1,Rm):(Ap.set(Rm.elements),Mm.uniformMatrix4fv(this.addr,!1,Ap))}function ue(Mm,Rm,Cm){var Pm=Cm.allocTextureUnit();Mm.uniform1i(this.addr,Pm),Cm.setTexture2D(Rm||vp,Pm)}function ge(Mm,Rm,Cm){var Pm=Cm.allocTextureUnit();Mm.uniform1i(this.addr,Pm),Cm.setTextureCube(Rm||Tp,Pm)}function fe(Mm,Rm){Mm.uniform2iv(this.addr,Rm)}function he(Mm,Rm){Mm.uniform3iv(this.addr,Rm)}function ye(Mm,Rm){Mm.uniform4iv(this.addr,Rm)}function _e(Mm){return 5126===Mm?ee:35664===Mm?oe:35665===Mm?ie:35666===Mm?ne:35674===Mm?se:35675===Mm?le:35676===Mm?pe:35678===Mm||36198===Mm?ue:35680===Mm?ge:5124===Mm||35670===Mm?re:35667===Mm||35671===Mm?fe:35668===Mm||35672===Mm?he:35669===Mm||35673===Mm?ye:void 0}function xe(Mm,Rm){Mm.uniform1fv(this.addr,Rm)}function ve(Mm,Rm){Mm.uniform1iv(this.addr,Rm)}function Te(Mm,Rm){Mm.uniform2fv(this.addr,K(Rm,this.size,2))}function Ee(Mm,Rm){Mm.uniform3fv(this.addr,K(Rm,this.size,3))}function Se(Mm,Rm){Mm.uniform4fv(this.addr,K(Rm,this.size,4))}function Ae(Mm,Rm){Mm.uniformMatrix2fv(this.addr,!1,K(Rm,this.size,4))}function we(Mm,Rm){Mm.uniformMatrix3fv(this.addr,!1,K(Rm,this.size,9))}function Me(Mm,Rm){Mm.uniformMatrix4fv(this.addr,!1,K(Rm,this.size,16))}function Re(Mm,Rm,Cm){var Pm=Rm.length,Lm=$(Cm,Pm);Mm.uniform1iv(this.addr,Lm);for(var Im=0;Im!==Pm;++Im)Cm.setTexture2D(Rm[Im]||vp,Lm[Im])}function Ce(Mm,Rm,Cm){var Pm=Rm.length,Lm=$(Cm,Pm);Mm.uniform1iv(this.addr,Lm);for(var Im=0;Im!==Pm;++Im)Cm.setTextureCube(Rm[Im]||Tp,Lm[Im])}function Pe(Mm){return 5126===Mm?xe:35664===Mm?Te:35665===Mm?Ee:35666===Mm?Se:35674===Mm?Ae:35675===Mm?we:35676===Mm?Me:35678===Mm?Re:35680===Mm?Ce:5124===Mm||35670===Mm?ve:35667===Mm||35671===Mm?fe:35668===Mm||35672===Mm?he:35669===Mm||35673===Mm?ye:void 0}function Le(Mm,Rm,Cm){this.id=Mm,this.addr=Cm,this.setValue=_e(Rm.type)}function Ie(Mm,Rm,Cm){this.id=Mm,this.addr=Cm,this.size=Rm.size,this.setValue=Pe(Rm.type)}function Be(Mm){this.id=Mm,Q.call(this)}function Ne(Mm,Rm){Mm.seq.push(Rm),Mm.map[Rm.id]=Rm}function ze(Mm,Rm,Cm){var Pm=Mm.name,Lm=Pm.length;for(Mp.lastIndex=0;;){var Im=Mp.exec(Pm),Bm=Mp.lastIndex,Nm=Im[1],zm="]"===Im[2],Dm=Im[3];if(zm&&(Nm|=0),void 0===Dm||"["===Dm&&Bm+2===Lm){Ne(Cm,void 0===Dm?new Le(Nm,Mm,Rm):new Ie(Nm,Mm,Rm));break}else{var Fm=Cm.map,Um=Fm[Nm];void 0===Um&&(Um=new Be(Nm),Ne(Cm,Um)),Cm=Um}}}function De(Mm,Rm,Cm){Q.call(this),this.renderer=Cm;for(var Pm=Mm.getProgramParameter(Rm,Mm.ACTIVE_UNIFORMS),Lm=0;Lm<Pm;++Lm){var Im=Mm.getActiveUniform(Rm,Lm),Bm=Im.name,Nm=Mm.getUniformLocation(Rm,Bm);ze(Im,Nm,this)}}function Fe(Mm,Rm,Cm){return void 0===Rm&&void 0===Cm?this.set(Mm):this.setRGB(Mm,Rm,Cm)}function Ue(Mm,Rm){this.min=Mm===void 0?new D(+Infinity,+Infinity):Mm,this.max=Rm===void 0?new D(-Infinity,-Infinity):Rm}function Oe(Mm,Rm,Cm,Pm,Lm){function Im(){var Gm=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),Hm=new Uint16Array([0,1,2,0,2,3]);Nm=Rm.createBuffer(),zm=Rm.createBuffer(),Rm.bindBuffer(Rm.ARRAY_BUFFER,Nm),Rm.bufferData(Rm.ARRAY_BUFFER,Gm,Rm.STATIC_DRAW),Rm.bindBuffer(Rm.ELEMENT_ARRAY_BUFFER,zm),Rm.bufferData(Rm.ELEMENT_ARRAY_BUFFER,Hm,Rm.STATIC_DRAW),km=Rm.createTexture(),Vm=Rm.createTexture(),Cm.bindTexture(Rm.TEXTURE_2D,km),Rm.texImage2D(Rm.TEXTURE_2D,0,Rm.RGB,16,16,0,Rm.RGB,Rm.UNSIGNED_BYTE,null),Rm.texParameteri(Rm.TEXTURE_2D,Rm.TEXTURE_WRAP_S,Rm.CLAMP_TO_EDGE),Rm.texParameteri(Rm.TEXTURE_2D,Rm.TEXTURE_WRAP_T,Rm.CLAMP_TO_EDGE),Rm.texParameteri(Rm.TEXTURE_2D,Rm.TEXTURE_MAG_FILTER,Rm.NEAREST),Rm.texParameteri(Rm.TEXTURE_2D,Rm.TEXTURE_MIN_FILTER,Rm.NEAREST),Cm.bindTexture(Rm.TEXTURE_2D,Vm),Rm.texImage2D(Rm.TEXTURE_2D,0,Rm.RGBA,16,16,0,Rm.RGBA,Rm.UNSIGNED_BYTE,null),Rm.texParameteri(Rm.TEXTURE_2D,Rm.TEXTURE_WRAP_S,Rm.CLAMP_TO_EDGE),Rm.texParameteri(Rm.TEXTURE_2D,Rm.TEXTURE_WRAP_T,Rm.CLAMP_TO_EDGE),Rm.texParameteri(Rm.TEXTURE_2D,Rm.TEXTURE_MAG_FILTER,Rm.NEAREST),Rm.texParameteri(Rm.TEXTURE_2D,Rm.TEXTURE_MIN_FILTER,Rm.NEAREST),Dm={vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","\tvUV = uv;","\tvec2 pos = position;","\tif ( renderType == 2 ) {","\t\tvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","\t\tvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","\t\tvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","\t\tvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","\t\tvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","\t\tvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","\t\tvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","\t\tvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","\t\tvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","\t\tvVisibility =        visibility.r / 9.0;","\t\tvVisibility *= 1.0 - visibility.g / 9.0;","\t\tvVisibility *=       visibility.b / 9.0;","\t\tvVisibility *= 1.0 - visibility.a / 9.0;","\t\tpos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","\t\tpos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","\t}","\tgl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","\tif ( renderType == 0 ) {","\t\tgl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","\t} else if ( renderType == 1 ) {","\t\tgl_FragColor = texture2D( map, vUV );","\t} else {","\t\tvec4 texture = texture2D( map, vUV );","\t\ttexture.a *= opacity * vVisibility;","\t\tgl_FragColor = texture;","\t\tgl_FragColor.rgb *= color;","\t}","}"].join("\n")},Fm=Bm(Dm),Um={vertex:Rm.getAttribLocation(Fm,"position"),uv:Rm.getAttribLocation(Fm,"uv")},Om={renderType:Rm.getUniformLocation(Fm,"renderType"),map:Rm.getUniformLocation(Fm,"map"),occlusionMap:Rm.getUniformLocation(Fm,"occlusionMap"),opacity:Rm.getUniformLocation(Fm,"opacity"),color:Rm.getUniformLocation(Fm,"color"),scale:Rm.getUniformLocation(Fm,"scale"),rotation:Rm.getUniformLocation(Fm,"rotation"),screenPosition:Rm.getUniformLocation(Fm,"screenPosition")}}function Bm(Gm){var Hm=Rm.createProgram(),Wm=Rm.createShader(Rm.FRAGMENT_SHADER),jm=Rm.createShader(Rm.VERTEX_SHADER),Xm="precision "+Lm.precision+" float;\n";return Rm.shaderSource(Wm,Xm+Gm.fragmentShader),Rm.shaderSource(jm,Xm+Gm.vertexShader),Rm.compileShader(Wm),Rm.compileShader(jm),Rm.attachShader(Hm,Wm),Rm.attachShader(Hm,jm),Rm.linkProgram(Hm),Hm}var Nm,zm,Dm,Fm,Um,Om,km,Vm;this.render=function(Gm,Hm,Wm,jm){if(0!==Gm.length){var Xm=new O,Ym=jm.w/jm.z,Zm=0.5*jm.z,Jm=0.5*jm.w,Qm=16/jm.w,Km=new D(Qm*Ym,Qm),$m=new O(1,1,0),eg=new D(1,1),tg=new Ue;tg.min.set(jm.x,jm.y),tg.max.set(jm.x+(jm.z-16),jm.y+(jm.w-16)),void 0===Fm&&Im(),Cm.useProgram(Fm),Cm.initAttributes(),Cm.enableAttribute(Um.vertex),Cm.enableAttribute(Um.uv),Cm.disableUnusedAttributes(),Rm.uniform1i(Om.occlusionMap,0),Rm.uniform1i(Om.map,1),Rm.bindBuffer(Rm.ARRAY_BUFFER,Nm),Rm.vertexAttribPointer(Um.vertex,2,Rm.FLOAT,!1,16,0),Rm.vertexAttribPointer(Um.uv,2,Rm.FLOAT,!1,16,8),Rm.bindBuffer(Rm.ELEMENT_ARRAY_BUFFER,zm),Cm.disable(Rm.CULL_FACE),Cm.buffers.depth.setMask(!1);for(var rg=0,ag=Gm.length;rg<ag;rg++){Qm=16/jm.w,Km.set(Qm*Ym,Qm);var og=Gm[rg];if(Xm.set(og.matrixWorld.elements[12],og.matrixWorld.elements[13],og.matrixWorld.elements[14]),Xm.applyMatrix4(Wm.matrixWorldInverse),Xm.applyMatrix4(Wm.projectionMatrix),$m.copy(Xm),eg.x=jm.x+$m.x*Zm+Zm-8,eg.y=jm.y+$m.y*Jm+Jm-8,!0===tg.containsPoint(eg)){Cm.activeTexture(Rm.TEXTURE0),Cm.bindTexture(Rm.TEXTURE_2D,null),Cm.activeTexture(Rm.TEXTURE1),Cm.bindTexture(Rm.TEXTURE_2D,km),Rm.copyTexImage2D(Rm.TEXTURE_2D,0,Rm.RGB,eg.x,eg.y,16,16,0),Rm.uniform1i(Om.renderType,0),Rm.uniform2f(Om.scale,Km.x,Km.y),Rm.uniform3f(Om.screenPosition,$m.x,$m.y,$m.z),Cm.disable(Rm.BLEND),Cm.enable(Rm.DEPTH_TEST),Rm.drawElements(Rm.TRIANGLES,6,Rm.UNSIGNED_SHORT,0),Cm.activeTexture(Rm.TEXTURE0),Cm.bindTexture(Rm.TEXTURE_2D,Vm),Rm.copyTexImage2D(Rm.TEXTURE_2D,0,Rm.RGBA,eg.x,eg.y,16,16,0),Rm.uniform1i(Om.renderType,1),Cm.disable(Rm.DEPTH_TEST),Cm.activeTexture(Rm.TEXTURE1),Cm.bindTexture(Rm.TEXTURE_2D,km),Rm.drawElements(Rm.TRIANGLES,6,Rm.UNSIGNED_SHORT,0),og.positionScreen.copy($m),og.customUpdateCallback?og.customUpdateCallback(og):og.updateLensFlares(),Rm.uniform1i(Om.renderType,2),Cm.enable(Rm.BLEND);for(var ig=0,ng=og.lensFlares.length,sg;ig<ng;ig++)sg=og.lensFlares[ig],1e-3<sg.opacity&&1e-3<sg.scale&&($m.x=sg.x,$m.y=sg.y,$m.z=sg.z,Qm=sg.size*sg.scale/jm.w,Km.x=Qm*Ym,Km.y=Qm,Rm.uniform3f(Om.screenPosition,$m.x,$m.y,$m.z),Rm.uniform2f(Om.scale,Km.x,Km.y),Rm.uniform1f(Om.rotation,sg.rotation),Rm.uniform1f(Om.opacity,sg.opacity),Rm.uniform3f(Om.color,sg.color.r,sg.color.g,sg.color.b),Cm.setBlending(sg.blending,sg.blendEquation,sg.blendSrc,sg.blendDst),Pm.setTexture2D(sg.texture,1),Rm.drawElements(Rm.TRIANGLES,6,Rm.UNSIGNED_SHORT,0))}}Cm.enable(Rm.CULL_FACE),Cm.enable(Rm.DEPTH_TEST),Cm.buffers.depth.setMask(!0),Cm.reset()}}}function ke(Mm,Rm,Cm,Pm,Lm,Im,Bm,Nm,zm){H.call(this,Mm,Rm,Cm,Pm,Lm,Im,Bm,Nm,zm),this.needsUpdate=!0}function Ve(Mm,Rm,Cm,Pm,Lm){function Im(){var Wm=new Float32Array([-0.5,-0.5,0,0,0.5,-0.5,1,0,0.5,0.5,1,1,-0.5,0.5,0,1]),jm=new Uint16Array([0,1,2,0,2,3]);zm=Rm.createBuffer(),Dm=Rm.createBuffer(),Rm.bindBuffer(Rm.ARRAY_BUFFER,zm),Rm.bufferData(Rm.ARRAY_BUFFER,Wm,Rm.STATIC_DRAW),Rm.bindBuffer(Rm.ELEMENT_ARRAY_BUFFER,Dm),Rm.bufferData(Rm.ELEMENT_ARRAY_BUFFER,jm,Rm.STATIC_DRAW),Fm=Bm(),Um={position:Rm.getAttribLocation(Fm,"position"),uv:Rm.getAttribLocation(Fm,"uv")},Om={uvOffset:Rm.getUniformLocation(Fm,"uvOffset"),uvScale:Rm.getUniformLocation(Fm,"uvScale"),rotation:Rm.getUniformLocation(Fm,"rotation"),scale:Rm.getUniformLocation(Fm,"scale"),color:Rm.getUniformLocation(Fm,"color"),map:Rm.getUniformLocation(Fm,"map"),opacity:Rm.getUniformLocation(Fm,"opacity"),modelViewMatrix:Rm.getUniformLocation(Fm,"modelViewMatrix"),projectionMatrix:Rm.getUniformLocation(Fm,"projectionMatrix"),fogType:Rm.getUniformLocation(Fm,"fogType"),fogDensity:Rm.getUniformLocation(Fm,"fogDensity"),fogNear:Rm.getUniformLocation(Fm,"fogNear"),fogFar:Rm.getUniformLocation(Fm,"fogFar"),fogColor:Rm.getUniformLocation(Fm,"fogColor"),fogDepth:Rm.getUniformLocation(Fm,"fogDepth"),alphaTest:Rm.getUniformLocation(Fm,"alphaTest")};var Xm=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");Xm.width=8,Xm.height=8;var Ym=Xm.getContext("2d");Ym.fillStyle="white",Ym.fillRect(0,0,8,8),km=new ke(Xm)}function Bm(){var Wm=Rm.createProgram(),jm=Rm.createShader(Rm.VERTEX_SHADER),Xm=Rm.createShader(Rm.FRAGMENT_SHADER);return Rm.shaderSource(jm,["precision "+Lm.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float fogDepth;","void main() {","\tvUV = uvOffset + uv * uvScale;","\tvec2 alignedPosition = position * scale;","\tvec2 rotatedPosition;","\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","\tvec4 mvPosition;","\tmvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","\tmvPosition.xy += rotatedPosition;","\tgl_Position = projectionMatrix * mvPosition;","\tfogDepth = - mvPosition.z;","}"].join("\n")),Rm.shaderSource(Xm,["precision "+Lm.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","varying float fogDepth;","void main() {","\tvec4 texture = texture2D( map, vUV );","\tgl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","\tif ( gl_FragColor.a < alphaTest ) discard;","\tif ( fogType > 0 ) {","\t\tfloat fogFactor = 0.0;","\t\tif ( fogType == 1 ) {","\t\t\tfogFactor = smoothstep( fogNear, fogFar, fogDepth );","\t\t} else {","\t\t\tconst float LOG2 = 1.442695;","\t\t\tfogFactor = exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 );","\t\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","\t\t}","\t\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );","\t}","}"].join("\n")),Rm.compileShader(jm),Rm.compileShader(Xm),Rm.attachShader(Wm,jm),Rm.attachShader(Wm,Xm),Rm.linkProgram(Wm),Wm}function Nm(Wm,jm){return Wm.renderOrder===jm.renderOrder?Wm.z===jm.z?jm.id-Wm.id:jm.z-Wm.z:Wm.renderOrder-jm.renderOrder}var zm,Dm,Fm,Um,Om,km,Vm=new O,Gm=new U,Hm=new O;this.render=function(Wm,jm,Xm){if(0!==Wm.length){void 0===Fm&&Im(),Cm.useProgram(Fm),Cm.initAttributes(),Cm.enableAttribute(Um.position),Cm.enableAttribute(Um.uv),Cm.disableUnusedAttributes(),Cm.disable(Rm.CULL_FACE),Cm.enable(Rm.BLEND),Rm.bindBuffer(Rm.ARRAY_BUFFER,zm),Rm.vertexAttribPointer(Um.position,2,Rm.FLOAT,!1,16,0),Rm.vertexAttribPointer(Um.uv,2,Rm.FLOAT,!1,16,8),Rm.bindBuffer(Rm.ELEMENT_ARRAY_BUFFER,Dm),Rm.uniformMatrix4fv(Om.projectionMatrix,!1,Xm.projectionMatrix.elements),Cm.activeTexture(Rm.TEXTURE0),Rm.uniform1i(Om.map,0);var Ym=0,Zm=0,Jm=jm.fog;Jm?(Rm.uniform3f(Om.fogColor,Jm.color.r,Jm.color.g,Jm.color.b),Jm.isFog?(Rm.uniform1f(Om.fogNear,Jm.near),Rm.uniform1f(Om.fogFar,Jm.far),Rm.uniform1i(Om.fogType,1),Ym=1,Zm=1):Jm.isFogExp2&&(Rm.uniform1f(Om.fogDensity,Jm.density),Rm.uniform1i(Om.fogType,2),Ym=2,Zm=2)):(Rm.uniform1i(Om.fogType,0),Ym=0,Zm=0);for(var Qm=0,Km=Wm.length,$m;Qm<Km;Qm++)$m=Wm[Qm],$m.modelViewMatrix.multiplyMatrices(Xm.matrixWorldInverse,$m.matrixWorld),$m.z=-$m.modelViewMatrix.elements[14];Wm.sort(Nm);for(var eg=[],Qm=0,Km=Wm.length;Qm<Km;Qm++){var $m=Wm[Qm],tg=$m.material;if(!1!==tg.visible){$m.onBeforeRender(Mm,jm,Xm,void 0,tg,void 0),Rm.uniform1f(Om.alphaTest,tg.alphaTest),Rm.uniformMatrix4fv(Om.modelViewMatrix,!1,$m.modelViewMatrix.elements),$m.matrixWorld.decompose(Vm,Gm,Hm),eg[0]=Hm.x,eg[1]=Hm.y;var rg=0;jm.fog&&tg.fog&&(rg=Zm),Ym!=rg&&(Rm.uniform1i(Om.fogType,rg),Ym=rg),null===tg.map?(Rm.uniform2f(Om.uvOffset,0,0),Rm.uniform2f(Om.uvScale,1,1)):(Rm.uniform2f(Om.uvOffset,tg.map.offset.x,tg.map.offset.y),Rm.uniform2f(Om.uvScale,tg.map.repeat.x,tg.map.repeat.y)),Rm.uniform1f(Om.opacity,tg.opacity),Rm.uniform3f(Om.color,tg.color.r,tg.color.g,tg.color.b),Rm.uniform1f(Om.rotation,tg.rotation),Rm.uniform2fv(Om.scale,eg),Cm.setBlending(tg.blending,tg.blendEquation,tg.blendSrc,tg.blendDst,tg.blendEquationAlpha,tg.blendSrcAlpha,tg.blendDstAlpha,tg.premultipliedAlpha),Cm.buffers.depth.setTest(tg.depthTest),Cm.buffers.depth.setMask(tg.depthWrite),Cm.buffers.color.setMask(tg.colorWrite),Pm.setTexture2D(tg.map||km,0),Rm.drawElements(Rm.TRIANGLES,6,Rm.UNSIGNED_SHORT,0),$m.onAfterRender(Mm,jm,Xm,void 0,tg,void 0)}}Cm.enable(Rm.CULL_FACE),Cm.reset()}}}function Ge(){Object.defineProperty(this,"id",{value:ju++}),this.uuid=yp.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=Qs,this.side=Gs,this.flatShading=!1,this.vertexColors=Xs,this.opacity=1,this.transparent=!1,this.blendSrc=Tl,this.blendDst=El,this.blendEquation=al,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Il,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this.userData={},this.needsUpdate=!0}function He(Mm){Ge.call(this),this.type="MeshDepthMaterial",this.depthPacking=fp,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(Mm)}function We(Mm){Ge.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new O,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(Mm)}function je(Mm,Rm){this.min=Mm===void 0?new O(+Infinity,+Infinity,+Infinity):Mm,this.max=Rm===void 0?new O(-Infinity,-Infinity,-Infinity):Rm}function qe(Mm,Rm){this.center=Mm===void 0?new O:Mm,this.radius=Rm===void 0?0:Rm}function Xe(Mm,Rm){this.normal=Mm===void 0?new O(1,0,0):Mm,this.constant=Rm===void 0?0:Rm}function Ye(Mm,Rm,Cm,Pm,Lm,Im){this.planes=[Mm===void 0?new Xe:Mm,Rm===void 0?new Xe:Rm,Cm===void 0?new Xe:Cm,Pm===void 0?new Xe:Pm,Lm===void 0?new Xe:Lm,Im===void 0?new Xe:Im]}function Ze(Mm,Rm,Cm){function Pm(eg,tg,rg,ag,og,ig){var ng=eg.geometry,sg=null,lg=Vm,dg=eg.customDepthMaterial;if(rg&&(lg=Gm,dg=eg.customDistanceMaterial),!dg){var pg=!1;tg.morphTargets&&(ng&&ng.isBufferGeometry?pg=ng.morphAttributes&&ng.morphAttributes.position&&0<ng.morphAttributes.position.length:ng&&ng.isGeometry&&(pg=ng.morphTargets&&0<ng.morphTargets.length)),eg.isSkinnedMesh&&!1===tg.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",eg);var cg=eg.isSkinnedMesh&&tg.skinning,ug=0;pg&&(ug|=Um),cg&&(ug|=Om),sg=lg[ug]}else sg=dg;if(Mm.localClippingEnabled&&!0===tg.clipShadows&&0!==tg.clippingPlanes.length){var mg=sg.uuid,gg=tg.uuid,fg=Hm[mg];void 0===fg&&(fg={},Hm[mg]=fg);var hg=fg[gg];void 0===hg&&(hg=sg.clone(),fg[gg]=hg),sg=hg}sg.visible=tg.visible,sg.wireframe=tg.wireframe;var yg=tg.side;return $m.renderSingleSided&&yg==Ws&&(yg=Gs),$m.renderReverseSided&&(yg===Gs?yg=Hs:yg===Hs&&(yg=Gs)),sg.side=yg,sg.clipShadows=tg.clipShadows,sg.clippingPlanes=tg.clippingPlanes,sg.clipIntersection=tg.clipIntersection,sg.wireframeLinewidth=tg.wireframeLinewidth,sg.linewidth=tg.linewidth,rg&&sg.isMeshDistanceMaterial&&(sg.referencePosition.copy(ag),sg.nearDistance=og,sg.farDistance=ig),sg}function Lm(eg,tg,rg,ag){if(!1!==eg.visible){var og=eg.layers.test(tg.layers);if(og&&(eg.isMesh||eg.isLine||eg.isPoints)&&eg.castShadow&&(!eg.frustumCulled||Im.intersectsObject(eg))){eg.modelViewMatrix.multiplyMatrices(rg.matrixWorldInverse,eg.matrixWorld);var ig=Rm.update(eg),ng=eg.material;if(Array.isArray(ng))for(var sg=ig.groups,lg=0,dg=sg.length;lg<dg;lg++){var pg=sg[lg],cg=ng[pg.materialIndex];if(cg&&cg.visible){var ug=Pm(eg,cg,ag,Fm,rg.near,rg.far);Mm.renderBufferDirect(rg,null,ig,ug,eg,pg)}}else if(ng.visible){var ug=Pm(eg,ng,ag,Fm,rg.near,rg.far);Mm.renderBufferDirect(rg,null,ig,ug,eg,null)}}for(var mg=eg.children,gg=0,fg=mg.length;gg<fg;gg++)Lm(mg[gg],tg,rg,ag)}}for(var Im=new Ye,Bm=new F,Nm=new D,zm=new D(Cm,Cm),Dm=new O,Fm=new O,Um=1,Om=2,Vm=[,,,,],Gm=[,,,,],Hm={},Wm=[new O(1,0,0),new O(-1,0,0),new O(0,0,1),new O(0,0,-1),new O(0,1,0),new O(0,-1,0)],jm=[new O(0,1,0),new O(0,1,0),new O(0,1,0),new O(0,1,0),new O(0,0,1),new O(0,0,-1)],Xm=[new W,new W,new W,new W,new W,new W],Ym=0;Ym!==(Um|Om)+1;++Ym){var Zm=0!=(Ym&Um),Jm=0!=(Ym&Om),Qm=new He({depthPacking:hp,morphTargets:Zm,skinning:Jm});Vm[Ym]=Qm;var Km=new We({morphTargets:Zm,skinning:Jm});Gm[Ym]=Km}var $m=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=ks,this.renderReverseSided=!0,this.renderSingleSided=!0,this.render=function(eg,tg,rg){if(!1!==$m.enabled&&(!1!==$m.autoUpdate||!1!==$m.needsUpdate)&&0!==eg.length){var ag=Mm.context,og=Mm.state;og.disable(ag.BLEND),og.buffers.color.setClear(1,1,1,1),og.buffers.depth.setTest(!0),og.setScissorTest(!1);for(var ng=0,sg=eg.length,ig;ng<sg;ng++){var lg=eg[ng],dg=lg.shadow,pg=lg&&lg.isPointLight;if(void 0===dg){console.warn("THREE.WebGLShadowMap:",lg,"has no shadow.");continue}var cg=dg.camera;if(Nm.copy(dg.mapSize),Nm.min(zm),pg){var ug=Nm.x,mg=Nm.y;Xm[0].set(2*ug,mg,ug,mg),Xm[1].set(0,mg,ug,mg),Xm[2].set(3*ug,mg,ug,mg),Xm[3].set(ug,mg,ug,mg),Xm[4].set(3*ug,0,ug,mg),Xm[5].set(ug,0,ug,mg),Nm.x*=4,Nm.y*=2}if(null===dg.map){dg.map=new X(Nm.x,Nm.y,{minFilter:nd,magFilter:nd,format:Rd}),dg.map.texture.name=lg.name+".shadowMap",cg.updateProjectionMatrix()}dg.isSpotLightShadow&&dg.update(lg);var fg=dg.map,hg=dg.matrix;Fm.setFromMatrixPosition(lg.matrixWorld),cg.position.copy(Fm),pg?(ig=6,hg.makeTranslation(-Fm.x,-Fm.y,-Fm.z)):(ig=1,Dm.setFromMatrixPosition(lg.target.matrixWorld),cg.lookAt(Dm),cg.updateMatrixWorld(),hg.set(0.5,0,0,0.5,0,0.5,0,0.5,0,0,0.5,0.5,0,0,0,1),hg.multiply(cg.projectionMatrix),hg.multiply(cg.matrixWorldInverse)),Mm.setRenderTarget(fg),Mm.clear();for(var yg=0;yg<ig;yg++){if(pg){Dm.copy(cg.position),Dm.add(Wm[yg]),cg.up.copy(jm[yg]),cg.lookAt(Dm),cg.updateMatrixWorld();var _g=Xm[yg];og.viewport(_g)}Bm.multiplyMatrices(cg.projectionMatrix,cg.matrixWorldInverse),Im.setFromMatrix(Bm),Lm(tg,rg,cg,pg)}}$m.needsUpdate=!1}}}function Je(Mm){function Rm(Nm,zm){var Dm=Nm.array,Fm=Nm.dynamic?Mm.DYNAMIC_DRAW:Mm.STATIC_DRAW,Um=Mm.createBuffer();Mm.bindBuffer(zm,Um),Mm.bufferData(zm,Dm,Fm),Nm.onUploadCallback();var Om=Mm.FLOAT;return Dm instanceof Float32Array?Om=Mm.FLOAT:Dm instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):Dm instanceof Uint16Array?Om=Mm.UNSIGNED_SHORT:Dm instanceof Int16Array?Om=Mm.SHORT:Dm instanceof Uint32Array?Om=Mm.UNSIGNED_INT:Dm instanceof Int32Array?Om=Mm.INT:Dm instanceof Int8Array?Om=Mm.BYTE:Dm instanceof Uint8Array&&(Om=Mm.UNSIGNED_BYTE),{buffer:Um,type:Om,bytesPerElement:Dm.BYTES_PER_ELEMENT,version:Nm.version}}function Cm(Nm,zm,Dm){var Fm=zm.array,Um=zm.updateRange;Mm.bindBuffer(Dm,Nm),!1===zm.dynamic?Mm.bufferData(Dm,Fm,Mm.STATIC_DRAW):-1===Um.count?Mm.bufferSubData(Dm,0,Fm):0===Um.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(Mm.bufferSubData(Dm,Um.offset*Fm.BYTES_PER_ELEMENT,Fm.subarray(Um.offset,Um.offset+Um.count)),Um.count=-1)}var Bm={};return{get:function(Nm){return Nm.isInterleavedBufferAttribute&&(Nm=Nm.data),Bm[Nm.uuid]},remove:function(Nm){Nm.isInterleavedBufferAttribute&&(Nm=Nm.data);var zm=Bm[Nm.uuid];zm&&(Mm.deleteBuffer(zm.buffer),delete Bm[Nm.uuid])},update:function(Nm,zm){Nm.isInterleavedBufferAttribute&&(Nm=Nm.data);var Dm=Bm[Nm.uuid];Dm===void 0?Bm[Nm.uuid]=Rm(Nm,zm):Dm.version<Nm.version&&(Cm(Dm.buffer,Nm,zm),Dm.version=Nm.version)}}}function Qe(Mm,Rm,Cm,Pm){this._x=Mm||0,this._y=Rm||0,this._z=Cm||0,this._order=Pm||Qe.DefaultOrder}function Ke(){this.mask=1}function $e(){Object.defineProperty(this,"id",{value:qu++}),this.uuid=yp.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=$e.DefaultUp.clone();var Cm=new O,Pm=new Qe,Lm=new U,Im=new O(1,1,1);Pm.onChange(function(){Lm.setFromEuler(Pm,!1)}),Lm.onChange(function(){Pm.setFromQuaternion(Lm,void 0,!1)}),Object.defineProperties(this,{position:{enumerable:!0,value:Cm},rotation:{enumerable:!0,value:Pm},quaternion:{enumerable:!0,value:Lm},scale:{enumerable:!0,value:Im},modelViewMatrix:{value:new F},normalMatrix:{value:new G}}),this.matrix=new F,this.matrixWorld=new F,this.matrixAutoUpdate=$e.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Ke,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function et(){$e.call(this),this.type="Camera",this.matrixWorldInverse=new F,this.projectionMatrix=new F}function tt(Mm,Rm,Cm,Pm,Lm,Im){et.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=Mm,this.right=Rm,this.top=Cm,this.bottom=Pm,this.near=Lm===void 0?0.1:Lm,this.far=Im===void 0?2e3:Im,this.updateProjectionMatrix()}function rt(Mm,Rm,Cm,Pm,Lm,Im){this.a=Mm,this.b=Rm,this.c=Cm,this.normal=Pm&&Pm.isVector3?Pm:new O,this.vertexNormals=Array.isArray(Pm)?Pm:[],this.color=Lm&&Lm.isColor?Lm:new Fe,this.vertexColors=Array.isArray(Lm)?Lm:[],this.materialIndex=Im===void 0?0:Im}function ot(){Object.defineProperty(this,"id",{value:Xu+=2}),this.uuid=yp.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function it(Mm,Rm,Cm){if(Array.isArray(Mm))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.uuid=yp.generateUUID(),this.name="",this.array=Mm,this.itemSize=Rm,this.count=Mm===void 0?0:Mm.length/Rm,this.normalized=!0===Cm,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function nt(Mm,Rm,Cm){it.call(this,new Int8Array(Mm),Rm,Cm)}function ct(Mm,Rm,Cm){it.call(this,new Uint8Array(Mm),Rm,Cm)}function ut(Mm,Rm,Cm){it.call(this,new Uint8ClampedArray(Mm),Rm,Cm)}function mt(Mm,Rm,Cm){it.call(this,new Int16Array(Mm),Rm,Cm)}function ft(Mm,Rm,Cm){it.call(this,new Uint16Array(Mm),Rm,Cm)}function ht(Mm,Rm,Cm){it.call(this,new Int32Array(Mm),Rm,Cm)}function yt(Mm,Rm,Cm){it.call(this,new Uint32Array(Mm),Rm,Cm)}function _t(Mm,Rm,Cm){it.call(this,new Float32Array(Mm),Rm,Cm)}function xt(Mm,Rm,Cm){it.call(this,new Float64Array(Mm),Rm,Cm)}function vt(){this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function bt(Mm){if(0===Mm.length)return-Infinity;for(var Rm=Mm[0],Cm=1,Pm=Mm.length;Cm<Pm;++Cm)Mm[Cm]>Rm&&(Rm=Mm[Cm]);return Rm}function Tt(){Object.defineProperty(this,"id",{value:Yu+=2}),this.uuid=yp.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:Infinity}}function Et(Mm,Rm,Cm,Pm,Lm,Im){ot.call(this),this.type="BoxGeometry",this.parameters={width:Mm,height:Rm,depth:Cm,widthSegments:Pm,heightSegments:Lm,depthSegments:Im},this.fromBufferGeometry(new St(Mm,Rm,Cm,Pm,Lm,Im)),this.mergeVertices()}function St(Mm,Rm,Cm,Pm,Lm,Im){function Bm(Vm,Gm,Hm,Wm,jm,Xm,Ym,Zm,Jm,Qm,Km){var og=Jm+1,ng=0,sg=0,lg,dg,pg=new O;for(dg=0;dg<Qm+1;dg++){var cg=dg*(Ym/Qm)-Ym/2;for(lg=0;lg<og;lg++){var ug=lg*(Xm/Jm)-Xm/2;pg[Vm]=ug*Wm,pg[Gm]=cg*jm,pg[Hm]=Zm/2,Dm.push(pg.x,pg.y,pg.z),pg[Vm]=0,pg[Gm]=0,pg[Hm]=0<Zm?1:-1,Fm.push(pg.x,pg.y,pg.z),Um.push(lg/Jm),Um.push(1-dg/Qm),ng+=1}}for(dg=0;dg<Qm;dg++)for(lg=0;lg<Jm;lg++){var mg=Om+lg+og*dg,gg=Om+lg+og*(dg+1),fg=Om+(lg+1)+og*(dg+1),hg=Om+(lg+1)+og*dg;zm.push(mg,gg,hg),zm.push(gg,fg,hg),sg+=6}Nm.addGroup(km,sg,Km),km+=sg,Om+=ng}Tt.call(this),this.type="BoxBufferGeometry",this.parameters={width:Mm,height:Rm,depth:Cm,widthSegments:Pm,heightSegments:Lm,depthSegments:Im};var Nm=this;Mm=Mm||1,Rm=Rm||1,Cm=Cm||1,Pm=_Mathfloor(Pm)||1,Lm=_Mathfloor(Lm)||1,Im=_Mathfloor(Im)||1;var zm=[],Dm=[],Fm=[],Um=[],Om=0,km=0;Bm("z","y","x",-1,-1,Cm,Rm,Mm,Im,Lm,0),Bm("z","y","x",1,-1,Cm,Rm,-Mm,Im,Lm,1),Bm("x","z","y",1,1,Mm,Cm,Rm,Pm,Im,2),Bm("x","z","y",1,-1,Mm,Cm,-Rm,Pm,Im,3),Bm("x","y","z",1,-1,Mm,Rm,Cm,Pm,Lm,4),Bm("x","y","z",-1,-1,Mm,Rm,-Cm,Pm,Lm,5),this.setIndex(zm),this.addAttribute("position",new _t(Dm,3)),this.addAttribute("normal",new _t(Fm,3)),this.addAttribute("uv",new _t(Um,2))}function At(Mm,Rm,Cm,Pm){ot.call(this),this.type="PlaneGeometry",this.parameters={width:Mm,height:Rm,widthSegments:Cm,heightSegments:Pm},this.fromBufferGeometry(new wt(Mm,Rm,Cm,Pm)),this.mergeVertices()}function wt(Mm,Rm,Cm,Pm){Tt.call(this),this.type="PlaneBufferGeometry",this.parameters={width:Mm,height:Rm,widthSegments:Cm,heightSegments:Pm},Mm=Mm||1,Rm=Rm||1;var Lm=Mm/2,Im=Rm/2,Bm=_Mathfloor(Cm)||1,Nm=_Mathfloor(Pm)||1,zm=Bm+1,Fm=Mm/Bm,Um=Rm/Nm,Om,km,Vm=[],Gm=[],Hm=[],Wm=[];for(km=0;km<Nm+1;km++){var jm=km*Um-Im;for(Om=0;Om<zm;Om++){var Xm=Om*Fm-Lm;Gm.push(Xm,-jm,0),Hm.push(0,0,1),Wm.push(Om/Bm),Wm.push(1-km/Nm)}}for(km=0;km<Nm;km++)for(Om=0;Om<Bm;Om++){var Ym=Om+zm*km,Zm=Om+zm*(km+1),Jm=Om+1+zm*(km+1),Qm=Om+1+zm*km;Vm.push(Ym,Zm,Qm),Vm.push(Zm,Jm,Qm)}this.setIndex(Vm),this.addAttribute("position",new _t(Gm,3)),this.addAttribute("normal",new _t(Hm,3)),this.addAttribute("uv",new _t(Wm,2))}function Rt(Mm){Ge.call(this),this.type="MeshBasicMaterial",this.color=new Fe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Fl,this.reflectivity=1,this.refractionRatio=0.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(Mm)}function Ct(Mm){Ge.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,Mm!==void 0&&(Mm.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(Mm))}function Pt(Mm,Rm){this.origin=Mm===void 0?new O:Mm,this.direction=Rm===void 0?new O:Rm}function Lt(Mm,Rm){this.start=Mm===void 0?new O:Mm,this.end=Rm===void 0?new O:Rm}function It(Mm,Rm,Cm){this.a=Mm===void 0?new O:Mm,this.b=Rm===void 0?new O:Rm,this.c=Cm===void 0?new O:Cm}function Bt(Mm,Rm){$e.call(this),this.type="Mesh",this.geometry=Mm===void 0?new Tt:Mm,this.material=Rm===void 0?new Rt({color:16777215*Math.random()}):Rm,this.drawMode=Kd,this.updateMorphTargets()}function Nt(Mm,Rm,Cm,Pm){function Im(Um,Om){Rm.buffers.color.setClear(Um.r,Um.g,Um.b,Om,Pm)}var Bm=new Fe(0),Nm=0,zm,Dm,Fm;return{getClearColor:function(){return Bm},setClearColor:function(Um,Om){Bm.set(Um),Nm=Om===void 0?1:Om,Im(Bm,Nm)},getClearAlpha:function(){return Nm},setClearAlpha:function(Um){Nm=Um,Im(Bm,Nm)},render:function(Um,Om,km,Vm){var Gm=Om.background;null===Gm?Im(Bm,Nm):Gm&&Gm.isColor&&(Im(Gm,1),Vm=!0),(Mm.autoClear||Vm)&&Mm.clear(Mm.autoClearColor,Mm.autoClearDepth,Mm.autoClearStencil),Gm&&Gm.isCubeTexture?(Fm==void 0&&(Fm=new Bt(new St(1,1,1),new Ct({uniforms:Wu.cube.uniforms,vertexShader:Wu.cube.vertexShader,fragmentShader:Wu.cube.fragmentShader,side:Hs,depthTest:!0,depthWrite:!1,fog:!1})),Fm.geometry.removeAttribute("normal"),Fm.geometry.removeAttribute("uv"),Fm.onBeforeRender=function(Hm,Wm,jm){this.matrixWorld.copyPosition(jm.matrixWorld)},Cm.update(Fm.geometry)),Fm.material.uniforms.tCube.value=Gm,Um.push(Fm,Fm.geometry,Fm.material,0,null)):Gm&&Gm.isTexture&&(zm==void 0&&(zm=new tt(-1,1,1,-1,0,1),Dm=new Bt(new wt(2,2),new Rt({depthTest:!1,depthWrite:!1,fog:!1})),Cm.update(Dm.geometry)),Dm.material.map=Gm,Mm.renderBufferDirect(zm,null,Dm.geometry,Dm.material,Dm,null))}}}function zt(Mm,Rm){return Mm.renderOrder===Rm.renderOrder?Mm.program&&Rm.program&&Mm.program!==Rm.program?Mm.program.id-Rm.program.id:Mm.material.id===Rm.material.id?Mm.z===Rm.z?Mm.id-Rm.id:Mm.z-Rm.z:Mm.material.id-Rm.material.id:Mm.renderOrder-Rm.renderOrder}function Dt(Mm,Rm){return Mm.renderOrder===Rm.renderOrder?Mm.z===Rm.z?Mm.id-Rm.id:Rm.z-Mm.z:Mm.renderOrder-Rm.renderOrder}function Ft(){var Pm=[],Lm=0,Im=[],Bm=[];return{opaque:Im,transparent:Bm,init:function(){Lm=0,Im.length=0,Bm.length=0},push:function(Nm,zm,Dm,Fm,Um){var Om=Pm[Lm];Om===void 0?(Om={id:Nm.id,object:Nm,geometry:zm,material:Dm,program:Dm.program,renderOrder:Nm.renderOrder,z:Fm,group:Um},Pm[Lm]=Om):(Om.id=Nm.id,Om.object=Nm,Om.geometry=zm,Om.material=Dm,Om.program=Dm.program,Om.renderOrder=Nm.renderOrder,Om.z=Fm,Om.group=Um),(!0===Dm.transparent?Bm:Im).push(Om),Lm++},sort:function(){1<Im.length&&Im.sort(zt),1<Bm.length&&Bm.sort(Dt)}}}function Ut(){var Cm={};return{get:function(Pm,Lm){var Im=Pm.id+","+Lm.id,Bm=Cm[Im];return void 0===Bm&&(Bm=new Ft,Cm[Im]=Bm),Bm},dispose:function(){Cm={}}}}function Ot(Mm,Rm){return _Mathabs(Rm[1])-_Mathabs(Mm[1])}function kt(Mm){var Cm={},Pm=new Float32Array(8);return{update:function(Lm,Im,Bm,Nm){var zm=Lm.morphTargetInfluences,Dm=zm.length,Fm=Cm[Im.id];if(Fm===void 0){Fm=[];for(var Um=0;Um<Dm;Um++)Fm[Um]=[Um,0];Cm[Im.id]=Fm}for(var Om=Bm.morphTargets&&Im.morphAttributes.position,km=Bm.morphNormals&&Im.morphAttributes.normal,Um=0,Vm;Um<Dm;Um++)Vm=Fm[Um],0!==Vm[1]&&(Om&&Im.removeAttribute("morphTarget"+Um),km&&Im.removeAttribute("morphNormal"+Um));for(var Um=0,Vm;Um<Dm;Um++)Vm=Fm[Um],Vm[0]=Um,Vm[1]=zm[Um];Fm.sort(Ot);for(var Um=0,Vm;8>Um;Um++){if(Vm=Fm[Um],Vm){var Gm=Vm[0],Hm=Vm[1];if(Hm){Om&&Im.addAttribute("morphTarget"+Um,Om[Gm]),km&&Im.addAttribute("morphNormal"+Um,km[Gm]),Pm[Um]=Hm;continue}}Pm[Um]=0}Nm.getUniforms().setValue(Mm,"morphTargetInfluences",Pm)}}}function Vt(Mm,Rm,Cm){var Nm,zm,Dm;this.setMode=function(Fm){Nm=Fm},this.setIndex=function(Fm){zm=Fm.type,Dm=Fm.bytesPerElement},this.render=function(Fm,Um){Mm.drawElements(Nm,Um,zm,Fm*Dm),Cm.calls++,Cm.vertices+=Um,Nm===Mm.TRIANGLES?Cm.faces+=Um/3:Nm===Mm.POINTS&&(Cm.points+=Um)},this.renderInstances=function(Fm,Um,Om){var km=Rm.get("ANGLE_instanced_arrays");return null===km?void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."):void(km.drawElementsInstancedANGLE(Nm,Om,zm,Um*Dm,Fm.maxInstancedCount),Cm.calls++,Cm.vertices+=Om*Fm.maxInstancedCount,Nm===Mm.TRIANGLES?Cm.faces+=Fm.maxInstancedCount*Om/3:Nm===Mm.POINTS&&(Cm.points+=Fm.maxInstancedCount*Om))}}function Gt(Mm,Rm,Cm){var Bm;this.setMode=function(Nm){Bm=Nm},this.render=function(Nm,zm){Mm.drawArrays(Bm,Nm,zm),Cm.calls++,Cm.vertices+=zm,Bm===Mm.TRIANGLES?Cm.faces+=zm/3:Bm===Mm.POINTS&&(Cm.points+=zm)},this.renderInstances=function(Nm,zm,Dm){var Fm=Rm.get("ANGLE_instanced_arrays");if(null===Fm)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");var Um=Nm.attributes.position;Um.isInterleavedBufferAttribute?(Dm=Um.data.count,Fm.drawArraysInstancedANGLE(Bm,0,Dm,Nm.maxInstancedCount)):Fm.drawArraysInstancedANGLE(Bm,zm,Dm,Nm.maxInstancedCount),Cm.calls++,Cm.vertices+=Dm*Nm.maxInstancedCount,Bm===Mm.TRIANGLES?Cm.faces+=Nm.maxInstancedCount*Dm/3:Bm===Mm.POINTS&&(Cm.points+=Nm.maxInstancedCount*Dm)}}function Ht(Mm,Rm,Cm){function Pm(Dm){var Fm=Dm.target,Um=Nm[Fm.id];for(var Om in null!==Um.index&&Rm.remove(Um.index),Um.attributes)Rm.remove(Um.attributes[Om]);Fm.removeEventListener("dispose",Pm),delete Nm[Fm.id];var km=zm[Fm.id];km&&(Rm.remove(km),delete zm[Fm.id]),km=zm[Um.id],km&&(Rm.remove(km),delete zm[Um.id]),Cm.geometries--}var Nm={},zm={};return{get:function(Dm,Fm){var Um=Nm[Fm.id];return Um?Um:(Fm.addEventListener("dispose",Pm),Fm.isBufferGeometry?Um=Fm:Fm.isGeometry&&(void 0===Fm._bufferGeometry&&(Fm._bufferGeometry=new Tt().setFromObject(Dm)),Um=Fm._bufferGeometry),Nm[Fm.id]=Um,Cm.geometries++,Um)},update:function(Dm){var Fm=Dm.index,Um=Dm.attributes;for(var Om in null!==Fm&&Rm.update(Fm,Mm.ELEMENT_ARRAY_BUFFER),Um)Rm.update(Um[Om],Mm.ARRAY_BUFFER);var km=Dm.morphAttributes;for(var Om in km)for(var Vm=km[Om],Gm=0,Hm=Vm.length;Gm<Hm;Gm++)Rm.update(Vm[Gm],Mm.ARRAY_BUFFER)},getWireframeAttribute:function(Dm){var Fm=zm[Dm.id];if(Fm)return Fm;var Um=[],Om=Dm.index,km=Dm.attributes;if(null!==Om)for(var Vm=Om.array,Gm=0,Hm=Vm.length;Gm<Hm;Gm+=3){var Wm=Vm[Gm+0],jm=Vm[Gm+1],Xm=Vm[Gm+2];Um.push(Wm,jm,jm,Xm,Xm,Wm)}else for(var Vm=km.position.array,Gm=0,Hm=Vm.length/3-1;Gm<Hm;Gm+=3){var Wm=Gm+0,jm=Gm+1,Xm=Gm+2;Um.push(Wm,jm,jm,Xm,Xm,Wm)}return Fm=new(65535<bt(Um)?yt:ft)(Um,1),Rm.update(Fm,Mm.ELEMENT_ARRAY_BUFFER),zm[Dm.id]=Fm,Fm}}}function Wt(){var Mm={};return{get:function(Rm){if(void 0!==Mm[Rm.id])return Mm[Rm.id];var Cm;switch(Rm.type){case"DirectionalLight":Cm={direction:new O,color:new Fe,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new D};break;case"SpotLight":Cm={position:new O,direction:new O,color:new Fe,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new D};break;case"PointLight":Cm={position:new O,color:new Fe,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new D,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":Cm={direction:new O,skyColor:new Fe,groundColor:new Fe};break;case"RectAreaLight":Cm={color:new Fe,position:new O,halfWidth:new O,halfHeight:new O};}return Mm[Rm.id]=Cm,Cm}}}function jt(){var Rm=new Wt,Cm={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},Pm=new O,Lm=new F,Im=new F;return{setup:function(Bm,Nm,zm){for(var Dm=0,Fm=0,Um=0,Om=0,km=0,Vm=0,Gm=0,Hm=0,Wm=zm.matrixWorldInverse,jm=0,Xm=Bm.length;jm<Xm;jm++){var Ym=Bm[jm],Zm=Ym.color,Jm=Ym.intensity,Qm=Ym.distance,Km=Ym.shadow&&Ym.shadow.map?Ym.shadow.map.texture:null;if(Ym.isAmbientLight)Dm+=Zm.r*Jm,Fm+=Zm.g*Jm,Um+=Zm.b*Jm;else if(Ym.isDirectionalLight){var $m=Rm.get(Ym);if($m.color.copy(Ym.color).multiplyScalar(Ym.intensity),$m.direction.setFromMatrixPosition(Ym.matrixWorld),Pm.setFromMatrixPosition(Ym.target.matrixWorld),$m.direction.sub(Pm),$m.direction.transformDirection(Wm),$m.shadow=Ym.castShadow,Ym.castShadow){var eg=Ym.shadow;$m.shadowBias=eg.bias,$m.shadowRadius=eg.radius,$m.shadowMapSize=eg.mapSize}Cm.directionalShadowMap[Om]=Km,Cm.directionalShadowMatrix[Om]=Ym.shadow.matrix,Cm.directional[Om]=$m,Om++}else if(Ym.isSpotLight){var $m=Rm.get(Ym);if($m.position.setFromMatrixPosition(Ym.matrixWorld),$m.position.applyMatrix4(Wm),$m.color.copy(Zm).multiplyScalar(Jm),$m.distance=Qm,$m.direction.setFromMatrixPosition(Ym.matrixWorld),Pm.setFromMatrixPosition(Ym.target.matrixWorld),$m.direction.sub(Pm),$m.direction.transformDirection(Wm),$m.coneCos=_Mathcos(Ym.angle),$m.penumbraCos=_Mathcos(Ym.angle*(1-Ym.penumbra)),$m.decay=0===Ym.distance?0:Ym.decay,$m.shadow=Ym.castShadow,Ym.castShadow){var eg=Ym.shadow;$m.shadowBias=eg.bias,$m.shadowRadius=eg.radius,$m.shadowMapSize=eg.mapSize}Cm.spotShadowMap[Vm]=Km,Cm.spotShadowMatrix[Vm]=Ym.shadow.matrix,Cm.spot[Vm]=$m,Vm++}else if(Ym.isRectAreaLight){var $m=Rm.get(Ym);$m.color.copy(Zm).multiplyScalar(Jm/(Ym.width*Ym.height)),$m.position.setFromMatrixPosition(Ym.matrixWorld),$m.position.applyMatrix4(Wm),Im.identity(),Lm.copy(Ym.matrixWorld),Lm.premultiply(Wm),Im.extractRotation(Lm),$m.halfWidth.set(0.5*Ym.width,0,0),$m.halfHeight.set(0,0.5*Ym.height,0),$m.halfWidth.applyMatrix4(Im),$m.halfHeight.applyMatrix4(Im),Cm.rectArea[Gm]=$m,Gm++}else if(Ym.isPointLight){var $m=Rm.get(Ym);if($m.position.setFromMatrixPosition(Ym.matrixWorld),$m.position.applyMatrix4(Wm),$m.color.copy(Ym.color).multiplyScalar(Ym.intensity),$m.distance=Ym.distance,$m.decay=0===Ym.distance?0:Ym.decay,$m.shadow=Ym.castShadow,Ym.castShadow){var eg=Ym.shadow;$m.shadowBias=eg.bias,$m.shadowRadius=eg.radius,$m.shadowMapSize=eg.mapSize,$m.shadowCameraNear=eg.camera.near,$m.shadowCameraFar=eg.camera.far}Cm.pointShadowMap[km]=Km,Cm.pointShadowMatrix[km]=Ym.shadow.matrix,Cm.point[km]=$m,km++}else if(Ym.isHemisphereLight){var $m=Rm.get(Ym);$m.direction.setFromMatrixPosition(Ym.matrixWorld),$m.direction.transformDirection(Wm),$m.direction.normalize(),$m.skyColor.copy(Ym.color).multiplyScalar(Jm),$m.groundColor.copy(Ym.groundColor).multiplyScalar(Jm),Cm.hemi[Hm]=$m,Hm++}}Cm.ambient[0]=Dm,Cm.ambient[1]=Fm,Cm.ambient[2]=Um,Cm.directional.length=Om,Cm.spot.length=Vm,Cm.rectArea.length=Gm,Cm.point.length=km,Cm.hemi.length=Hm,Cm.hash=Om+","+km+","+Vm+","+Gm+","+Hm+","+Nm.length},state:Cm}}function qt(Mm,Rm){var Lm={};return{update:function(Im){var Bm=Rm.frame,Nm=Im.geometry,zm=Mm.get(Im,Nm);return Lm[zm.id]!==Bm&&(Nm.isGeometry&&zm.updateFromObject(Im),Mm.update(zm),Lm[zm.id]=Bm),zm},clear:function(){Lm={}}}}function Xt(Mm){for(var Rm=Mm.split("\n"),Cm=0;Cm<Rm.length;Cm++)Rm[Cm]=Cm+1+": "+Rm[Cm];return Rm.join("\n")}function Yt(Mm,Rm,Cm){var Pm=Mm.createShader(Rm);return Mm.shaderSource(Pm,Cm),Mm.compileShader(Pm),!1===Mm.getShaderParameter(Pm,Mm.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==Mm.getShaderInfoLog(Pm)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",Rm===Mm.VERTEX_SHADER?"vertex":"fragment",Mm.getShaderInfoLog(Pm),Xt(Cm)),Pm}function Zt(Mm){switch(Mm){case tp:return["Linear","( value )"];case ap:return["sRGB","( value )"];case lp:return["RGBE","( value )"];case cp:return["RGBM","( value, 7.0 )"];case mp:return["RGBM","( value, 16.0 )"];case gp:return["RGBD","( value, 256.0 )"];case ip:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+Mm);}}function Jt(Mm,Rm){var Cm=Zt(Rm);return"vec4 "+Mm+"( vec4 value ) { return "+Cm[0]+"ToLinear"+Cm[1]+"; }"}function Qt(Mm,Rm){var Cm=Zt(Rm);return"vec4 "+Mm+"( vec4 value ) { return LinearTo"+Cm[0]+Cm[1]+"; }"}function Kt(Mm,Rm){var Cm;switch(Rm){case Gl:Cm="Linear";break;case Hl:Cm="Reinhard";break;case Wl:Cm="Uncharted2";break;case ql:Cm="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+Rm);}return"vec3 "+Mm+"( vec3 color ) { return "+Cm+"ToneMapping( color ); }"}function $t(Mm,Rm,Cm){Mm=Mm||{};var Pm=[Mm.derivatives||Rm.envMapCubeUV||Rm.bumpMap||Rm.normalMap||Rm.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(Mm.fragDepth||Rm.logarithmicDepthBuffer)&&Cm.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",Mm.drawBuffers&&Cm.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(Mm.shaderTextureLOD||Rm.envMap)&&Cm.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""];return Pm.filter(or).join("\n")}function er(Mm){var Rm=[];for(var Cm in Mm){var Pm=Mm[Cm];!1===Pm||Rm.push("#define "+Cm+" "+Pm)}return Rm.join("\n")}function rr(Mm,Rm){for(var Cm={},Pm=Mm.getProgramParameter(Rm,Mm.ACTIVE_ATTRIBUTES),Lm=0;Lm<Pm;Lm++){var Im=Mm.getActiveAttrib(Rm,Lm),Bm=Im.name;Cm[Bm]=Mm.getAttribLocation(Rm,Bm)}return Cm}function or(Mm){return""!==Mm}function ir(Mm,Rm){return Mm.replace(/NUM_DIR_LIGHTS/g,Rm.numDirLights).replace(/NUM_SPOT_LIGHTS/g,Rm.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,Rm.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,Rm.numPointLights).replace(/NUM_HEMI_LIGHTS/g,Rm.numHemiLights)}function sr(Mm){var Cm=/^[ \t]*#include +<([\w\d.]+)>/gm;return Mm.replace(Cm,function(Pm,Lm){var Im=Hu[Lm];if(Im===void 0)throw new Error("Can not resolve #include <"+Lm+">");return sr(Im)})}function lr(Mm){var Cm=/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;return Mm.replace(Cm,function(Pm,Lm,Im,Bm){for(var Nm="",zm=parseInt(Lm);zm<parseInt(Im);zm++)Nm+=Bm.replace(/\[ i \]/g,"[ "+zm+" ]");return Nm})}function cr(Mm,Rm,Cm,Pm,Lm,Im){var Bm=Mm.context,Nm=Pm.defines,zm=Lm.vertexShader,Dm=Lm.fragmentShader,Fm="SHADOWMAP_TYPE_BASIC";Im.shadowMapType===ks?Fm="SHADOWMAP_TYPE_PCF":Im.shadowMapType===Vs&&(Fm="SHADOWMAP_TYPE_PCF_SOFT");var Um="ENVMAP_TYPE_CUBE",Om="ENVMAP_MODE_REFLECTION",km="ENVMAP_BLENDING_MULTIPLY";if(Im.envMap){switch(Pm.envMap.mapping){case Yl:case Zl:Um="ENVMAP_TYPE_CUBE";break;case $l:case ed:Um="ENVMAP_TYPE_CUBE_UV";break;case Jl:case Ql:Um="ENVMAP_TYPE_EQUIREC";break;case Kl:Um="ENVMAP_TYPE_SPHERE";}switch(Pm.envMap.mapping){case Zl:case Ql:Om="ENVMAP_MODE_REFRACTION";}switch(Pm.combine){case Fl:km="ENVMAP_BLENDING_MULTIPLY";break;case Ul:km="ENVMAP_BLENDING_MIX";break;case Ol:km="ENVMAP_BLENDING_ADD";}}var Vm=0<Mm.gammaFactor?Mm.gammaFactor:1,Gm=$t(Pm.extensions,Im,Rm),Hm=er(Nm),Wm=Bm.createProgram(),jm,Xm;Pm.isRawShaderMaterial?(jm=[Hm].filter(or).join("\n"),0<jm.length&&(jm+="\n"),Xm=[Gm,Hm].filter(or).join("\n"),0<Xm.length&&(Xm+="\n")):(jm=["precision "+Im.precision+" float;","precision "+Im.precision+" int;","#define SHADER_NAME "+Lm.name,Hm,Im.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+Vm,"#define MAX_BONES "+Im.maxBones,Im.useFog&&Im.fog?"#define USE_FOG":"",Im.useFog&&Im.fogExp?"#define FOG_EXP2":"",Im.map?"#define USE_MAP":"",Im.envMap?"#define USE_ENVMAP":"",Im.envMap?"#define "+Om:"",Im.lightMap?"#define USE_LIGHTMAP":"",Im.aoMap?"#define USE_AOMAP":"",Im.emissiveMap?"#define USE_EMISSIVEMAP":"",Im.bumpMap?"#define USE_BUMPMAP":"",Im.normalMap?"#define USE_NORMALMAP":"",Im.displacementMap&&Im.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",Im.specularMap?"#define USE_SPECULARMAP":"",Im.roughnessMap?"#define USE_ROUGHNESSMAP":"",Im.metalnessMap?"#define USE_METALNESSMAP":"",Im.alphaMap?"#define USE_ALPHAMAP":"",Im.vertexColors?"#define USE_COLOR":"",Im.flatShading?"#define FLAT_SHADED":"",Im.skinning?"#define USE_SKINNING":"",Im.useVertexTexture?"#define BONE_TEXTURE":"",Im.morphTargets?"#define USE_MORPHTARGETS":"",Im.morphNormals&&!1===Im.flatShading?"#define USE_MORPHNORMALS":"",Im.doubleSided?"#define DOUBLE_SIDED":"",Im.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+Im.numClippingPlanes,Im.shadowMapEnabled?"#define USE_SHADOWMAP":"",Im.shadowMapEnabled?"#define "+Fm:"",Im.sizeAttenuation?"#define USE_SIZEATTENUATION":"",Im.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",Im.logarithmicDepthBuffer&&Rm.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(or).join("\n"),Xm=[Gm,"precision "+Im.precision+" float;","precision "+Im.precision+" int;","#define SHADER_NAME "+Lm.name,Hm,Im.alphaTest?"#define ALPHATEST "+Im.alphaTest:"","#define GAMMA_FACTOR "+Vm,Im.useFog&&Im.fog?"#define USE_FOG":"",Im.useFog&&Im.fogExp?"#define FOG_EXP2":"",Im.map?"#define USE_MAP":"",Im.envMap?"#define USE_ENVMAP":"",Im.envMap?"#define "+Um:"",Im.envMap?"#define "+Om:"",Im.envMap?"#define "+km:"",Im.lightMap?"#define USE_LIGHTMAP":"",Im.aoMap?"#define USE_AOMAP":"",Im.emissiveMap?"#define USE_EMISSIVEMAP":"",Im.bumpMap?"#define USE_BUMPMAP":"",Im.normalMap?"#define USE_NORMALMAP":"",Im.specularMap?"#define USE_SPECULARMAP":"",Im.roughnessMap?"#define USE_ROUGHNESSMAP":"",Im.metalnessMap?"#define USE_METALNESSMAP":"",Im.alphaMap?"#define USE_ALPHAMAP":"",Im.vertexColors?"#define USE_COLOR":"",Im.gradientMap?"#define USE_GRADIENTMAP":"",Im.flatShading?"#define FLAT_SHADED":"",Im.doubleSided?"#define DOUBLE_SIDED":"",Im.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+Im.numClippingPlanes,"#define UNION_CLIPPING_PLANES "+(Im.numClippingPlanes-Im.numClipIntersection),Im.shadowMapEnabled?"#define USE_SHADOWMAP":"",Im.shadowMapEnabled?"#define "+Fm:"",Im.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",Im.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",Im.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",Im.logarithmicDepthBuffer&&Rm.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",Im.envMap&&Rm.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",Im.toneMapping===Vl?"":"#define TONE_MAPPING",Im.toneMapping===Vl?"":Hu.tonemapping_pars_fragment,Im.toneMapping===Vl?"":Kt("toneMapping",Im.toneMapping),Im.dithering?"#define DITHERING":"",Im.outputEncoding||Im.mapEncoding||Im.envMapEncoding||Im.emissiveMapEncoding?Hu.encodings_pars_fragment:"",Im.mapEncoding?Jt("mapTexelToLinear",Im.mapEncoding):"",Im.envMapEncoding?Jt("envMapTexelToLinear",Im.envMapEncoding):"",Im.emissiveMapEncoding?Jt("emissiveMapTexelToLinear",Im.emissiveMapEncoding):"",Im.outputEncoding?Qt("linearToOutputTexel",Im.outputEncoding):"",Im.depthPacking?"#define DEPTH_PACKING "+Pm.depthPacking:"","\n"].filter(or).join("\n")),zm=sr(zm),zm=ir(zm,Im),Dm=sr(Dm),Dm=ir(Dm,Im),Pm.isShaderMaterial||(zm=lr(zm),Dm=lr(Dm));var Ym=jm+zm,Zm=Xm+Dm,Jm=Yt(Bm,Bm.VERTEX_SHADER,Ym),Qm=Yt(Bm,Bm.FRAGMENT_SHADER,Zm);Bm.attachShader(Wm,Jm),Bm.attachShader(Wm,Qm),void 0===Pm.index0AttributeName?!0===Im.morphTargets&&Bm.bindAttribLocation(Wm,0,"position"):Bm.bindAttribLocation(Wm,0,Pm.index0AttributeName),Bm.linkProgram(Wm);var Km=Bm.getProgramInfoLog(Wm),$m=Bm.getShaderInfoLog(Jm),eg=Bm.getShaderInfoLog(Qm),tg=!0,rg=!0;!1===Bm.getProgramParameter(Wm,Bm.LINK_STATUS)?(tg=!1,console.error("THREE.WebGLProgram: shader error: ",Bm.getError(),"gl.VALIDATE_STATUS",Bm.getProgramParameter(Wm,Bm.VALIDATE_STATUS),"gl.getProgramInfoLog",Km,$m,eg)):""===Km?(""===$m||""===eg)&&(rg=!1):console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",Km),rg&&(this.diagnostics={runnable:tg,material:Pm,programLog:Km,vertexShader:{log:$m,prefix:jm},fragmentShader:{log:eg,prefix:Xm}}),Bm.deleteShader(Jm),Bm.deleteShader(Qm);var ag;this.getUniforms=function(){return void 0==ag&&(ag=new De(Bm,Wm,Mm)),ag};var og;return this.getAttributes=function(){return void 0==og&&(og=rr(Bm,Wm)),og},this.destroy=function(){Bm.deleteProgram(Wm),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=Zu++,this.code=Cm,this.usedTimes=1,this.program=Wm,this.vertexShader=Jm,this.fragmentShader=Qm,this}function ur(Mm,Rm,Cm){function Pm(zm){var Dm=zm.skeleton,Fm=Dm.bones;if(Cm.floatVertexTextures)return 1024;var Um=Cm.maxVertexUniforms,Om=_Mathfloor((Um-20)/4),km=_Mathmin(Om,Fm.length);return km<Fm.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+Fm.length+" bones. This GPU supports "+km+"."),0):km}function Lm(zm,Dm){var Fm;return zm?zm.isTexture?Fm=zm.encoding:zm.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),Fm=zm.texture.encoding):Fm=tp,Fm===tp&&Dm&&(Fm=ip),Fm}var Im=[],Bm={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow"},Nm=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];this.getParameters=function(zm,Dm,Fm,Um,Om,km,Vm){var Gm=Bm[zm.type],Hm=Vm.isSkinnedMesh?Pm(Vm):0,Wm=Cm.precision;null!==zm.precision&&(Wm=Cm.getMaxPrecision(zm.precision),Wm!==zm.precision&&console.warn("THREE.WebGLProgram.getParameters:",zm.precision,"not supported, using",Wm,"instead."));var jm=Mm.getRenderTarget(),Xm={shaderID:Gm,precision:Wm,supportsVertexTextures:Cm.vertexTextures,outputEncoding:Lm(jm?jm.texture:null,Mm.gammaOutput),map:!!zm.map,mapEncoding:Lm(zm.map,Mm.gammaInput),envMap:!!zm.envMap,envMapMode:zm.envMap&&zm.envMap.mapping,envMapEncoding:Lm(zm.envMap,Mm.gammaInput),envMapCubeUV:!!zm.envMap&&(zm.envMap.mapping===$l||zm.envMap.mapping===ed),lightMap:!!zm.lightMap,aoMap:!!zm.aoMap,emissiveMap:!!zm.emissiveMap,emissiveMapEncoding:Lm(zm.emissiveMap,Mm.gammaInput),bumpMap:!!zm.bumpMap,normalMap:!!zm.normalMap,displacementMap:!!zm.displacementMap,roughnessMap:!!zm.roughnessMap,metalnessMap:!!zm.metalnessMap,specularMap:!!zm.specularMap,alphaMap:!!zm.alphaMap,gradientMap:!!zm.gradientMap,combine:zm.combine,vertexColors:zm.vertexColors,fog:!!Um,useFog:zm.fog,fogExp:Um&&Um.isFogExp2,flatShading:zm.flatShading,sizeAttenuation:zm.sizeAttenuation,logarithmicDepthBuffer:Cm.logarithmicDepthBuffer,skinning:zm.skinning&&0<Hm,maxBones:Hm,useVertexTexture:Cm.floatVertexTextures,morphTargets:zm.morphTargets,morphNormals:zm.morphNormals,maxMorphTargets:Mm.maxMorphTargets,maxMorphNormals:Mm.maxMorphNormals,numDirLights:Dm.directional.length,numPointLights:Dm.point.length,numSpotLights:Dm.spot.length,numRectAreaLights:Dm.rectArea.length,numHemiLights:Dm.hemi.length,numClippingPlanes:Om,numClipIntersection:km,dithering:zm.dithering,shadowMapEnabled:Mm.shadowMap.enabled&&Vm.receiveShadow&&0<Fm.length,shadowMapType:Mm.shadowMap.type,toneMapping:Mm.toneMapping,physicallyCorrectLights:Mm.physicallyCorrectLights,premultipliedAlpha:zm.premultipliedAlpha,alphaTest:zm.alphaTest,doubleSided:zm.side===Ws,flipSided:zm.side===Hs,depthPacking:zm.depthPacking!==void 0&&zm.depthPacking};return Xm},this.getProgramCode=function(zm,Dm){var Fm=[];if(Dm.shaderID?Fm.push(Dm.shaderID):(Fm.push(zm.fragmentShader),Fm.push(zm.vertexShader)),void 0!==zm.defines)for(var Um in zm.defines)Fm.push(Um),Fm.push(zm.defines[Um]);for(var Om=0;Om<Nm.length;Om++)Fm.push(Dm[Nm[Om]]);return Fm.push(zm.onBeforeCompile.toString()),Fm.push(Mm.gammaOutput),Fm.join()},this.acquireProgram=function(zm,Dm,Fm,Um){for(var km=0,Vm=Im.length,Om,Gm;km<Vm;km++)if(Gm=Im[km],Gm.code===Um){Om=Gm,++Om.usedTimes;break}return void 0===Om&&(Om=new cr(Mm,Rm,Um,zm,Dm,Fm),Im.push(Om)),Om},this.releaseProgram=function(zm){if(0==--zm.usedTimes){var Dm=Im.indexOf(zm);Im[Dm]=Im[Im.length-1],Im.pop(),zm.destroy()}},this.programs=Im}function mr(Mm,Rm,Cm,Pm,Lm,Im,Bm){function Nm(ig,ng){if(ig.width>ng||ig.height>ng){var sg=ng/_Mathmax(ig.width,ig.height),lg=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");lg.width=_Mathfloor(ig.width*sg),lg.height=_Mathfloor(ig.height*sg);var dg=lg.getContext("2d");return dg.drawImage(ig,0,0,ig.width,ig.height,0,0,lg.width,lg.height),console.warn("THREE.WebGLRenderer: image is too big ("+ig.width+"x"+ig.height+"). Resized to "+lg.width+"x"+lg.height,ig),lg}return ig}function zm(ig){return yp.isPowerOfTwo(ig.width)&&yp.isPowerOfTwo(ig.height)}function Dm(ig){if(ig instanceof HTMLImageElement||ig instanceof HTMLCanvasElement||ig instanceof ImageBitmap){var ng=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");ng.width=yp.floorPowerOfTwo(ig.width),ng.height=yp.floorPowerOfTwo(ig.height);var sg=ng.getContext("2d");return sg.drawImage(ig,0,0,ng.width,ng.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+ig.width+"x"+ig.height+"). Resized to "+ng.width+"x"+ng.height,ig),ng}return ig}function Fm(ig){return ig.wrapS!==rd||ig.wrapT!==rd||ig.minFilter!==nd&&ig.minFilter!==pd}function Um(ig,ng){return ig.generateMipmaps&&ng&&ig.minFilter!==nd&&ig.minFilter!==pd}function Om(ig){return ig===nd||ig===sd||ig===dd?Mm.NEAREST:Mm.LINEAR}function km(ig){var ng=ig.target;ng.removeEventListener("dispose",km),Gm(ng),ng.isVideoTexture&&delete og[ng.id],Bm.textures--}function Vm(ig){var ng=ig.target;ng.removeEventListener("dispose",Vm),Hm(ng),Bm.textures--}function Gm(ig){var ng=Pm.get(ig);if(ig.image&&ng.__image__webglTextureCube)Mm.deleteTexture(ng.__image__webglTextureCube);else{if(ng.__webglInit===void 0)return;Mm.deleteTexture(ng.__webglTexture)}Pm.remove(ig)}function Hm(ig){var ng=Pm.get(ig),sg=Pm.get(ig.texture);if(ig){if(void 0!==sg.__webglTexture&&Mm.deleteTexture(sg.__webglTexture),ig.depthTexture&&ig.depthTexture.dispose(),ig.isWebGLRenderTargetCube)for(var lg=0;6>lg;lg++)Mm.deleteFramebuffer(ng.__webglFramebuffer[lg]),ng.__webglDepthbuffer&&Mm.deleteRenderbuffer(ng.__webglDepthbuffer[lg]);else Mm.deleteFramebuffer(ng.__webglFramebuffer),ng.__webglDepthbuffer&&Mm.deleteRenderbuffer(ng.__webglDepthbuffer);Pm.remove(ig.texture),Pm.remove(ig)}}function Wm(ig,ng){var sg=Pm.get(ig);if(0<ig.version&&sg.__version!==ig.version){var lg=ig.image;if(lg===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",ig);else if(!1===lg.complete)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",ig);else return void Zm(sg,ig,ng)}Cm.activeTexture(Mm.TEXTURE0+ng),Cm.bindTexture(Mm.TEXTURE_2D,sg.__webglTexture)}function Ym(ig,ng,sg){var lg;if(sg?(Mm.texParameteri(ig,Mm.TEXTURE_WRAP_S,Im.convert(ng.wrapS)),Mm.texParameteri(ig,Mm.TEXTURE_WRAP_T,Im.convert(ng.wrapT)),Mm.texParameteri(ig,Mm.TEXTURE_MAG_FILTER,Im.convert(ng.magFilter)),Mm.texParameteri(ig,Mm.TEXTURE_MIN_FILTER,Im.convert(ng.minFilter))):(Mm.texParameteri(ig,Mm.TEXTURE_WRAP_S,Mm.CLAMP_TO_EDGE),Mm.texParameteri(ig,Mm.TEXTURE_WRAP_T,Mm.CLAMP_TO_EDGE),(ng.wrapS!==rd||ng.wrapT!==rd)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",ng),Mm.texParameteri(ig,Mm.TEXTURE_MAG_FILTER,Om(ng.magFilter)),Mm.texParameteri(ig,Mm.TEXTURE_MIN_FILTER,Om(ng.minFilter)),ng.minFilter!==nd&&ng.minFilter!==pd&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",ng)),lg=Rm.get("EXT_texture_filter_anisotropic"),lg){if(ng.type===xd&&null===Rm.get("OES_texture_float_linear"))return;if(ng.type===vd&&null===Rm.get("OES_texture_half_float_linear"))return;(1<ng.anisotropy||Pm.get(ng).__currentAnisotropy)&&(Mm.texParameterf(ig,lg.TEXTURE_MAX_ANISOTROPY_EXT,_Mathmin(ng.anisotropy,Lm.getMaxAnisotropy())),Pm.get(ng).__currentAnisotropy=ng.anisotropy)}}function Zm(ig,ng,sg){ig.__webglInit===void 0&&(ig.__webglInit=!0,ng.addEventListener("dispose",km),ig.__webglTexture=Mm.createTexture(),ng.isVideoTexture&&(og[ng.id]=ng),Bm.textures++),Cm.activeTexture(Mm.TEXTURE0+sg),Cm.bindTexture(Mm.TEXTURE_2D,ig.__webglTexture),Mm.pixelStorei(Mm.UNPACK_FLIP_Y_WEBGL,ng.flipY),Mm.pixelStorei(Mm.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ng.premultiplyAlpha),Mm.pixelStorei(Mm.UNPACK_ALIGNMENT,ng.unpackAlignment);var lg=Nm(ng.image,Lm.maxTextureSize);Fm(ng)&&!1===zm(lg)&&(lg=Dm(lg));var dg=zm(lg),pg=Im.convert(ng.format),cg=Im.convert(ng.type);Ym(Mm.TEXTURE_2D,ng,dg);var mg=ng.mipmaps,ug;if(ng.isDepthTexture){var gg=Mm.DEPTH_COMPONENT;if(ng.type===xd){if(!ag)throw new Error("Float Depth Texture only supported in WebGL2.0");gg=Mm.DEPTH_COMPONENT32F}else ag&&(gg=Mm.DEPTH_COMPONENT16);ng.format===Id&&gg===Mm.DEPTH_COMPONENT&&ng.type!==hd&&ng.type!==_d&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),ng.type=hd,cg=Im.convert(ng.type)),ng.format===Bd&&(gg=Mm.DEPTH_STENCIL,ng.type!==Ad&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),ng.type=Ad,cg=Im.convert(ng.type))),Cm.texImage2D(Mm.TEXTURE_2D,0,gg,lg.width,lg.height,0,pg,cg,null)}else if(ng.isDataTexture){if(0<mg.length&&dg){for(var fg=0,hg=mg.length;fg<hg;fg++)ug=mg[fg],Cm.texImage2D(Mm.TEXTURE_2D,fg,pg,ug.width,ug.height,0,pg,cg,ug.data);ng.generateMipmaps=!1}else Cm.texImage2D(Mm.TEXTURE_2D,0,pg,lg.width,lg.height,0,pg,cg,lg.data);}else if(ng.isCompressedTexture)for(var fg=0,hg=mg.length;fg<hg;fg++)ug=mg[fg],ng.format!==Rd&&ng.format!==Md?-1<Cm.getCompressedTextureFormats().indexOf(pg)?Cm.compressedTexImage2D(Mm.TEXTURE_2D,fg,pg,ug.width,ug.height,0,ug.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Cm.texImage2D(Mm.TEXTURE_2D,fg,pg,ug.width,ug.height,0,pg,cg,ug.data);else if(0<mg.length&&dg){for(var fg=0,hg=mg.length;fg<hg;fg++)ug=mg[fg],Cm.texImage2D(Mm.TEXTURE_2D,fg,pg,pg,cg,ug);ng.generateMipmaps=!1}else Cm.texImage2D(Mm.TEXTURE_2D,0,pg,pg,cg,lg);Um(ng,dg)&&Mm.generateMipmap(Mm.TEXTURE_2D),ig.__version=ng.version,ng.onUpdate&&ng.onUpdate(ng)}function Jm(ig,ng,sg,lg){var dg=Im.convert(ng.texture.format),pg=Im.convert(ng.texture.type);Cm.texImage2D(lg,0,dg,ng.width,ng.height,0,dg,pg,null),Mm.bindFramebuffer(Mm.FRAMEBUFFER,ig),Mm.framebufferTexture2D(Mm.FRAMEBUFFER,sg,lg,Pm.get(ng.texture).__webglTexture,0),Mm.bindFramebuffer(Mm.FRAMEBUFFER,null)}function Qm(ig,ng){Mm.bindRenderbuffer(Mm.RENDERBUFFER,ig),ng.depthBuffer&&!ng.stencilBuffer?(Mm.renderbufferStorage(Mm.RENDERBUFFER,Mm.DEPTH_COMPONENT16,ng.width,ng.height),Mm.framebufferRenderbuffer(Mm.FRAMEBUFFER,Mm.DEPTH_ATTACHMENT,Mm.RENDERBUFFER,ig)):ng.depthBuffer&&ng.stencilBuffer?(Mm.renderbufferStorage(Mm.RENDERBUFFER,Mm.DEPTH_STENCIL,ng.width,ng.height),Mm.framebufferRenderbuffer(Mm.FRAMEBUFFER,Mm.DEPTH_STENCIL_ATTACHMENT,Mm.RENDERBUFFER,ig)):Mm.renderbufferStorage(Mm.RENDERBUFFER,Mm.RGBA4,ng.width,ng.height),Mm.bindRenderbuffer(Mm.RENDERBUFFER,null)}function Km(ig,ng){var sg=ng&&ng.isWebGLRenderTargetCube;if(sg)throw new Error("Depth Texture with cube render targets is not supported");if(Mm.bindFramebuffer(Mm.FRAMEBUFFER,ig),!(ng.depthTexture&&ng.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");Pm.get(ng.depthTexture).__webglTexture&&ng.depthTexture.image.width===ng.width&&ng.depthTexture.image.height===ng.height||(ng.depthTexture.image.width=ng.width,ng.depthTexture.image.height=ng.height,ng.depthTexture.needsUpdate=!0),Wm(ng.depthTexture,0);var lg=Pm.get(ng.depthTexture).__webglTexture;if(ng.depthTexture.format===Id)Mm.framebufferTexture2D(Mm.FRAMEBUFFER,Mm.DEPTH_ATTACHMENT,Mm.TEXTURE_2D,lg,0);else if(ng.depthTexture.format===Bd)Mm.framebufferTexture2D(Mm.FRAMEBUFFER,Mm.DEPTH_STENCIL_ATTACHMENT,Mm.TEXTURE_2D,lg,0);else throw new Error("Unknown depthTexture format")}function $m(ig){var ng=Pm.get(ig),sg=!0===ig.isWebGLRenderTargetCube;if(ig.depthTexture){if(sg)throw new Error("target.depthTexture not supported in Cube render targets");Km(ng.__webglFramebuffer,ig)}else if(sg){ng.__webglDepthbuffer=[];for(var lg=0;6>lg;lg++)Mm.bindFramebuffer(Mm.FRAMEBUFFER,ng.__webglFramebuffer[lg]),ng.__webglDepthbuffer[lg]=Mm.createRenderbuffer(),Qm(ng.__webglDepthbuffer[lg],ig)}else Mm.bindFramebuffer(Mm.FRAMEBUFFER,ng.__webglFramebuffer),ng.__webglDepthbuffer=Mm.createRenderbuffer(),Qm(ng.__webglDepthbuffer,ig);Mm.bindFramebuffer(Mm.FRAMEBUFFER,null)}var ag="undefined"!=typeof WebGL2RenderingContext&&Mm instanceof window.WebGL2RenderingContext,og={};this.setTexture2D=Wm,this.setTextureCube=function(ig,ng){var sg=Pm.get(ig);if(6===ig.image.length)if(0<ig.version&&sg.__version!==ig.version){sg.__image__webglTextureCube||(ig.addEventListener("dispose",km),sg.__image__webglTextureCube=Mm.createTexture(),Bm.textures++),Cm.activeTexture(Mm.TEXTURE0+ng),Cm.bindTexture(Mm.TEXTURE_CUBE_MAP,sg.__image__webglTextureCube),Mm.pixelStorei(Mm.UNPACK_FLIP_Y_WEBGL,ig.flipY);for(var lg=ig&&ig.isCompressedTexture,dg=ig.image[0]&&ig.image[0].isDataTexture,pg=[],cg=0;6>cg;cg++)pg[cg]=lg||dg?dg?ig.image[cg].image:ig.image[cg]:Nm(ig.image[cg],Lm.maxCubemapSize);var ug=pg[0],mg=zm(ug),gg=Im.convert(ig.format),fg=Im.convert(ig.type);Ym(Mm.TEXTURE_CUBE_MAP,ig,mg);for(var cg=0;6>cg;cg++)if(!lg)dg?Cm.texImage2D(Mm.TEXTURE_CUBE_MAP_POSITIVE_X+cg,0,gg,pg[cg].width,pg[cg].height,0,gg,fg,pg[cg].data):Cm.texImage2D(Mm.TEXTURE_CUBE_MAP_POSITIVE_X+cg,0,gg,gg,fg,pg[cg]);else for(var yg=pg[cg].mipmaps,_g=0,xg=yg.length,hg;_g<xg;_g++)hg=yg[_g],ig.format!==Rd&&ig.format!==Md?-1<Cm.getCompressedTextureFormats().indexOf(gg)?Cm.compressedTexImage2D(Mm.TEXTURE_CUBE_MAP_POSITIVE_X+cg,_g,gg,hg.width,hg.height,0,hg.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Cm.texImage2D(Mm.TEXTURE_CUBE_MAP_POSITIVE_X+cg,_g,gg,hg.width,hg.height,0,gg,fg,hg.data);Um(ig,mg)&&Mm.generateMipmap(Mm.TEXTURE_CUBE_MAP),sg.__version=ig.version,ig.onUpdate&&ig.onUpdate(ig)}else Cm.activeTexture(Mm.TEXTURE0+ng),Cm.bindTexture(Mm.TEXTURE_CUBE_MAP,sg.__image__webglTextureCube)},this.setTextureCubeDynamic=function(ig,ng){Cm.activeTexture(Mm.TEXTURE0+ng),Cm.bindTexture(Mm.TEXTURE_CUBE_MAP,Pm.get(ig).__webglTexture)},this.setupRenderTarget=function(ig){var ng=Pm.get(ig),sg=Pm.get(ig.texture);ig.addEventListener("dispose",Vm),sg.__webglTexture=Mm.createTexture(),Bm.textures++;var lg=!0===ig.isWebGLRenderTargetCube,dg=zm(ig);if(lg){ng.__webglFramebuffer=[];for(var pg=0;6>pg;pg++)ng.__webglFramebuffer[pg]=Mm.createFramebuffer()}else ng.__webglFramebuffer=Mm.createFramebuffer();if(lg){Cm.bindTexture(Mm.TEXTURE_CUBE_MAP,sg.__webglTexture),Ym(Mm.TEXTURE_CUBE_MAP,ig.texture,dg);for(var pg=0;6>pg;pg++)Jm(ng.__webglFramebuffer[pg],ig,Mm.COLOR_ATTACHMENT0,Mm.TEXTURE_CUBE_MAP_POSITIVE_X+pg);Um(ig.texture,dg)&&Mm.generateMipmap(Mm.TEXTURE_CUBE_MAP),Cm.bindTexture(Mm.TEXTURE_CUBE_MAP,null)}else Cm.bindTexture(Mm.TEXTURE_2D,sg.__webglTexture),Ym(Mm.TEXTURE_2D,ig.texture,dg),Jm(ng.__webglFramebuffer,ig,Mm.COLOR_ATTACHMENT0,Mm.TEXTURE_2D),Um(ig.texture,dg)&&Mm.generateMipmap(Mm.TEXTURE_2D),Cm.bindTexture(Mm.TEXTURE_2D,null);ig.depthBuffer&&$m(ig)},this.updateRenderTargetMipmap=function(ig){var ng=ig.texture,sg=zm(ig);if(Um(ng,sg)){var lg=ig.isWebGLRenderTargetCube?Mm.TEXTURE_CUBE_MAP:Mm.TEXTURE_2D,dg=Pm.get(ng).__webglTexture;Cm.bindTexture(lg,dg),Mm.generateMipmap(lg),Cm.bindTexture(lg,null)}},this.updateVideoTextures=function(){for(var ig in og)og[ig].update()}}function gr(){var Pm={};return{get:function(Lm){var Im=Lm.uuid,Bm=Pm[Im];return void 0===Bm&&(Bm={},Pm[Im]=Bm),Bm},remove:function(Lm){delete Pm[Lm.uuid]},clear:function(){Pm={}}}}function fr(Mm,Rm,Cm){function Bm(Ng,zg,Dg){var Fg=new Uint8Array(4),Ug=Mm.createTexture();Mm.bindTexture(Ng,Ug),Mm.texParameteri(Ng,Mm.TEXTURE_MIN_FILTER,Mm.NEAREST),Mm.texParameteri(Ng,Mm.TEXTURE_MAG_FILTER,Mm.NEAREST);for(var Og=0;Og<Dg;Og++)Mm.texImage2D(zg+Og,0,Mm.RGBA,1,1,0,Mm.RGBA,Mm.UNSIGNED_BYTE,Fg);return Ug}function Um(Ng){!0!==pg[Ng]&&(Mm.enable(Ng),pg[Ng]=!0)}function Om(Ng){!1!==pg[Ng]&&(Mm.disable(Ng),pg[Ng]=!1)}function Gm(Ng,zg,Dg,Fg,Ug,Og,kg,Vg){Ng===Js?Om(Mm.BLEND):Um(Mm.BLEND),Ng===rl?(Ug=Ug||zg,Og=Og||Dg,kg=kg||Fg,(zg!==gg||Ug!==yg)&&(Mm.blendEquationSeparate(Cm.convert(zg),Cm.convert(Ug)),gg=zg,yg=Ug),(Dg!==fg||Fg!==hg||Og!==_g||kg!==xg)&&(Mm.blendFuncSeparate(Cm.convert(Dg),Cm.convert(Fg),Cm.convert(Og),Cm.convert(kg)),fg=Dg,hg=Fg,_g=Og,xg=kg)):((Ng!==mg||Vg!==vg)&&(Ng===Ks?Vg?(Mm.blendEquationSeparate(Mm.FUNC_ADD,Mm.FUNC_ADD),Mm.blendFuncSeparate(Mm.ONE,Mm.ONE,Mm.ONE,Mm.ONE)):(Mm.blendEquation(Mm.FUNC_ADD),Mm.blendFunc(Mm.SRC_ALPHA,Mm.ONE)):Ng===$s?Vg?(Mm.blendEquationSeparate(Mm.FUNC_ADD,Mm.FUNC_ADD),Mm.blendFuncSeparate(Mm.ZERO,Mm.ZERO,Mm.ONE_MINUS_SRC_COLOR,Mm.ONE_MINUS_SRC_ALPHA)):(Mm.blendEquation(Mm.FUNC_ADD),Mm.blendFunc(Mm.ZERO,Mm.ONE_MINUS_SRC_COLOR)):Ng===el?Vg?(Mm.blendEquationSeparate(Mm.FUNC_ADD,Mm.FUNC_ADD),Mm.blendFuncSeparate(Mm.ZERO,Mm.SRC_COLOR,Mm.ZERO,Mm.SRC_ALPHA)):(Mm.blendEquation(Mm.FUNC_ADD),Mm.blendFunc(Mm.ZERO,Mm.SRC_COLOR)):Vg?(Mm.blendEquationSeparate(Mm.FUNC_ADD,Mm.FUNC_ADD),Mm.blendFuncSeparate(Mm.ONE,Mm.ONE_MINUS_SRC_ALPHA,Mm.ONE,Mm.ONE_MINUS_SRC_ALPHA)):(Mm.blendEquationSeparate(Mm.FUNC_ADD,Mm.FUNC_ADD),Mm.blendFuncSeparate(Mm.SRC_ALPHA,Mm.ONE_MINUS_SRC_ALPHA,Mm.ONE,Mm.ONE_MINUS_SRC_ALPHA))),gg=null,fg=null,hg=null,yg=null,_g=null,xg=null),mg=Ng,vg=Vg}function Wm(Ng){bg!==Ng&&(Ng?Mm.frontFace(Mm.CW):Mm.frontFace(Mm.CCW),bg=Ng)}function jm(Ng){Ng===Is?Om(Mm.CULL_FACE):(Um(Mm.CULL_FACE),Ng!==Tg&&(Ng===Ns?Mm.cullFace(Mm.BACK):Ng===zs?Mm.cullFace(Mm.FRONT):Mm.cullFace(Mm.FRONT_AND_BACK))),Tg=Ng}function Ym(Ng,zg,Dg){Ng?(Um(Mm.POLYGON_OFFSET_FILL),(Sg!==zg||Ag!==Dg)&&(Mm.polygonOffset(zg,Dg),Sg=zg,Ag=Dg)):Om(Mm.POLYGON_OFFSET_FILL)}function Jm(Ng){void 0===Ng&&(Ng=Mm.TEXTURE0+wg-1),Cg!==Ng&&(Mm.activeTexture(Ng),Cg=Ng)}var ag=new function(){var Ng=!1,zg=new W,Dg=null,Fg=new W(0,0,0,0);return{setMask:function(Ug){Dg===Ug||Ng||(Mm.colorMask(Ug,Ug,Ug,Ug),Dg=Ug)},setLocked:function(Ug){Ng=Ug},setClear:function(Ug,Og,kg,Vg,Gg){!0===Gg&&(Ug*=Vg,Og*=Vg,kg*=Vg),zg.set(Ug,Og,kg,Vg),!1===Fg.equals(zg)&&(Mm.clearColor(Ug,Og,kg,Vg),Fg.copy(zg))},reset:function(){Ng=!1,Dg=null,Fg.set(-1,0,0,0)}}},og=new function(){var Ng=!1,zg=null,Dg=null,Fg=null;return{setTest:function(Ug){Ug?Um(Mm.DEPTH_TEST):Om(Mm.DEPTH_TEST)},setMask:function(Ug){zg===Ug||Ng||(Mm.depthMask(Ug),zg=Ug)},setFunc:function(Ug){Dg!==Ug&&(Ug?Ug===Cl?Mm.depthFunc(Mm.NEVER):Ug===Pl?Mm.depthFunc(Mm.ALWAYS):Ug===Ll?Mm.depthFunc(Mm.LESS):Ug===Il?Mm.depthFunc(Mm.LEQUAL):Ug===Bl?Mm.depthFunc(Mm.EQUAL):Ug===Nl?Mm.depthFunc(Mm.GEQUAL):Ug===zl?Mm.depthFunc(Mm.GREATER):Ug===Dl?Mm.depthFunc(Mm.NOTEQUAL):Mm.depthFunc(Mm.LEQUAL):Mm.depthFunc(Mm.LEQUAL),Dg=Ug)},setLocked:function(Ug){Ng=Ug},setClear:function(Ug){Fg!==Ug&&(Mm.clearDepth(Ug),Fg=Ug)},reset:function(){Ng=!1,zg=null,Dg=null,Fg=null}}},ig=new function(){var Ng=!1,zg=null,Dg=null,Fg=null,Ug=null,Og=null,kg=null,Vg=null,Gg=null;return{setTest:function(Hg){Hg?Um(Mm.STENCIL_TEST):Om(Mm.STENCIL_TEST)},setMask:function(Hg){zg===Hg||Ng||(Mm.stencilMask(Hg),zg=Hg)},setFunc:function(Hg,Wg,jg){(Dg!==Hg||Fg!==Wg||Ug!==jg)&&(Mm.stencilFunc(Hg,Wg,jg),Dg=Hg,Fg=Wg,Ug=jg)},setOp:function(Hg,Wg,jg){(Og!==Hg||kg!==Wg||Vg!==jg)&&(Mm.stencilOp(Hg,Wg,jg),Og=Hg,kg=Wg,Vg=jg)},setLocked:function(Hg){Ng=Hg},setClear:function(Hg){Gg!==Hg&&(Mm.clearStencil(Hg),Gg=Hg)},reset:function(){Ng=!1,zg=null,Dg=null,Fg=null,Ug=null,Og=null,kg=null,Vg=null,Gg=null}}},ng=Mm.getParameter(Mm.MAX_VERTEX_ATTRIBS),sg=new Uint8Array(ng),lg=new Uint8Array(ng),dg=new Uint8Array(ng),pg={},cg=null,ug=null,mg=null,gg=null,fg=null,hg=null,yg=null,_g=null,xg=null,vg=!1,bg=null,Tg=null,Eg=null,Sg=null,Ag=null,wg=Mm.getParameter(Mm.MAX_COMBINED_TEXTURE_IMAGE_UNITS),Mg=parseFloat(/^WebGL\ ([0-9])/.exec(Mm.getParameter(Mm.VERSION))[1]),Rg=1<=parseFloat(Mg),Cg=null,Pg={},Lg=new W,Ig=new W,Bg={};return Bg[Mm.TEXTURE_2D]=Bm(Mm.TEXTURE_2D,Mm.TEXTURE_2D,1),Bg[Mm.TEXTURE_CUBE_MAP]=Bm(Mm.TEXTURE_CUBE_MAP,Mm.TEXTURE_CUBE_MAP_POSITIVE_X,6),ag.setClear(0,0,0,1),og.setClear(1),ig.setClear(0),Um(Mm.DEPTH_TEST),og.setFunc(Il),Wm(!1),jm(Ns),Um(Mm.CULL_FACE),Um(Mm.BLEND),Gm(Qs),{buffers:{color:ag,depth:og,stencil:ig},initAttributes:function(){for(var Ng=0,zg=sg.length;Ng<zg;Ng++)sg[Ng]=0},enableAttribute:function(Ng){if(sg[Ng]=1,0===lg[Ng]&&(Mm.enableVertexAttribArray(Ng),lg[Ng]=1),0!==dg[Ng]){var zg=Rm.get("ANGLE_instanced_arrays");zg.vertexAttribDivisorANGLE(Ng,0),dg[Ng]=0}},enableAttributeAndDivisor:function(Ng,zg){if(sg[Ng]=1,0===lg[Ng]&&(Mm.enableVertexAttribArray(Ng),lg[Ng]=1),dg[Ng]!==zg){var Dg=Rm.get("ANGLE_instanced_arrays");Dg.vertexAttribDivisorANGLE(Ng,zg),dg[Ng]=zg}},disableUnusedAttributes:function(){for(var Ng=0,zg=lg.length;Ng!==zg;++Ng)lg[Ng]!==sg[Ng]&&(Mm.disableVertexAttribArray(Ng),lg[Ng]=0)},enable:Um,disable:Om,getCompressedTextureFormats:function(){if(null==cg&&(cg=[],Rm.get("WEBGL_compressed_texture_pvrtc")||Rm.get("WEBGL_compressed_texture_s3tc")||Rm.get("WEBGL_compressed_texture_etc1")))for(var Ng=Mm.getParameter(Mm.COMPRESSED_TEXTURE_FORMATS),zg=0;zg<Ng.length;zg++)cg.push(Ng[zg]);return cg},useProgram:function(Ng){return ug!==Ng&&(Mm.useProgram(Ng),ug=Ng,!0)},setBlending:Gm,setMaterial:function(Ng,zg){Ng.side===Ws?Om(Mm.CULL_FACE):Um(Mm.CULL_FACE);var Dg=Ng.side===Hs;zg&&(Dg=!Dg),Wm(Dg),!0===Ng.transparent?Gm(Ng.blending,Ng.blendEquation,Ng.blendSrc,Ng.blendDst,Ng.blendEquationAlpha,Ng.blendSrcAlpha,Ng.blendDstAlpha,Ng.premultipliedAlpha):Gm(Js),og.setFunc(Ng.depthFunc),og.setTest(Ng.depthTest),og.setMask(Ng.depthWrite),ag.setMask(Ng.colorWrite),Ym(Ng.polygonOffset,Ng.polygonOffsetFactor,Ng.polygonOffsetUnits)},setFlipSided:Wm,setCullFace:jm,setLineWidth:function(Ng){Ng!==Eg&&(Rg&&Mm.lineWidth(Ng),Eg=Ng)},setPolygonOffset:Ym,setScissorTest:function(Ng){Ng?Um(Mm.SCISSOR_TEST):Om(Mm.SCISSOR_TEST)},activeTexture:Jm,bindTexture:function(Ng,zg){null===Cg&&Jm();var Dg=Pg[Cg];void 0===Dg&&(Dg={type:void 0,texture:void 0},Pg[Cg]=Dg),(Dg.type!==Ng||Dg.texture!==zg)&&(Mm.bindTexture(Ng,zg||Bg[Ng]),Dg.type=Ng,Dg.texture=zg)},compressedTexImage2D:function(){try{Mm.compressedTexImage2D.apply(Mm,arguments)}catch(Ng){console.error("THREE.WebGLState:",Ng)}},texImage2D:function(){try{Mm.texImage2D.apply(Mm,arguments)}catch(Ng){console.error("THREE.WebGLState:",Ng)}},scissor:function(Ng){!1===Lg.equals(Ng)&&(Mm.scissor(Ng.x,Ng.y,Ng.z,Ng.w),Lg.copy(Ng))},viewport:function(Ng){!1===Ig.equals(Ng)&&(Mm.viewport(Ng.x,Ng.y,Ng.z,Ng.w),Ig.copy(Ng))},reset:function(){for(var Ng=0;Ng<lg.length;Ng++)1===lg[Ng]&&(Mm.disableVertexAttribArray(Ng),lg[Ng]=0);pg={},cg=null,Cg=null,Pg={},ug=null,mg=null,bg=null,Tg=null,ag.reset(),og.reset(),ig.reset()}}}function hr(Mm,Rm,Cm){function Lm(Ym){if("highp"===Ym){if(0<Mm.getShaderPrecisionFormat(Mm.VERTEX_SHADER,Mm.HIGH_FLOAT).precision&&0<Mm.getShaderPrecisionFormat(Mm.FRAGMENT_SHADER,Mm.HIGH_FLOAT).precision)return"highp";Ym="mediump"}return"mediump"===Ym&&0<Mm.getShaderPrecisionFormat(Mm.VERTEX_SHADER,Mm.MEDIUM_FLOAT).precision&&0<Mm.getShaderPrecisionFormat(Mm.FRAGMENT_SHADER,Mm.MEDIUM_FLOAT).precision?"mediump":"lowp"}var Im,Bm=Cm.precision===void 0?"highp":Cm.precision,Nm=Lm(Bm);Nm!==Bm&&(console.warn("THREE.WebGLRenderer:",Bm,"not supported, using",Nm,"instead."),Bm=Nm);var zm=!0===Cm.logarithmicDepthBuffer,Dm=Mm.getParameter(Mm.MAX_TEXTURE_IMAGE_UNITS),Fm=Mm.getParameter(Mm.MAX_VERTEX_TEXTURE_IMAGE_UNITS),Um=Mm.getParameter(Mm.MAX_TEXTURE_SIZE),Om=Mm.getParameter(Mm.MAX_CUBE_MAP_TEXTURE_SIZE),km=Mm.getParameter(Mm.MAX_VERTEX_ATTRIBS),Vm=Mm.getParameter(Mm.MAX_VERTEX_UNIFORM_VECTORS),Gm=Mm.getParameter(Mm.MAX_VARYING_VECTORS),Hm=Mm.getParameter(Mm.MAX_FRAGMENT_UNIFORM_VECTORS),Wm=0<Fm,jm=!!Rm.get("OES_texture_float");return{getMaxAnisotropy:function(){if(void 0!=Im)return Im;var Ym=Rm.get("EXT_texture_filter_anisotropic");return Im=null===Ym?0:Mm.getParameter(Ym.MAX_TEXTURE_MAX_ANISOTROPY_EXT),Im},getMaxPrecision:Lm,precision:Bm,logarithmicDepthBuffer:zm,maxTextures:Dm,maxVertexTextures:Fm,maxTextureSize:Um,maxCubemapSize:Om,maxAttributes:km,maxVertexUniforms:Vm,maxVaryings:Gm,maxFragmentUniforms:Hm,vertexTextures:Wm,floatFragmentTextures:jm,floatVertexTextures:Wm&&jm}}function yr(Mm,Rm,Cm,Pm){et.call(this),this.type="PerspectiveCamera",this.fov=Mm===void 0?50:Mm,this.zoom=1,this.near=Cm===void 0?0.1:Cm,this.far=Pm===void 0?2e3:Pm,this.focus=10,this.aspect=Rm===void 0?1:Rm,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function _r(Mm){yr.call(this),this.cameras=Mm||[]}function xr(Mm){function Rm(){if(null!=Pm&&Pm.isPresenting){var Om=Pm.getEyeParameters("left"),km=Om.renderWidth,Vm=Om.renderHeight;Um=Mm.getPixelRatio(),Fm=Mm.getSize(),Mm.setDrawingBufferSize(2*km,Vm,1)}else Cm.enabled&&Mm.setDrawingBufferSize(Fm.width,Fm.height,Um)}var Cm=this,Pm=null,Lm=null,Im=null;"undefined"!=typeof window&&"VRFrameData"in window&&(Lm=new window.VRFrameData);var Bm=new F,Nm=new yr;Nm.bounds=new W(0,0,0.5,1),Nm.layers.enable(1);var zm=new yr;zm.bounds=new W(0.5,0,0.5,1),zm.layers.enable(2);var Dm=new _r([Nm,zm]);Dm.layers.enable(1),Dm.layers.enable(2);var Fm,Um;"undefined"!=typeof window&&window.addEventListener("vrdisplaypresentchange",Rm,!1),this.enabled=!1,this.getDevice=function(){return Pm},this.setDevice=function(Om){Om!==void 0&&(Pm=Om)},this.setPoseTarget=function(Om){Om!==void 0&&(Im=Om)},this.getCamera=function(Om){if(null===Pm)return Om;Pm.depthNear=Om.near,Pm.depthFar=Om.far,Pm.getFrameData(Lm);var km=Lm.pose,Vm=null===Im?Om:Im;if(null===km.position?Vm.position.set(0,0,0):Vm.position.fromArray(km.position),null!==km.orientation&&Vm.quaternion.fromArray(km.orientation),Vm.updateMatrixWorld(),!1===Pm.isPresenting)return Om;Nm.near=Om.near,zm.near=Om.near,Nm.far=Om.far,zm.far=Om.far,Dm.matrixWorld.copy(Om.matrixWorld),Dm.matrixWorldInverse.copy(Om.matrixWorldInverse),Nm.matrixWorldInverse.fromArray(Lm.leftViewMatrix),zm.matrixWorldInverse.fromArray(Lm.rightViewMatrix);var Gm=Vm.parent;null!==Gm&&(Bm.getInverse(Gm.matrixWorld),Nm.matrixWorldInverse.multiply(Bm),zm.matrixWorldInverse.multiply(Bm)),Nm.matrixWorld.getInverse(Nm.matrixWorldInverse),zm.matrixWorld.getInverse(zm.matrixWorldInverse),Nm.projectionMatrix.fromArray(Lm.leftProjectionMatrix),zm.projectionMatrix.fromArray(Lm.rightProjectionMatrix),Dm.projectionMatrix.copy(Nm.projectionMatrix);var Hm=Pm.getLayers();if(Hm.length){var Wm=Hm[0];null!==Wm.leftBounds&&4===Wm.leftBounds.length&&Nm.bounds.fromArray(Wm.leftBounds),null!==Wm.rightBounds&&4===Wm.rightBounds.length&&zm.bounds.fromArray(Wm.rightBounds)}return Dm},this.submitFrame=function(){Pm&&Pm.isPresenting&&Pm.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",Rm)}}function br(Mm){var Rm={};return{get:function(Cm){if(void 0!==Rm[Cm])return Rm[Cm];var Pm;return Pm="WEBGL_depth_texture"===Cm?Mm.getExtension("WEBGL_depth_texture")||Mm.getExtension("MOZ_WEBGL_depth_texture")||Mm.getExtension("WEBKIT_WEBGL_depth_texture"):"EXT_texture_filter_anisotropic"===Cm?Mm.getExtension("EXT_texture_filter_anisotropic")||Mm.getExtension("MOZ_EXT_texture_filter_anisotropic")||Mm.getExtension("WEBKIT_EXT_texture_filter_anisotropic"):"WEBGL_compressed_texture_s3tc"===Cm?Mm.getExtension("WEBGL_compressed_texture_s3tc")||Mm.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||Mm.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc"):"WEBGL_compressed_texture_pvrtc"===Cm?Mm.getExtension("WEBGL_compressed_texture_pvrtc")||Mm.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"):"WEBGL_compressed_texture_etc1"===Cm?Mm.getExtension("WEBGL_compressed_texture_etc1"):Mm.getExtension(Cm),null===Pm&&console.warn("THREE.WebGLRenderer: "+Cm+" extension not supported."),Rm[Cm]=Pm,Pm}}}function Tr(){function Mm(){Dm.value!==Pm&&(Dm.value=Pm,Dm.needsUpdate=0<Lm),Cm.numPlanes=Lm,Cm.numIntersection=0}function Rm(Fm,Um,Om,km){var Vm=null===Fm?0:Fm.length,Gm=null;if(0!==Vm){if(Gm=Dm.value,!0!==km||null===Gm){var Hm=Om+4*Vm,Wm=Um.matrixWorldInverse;zm.getNormalMatrix(Wm),(null===Gm||Gm.length<Hm)&&(Gm=new Float32Array(Hm));for(var jm=0,Xm=Om;jm!==Vm;++jm,Xm+=4)Nm.copy(Fm[jm]).applyMatrix4(Wm,zm),Nm.normal.toArray(Gm,Xm),Gm[Xm+3]=Nm.constant}Dm.value=Gm,Dm.needsUpdate=!0}return Cm.numPlanes=Vm,Gm}var Cm=this,Pm=null,Lm=0,Im=!1,Bm=!1,Nm=new Xe,zm=new G,Dm={value:null,needsUpdate:!1};this.uniform=Dm,this.numPlanes=0,this.numIntersection=0,this.init=function(Fm,Um,Om){var km=0!==Fm.length||Um||0!=Lm||Im;return Im=Um,Pm=Rm(Fm,Om,0),Lm=Fm.length,km},this.beginShadows=function(){Bm=!0,Rm(null)},this.endShadows=function(){Bm=!1,Mm()},this.setState=function(Fm,Um,Om,km,Vm,Gm){if(!Im||null===Fm||0===Fm.length||Bm&&!Om)Bm?Rm(null):Mm();else{var Hm=Bm?0:Lm,Wm=4*Hm,jm=Vm.clippingState||null;Dm.value=jm,jm=Rm(Fm,km,Wm,Gm);for(var Xm=0;Xm!==Wm;++Xm)jm[Xm]=Pm[Xm];Vm.clippingState=jm,this.numIntersection=Um?this.numPlanes:0,this.numPlanes+=Hm}}}function Er(Mm,Rm){return{convert:function(Pm){var Lm;if(Pm===td)return Mm.REPEAT;if(Pm===rd)return Mm.CLAMP_TO_EDGE;if(Pm===od)return Mm.MIRRORED_REPEAT;if(Pm===nd)return Mm.NEAREST;if(Pm===sd)return Mm.NEAREST_MIPMAP_NEAREST;if(Pm===dd)return Mm.NEAREST_MIPMAP_LINEAR;if(Pm===pd)return Mm.LINEAR;if(Pm===cd)return Mm.LINEAR_MIPMAP_NEAREST;if(Pm===ud)return Mm.LINEAR_MIPMAP_LINEAR;if(Pm===md)return Mm.UNSIGNED_BYTE;if(Pm===Td)return Mm.UNSIGNED_SHORT_4_4_4_4;if(Pm===Ed)return Mm.UNSIGNED_SHORT_5_5_5_1;if(Pm===Sd)return Mm.UNSIGNED_SHORT_5_6_5;if(Pm===gd)return Mm.BYTE;if(Pm===fd)return Mm.SHORT;if(Pm===hd)return Mm.UNSIGNED_SHORT;if(Pm===yd)return Mm.INT;if(Pm===_d)return Mm.UNSIGNED_INT;if(Pm===xd)return Mm.FLOAT;if(Pm===vd&&(Lm=Rm.get("OES_texture_half_float"),null!==Lm))return Lm.HALF_FLOAT_OES;if(Pm===wd)return Mm.ALPHA;if(Pm===Md)return Mm.RGB;if(Pm===Rd)return Mm.RGBA;if(Pm===Cd)return Mm.LUMINANCE;if(Pm===Pd)return Mm.LUMINANCE_ALPHA;if(Pm===Id)return Mm.DEPTH_COMPONENT;if(Pm===Bd)return Mm.DEPTH_STENCIL;if(Pm===al)return Mm.FUNC_ADD;if(Pm===nl)return Mm.FUNC_SUBTRACT;if(Pm===ll)return Mm.FUNC_REVERSE_SUBTRACT;if(Pm===yl)return Mm.ZERO;if(Pm===_l)return Mm.ONE;if(Pm===xl)return Mm.SRC_COLOR;if(Pm===bl)return Mm.ONE_MINUS_SRC_COLOR;if(Pm===Tl)return Mm.SRC_ALPHA;if(Pm===El)return Mm.ONE_MINUS_SRC_ALPHA;if(Pm===Sl)return Mm.DST_ALPHA;if(Pm===Al)return Mm.ONE_MINUS_DST_ALPHA;if(Pm===wl)return Mm.DST_COLOR;if(Pm===Ml)return Mm.ONE_MINUS_DST_COLOR;if(Pm===Rl)return Mm.SRC_ALPHA_SATURATE;if((Pm===Nd||Pm===zd||Pm===Dd||Pm===Fd)&&(Lm=Rm.get("WEBGL_compressed_texture_s3tc"),null!==Lm)){if(Pm===Nd)return Lm.COMPRESSED_RGB_S3TC_DXT1_EXT;if(Pm===zd)return Lm.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(Pm===Dd)return Lm.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(Pm===Fd)return Lm.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((Pm===Ud||Pm===Od||Pm===kd||Pm===Vd)&&(Lm=Rm.get("WEBGL_compressed_texture_pvrtc"),null!==Lm)){if(Pm===Ud)return Lm.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(Pm===Od)return Lm.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(Pm===kd)return Lm.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(Pm===Vd)return Lm.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(Pm===Gd&&(Lm=Rm.get("WEBGL_compressed_texture_etc1"),null!==Lm))return Lm.COMPRESSED_RGB_ETC1_WEBGL;if((Pm===dl||Pm===ul)&&(Lm=Rm.get("EXT_blend_minmax"),null!==Lm)){if(Pm===dl)return Lm.MIN_EXT;if(Pm===ul)return Lm.MAX_EXT}return Pm===Ad&&(Lm=Rm.get("WEBGL_depth_texture"),null!==Lm)?Lm.UNSIGNED_INT_24_8_WEBGL:0}}}function Sr(Mm){function Rm(){return null==Tg?Ng:1}function Cm(){Yg=new br(qg),Yg.get("WEBGL_depth_texture"),Yg.get("OES_texture_float"),Yg.get("OES_texture_float_linear"),Yg.get("OES_texture_half_float"),Yg.get("OES_texture_half_float_linear"),Yg.get("OES_standard_derivatives"),Yg.get("OES_element_index_uint"),Yg.get("ANGLE_instanced_arrays"),hf=new Er(qg,Yg),Zg=new hr(qg,Yg,Mm),Jg=new fr(qg,Yg,hf),Jg.scissor(Cg.copy(Dg).multiplyScalar(Ng)),Jg.viewport(Rg.copy(zg).multiplyScalar(Ng)),Qg=new gr,Kg=new mr(qg,Yg,Jg,Qg,Zg,hf,Wg),$g=new Je(qg),ef=new Ht(qg,$g,Wg),tf=new qt(ef,jg),pf=new kt(qg),of=new ur(vg,Yg,Zg),rf=new jt,nf=new Ut,lf=new Nt(vg,Jg,ef,ug),uf=new Gt(qg,Yg,jg),mf=new Vt(qg,Yg,jg),gf=new Oe(vg,qg,Jg,Kg,Zg),ff=new Ve(vg,qg,Jg,Kg,Zg),vg.info.programs=of.programs,vg.context=qg,vg.capabilities=Zg,vg.extensions=Yg,vg.properties=Qg,vg.renderLists=nf,vg.state=Jg}function Pm(Tf){Tf.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),bg=!0}function Lm(){console.log("THREE.WebGLRenderer: Context Restored."),bg=!1,Cm()}function Im(Tf){var Ef=Tf.target;Ef.removeEventListener("dispose",Im),Bm(Ef)}function Bm(Tf){Nm(Tf),Qg.remove(Tf)}function Nm(Tf){var Ef=Qg.get(Tf).program;Tf.program=void 0,Ef!==void 0&&of.releaseProgram(Ef)}function zm(Tf,Ef,Sf){Tf.render(function(Af){vg.renderBufferImmediate(Af,Ef,Sf)})}function Dm(Tf,Ef,Sf,Af){if(Sf&&Sf.isInstancedBufferGeometry&&null===Yg.get("ANGLE_instanced_arrays"))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");Af===void 0&&(Af=0),Jg.initAttributes();var wf=Sf.attributes,Mf=Ef.getAttributes(),Rf=Tf.defaultAttributeValues;for(var Cf in Mf){var Pf=Mf[Cf];if(0<=Pf){var Lf=wf[Cf];if(Lf!==void 0){var If=Lf.normalized,Bf=Lf.itemSize,Nf=$g.get(Lf);if(Nf===void 0)continue;var zf=Nf.buffer,Df=Nf.type,Ff=Nf.bytesPerElement;if(Lf.isInterleavedBufferAttribute){var Uf=Lf.data,Of=Uf.stride,kf=Lf.offset;Uf&&Uf.isInstancedInterleavedBuffer?(Jg.enableAttributeAndDivisor(Pf,Uf.meshPerAttribute),Sf.maxInstancedCount===void 0&&(Sf.maxInstancedCount=Uf.meshPerAttribute*Uf.count)):Jg.enableAttribute(Pf),qg.bindBuffer(qg.ARRAY_BUFFER,zf),qg.vertexAttribPointer(Pf,Bf,Df,If,Of*Ff,(Af*Of+kf)*Ff)}else Lf.isInstancedBufferAttribute?(Jg.enableAttributeAndDivisor(Pf,Lf.meshPerAttribute),void 0===Sf.maxInstancedCount&&(Sf.maxInstancedCount=Lf.meshPerAttribute*Lf.count)):Jg.enableAttribute(Pf),qg.bindBuffer(qg.ARRAY_BUFFER,zf),qg.vertexAttribPointer(Pf,Bf,Df,If,0,Af*Bf*Ff)}else if(Rf!==void 0){var Vf=Rf[Cf];if(Vf!==void 0)switch(Vf.length){case 2:qg.vertexAttrib2fv(Pf,Vf);break;case 3:qg.vertexAttrib3fv(Pf,Vf);break;case 4:qg.vertexAttrib4fv(Pf,Vf);break;default:qg.vertexAttrib1fv(Pf,Vf);}}}}Jg.disableUnusedAttributes()}function Fm(){if(!xf){var Tf=yf.getDevice();Tf&&Tf.isPresenting?Tf.requestAnimationFrame(Um):window.requestAnimationFrame(Um),xf=!0}}function Um(Tf){null!=vf&&vf(Tf);var Ef=yf.getDevice();Ef&&Ef.isPresenting?Ef.requestAnimationFrame(Um):window.requestAnimationFrame(Um)}function Om(Tf,Ef,Sf){if(!1!==Tf.visible){var Af=Tf.layers.test(Ef.layers);if(Af)if(Tf.isLight)fg.push(Tf),Tf.castShadow&&hg.push(Tf);else if(Tf.isSprite)(!Tf.frustumCulled||Ug.intersectsSprite(Tf))&&_g.push(Tf);else if(Tf.isLensFlare)xg.push(Tf);else if(Tf.isImmediateRenderObject)Sf&&Hg.setFromMatrixPosition(Tf.matrixWorld).applyMatrix4(Gg),yg.push(Tf,null,Tf.material,Hg.z,null);else if((Tf.isMesh||Tf.isLine||Tf.isPoints)&&(Tf.isSkinnedMesh&&Tf.skeleton.update(),!Tf.frustumCulled||Ug.intersectsObject(Tf))){Sf&&Hg.setFromMatrixPosition(Tf.matrixWorld).applyMatrix4(Gg);var wf=tf.update(Tf),Mf=Tf.material;if(Array.isArray(Mf))for(var Rf=wf.groups,Cf=0,Pf=Rf.length;Cf<Pf;Cf++){var Lf=Rf[Cf],If=Mf[Lf.materialIndex];If&&If.visible&&yg.push(Tf,wf,If,Hg.z,Lf)}else Mf.visible&&yg.push(Tf,wf,Mf,Hg.z,null)}for(var Bf=Tf.children,Cf=0,Pf=Bf.length;Cf<Pf;Cf++)Om(Bf[Cf],Ef,Sf)}}function km(Tf,Ef,Sf,Af){for(var wf=0,Mf=Tf.length;wf<Mf;wf++){var Rf=Tf[wf],Cf=Rf.object,Pf=Rf.geometry,Lf=Af===void 0?Rf.material:Af,If=Rf.group;if(Sf.isArrayCamera){Mg=Sf;for(var Bf=Sf.cameras,Nf=0,zf=Bf.length,Df;Nf<zf;Nf++)if(Df=Bf[Nf],Cf.layers.test(Df.layers)){var Ff=Df.bounds,Uf=Ff.x*Ig,Of=Ff.y*Bg,kf=Ff.z*Ig,Vf=Ff.w*Bg;Jg.viewport(Rg.set(Uf,Of,kf,Vf).multiplyScalar(Ng)),Vm(Cf,Ef,Df,Pf,Lf,If)}}else Mg=null,Vm(Cf,Ef,Sf,Pf,Lf,If)}}function Vm(Tf,Ef,Sf,Af,wf,Mf){if(Tf.onBeforeRender(vg,Ef,Sf,Af,wf,Mf),Tf.modelViewMatrix.multiplyMatrices(Sf.matrixWorldInverse,Tf.matrixWorld),Tf.normalMatrix.getNormalMatrix(Tf.modelViewMatrix),Tf.isImmediateRenderObject){var Rf=Tf.isMesh&&0>Tf.matrixWorld.determinant();Jg.setMaterial(wf,Rf);var Cf=Hm(Sf,Ef.fog,wf,Tf);Ag="",zm(Tf,Cf,wf)}else vg.renderBufferDirect(Sf,Ef.fog,Af,wf,Tf,Mf);Tf.onAfterRender(vg,Ef,Sf,Af,wf,Mf)}function Gm(Tf,Ef,Sf){var Af=Qg.get(Tf),wf=of.getParameters(Tf,rf.state,hg,Ef,Og.numPlanes,Og.numIntersection,Sf),Mf=of.getProgramCode(Tf,wf),Rf=Af.program,Cf=!0;if(Rf===void 0)Tf.addEventListener("dispose",Im);else if(Rf.code!==Mf)Nm(Tf);else{if(wf.shaderID!==void 0)return;Cf=!1}if(Cf){if(wf.shaderID){var Pf=Wu[wf.shaderID];Af.shader={name:Tf.type,uniforms:Pp.clone(Pf.uniforms),vertexShader:Pf.vertexShader,fragmentShader:Pf.fragmentShader}}else Af.shader={name:Tf.type,uniforms:Tf.uniforms,vertexShader:Tf.vertexShader,fragmentShader:Tf.fragmentShader};Tf.onBeforeCompile(Af.shader),Rf=of.acquireProgram(Tf,Af.shader,wf,Mf),Af.program=Rf,Tf.program=Rf}var Lf=Rf.getAttributes();if(Tf.morphTargets){Tf.numSupportedMorphTargets=0;for(var If=0;If<vg.maxMorphTargets;If++)0<=Lf["morphTarget"+If]&&Tf.numSupportedMorphTargets++}if(Tf.morphNormals){Tf.numSupportedMorphNormals=0;for(var If=0;If<vg.maxMorphNormals;If++)0<=Lf["morphNormal"+If]&&Tf.numSupportedMorphNormals++}var Bf=Af.shader.uniforms;(Tf.isShaderMaterial||Tf.isRawShaderMaterial)&&!0!==Tf.clipping||(Af.numClippingPlanes=Og.numPlanes,Af.numIntersection=Og.numIntersection,Bf.clippingPlanes=Og.uniform),Af.fog=Ef,Af.lightsHash=rf.state.hash,Tf.lights&&(Bf.ambientLightColor.value=rf.state.ambient,Bf.directionalLights.value=rf.state.directional,Bf.spotLights.value=rf.state.spot,Bf.rectAreaLights.value=rf.state.rectArea,Bf.pointLights.value=rf.state.point,Bf.hemisphereLights.value=rf.state.hemi,Bf.directionalShadowMap.value=rf.state.directionalShadowMap,Bf.directionalShadowMatrix.value=rf.state.directionalShadowMatrix,Bf.spotShadowMap.value=rf.state.spotShadowMap,Bf.spotShadowMatrix.value=rf.state.spotShadowMatrix,Bf.pointShadowMap.value=rf.state.pointShadowMap,Bf.pointShadowMatrix.value=rf.state.pointShadowMatrix);var Nf=Af.program.getUniforms(),zf=De.seqWithValue(Nf.seq,Bf);Af.uniformsList=zf}function Hm(Tf,Ef,Sf,Af){Lg=0;var wf=Qg.get(Sf);if(kg&&(Vg||Tf!==wg)){var Mf=Tf===wg&&Sf.id===Sg;Og.setState(Sf.clippingPlanes,Sf.clipIntersection,Sf.clipShadows,Tf,wf,Mf)}!1===Sf.needsUpdate&&(void 0===wf.program?Sf.needsUpdate=!0:Sf.fog&&wf.fog!==Ef?Sf.needsUpdate=!0:Sf.lights&&wf.lightsHash!==rf.state.hash?Sf.needsUpdate=!0:void 0!==wf.numClippingPlanes&&(wf.numClippingPlanes!==Og.numPlanes||wf.numIntersection!==Og.numIntersection)&&(Sf.needsUpdate=!0)),Sf.needsUpdate&&(Gm(Sf,Ef,Af),Sf.needsUpdate=!1);var Rf=!1,Cf=!1,Pf=!1,Lf=wf.program,If=Lf.getUniforms(),Bf=wf.shader.uniforms;if(Jg.useProgram(Lf.program)&&(Rf=!0,Cf=!0,Pf=!0),Sf.id!==Sg&&(Sg=Sf.id,Cf=!0),Rf||Tf!==wg){if(If.setValue(qg,"projectionMatrix",Tf.projectionMatrix),Zg.logarithmicDepthBuffer&&If.setValue(qg,"logDepthBufFC",2/(_Mathlog(Tf.far+1)/_MathLN)),wg!==(Mg||Tf)&&(wg=Mg||Tf,Cf=!0,Pf=!0),Sf.isShaderMaterial||Sf.isMeshPhongMaterial||Sf.isMeshStandardMaterial||Sf.envMap){var Nf=If.map.cameraPosition;void 0!==Nf&&Nf.setValue(qg,Hg.setFromMatrixPosition(Tf.matrixWorld))}(Sf.isMeshPhongMaterial||Sf.isMeshLambertMaterial||Sf.isMeshBasicMaterial||Sf.isMeshStandardMaterial||Sf.isShaderMaterial||Sf.skinning)&&If.setValue(qg,"viewMatrix",Tf.matrixWorldInverse)}if(Sf.skinning){If.setOptional(qg,Af,"bindMatrix"),If.setOptional(qg,Af,"bindMatrixInverse");var zf=Af.skeleton;if(zf){var Df=zf.bones;if(Zg.floatVertexTextures){if(void 0===zf.boneTexture){var Ff=_Mathsqrt(4*Df.length);Ff=yp.ceilPowerOfTwo(Ff),Ff=_Mathmax(Ff,4);var Uf=new Float32Array(4*(Ff*Ff));Uf.set(zf.boneMatrices);var Of=new Z(Uf,Ff,Ff,Rd,xd);zf.boneMatrices=Uf,zf.boneTexture=Of,zf.boneTextureSize=Ff}If.setValue(qg,"boneTexture",zf.boneTexture),If.setValue(qg,"boneTextureSize",zf.boneTextureSize)}else If.setOptional(qg,zf,"boneMatrices")}}return Cf&&(If.setValue(qg,"toneMappingExposure",vg.toneMappingExposure),If.setValue(qg,"toneMappingWhitePoint",vg.toneMappingWhitePoint),Sf.lights&&og(Bf,Pf),Ef&&Sf.fog&&Zm(Bf,Ef),Sf.isMeshBasicMaterial?Wm(Bf,Sf):Sf.isMeshLambertMaterial?(Wm(Bf,Sf),Jm(Bf,Sf)):Sf.isMeshPhongMaterial?(Wm(Bf,Sf),Sf.isMeshToonMaterial?Km(Bf,Sf):Qm(Bf,Sf)):Sf.isMeshStandardMaterial?(Wm(Bf,Sf),Sf.isMeshPhysicalMaterial?eg(Bf,Sf):$m(Bf,Sf)):Sf.isMeshDepthMaterial?(Wm(Bf,Sf),tg(Bf,Sf)):Sf.isMeshDistanceMaterial?(Wm(Bf,Sf),rg(Bf,Sf)):Sf.isMeshNormalMaterial?(Wm(Bf,Sf),ag(Bf,Sf)):Sf.isLineBasicMaterial?(jm(Bf,Sf),Sf.isLineDashedMaterial&&Xm(Bf,Sf)):Sf.isPointsMaterial?Ym(Bf,Sf):Sf.isShadowMaterial&&(Bf.color.value=Sf.color,Bf.opacity.value=Sf.opacity),void 0!==Bf.ltcMat&&(Bf.ltcMat.value=Cp.LTC_MAT_TEXTURE),void 0!==Bf.ltcMag&&(Bf.ltcMag.value=Cp.LTC_MAG_TEXTURE),De.upload(qg,wf.uniformsList,Bf,vg)),If.setValue(qg,"modelViewMatrix",Af.modelViewMatrix),If.setValue(qg,"normalMatrix",Af.normalMatrix),If.setValue(qg,"modelMatrix",Af.matrixWorld),Lf}function Wm(Tf,Ef){Tf.opacity.value=Ef.opacity,Ef.color&&(Tf.diffuse.value=Ef.color),Ef.emissive&&Tf.emissive.value.copy(Ef.emissive).multiplyScalar(Ef.emissiveIntensity),Ef.map&&(Tf.map.value=Ef.map),Ef.alphaMap&&(Tf.alphaMap.value=Ef.alphaMap),Ef.specularMap&&(Tf.specularMap.value=Ef.specularMap),Ef.envMap&&(Tf.envMap.value=Ef.envMap,Tf.flipEnvMap.value=Ef.envMap&&Ef.envMap.isCubeTexture?-1:1,Tf.reflectivity.value=Ef.reflectivity,Tf.refractionRatio.value=Ef.refractionRatio),Ef.lightMap&&(Tf.lightMap.value=Ef.lightMap,Tf.lightMapIntensity.value=Ef.lightMapIntensity),Ef.aoMap&&(Tf.aoMap.value=Ef.aoMap,Tf.aoMapIntensity.value=Ef.aoMapIntensity);var Sf;if(Ef.map?Sf=Ef.map:Ef.specularMap?Sf=Ef.specularMap:Ef.displacementMap?Sf=Ef.displacementMap:Ef.normalMap?Sf=Ef.normalMap:Ef.bumpMap?Sf=Ef.bumpMap:Ef.roughnessMap?Sf=Ef.roughnessMap:Ef.metalnessMap?Sf=Ef.metalnessMap:Ef.alphaMap?Sf=Ef.alphaMap:Ef.emissiveMap&&(Sf=Ef.emissiveMap),void 0!==Sf){if(Sf.isWebGLRenderTarget&&(Sf=Sf.texture),!0===Sf.matrixAutoUpdate){var Af=Sf.offset,wf=Sf.repeat,Mf=Sf.rotation,Rf=Sf.center;Sf.matrix.setUvTransform(Af.x,Af.y,wf.x,wf.y,Mf,Rf.x,Rf.y)}Tf.uvTransform.value.copy(Sf.matrix)}}function jm(Tf,Ef){Tf.diffuse.value=Ef.color,Tf.opacity.value=Ef.opacity}function Xm(Tf,Ef){Tf.dashSize.value=Ef.dashSize,Tf.totalSize.value=Ef.dashSize+Ef.gapSize,Tf.scale.value=Ef.scale}function Ym(Tf,Ef){if(Tf.diffuse.value=Ef.color,Tf.opacity.value=Ef.opacity,Tf.size.value=Ef.size*Ng,Tf.scale.value=0.5*Bg,Tf.map.value=Ef.map,null!==Ef.map){if(!0===Ef.map.matrixAutoUpdate){var Sf=Ef.map.offset,Af=Ef.map.repeat,wf=Ef.map.rotation,Mf=Ef.map.center;Ef.map.matrix.setUvTransform(Sf.x,Sf.y,Af.x,Af.y,wf,Mf.x,Mf.y)}Tf.uvTransform.value.copy(Ef.map.matrix)}}function Zm(Tf,Ef){Tf.fogColor.value=Ef.color,Ef.isFog?(Tf.fogNear.value=Ef.near,Tf.fogFar.value=Ef.far):Ef.isFogExp2&&(Tf.fogDensity.value=Ef.density)}function Jm(Tf,Ef){Ef.emissiveMap&&(Tf.emissiveMap.value=Ef.emissiveMap)}function Qm(Tf,Ef){Tf.specular.value=Ef.specular,Tf.shininess.value=_Mathmax(Ef.shininess,1e-4),Ef.emissiveMap&&(Tf.emissiveMap.value=Ef.emissiveMap),Ef.bumpMap&&(Tf.bumpMap.value=Ef.bumpMap,Tf.bumpScale.value=Ef.bumpScale),Ef.normalMap&&(Tf.normalMap.value=Ef.normalMap,Tf.normalScale.value.copy(Ef.normalScale)),Ef.displacementMap&&(Tf.displacementMap.value=Ef.displacementMap,Tf.displacementScale.value=Ef.displacementScale,Tf.displacementBias.value=Ef.displacementBias)}function Km(Tf,Ef){Qm(Tf,Ef),Ef.gradientMap&&(Tf.gradientMap.value=Ef.gradientMap)}function $m(Tf,Ef){Tf.roughness.value=Ef.roughness,Tf.metalness.value=Ef.metalness,Ef.roughnessMap&&(Tf.roughnessMap.value=Ef.roughnessMap),Ef.metalnessMap&&(Tf.metalnessMap.value=Ef.metalnessMap),Ef.emissiveMap&&(Tf.emissiveMap.value=Ef.emissiveMap),Ef.bumpMap&&(Tf.bumpMap.value=Ef.bumpMap,Tf.bumpScale.value=Ef.bumpScale),Ef.normalMap&&(Tf.normalMap.value=Ef.normalMap,Tf.normalScale.value.copy(Ef.normalScale)),Ef.displacementMap&&(Tf.displacementMap.value=Ef.displacementMap,Tf.displacementScale.value=Ef.displacementScale,Tf.displacementBias.value=Ef.displacementBias),Ef.envMap&&(Tf.envMapIntensity.value=Ef.envMapIntensity)}function eg(Tf,Ef){Tf.clearCoat.value=Ef.clearCoat,Tf.clearCoatRoughness.value=Ef.clearCoatRoughness,$m(Tf,Ef)}function tg(Tf,Ef){Ef.displacementMap&&(Tf.displacementMap.value=Ef.displacementMap,Tf.displacementScale.value=Ef.displacementScale,Tf.displacementBias.value=Ef.displacementBias)}function rg(Tf,Ef){Ef.displacementMap&&(Tf.displacementMap.value=Ef.displacementMap,Tf.displacementScale.value=Ef.displacementScale,Tf.displacementBias.value=Ef.displacementBias),Tf.referencePosition.value.copy(Ef.referencePosition),Tf.nearDistance.value=Ef.nearDistance,Tf.farDistance.value=Ef.farDistance}function ag(Tf,Ef){Ef.bumpMap&&(Tf.bumpMap.value=Ef.bumpMap,Tf.bumpScale.value=Ef.bumpScale),Ef.normalMap&&(Tf.normalMap.value=Ef.normalMap,Tf.normalScale.value.copy(Ef.normalScale)),Ef.displacementMap&&(Tf.displacementMap.value=Ef.displacementMap,Tf.displacementScale.value=Ef.displacementScale,Tf.displacementBias.value=Ef.displacementBias)}function og(Tf,Ef){Tf.ambientLightColor.needsUpdate=Ef,Tf.directionalLights.needsUpdate=Ef,Tf.pointLights.needsUpdate=Ef,Tf.spotLights.needsUpdate=Ef,Tf.rectAreaLights.needsUpdate=Ef,Tf.hemisphereLights.needsUpdate=Ef}console.log("THREE.WebGLRenderer",Ps),Mm=Mm||{};var ng=Mm.canvas===void 0?document.createElementNS("http://www.w3.org/1999/xhtml","canvas"):Mm.canvas,sg=Mm.context===void 0?null:Mm.context,lg=Mm.alpha!==void 0&&Mm.alpha,dg=!(Mm.depth!==void 0)||Mm.depth,pg=!(Mm.stencil!==void 0)||Mm.stencil,cg=Mm.antialias!==void 0&&Mm.antialias,ug=!(Mm.premultipliedAlpha!==void 0)||Mm.premultipliedAlpha,mg=Mm.preserveDrawingBuffer!==void 0&&Mm.preserveDrawingBuffer,gg=Mm.powerPreference===void 0?"default":Mm.powerPreference,fg=[],hg=[],yg=null,_g=[],xg=[];this.domElement=ng,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=Gl,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var vg=this,bg=!1,Tg=null,Eg=null,Sg=-1,Ag="",wg=null,Mg=null,Rg=new W,Cg=new W,Pg=null,Lg=0,Ig=ng.width,Bg=ng.height,Ng=1,zg=new W(0,0,Ig,Bg),Dg=new W(0,0,Ig,Bg),Fg=!1,Ug=new Ye,Og=new Tr,kg=!1,Vg=!1,Gg=new F,Hg=new O,Wg={geometries:0,textures:0},jg={frame:0,calls:0,vertices:0,faces:0,points:0};this.info={render:jg,memory:Wg,programs:null};var qg;try{var Xg={alpha:lg,depth:dg,stencil:pg,antialias:cg,premultipliedAlpha:ug,preserveDrawingBuffer:mg,powerPreference:gg};if(ng.addEventListener("webglcontextlost",Pm,!1),ng.addEventListener("webglcontextrestored",Lm,!1),qg=sg||ng.getContext("webgl",Xg)||ng.getContext("experimental-webgl",Xg),null===qg)if(null!==ng.getContext("webgl"))throw new Error("Error creating WebGL context with your selected attributes.");else throw new Error("Error creating WebGL context.");void 0===qg.getShaderPrecisionFormat&&(qg.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Tf){console.error("THREE.WebGLRenderer: "+Tf.message)}var Yg,Zg,Jg,Qg,Kg,$g,ef,tf,rf,of,nf,lf,pf,uf,mf,gf,ff,hf;Cm();var yf=new xr(vg);this.vr=yf;var _f=new Ze(vg,tf,Zg.maxTextureSize);this.shadowMap=_f,this.getContext=function(){return qg},this.getContextAttributes=function(){return qg.getContextAttributes()},this.forceContextLoss=function(){var Tf=Yg.get("WEBGL_lose_context");Tf&&Tf.loseContext()},this.forceContextRestore=function(){var Tf=Yg.get("WEBGL_lose_context");Tf&&Tf.restoreContext()},this.getPixelRatio=function(){return Ng},this.setPixelRatio=function(Tf){void 0===Tf||(Ng=Tf,this.setSize(Ig,Bg,!1))},this.getSize=function(){return{width:Ig,height:Bg}},this.setSize=function(Tf,Ef,Sf){var Af=yf.getDevice();return Af&&Af.isPresenting?void console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):void(Ig=Tf,Bg=Ef,ng.width=Tf*Ng,ng.height=Ef*Ng,!1!==Sf&&(ng.style.width=Tf+"px",ng.style.height=Ef+"px"),this.setViewport(0,0,Tf,Ef))},this.getDrawingBufferSize=function(){return{width:Ig*Ng,height:Bg*Ng}},this.setDrawingBufferSize=function(Tf,Ef,Sf){Ig=Tf,Bg=Ef,Ng=Sf,ng.width=Tf*Sf,ng.height=Ef*Sf,this.setViewport(0,0,Tf,Ef)},this.setViewport=function(Tf,Ef,Sf,Af){zg.set(Tf,Bg-Ef-Af,Sf,Af),Jg.viewport(Rg.copy(zg).multiplyScalar(Ng))},this.setScissor=function(Tf,Ef,Sf,Af){Dg.set(Tf,Bg-Ef-Af,Sf,Af),Jg.scissor(Cg.copy(Dg).multiplyScalar(Ng))},this.setScissorTest=function(Tf){Jg.setScissorTest(Fg=Tf)},this.getClearColor=function(){return lf.getClearColor()},this.setClearColor=function(){lf.setClearColor.apply(lf,arguments)},this.getClearAlpha=function(){return lf.getClearAlpha()},this.setClearAlpha=function(){lf.setClearAlpha.apply(lf,arguments)},this.clear=function(Tf,Ef,Sf){var Af=0;(Tf===void 0||Tf)&&(Af|=qg.COLOR_BUFFER_BIT),(Ef===void 0||Ef)&&(Af|=qg.DEPTH_BUFFER_BIT),(Sf===void 0||Sf)&&(Af|=qg.STENCIL_BUFFER_BIT),qg.clear(Af)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(Tf,Ef,Sf,Af){this.setRenderTarget(Tf),this.clear(Ef,Sf,Af)},this.dispose=function(){ng.removeEventListener("webglcontextlost",Pm,!1),ng.removeEventListener("webglcontextrestored",Lm,!1),nf.dispose(),yf.dispose()},this.renderBufferImmediate=function(Tf,Ef,Sf){Jg.initAttributes();var Af=Qg.get(Tf);Tf.hasPositions&&!Af.position&&(Af.position=qg.createBuffer()),Tf.hasNormals&&!Af.normal&&(Af.normal=qg.createBuffer()),Tf.hasUvs&&!Af.uv&&(Af.uv=qg.createBuffer()),Tf.hasColors&&!Af.color&&(Af.color=qg.createBuffer());var wf=Ef.getAttributes();if(Tf.hasPositions&&(qg.bindBuffer(qg.ARRAY_BUFFER,Af.position),qg.bufferData(qg.ARRAY_BUFFER,Tf.positionArray,qg.DYNAMIC_DRAW),Jg.enableAttribute(wf.position),qg.vertexAttribPointer(wf.position,3,qg.FLOAT,!1,0,0)),Tf.hasNormals){if(qg.bindBuffer(qg.ARRAY_BUFFER,Af.normal),!Sf.isMeshPhongMaterial&&!Sf.isMeshStandardMaterial&&!Sf.isMeshNormalMaterial&&!0===Sf.flatShading)for(var Mf=0,Rf=3*Tf.count;Mf<Rf;Mf+=9){var Cf=Tf.normalArray,Pf=(Cf[Mf+0]+Cf[Mf+3]+Cf[Mf+6])/3,Lf=(Cf[Mf+1]+Cf[Mf+4]+Cf[Mf+7])/3,If=(Cf[Mf+2]+Cf[Mf+5]+Cf[Mf+8])/3;Cf[Mf+0]=Pf,Cf[Mf+1]=Lf,Cf[Mf+2]=If,Cf[Mf+3]=Pf,Cf[Mf+4]=Lf,Cf[Mf+5]=If,Cf[Mf+6]=Pf,Cf[Mf+7]=Lf,Cf[Mf+8]=If}qg.bufferData(qg.ARRAY_BUFFER,Tf.normalArray,qg.DYNAMIC_DRAW),Jg.enableAttribute(wf.normal),qg.vertexAttribPointer(wf.normal,3,qg.FLOAT,!1,0,0)}Tf.hasUvs&&Sf.map&&(qg.bindBuffer(qg.ARRAY_BUFFER,Af.uv),qg.bufferData(qg.ARRAY_BUFFER,Tf.uvArray,qg.DYNAMIC_DRAW),Jg.enableAttribute(wf.uv),qg.vertexAttribPointer(wf.uv,2,qg.FLOAT,!1,0,0)),Tf.hasColors&&Sf.vertexColors!==Xs&&(qg.bindBuffer(qg.ARRAY_BUFFER,Af.color),qg.bufferData(qg.ARRAY_BUFFER,Tf.colorArray,qg.DYNAMIC_DRAW),Jg.enableAttribute(wf.color),qg.vertexAttribPointer(wf.color,3,qg.FLOAT,!1,0,0)),Jg.disableUnusedAttributes(),qg.drawArrays(qg.TRIANGLES,0,Tf.count),Tf.count=0},this.renderBufferDirect=function(Tf,Ef,Sf,Af,wf,Mf){var Rf=wf.isMesh&&0>wf.matrixWorld.determinant();Jg.setMaterial(Af,Rf);var Cf=Hm(Tf,Ef,Af,wf),Pf=Sf.id+"_"+Cf.id+"_"+(!0===Af.wireframe),Lf=!1;Pf!=Ag&&(Ag=Pf,Lf=!0),wf.morphTargetInfluences&&(pf.update(wf,Sf,Af,Cf),Lf=!0);var If=Sf.index,Bf=Sf.attributes.position,Nf=1;!0===Af.wireframe&&(If=ef.getWireframeAttribute(Sf),Nf=2);var zf,Df=uf;null!==If&&(zf=$g.get(If),Df=mf,Df.setIndex(zf)),Lf&&(Dm(Af,Cf,Sf),null!==If&&qg.bindBuffer(qg.ELEMENT_ARRAY_BUFFER,zf.buffer));var Ff=0;null===If?Bf!==void 0&&(Ff=Bf.count):Ff=If.count;var Uf=Sf.drawRange.start*Nf,Of=Sf.drawRange.count*Nf,kf=null===Mf?0:Mf.start*Nf,Vf=null===Mf?Infinity:Mf.count*Nf,Gf=_Mathmax(Uf,kf),Hf=_Mathmin(Ff,Uf+Of,kf+Vf)-1,Wf=_Mathmax(0,Hf-Gf+1);if(0!==Wf){if(wf.isMesh){if(!0===Af.wireframe)Jg.setLineWidth(Af.wireframeLinewidth*Rm()),Df.setMode(qg.LINES);else switch(wf.drawMode){case Kd:Df.setMode(qg.TRIANGLES);break;case $d:Df.setMode(qg.TRIANGLE_STRIP);break;case ep:Df.setMode(qg.TRIANGLE_FAN);}}else if(wf.isLine){var jf=Af.linewidth;void 0===jf&&(jf=1),Jg.setLineWidth(jf*Rm()),wf.isLineSegments?Df.setMode(qg.LINES):wf.isLineLoop?Df.setMode(qg.LINE_LOOP):Df.setMode(qg.LINE_STRIP)}else wf.isPoints&&Df.setMode(qg.POINTS);Sf&&Sf.isInstancedBufferGeometry?0<Sf.maxInstancedCount&&Df.renderInstances(Sf,Gf,Wf):Df.render(Gf,Wf)}},this.compile=function(Tf,Ef){fg.length=0,hg.length=0,Tf.traverse(function(Sf){Sf.isLight&&(fg.push(Sf),Sf.castShadow&&hg.push(Sf))}),rf.setup(fg,hg,Ef),Tf.traverse(function(Sf){if(Sf.material)if(Array.isArray(Sf.material))for(var Af=0;Af<Sf.material.length;Af++)Gm(Sf.material[Af],Tf.fog,Sf);else Gm(Sf.material,Tf.fog,Sf)})};var xf=!1,vf=null;this.animate=function(Tf){vf=Tf,Fm()},this.render=function(Tf,Ef,Sf,Af){if(!(Ef&&Ef.isCamera))return void console.error("THREE.WebGLRenderer.render: defaultCamera is not an instance of THREE.Camera.");if(!bg){Ag="",Sg=-1,wg=null,!0===Tf.autoUpdate&&Tf.updateMatrixWorld(),null===Ef.parent&&Ef.updateMatrixWorld(),yf.enabled&&(Ef=yf.getCamera(Ef)),Gg.multiplyMatrices(Ef.projectionMatrix,Ef.matrixWorldInverse),Ug.setFromMatrix(Gg),fg.length=0,hg.length=0,_g.length=0,xg.length=0,Vg=this.localClippingEnabled,kg=Og.init(this.clippingPlanes,Vg,Ef),yg=nf.get(Tf,Ef),yg.init(),Om(Tf,Ef,vg.sortObjects),!0===vg.sortObjects&&yg.sort(),Kg.updateVideoTextures(),kg&&Og.beginShadows(),_f.render(hg,Tf,Ef),rf.setup(fg,hg,Ef),kg&&Og.endShadows(),jg.frame++,jg.calls=0,jg.vertices=0,jg.faces=0,jg.points=0,void 0===Sf&&(Sf=null),this.setRenderTarget(Sf),lf.render(yg,Tf,Ef,Af);var wf=yg.opaque,Mf=yg.transparent;if(Tf.overrideMaterial){var Rf=Tf.overrideMaterial;wf.length&&km(wf,Tf,Ef,Rf),Mf.length&&km(Mf,Tf,Ef,Rf)}else wf.length&&km(wf,Tf,Ef),Mf.length&&km(Mf,Tf,Ef);ff.render(_g,Tf,Ef),gf.render(xg,Tf,Ef,Rg),Sf&&Kg.updateRenderTargetMipmap(Sf),Jg.buffers.depth.setTest(!0),Jg.buffers.depth.setMask(!0),Jg.buffers.color.setMask(!0),Jg.setPolygonOffset(!1),yf.enabled&&yf.submitFrame()}},this.setFaceCulling=function(Tf,Ef){Jg.setCullFace(Tf),Jg.setFlipSided(Ef===Fs)},this.allocTextureUnit=function(){var Tf=Lg;return Tf>=Zg.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+Tf+" texture units while this GPU supports only "+Zg.maxTextures),Lg+=1,Tf},this.setTexture2D=function(){var Tf=!1;return function(Sf,Af){Sf&&Sf.isWebGLRenderTarget&&(!Tf&&(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),Tf=!0),Sf=Sf.texture),Kg.setTexture2D(Sf,Af)}}(),this.setTexture=function(){var Tf=!1;return function(Sf,Af){Tf||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),Tf=!0),Kg.setTexture2D(Sf,Af)}}(),this.setTextureCube=function(){var Tf=!1;return function(Sf,Af){Sf&&Sf.isWebGLRenderTargetCube&&(!Tf&&(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),Tf=!0),Sf=Sf.texture),Sf&&Sf.isCubeTexture||Array.isArray(Sf.image)&&6===Sf.image.length?Kg.setTextureCube(Sf,Af):Kg.setTextureCubeDynamic(Sf,Af)}}(),this.getRenderTarget=function(){return Tg},this.setRenderTarget=function(Tf){Tg=Tf,Tf&&void 0===Qg.get(Tf).__webglFramebuffer&&Kg.setupRenderTarget(Tf);var Ef=null,Sf=!1;if(Tf){var Af=Qg.get(Tf).__webglFramebuffer;Tf.isWebGLRenderTargetCube?(Ef=Af[Tf.activeCubeFace],Sf=!0):Ef=Af,Rg.copy(Tf.viewport),Cg.copy(Tf.scissor),Pg=Tf.scissorTest}else Rg.copy(zg).multiplyScalar(Ng),Cg.copy(Dg).multiplyScalar(Ng),Pg=Fg;if(Eg!==Ef&&(qg.bindFramebuffer(qg.FRAMEBUFFER,Ef),Eg=Ef),Jg.viewport(Rg),Jg.scissor(Cg),Jg.setScissorTest(Pg),Sf){var wf=Qg.get(Tf.texture);qg.framebufferTexture2D(qg.FRAMEBUFFER,qg.COLOR_ATTACHMENT0,qg.TEXTURE_CUBE_MAP_POSITIVE_X+Tf.activeCubeFace,wf.__webglTexture,Tf.activeMipMapLevel)}},this.readRenderTargetPixels=function(Tf,Ef,Sf,Af,wf,Mf){if(!(Tf&&Tf.isWebGLRenderTarget))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");var Rf=Qg.get(Tf).__webglFramebuffer;if(Rf){var Cf=!1;Rf!==Eg&&(qg.bindFramebuffer(qg.FRAMEBUFFER,Rf),Cf=!0);try{var Pf=Tf.texture,Lf=Pf.format,If=Pf.type;if(Lf!==Rd&&hf.convert(Lf)!==qg.getParameter(qg.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(If!==md&&hf.convert(If)!==qg.getParameter(qg.IMPLEMENTATION_COLOR_READ_TYPE)&&!(If===xd&&(Yg.get("OES_texture_float")||Yg.get("WEBGL_color_buffer_float")))&&!(If===vd&&Yg.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");qg.checkFramebufferStatus(qg.FRAMEBUFFER)===qg.FRAMEBUFFER_COMPLETE?0<=Ef&&Ef<=Tf.width-Af&&0<=Sf&&Sf<=Tf.height-wf&&qg.readPixels(Ef,Sf,Af,wf,hf.convert(Lf),hf.convert(If),Mf):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{Cf&&qg.bindFramebuffer(qg.FRAMEBUFFER,Eg)}}}}function Ar(Mm,Rm){this.name="",this.color=new Fe(Mm),this.density=Rm===void 0?2.5e-4:Rm}function wr(Mm,Rm,Cm){this.name="",this.color=new Fe(Mm),this.near=Rm===void 0?1:Rm,this.far=Cm===void 0?1e3:Cm}function Mr(){$e.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function Rr(Mm,Rm,Cm,Pm,Lm){$e.call(this),this.lensFlares=[],this.positionScreen=new O,this.customUpdateCallback=void 0,Mm!==void 0&&this.add(Mm,Rm,Cm,Pm,Lm)}function Cr(Mm){Ge.call(this),this.type="SpriteMaterial",this.color=new Fe(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(Mm)}function Pr(Mm){$e.call(this),this.type="Sprite",this.material=Mm===void 0?new Cr:Mm}function Lr(){$e.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function Ir(Mm,Rm){if(Mm=Mm||[],this.bones=Mm.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===Rm)this.calculateInverses();else if(this.bones.length===Rm.length)this.boneInverses=Rm.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var Cm=0,Pm=this.bones.length;Cm<Pm;Cm++)this.boneInverses.push(new F)}}function Br(){$e.call(this),this.type="Bone"}function Nr(Mm,Rm){Bt.call(this,Mm,Rm),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new F,this.bindMatrixInverse=new F;var Cm=this.initBones(),Pm=new Ir(Cm);this.bind(Pm,this.matrixWorld),this.normalizeSkinWeights()}function zr(Mm){Ge.call(this),this.type="LineBasicMaterial",this.color=new Fe(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(Mm)}function Dr(Mm,Rm,Cm){return 1===Cm?(console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new Fr(Mm,Rm)):void($e.call(this),this.type="Line",this.geometry=Mm===void 0?new Tt:Mm,this.material=Rm===void 0?new zr({color:16777215*Math.random()}):Rm)}function Fr(Mm,Rm){Dr.call(this,Mm,Rm),this.type="LineSegments"}function Ur(Mm,Rm){Dr.call(this,Mm,Rm),this.type="LineLoop"}function Or(Mm){Ge.call(this),this.type="PointsMaterial",this.color=new Fe(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(Mm)}function kr(Mm,Rm){$e.call(this),this.type="Points",this.geometry=Mm===void 0?new Tt:Mm,this.material=Rm===void 0?new Or({color:16777215*Math.random()}):Rm}function Vr(){$e.call(this),this.type="Group"}function Gr(Mm,Rm,Cm,Pm,Lm,Im,Bm,Nm,zm){function Dm(){Mm.removeEventListener("loadeddata",Dm,!1),Fm.needsUpdate=!0}H.call(this,Mm,Rm,Cm,Pm,Lm,Im,Bm,Nm,zm),this.generateMipmaps=!1;var Fm=this;Mm.addEventListener("loadeddata",Dm,!1)}function Hr(Mm,Rm,Cm,Pm,Lm,Im,Bm,Nm,zm,Dm,Fm,Um){H.call(this,null,Im,Bm,Nm,zm,Dm,Pm,Lm,Fm,Um),this.image={width:Rm,height:Cm},this.mipmaps=Mm,this.flipY=!1,this.generateMipmaps=!1}function Wr(Mm,Rm,Cm,Pm,Lm,Im,Bm,Nm,zm,Dm){if(Dm=void 0===Dm?Id:Dm,Dm!==Id&&Dm!==Bd)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===Cm&&Dm===Id&&(Cm=hd),void 0===Cm&&Dm===Bd&&(Cm=Ad),H.call(this,null,Pm,Lm,Im,Bm,Nm,Dm,Cm,zm),this.image={width:Mm,height:Rm},this.magFilter=void 0===Bm?nd:Bm,this.minFilter=void 0===Nm?nd:Nm,this.flipY=!1,this.generateMipmaps=!1}function jr(Mm){Tt.call(this),this.type="WireframeGeometry";var Rm=[],Cm,Pm,Lm,Im,Bm,Nm=[0,0],zm={},Dm,Fm,Um,Om,km=["a","b","c"],Vm;if(Mm&&Mm.isGeometry){var Gm=Mm.faces;for(Cm=0,Lm=Gm.length;Cm<Lm;Cm++){var Hm=Gm[Cm];for(Pm=0;3>Pm;Pm++)Fm=Hm[km[Pm]],Um=Hm[km[(Pm+1)%3]],Nm[0]=_Mathmin(Fm,Um),Nm[1]=_Mathmax(Fm,Um),Om=Nm[0]+","+Nm[1],void 0===zm[Om]&&(zm[Om]={index1:Nm[0],index2:Nm[1]})}for(Om in zm)Dm=zm[Om],Vm=Mm.vertices[Dm.index1],Rm.push(Vm.x,Vm.y,Vm.z),Vm=Mm.vertices[Dm.index2],Rm.push(Vm.x,Vm.y,Vm.z)}else if(Mm&&Mm.isBufferGeometry){var Wm,jm,Xm,Ym,Zm,Jm,Qm,Km;if(Vm=new O,null!==Mm.index){for(Wm=Mm.attributes.position,jm=Mm.index,Xm=Mm.groups,0===Xm.length&&(Xm=[{start:0,count:jm.count,materialIndex:0}]),(Im=0,Bm=Xm.length);Im<Bm;++Im)for(Ym=Xm[Im],Zm=Ym.start,Jm=Ym.count,(Cm=Zm,Lm=Zm+Jm);Cm<Lm;Cm+=3)for(Pm=0;3>Pm;Pm++)Fm=jm.getX(Cm+Pm),Um=jm.getX(Cm+(Pm+1)%3),Nm[0]=_Mathmin(Fm,Um),Nm[1]=_Mathmax(Fm,Um),Om=Nm[0]+","+Nm[1],void 0===zm[Om]&&(zm[Om]={index1:Nm[0],index2:Nm[1]});for(Om in zm)Dm=zm[Om],Vm.fromBufferAttribute(Wm,Dm.index1),Rm.push(Vm.x,Vm.y,Vm.z),Vm.fromBufferAttribute(Wm,Dm.index2),Rm.push(Vm.x,Vm.y,Vm.z)}else for(Wm=Mm.attributes.position,Cm=0,Lm=Wm.count/3;Cm<Lm;Cm++)for(Pm=0;3>Pm;Pm++)Qm=3*Cm+Pm,Vm.fromBufferAttribute(Wm,Qm),Rm.push(Vm.x,Vm.y,Vm.z),Km=3*Cm+(Pm+1)%3,Vm.fromBufferAttribute(Wm,Km),Rm.push(Vm.x,Vm.y,Vm.z)}this.addAttribute("position",new _t(Rm,3))}function qr(Mm,Rm,Cm){ot.call(this),this.type="ParametricGeometry",this.parameters={func:Mm,slices:Rm,stacks:Cm},this.fromBufferGeometry(new Xr(Mm,Rm,Cm)),this.mergeVertices()}function Xr(Mm,Rm,Cm){Tt.call(this),this.type="ParametricBufferGeometry",this.parameters={func:Mm,slices:Rm,stacks:Cm};var Pm=[],Lm=[],Im=[],Bm=[],Nm=1e-5,zm=new O,Dm=new O,Fm=new O,Um=new O,Om=new O,km,Vm,Gm=Rm+1;for(km=0;km<=Cm;km++){var Hm=km/Cm;for(Vm=0;Vm<=Rm;Vm++){var Wm=Vm/Rm;Dm=Mm(Wm,Hm,Dm),Lm.push(Dm.x,Dm.y,Dm.z),0<=Wm-Nm?(Fm=Mm(Wm-Nm,Hm,Fm),Um.subVectors(Dm,Fm)):(Fm=Mm(Wm+Nm,Hm,Fm),Um.subVectors(Fm,Dm)),0<=Hm-Nm?(Fm=Mm(Wm,Hm-Nm,Fm),Om.subVectors(Dm,Fm)):(Fm=Mm(Wm,Hm+Nm,Fm),Om.subVectors(Fm,Dm)),zm.crossVectors(Um,Om).normalize(),Im.push(zm.x,zm.y,zm.z),Bm.push(Wm,Hm)}}for(km=0;km<Cm;km++)for(Vm=0;Vm<Rm;Vm++){var jm=km*Gm+Vm,Xm=km*Gm+Vm+1,Ym=(km+1)*Gm+Vm+1,Zm=(km+1)*Gm+Vm;Pm.push(jm,Xm,Zm),Pm.push(Xm,Ym,Zm)}this.setIndex(Pm),this.addAttribute("position",new _t(Lm,3)),this.addAttribute("normal",new _t(Im,3)),this.addAttribute("uv",new _t(Bm,2))}function Yr(Mm,Rm,Cm,Pm){ot.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:Mm,indices:Rm,radius:Cm,detail:Pm},this.fromBufferGeometry(new Zr(Mm,Rm,Cm,Pm)),this.mergeVertices()}function Zr(Mm,Rm,Cm,Pm){function Im(Wm,jm,Xm,Ym){var Zm=_Mathpow(2,Ym),Jm=[],Qm,Km;for(Qm=0;Qm<=Zm;Qm++){Jm[Qm]=[];var $m=Wm.clone().lerp(Xm,Qm/Zm),eg=jm.clone().lerp(Xm,Qm/Zm),tg=Zm-Qm;for(Km=0;Km<=tg;Km++)Jm[Qm][Km]=0===Km&&Qm===Zm?$m:$m.clone().lerp(eg,Km/tg)}for(Qm=0;Qm<Zm;Qm++)for(Km=0;Km<2*(Zm-Qm)-1;Km++){var rg=_Mathfloor(Km/2);0==Km%2?(Dm(Jm[Qm][rg+1]),Dm(Jm[Qm+1][rg]),Dm(Jm[Qm][rg])):(Dm(Jm[Qm][rg+1]),Dm(Jm[Qm+1][rg+1]),Dm(Jm[Qm+1][rg]))}}function zm(){for(var Wm=0;Wm<Hm.length;Wm+=6){var jm=Hm[Wm+0],Xm=Hm[Wm+2],Ym=Hm[Wm+4],Zm=_Mathmax(jm,Xm,Ym),Jm=_Mathmin(jm,Xm,Ym);0.9<Zm&&0.1>Jm&&(0.2>jm&&(Hm[Wm+0]+=1),0.2>Xm&&(Hm[Wm+2]+=1),0.2>Ym&&(Hm[Wm+4]+=1))}}function Dm(Wm){Gm.push(Wm.x,Wm.y,Wm.z)}function Fm(Wm,jm){var Xm=3*Wm;jm.x=Mm[Xm+0],jm.y=Mm[Xm+1],jm.z=Mm[Xm+2]}function Um(){for(var Wm=new O,jm=new O,Xm=new O,Ym=new O,Zm=new D,Jm=new D,Qm=new D,Km=0,$m=0;Km<Gm.length;Km+=9,$m+=6){Wm.set(Gm[Km+0],Gm[Km+1],Gm[Km+2]),jm.set(Gm[Km+3],Gm[Km+4],Gm[Km+5]),Xm.set(Gm[Km+6],Gm[Km+7],Gm[Km+8]),Zm.set(Hm[$m+0],Hm[$m+1]),Jm.set(Hm[$m+2],Hm[$m+3]),Qm.set(Hm[$m+4],Hm[$m+5]),Ym.copy(Wm).add(jm).add(Xm).divideScalar(3);var eg=km(Ym);Om(Zm,$m+0,Wm,eg),Om(Jm,$m+2,jm,eg),Om(Qm,$m+4,Xm,eg)}}function Om(Wm,jm,Xm,Ym){0>Ym&&1===Wm.x&&(Hm[jm]=Wm.x-1),0===Xm.x&&0===Xm.z&&(Hm[jm]=Ym/2/_MathPI+0.5)}function km(Wm){return _Mathatan(Wm.z,-Wm.x)}function Vm(Wm){return _Mathatan(-Wm.y,_Mathsqrt(Wm.x*Wm.x+Wm.z*Wm.z))}Tt.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:Mm,indices:Rm,radius:Cm,detail:Pm},Cm=Cm||1,Pm=Pm||0;var Gm=[],Hm=[];(function(Wm){for(var jm=new O,Xm=new O,Ym=new O,Zm=0;Zm<Rm.length;Zm+=3)Fm(Rm[Zm+0],jm),Fm(Rm[Zm+1],Xm),Fm(Rm[Zm+2],Ym),Im(jm,Xm,Ym,Wm)})(Pm),function(Wm){for(var jm=new O,Xm=0;Xm<Gm.length;Xm+=3)jm.x=Gm[Xm+0],jm.y=Gm[Xm+1],jm.z=Gm[Xm+2],jm.normalize().multiplyScalar(Wm),Gm[Xm+0]=jm.x,Gm[Xm+1]=jm.y,Gm[Xm+2]=jm.z}(Cm),function(){for(var Wm=new O,jm=0;jm<Gm.length;jm+=3){Wm.x=Gm[jm+0],Wm.y=Gm[jm+1],Wm.z=Gm[jm+2];var Xm=km(Wm)/2/_MathPI+0.5,Ym=Vm(Wm)/_MathPI+0.5;Hm.push(Xm,1-Ym)}Um(),zm()}(),this.addAttribute("position",new _t(Gm,3)),this.addAttribute("normal",new _t(Gm.slice(),3)),this.addAttribute("uv",new _t(Hm,2)),0===Pm?this.computeVertexNormals():this.normalizeNormals()}function Jr(Mm,Rm){ot.call(this),this.type="TetrahedronGeometry",this.parameters={radius:Mm,detail:Rm},this.fromBufferGeometry(new Qr(Mm,Rm)),this.mergeVertices()}function Qr(Mm,Rm){Zr.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],Mm,Rm),this.type="TetrahedronBufferGeometry",this.parameters={radius:Mm,detail:Rm}}function Kr(Mm,Rm){ot.call(this),this.type="OctahedronGeometry",this.parameters={radius:Mm,detail:Rm},this.fromBufferGeometry(new $r(Mm,Rm)),this.mergeVertices()}function $r(Mm,Rm){Zr.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],Mm,Rm),this.type="OctahedronBufferGeometry",this.parameters={radius:Mm,detail:Rm}}function ra(Mm,Rm){ot.call(this),this.type="IcosahedronGeometry",this.parameters={radius:Mm,detail:Rm},this.fromBufferGeometry(new aa(Mm,Rm)),this.mergeVertices()}function aa(Mm,Rm){var Cm=(1+2.23606797749979)/2;Zr.call(this,[-1,Cm,0,1,Cm,0,-1,-Cm,0,1,-Cm,0,0,-1,Cm,0,1,Cm,0,-1,-Cm,0,1,-Cm,Cm,0,-1,Cm,0,1,-Cm,0,-1,-Cm,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],Mm,Rm),this.type="IcosahedronBufferGeometry",this.parameters={radius:Mm,detail:Rm}}function oa(Mm,Rm){ot.call(this),this.type="DodecahedronGeometry",this.parameters={radius:Mm,detail:Rm},this.fromBufferGeometry(new ia(Mm,Rm)),this.mergeVertices()}function ia(Mm,Rm){var Cm=(1+2.23606797749979)/2,Pm=1/Cm;Zr.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-Pm,-Cm,0,-Pm,Cm,0,Pm,-Cm,0,Pm,Cm,-Pm,-Cm,0,-Pm,Cm,0,Pm,-Cm,0,Pm,Cm,0,-Cm,0,-Pm,Cm,0,-Pm,-Cm,0,Pm,Cm,0,Pm],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],Mm,Rm),this.type="DodecahedronBufferGeometry",this.parameters={radius:Mm,detail:Rm}}function sa(Mm,Rm,Cm,Pm,Lm,Im){ot.call(this),this.type="TubeGeometry",this.parameters={path:Mm,tubularSegments:Rm,radius:Cm,radialSegments:Pm,closed:Lm},Im!==void 0&&console.warn("THREE.TubeGeometry: taper has been removed.");var Bm=new la(Mm,Rm,Cm,Pm,Lm);this.tangents=Bm.tangents,this.normals=Bm.normals,this.binormals=Bm.binormals,this.fromBufferGeometry(Bm),this.mergeVertices()}function la(Mm,Rm,Cm,Pm,Lm){function Bm(Ym){km=Mm.getPointAt(Ym/Rm,km);var Zm=Dm.normals[Ym],Jm=Dm.binormals[Ym];for(Gm=0;Gm<=Pm;Gm++){var Qm=2*(Gm/Pm*_MathPI),Km=_Mathsin(Qm),$m=-_Mathcos(Qm);Um.x=$m*Zm.x+Km*Jm.x,Um.y=$m*Zm.y+Km*Jm.y,Um.z=$m*Zm.z+Km*Jm.z,Um.normalize(),Wm.push(Um.x,Um.y,Um.z),Fm.x=km.x+Cm*Um.x,Fm.y=km.y+Cm*Um.y,Fm.z=km.z+Cm*Um.z,Hm.push(Fm.x,Fm.y,Fm.z)}}function Nm(){for(Gm=1;Gm<=Rm;Gm++)for(Vm=1;Vm<=Pm;Vm++){var Ym=(Pm+1)*(Gm-1)+(Vm-1),Zm=(Pm+1)*Gm+(Vm-1),Jm=(Pm+1)*Gm+Vm,Qm=(Pm+1)*(Gm-1)+Vm;Xm.push(Ym,Zm,Qm),Xm.push(Zm,Jm,Qm)}}function zm(){for(Vm=0;Vm<=Rm;Vm++)for(Gm=0;Gm<=Pm;Gm++)Om.x=Vm/Rm,Om.y=Gm/Pm,jm.push(Om.x,Om.y)}Tt.call(this),this.type="TubeBufferGeometry",this.parameters={path:Mm,tubularSegments:Rm,radius:Cm,radialSegments:Pm,closed:Lm},Rm=Rm||64,Cm=Cm||1,Pm=Pm||8,Lm=Lm||!1;var Dm=Mm.computeFrenetFrames(Rm,Lm);this.tangents=Dm.tangents,this.normals=Dm.normals,this.binormals=Dm.binormals;var Fm=new O,Um=new O,Om=new D,km=new O,Vm,Gm,Hm=[],Wm=[],jm=[],Xm=[];(function(){for(Vm=0;Vm<Rm;Vm++)Bm(Vm);Bm(!1===Lm?Rm:0),zm(),Nm()})(),this.setIndex(Xm),this.addAttribute("position",new _t(Hm,3)),this.addAttribute("normal",new _t(Wm,3)),this.addAttribute("uv",new _t(jm,2))}function pa(Mm,Rm,Cm,Pm,Lm,Im,Bm){ot.call(this),this.type="TorusKnotGeometry",this.parameters={radius:Mm,tube:Rm,tubularSegments:Cm,radialSegments:Pm,p:Lm,q:Im},Bm!==void 0&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new ua(Mm,Rm,Cm,Pm,Lm,Im)),this.mergeVertices()}function ua(Mm,Rm,Cm,Pm,Lm,Im){function Bm(rg,ag,og,ig,ng){var sg=_Mathcos(rg),lg=_Mathsin(rg),dg=og/ag*rg,pg=_Mathcos(dg);ng.x=0.5*(ig*(2+pg))*sg,ng.y=0.5*(ig*(2+pg)*lg),ng.z=0.5*(ig*_Mathsin(dg))}Tt.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:Mm,tube:Rm,tubularSegments:Cm,radialSegments:Pm,p:Lm,q:Im},Mm=Mm||1,Rm=Rm||0.4,Cm=_Mathfloor(Cm)||64,Pm=_Mathfloor(Pm)||8,Lm=Lm||2,Im=Im||3;var Nm=[],zm=[],Dm=[],Fm=[],Um,Om,km=new O,Vm=new O,Gm=new O,Hm=new O,Wm=new O,jm=new O,Xm=new O;for(Um=0;Um<=Cm;++Um){var Ym=2*(Um/Cm*Lm*_MathPI);for(Bm(Ym,Lm,Im,Mm,Gm),Bm(Ym+0.01,Lm,Im,Mm,Hm),jm.subVectors(Hm,Gm),Xm.addVectors(Hm,Gm),Wm.crossVectors(jm,Xm),Xm.crossVectors(Wm,jm),Wm.normalize(),Xm.normalize(),Om=0;Om<=Pm;++Om){var Zm=2*(Om/Pm*_MathPI),Jm=-Rm*_Mathcos(Zm),Qm=Rm*_Mathsin(Zm);km.x=Gm.x+(Jm*Xm.x+Qm*Wm.x),km.y=Gm.y+(Jm*Xm.y+Qm*Wm.y),km.z=Gm.z+(Jm*Xm.z+Qm*Wm.z),zm.push(km.x,km.y,km.z),Vm.subVectors(km,Gm).normalize(),Dm.push(Vm.x,Vm.y,Vm.z),Fm.push(Um/Cm),Fm.push(Om/Pm)}}for(Om=1;Om<=Cm;Om++)for(Um=1;Um<=Pm;Um++){var Km=(Pm+1)*(Om-1)+(Um-1),$m=(Pm+1)*Om+(Um-1),eg=(Pm+1)*Om+Um,tg=(Pm+1)*(Om-1)+Um;Nm.push(Km,$m,tg),Nm.push($m,eg,tg)}this.setIndex(Nm),this.addAttribute("position",new _t(zm,3)),this.addAttribute("normal",new _t(Dm,3)),this.addAttribute("uv",new _t(Fm,2))}function ma(Mm,Rm,Cm,Pm,Lm){ot.call(this),this.type="TorusGeometry",this.parameters={radius:Mm,tube:Rm,radialSegments:Cm,tubularSegments:Pm,arc:Lm},this.fromBufferGeometry(new ga(Mm,Rm,Cm,Pm,Lm)),this.mergeVertices()}function ga(Mm,Rm,Cm,Pm,Lm){Tt.call(this),this.type="TorusBufferGeometry",this.parameters={radius:Mm,tube:Rm,radialSegments:Cm,tubularSegments:Pm,arc:Lm},Mm=Mm||1,Rm=Rm||0.4,Cm=_Mathfloor(Cm)||8,Pm=_Mathfloor(Pm)||6,Lm=Lm||2*_MathPI;var Im=[],Bm=[],Nm=[],zm=[],Dm=new O,Fm=new O,Um=new O,Om,km;for(Om=0;Om<=Cm;Om++)for(km=0;km<=Pm;km++){var Vm=km/Pm*Lm,Gm=2*(Om/Cm*_MathPI);Fm.x=(Mm+Rm*_Mathcos(Gm))*_Mathcos(Vm),Fm.y=(Mm+Rm*_Mathcos(Gm))*_Mathsin(Vm),Fm.z=Rm*_Mathsin(Gm),Bm.push(Fm.x,Fm.y,Fm.z),Dm.x=Mm*_Mathcos(Vm),Dm.y=Mm*_Mathsin(Vm),Um.subVectors(Fm,Dm).normalize(),Nm.push(Um.x,Um.y,Um.z),zm.push(km/Pm),zm.push(Om/Cm)}for(Om=1;Om<=Cm;Om++)for(km=1;km<=Pm;km++){var Hm=(Pm+1)*Om+km-1,Wm=(Pm+1)*(Om-1)+km-1,jm=(Pm+1)*(Om-1)+km,Xm=(Pm+1)*Om+km;Im.push(Hm,Wm,Xm),Im.push(Wm,jm,Xm)}this.setIndex(Im),this.addAttribute("position",new _t(Bm,3)),this.addAttribute("normal",new _t(Nm,3)),this.addAttribute("uv",new _t(zm,2))}function fa(Mm,Rm,Cm,Pm,Lm){var Im,Bm;if(Lm===0<Wa(Mm,Rm,Cm,Pm))for(Im=Rm;Im<Cm;Im+=Pm)Bm=Va(Im,Mm[Im],Mm[Im+1],Bm);else for(Im=Cm-Pm;Im>=Rm;Im-=Pm)Bm=Va(Im,Mm[Im],Mm[Im+1],Bm);return Bm&&za(Bm,Bm.next)&&(Ga(Bm),Bm=Bm.next),Bm}function ha(Mm,Rm){if(!Mm)return Mm;Rm||(Rm=Mm);var Cm=Mm,Pm;do if(Pm=!1,!Cm.steiner&&(za(Cm,Cm.next)||0===Na(Cm.prev,Cm,Cm.next))){if(Ga(Cm),Cm=Rm=Cm.prev,Cm===Cm.next)break;Pm=!0}else Cm=Cm.next;while(Pm||Cm!==Rm);return Rm}function ya(Mm,Rm,Cm,Pm,Lm,Im,Bm){if(Mm){!Bm&&Im&&Ra(Mm,Pm,Lm,Im);for(var Nm=Mm,zm,Dm;Mm.prev!==Mm.next;){if(zm=Mm.prev,Dm=Mm.next,Im?xa(Mm,Pm,Lm,Im):_a(Mm)){Rm.push(zm.i/Cm),Rm.push(Mm.i/Cm),Rm.push(Dm.i/Cm),Ga(Mm),Mm=Dm.next,Nm=Dm.next;continue}if(Mm=Dm,Mm===Nm){Bm?1===Bm?(Mm=Ta(Mm,Rm,Cm),ya(Mm,Rm,Cm,Pm,Lm,Im,2)):2===Bm&&Ea(Mm,Rm,Cm,Pm,Lm,Im):ya(ha(Mm),Rm,Cm,Pm,Lm,Im,1);break}}}}function _a(Mm){var Rm=Mm.prev,Cm=Mm,Pm=Mm.next;if(0<=Na(Rm,Cm,Pm))return!1;for(var Lm=Mm.next.next;Lm!==Mm.prev;){if(Ia(Rm.x,Rm.y,Cm.x,Cm.y,Pm.x,Pm.y,Lm.x,Lm.y)&&0<=Na(Lm.prev,Lm,Lm.next))return!1;Lm=Lm.next}return!0}function xa(Mm,Rm,Cm,Pm){var Lm=Mm.prev,Im=Mm,Bm=Mm.next;if(0<=Na(Lm,Im,Bm))return!1;for(var Nm=Lm.x<Im.x?Lm.x<Bm.x?Lm.x:Bm.x:Im.x<Bm.x?Im.x:Bm.x,zm=Lm.y<Im.y?Lm.y<Bm.y?Lm.y:Bm.y:Im.y<Bm.y?Im.y:Bm.y,Dm=Lm.x>Im.x?Lm.x>Bm.x?Lm.x:Bm.x:Im.x>Bm.x?Im.x:Bm.x,Fm=Lm.y>Im.y?Lm.y>Bm.y?Lm.y:Bm.y:Im.y>Bm.y?Im.y:Bm.y,Um=Pa(Nm,zm,Rm,Cm,Pm),Om=Pa(Dm,Fm,Rm,Cm,Pm),km=Mm.nextZ;km&&km.z<=Om;){if(km!==Mm.prev&&km!==Mm.next&&Ia(Lm.x,Lm.y,Im.x,Im.y,Bm.x,Bm.y,km.x,km.y)&&0<=Na(km.prev,km,km.next))return!1;km=km.nextZ}for(km=Mm.prevZ;km&&km.z>=Um;){if(km!==Mm.prev&&km!==Mm.next&&Ia(Lm.x,Lm.y,Im.x,Im.y,Bm.x,Bm.y,km.x,km.y)&&0<=Na(km.prev,km,km.next))return!1;km=km.prevZ}return!0}function Ta(Mm,Rm,Cm){var Pm=Mm;do{var Lm=Pm.prev,Im=Pm.next.next;!za(Lm,Im)&&Da(Lm,Pm,Pm.next,Im)&&Ua(Lm,Im)&&Ua(Im,Lm)&&(Rm.push(Lm.i/Cm),Rm.push(Pm.i/Cm),Rm.push(Im.i/Cm),Ga(Pm),Ga(Pm.next),Pm=Mm=Im),Pm=Pm.next}while(Pm!==Mm);return Pm}function Ea(Mm,Rm,Cm,Pm,Lm,Im){var Bm=Mm;do{for(var Nm=Bm.next.next;Nm!==Bm.prev;){if(Bm.i!==Nm.i&&Ba(Bm,Nm)){var zm=ka(Bm,Nm);return Bm=ha(Bm,Bm.next),zm=ha(zm,zm.next),ya(Bm,Rm,Cm,Pm,Lm,Im),void ya(zm,Rm,Cm,Pm,Lm,Im)}Nm=Nm.next}Bm=Bm.next}while(Bm!==Mm)}function Sa(Mm,Rm,Cm,Pm){var Lm=[],Im,Bm,Nm,zm,Dm;for(Im=0,Bm=Rm.length;Im<Bm;Im++)Nm=Rm[Im]*Pm,zm=Im<Bm-1?Rm[Im+1]*Pm:Mm.length,Dm=fa(Mm,Nm,zm,Pm,!1),Dm===Dm.next&&(Dm.steiner=!0),Lm.push(La(Dm));for(Lm.sort(Aa),Im=0;Im<Lm.length;Im++)wa(Lm[Im],Cm),Cm=ha(Cm,Cm.next);return Cm}function Aa(Mm,Rm){return Mm.x-Rm.x}function wa(Mm,Rm){if(Rm=Ma(Mm,Rm),Rm){var Cm=ka(Rm,Mm);ha(Cm,Cm.next)}}function Ma(Mm,Rm){var Cm=Rm,Pm=Mm.x,Lm=Mm.y,Im=-Infinity,Bm;do{if(Lm<=Cm.y&&Lm>=Cm.next.y&&Cm.next.y!==Cm.y){var Nm=Cm.x+(Lm-Cm.y)*(Cm.next.x-Cm.x)/(Cm.next.y-Cm.y);if(Nm<=Pm&&Nm>Im){if(Im=Nm,Nm===Pm){if(Lm===Cm.y)return Cm;if(Lm===Cm.next.y)return Cm.next}Bm=Cm.x<Cm.next.x?Cm:Cm.next}}Cm=Cm.next}while(Cm!==Rm);if(!Bm)return null;if(Pm===Im)return Bm.prev;var zm=Bm,Dm=Bm.x,Fm=Bm.y,Um=Infinity,Om;for(Cm=Bm.next;Cm!==zm;)Pm>=Cm.x&&Cm.x>=Dm&&Pm!==Cm.x&&Ia(Lm<Fm?Pm:Im,Lm,Dm,Fm,Lm<Fm?Im:Pm,Lm,Cm.x,Cm.y)&&(Om=_Mathabs(Lm-Cm.y)/(Pm-Cm.x),(Om<Um||Om===Um&&Cm.x>Bm.x)&&Ua(Cm,Mm)&&(Bm=Cm,Um=Om)),Cm=Cm.next;return Bm}function Ra(Mm,Rm,Cm,Pm){var Lm=Mm;do null===Lm.z&&(Lm.z=Pa(Lm.x,Lm.y,Rm,Cm,Pm)),Lm.prevZ=Lm.prev,Lm.nextZ=Lm.next,Lm=Lm.next;while(Lm!==Mm);Lm.prevZ.nextZ=null,Lm.prevZ=null,Ca(Lm)}function Ca(Mm){var Dm=1,Rm,Cm,Pm,Lm,Im,Bm,Nm,zm;do{for(Cm=Mm,Mm=null,Im=null,Bm=0;Cm;){for(Bm++,Pm=Cm,Nm=0,Rm=0;Rm<Dm&&(Nm++,Pm=Pm.nextZ,!!Pm);Rm++);for(zm=Dm;0<Nm||0<zm&&Pm;)0!==Nm&&(0===zm||!Pm||Cm.z<=Pm.z)?(Lm=Cm,Cm=Cm.nextZ,Nm--):(Lm=Pm,Pm=Pm.nextZ,zm--),Im?Im.nextZ=Lm:Mm=Lm,Lm.prevZ=Im,Im=Lm;Cm=Pm}Im.nextZ=null,Dm*=2}while(1<Bm);return Mm}function Pa(Mm,Rm,Cm,Pm,Lm){return Mm=32767*(Mm-Cm)*Lm,Rm=32767*(Rm-Pm)*Lm,Mm=16711935&(Mm|Mm<<8),Mm=252645135&(Mm|Mm<<4),Mm=858993459&(Mm|Mm<<2),Mm=1431655765&(Mm|Mm<<1),Rm=16711935&(Rm|Rm<<8),Rm=252645135&(Rm|Rm<<4),Rm=858993459&(Rm|Rm<<2),Rm=1431655765&(Rm|Rm<<1),Mm|Rm<<1}function La(Mm){var Rm=Mm,Cm=Mm;do Rm.x<Cm.x&&(Cm=Rm),Rm=Rm.next;while(Rm!==Mm);return Cm}function Ia(Mm,Rm,Cm,Pm,Lm,Im,Bm,Nm){return 0<=(Lm-Bm)*(Rm-Nm)-(Mm-Bm)*(Im-Nm)&&0<=(Mm-Bm)*(Pm-Nm)-(Cm-Bm)*(Rm-Nm)&&0<=(Cm-Bm)*(Im-Nm)-(Lm-Bm)*(Pm-Nm)}function Ba(Mm,Rm){return Mm.next.i!==Rm.i&&Mm.prev.i!==Rm.i&&!Fa(Mm,Rm)&&Ua(Mm,Rm)&&Ua(Rm,Mm)&&Oa(Mm,Rm)}function Na(Mm,Rm,Cm){return(Rm.y-Mm.y)*(Cm.x-Rm.x)-(Rm.x-Mm.x)*(Cm.y-Rm.y)}function za(Mm,Rm){return Mm.x===Rm.x&&Mm.y===Rm.y}function Da(Mm,Rm,Cm,Pm){return za(Mm,Rm)&&za(Cm,Pm)||za(Mm,Pm)&&za(Cm,Rm)||0<Na(Mm,Rm,Cm)!=0<Na(Mm,Rm,Pm)&&0<Na(Cm,Pm,Mm)!=0<Na(Cm,Pm,Rm)}function Fa(Mm,Rm){var Cm=Mm;do{if(Cm.i!==Mm.i&&Cm.next.i!==Mm.i&&Cm.i!==Rm.i&&Cm.next.i!==Rm.i&&Da(Cm,Cm.next,Mm,Rm))return!0;Cm=Cm.next}while(Cm!==Mm);return!1}function Ua(Mm,Rm){return 0>Na(Mm.prev,Mm,Mm.next)?0<=Na(Mm,Rm,Mm.next)&&0<=Na(Mm,Mm.prev,Rm):0>Na(Mm,Rm,Mm.prev)||0>Na(Mm,Mm.next,Rm)}function Oa(Mm,Rm){var Cm=Mm,Pm=!1,Lm=(Mm.x+Rm.x)/2,Im=(Mm.y+Rm.y)/2;do Cm.y>Im!=Cm.next.y>Im&&Cm.next.y!==Cm.y&&Lm<(Cm.next.x-Cm.x)*(Im-Cm.y)/(Cm.next.y-Cm.y)+Cm.x&&(Pm=!Pm),Cm=Cm.next;while(Cm!==Mm);return Pm}function ka(Mm,Rm){var Cm=new Ha(Mm.i,Mm.x,Mm.y),Pm=new Ha(Rm.i,Rm.x,Rm.y),Lm=Mm.next,Im=Rm.prev;return Mm.next=Rm,Rm.prev=Mm,Cm.next=Lm,Lm.prev=Cm,Pm.next=Cm,Cm.prev=Pm,Im.next=Pm,Pm.prev=Im,Pm}function Va(Mm,Rm,Cm,Pm){var Lm=new Ha(Mm,Rm,Cm);return Pm?(Lm.next=Pm.next,Lm.prev=Pm,Pm.next.prev=Lm,Pm.next=Lm):(Lm.prev=Lm,Lm.next=Lm),Lm}function Ga(Mm){Mm.next.prev=Mm.prev,Mm.prev.next=Mm.next,Mm.prevZ&&(Mm.prevZ.nextZ=Mm.nextZ),Mm.nextZ&&(Mm.nextZ.prevZ=Mm.prevZ)}function Ha(Mm,Rm,Cm){this.i=Mm,this.x=Rm,this.y=Cm,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Wa(Mm,Rm,Cm,Pm){for(var Lm=0,Im=Rm,Bm=Cm-Pm;Im<Cm;Im+=Pm)Lm+=(Mm[Bm]-Mm[Im])*(Mm[Im+1]+Mm[Bm+1]),Bm=Im;return Lm}function ja(Mm,Rm){ot.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:Mm,options:Rm},this.fromBufferGeometry(new Xa(Mm,Rm)),this.mergeVertices()}function Xa(Mm,Rm){"undefined"==typeof Mm||(Tt.call(this),this.type="ExtrudeBufferGeometry",Mm=Array.isArray(Mm)?Mm:[Mm],this.addShapeList(Mm,Rm),this.computeVertexNormals())}function Ya(Mm,Rm){ot.call(this),this.type="TextGeometry",this.parameters={text:Mm,parameters:Rm},this.fromBufferGeometry(new Za(Mm,Rm)),this.mergeVertices()}function Za(Mm,Rm){Rm=Rm||{};var Cm=Rm.font;if(!(Cm&&Cm.isFont))return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new ot;var Pm=Cm.generateShapes(Mm,Rm.size,Rm.curveSegments);Rm.amount=Rm.height===void 0?50:Rm.height,Rm.bevelThickness===void 0&&(Rm.bevelThickness=10),Rm.bevelSize===void 0&&(Rm.bevelSize=8),Rm.bevelEnabled===void 0&&(Rm.bevelEnabled=!1),Xa.call(this,Pm,Rm),this.type="TextBufferGeometry"}function Ja(Mm,Rm,Cm,Pm,Lm,Im,Bm){ot.call(this),this.type="SphereGeometry",this.parameters={radius:Mm,widthSegments:Rm,heightSegments:Cm,phiStart:Pm,phiLength:Lm,thetaStart:Im,thetaLength:Bm},this.fromBufferGeometry(new Qa(Mm,Rm,Cm,Pm,Lm,Im,Bm)),this.mergeVertices()}function Qa(Mm,Rm,Cm,Pm,Lm,Im,Bm){Tt.call(this),this.type="SphereBufferGeometry",this.parameters={radius:Mm,widthSegments:Rm,heightSegments:Cm,phiStart:Pm,phiLength:Lm,thetaStart:Im,thetaLength:Bm},Mm=Mm||1,Rm=_Mathmax(3,_Mathfloor(Rm)||8),Cm=_Mathmax(2,_Mathfloor(Cm)||6),Pm=Pm===void 0?0:Pm,Lm=Lm===void 0?2*_MathPI:Lm,Im=Im===void 0?0:Im,Bm=Bm===void 0?_MathPI:Bm;var Nm=Im+Bm,zm,Dm,Fm=0,Um=[],Om=new O,km=new O,Vm=[],Gm=[],Hm=[],Wm=[];for(Dm=0;Dm<=Cm;Dm++){var jm=[],Xm=Dm/Cm;for(zm=0;zm<=Rm;zm++){var Ym=zm/Rm;Om.x=-Mm*_Mathcos(Pm+Ym*Lm)*_Mathsin(Im+Xm*Bm),Om.y=Mm*_Mathcos(Im+Xm*Bm),Om.z=Mm*_Mathsin(Pm+Ym*Lm)*_Mathsin(Im+Xm*Bm),Gm.push(Om.x,Om.y,Om.z),km.set(Om.x,Om.y,Om.z).normalize(),Hm.push(km.x,km.y,km.z),Wm.push(Ym,1-Xm),jm.push(Fm++)}Um.push(jm)}for(Dm=0;Dm<Cm;Dm++)for(zm=0;zm<Rm;zm++){var Zm=Um[Dm][zm+1],Jm=Um[Dm][zm],Qm=Um[Dm+1][zm],Km=Um[Dm+1][zm+1];(0!==Dm||0<Im)&&Vm.push(Zm,Jm,Km),(Dm!==Cm-1||Nm<_MathPI)&&Vm.push(Jm,Qm,Km)}this.setIndex(Vm),this.addAttribute("position",new _t(Gm,3)),this.addAttribute("normal",new _t(Hm,3)),this.addAttribute("uv",new _t(Wm,2))}function Ka(Mm,Rm,Cm,Pm,Lm,Im){ot.call(this),this.type="RingGeometry",this.parameters={innerRadius:Mm,outerRadius:Rm,thetaSegments:Cm,phiSegments:Pm,thetaStart:Lm,thetaLength:Im},this.fromBufferGeometry(new $a(Mm,Rm,Cm,Pm,Lm,Im)),this.mergeVertices()}function $a(Mm,Rm,Cm,Pm,Lm,Im){Tt.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:Mm,outerRadius:Rm,thetaSegments:Cm,phiSegments:Pm,thetaStart:Lm,thetaLength:Im},Mm=Mm||0.5,Rm=Rm||1,Lm=Lm===void 0?0:Lm,Im=Im===void 0?2*_MathPI:Im,Cm=Cm===void 0?8:_Mathmax(3,Cm),Pm=Pm===void 0?1:_Mathmax(1,Pm);var Bm=[],Nm=[],zm=[],Dm=[],Fm,Um=Mm,Om=(Rm-Mm)/Pm,km=new O,Vm=new D,Gm,Hm;for(Gm=0;Gm<=Pm;Gm++){for(Hm=0;Hm<=Cm;Hm++)Fm=Lm+Hm/Cm*Im,km.x=Um*_Mathcos(Fm),km.y=Um*_Mathsin(Fm),Nm.push(km.x,km.y,km.z),zm.push(0,0,1),Vm.x=(km.x/Rm+1)/2,Vm.y=(km.y/Rm+1)/2,Dm.push(Vm.x,Vm.y);Um+=Om}for(Gm=0;Gm<Pm;Gm++){var Wm=Gm*(Cm+1);for(Hm=0;Hm<Cm;Hm++){Fm=Hm+Wm;var jm=Fm,Xm=Fm+Cm+1,Ym=Fm+Cm+2,Zm=Fm+1;Bm.push(jm,Xm,Zm),Bm.push(Xm,Ym,Zm)}}this.setIndex(Bm),this.addAttribute("position",new _t(Nm,3)),this.addAttribute("normal",new _t(zm,3)),this.addAttribute("uv",new _t(Dm,2))}function eo(Mm,Rm,Cm,Pm){ot.call(this),this.type="LatheGeometry",this.parameters={points:Mm,segments:Rm,phiStart:Cm,phiLength:Pm},this.fromBufferGeometry(new ro(Mm,Rm,Cm,Pm)),this.mergeVertices()}function ro(Mm,Rm,Cm,Pm){Tt.call(this),this.type="LatheBufferGeometry",this.parameters={points:Mm,segments:Rm,phiStart:Cm,phiLength:Pm},Rm=_Mathfloor(Rm)||12,Cm=Cm||0,Pm=Pm||2*_MathPI,Pm=yp.clamp(Pm,0,2*_MathPI);var Lm=[],Im=[],Bm=[],zm=1/Rm,Dm=new O,Fm=new D,Nm,Um,Om;for(Um=0;Um<=Rm;Um++){var km=Cm+Um*zm*Pm,Vm=_Mathsin(km),Gm=_Mathcos(km);for(Om=0;Om<=Mm.length-1;Om++)Dm.x=Mm[Om].x*Vm,Dm.y=Mm[Om].y,Dm.z=Mm[Om].x*Gm,Im.push(Dm.x,Dm.y,Dm.z),Fm.x=Um/Rm,Fm.y=Om/(Mm.length-1),Bm.push(Fm.x,Fm.y)}for(Um=0;Um<Rm;Um++)for(Om=0;Om<Mm.length-1;Om++){Nm=Om+Um*Mm.length;var Hm=Nm,Wm=Nm+Mm.length,jm=Nm+Mm.length+1,Xm=Nm+1;Lm.push(Hm,Wm,Xm),Lm.push(Wm,jm,Xm)}if(this.setIndex(Lm),this.addAttribute("position",new _t(Im,3)),this.addAttribute("uv",new _t(Bm,2)),this.computeVertexNormals(),Pm===2*_MathPI){var Ym=this.attributes.normal.array,Zm=new O,Jm=new O,Qm=new O;for(Nm=3*(Rm*Mm.length),Um=0,Om=0;Um<Mm.length;Um++,Om+=3)Zm.x=Ym[Om+0],Zm.y=Ym[Om+1],Zm.z=Ym[Om+2],Jm.x=Ym[Nm+Om+0],Jm.y=Ym[Nm+Om+1],Jm.z=Ym[Nm+Om+2],Qm.addVectors(Zm,Jm).normalize(),Ym[Om+0]=Ym[Nm+Om+0]=Qm.x,Ym[Om+1]=Ym[Nm+Om+1]=Qm.y,Ym[Om+2]=Ym[Nm+Om+2]=Qm.z}}function ao(Mm,Rm){ot.call(this),this.type="ShapeGeometry","object"==typeof Rm&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),Rm=Rm.curveSegments),this.parameters={shapes:Mm,curveSegments:Rm},this.fromBufferGeometry(new oo(Mm,Rm)),this.mergeVertices()}function oo(Mm,Rm){function Cm(Fm){var Um,Om,km,Vm=Lm.length/3,Gm=Fm.extractPoints(Rm),Hm=Gm.shape,Wm=Gm.holes;if(!1===Qu.isClockWise(Hm))for(Hm=Hm.reverse(),Um=0,Om=Wm.length;Um<Om;Um++)km=Wm[Um],!0===Qu.isClockWise(km)&&(Wm[Um]=km.reverse());var jm=Qu.triangulateShape(Hm,Wm);for(Um=0,Om=Wm.length;Um<Om;Um++)km=Wm[Um],Hm=Hm.concat(km);for(Um=0,Om=Hm.length;Um<Om;Um++){var Xm=Hm[Um];Lm.push(Xm.x,Xm.y,0),Im.push(0,0,1),Bm.push(Xm.x,Xm.y)}for(Um=0,Om=jm.length;Um<Om;Um++){var Ym=jm[Um],Zm=Ym[0]+Vm,Jm=Ym[1]+Vm,Qm=Ym[2]+Vm;Pm.push(Zm,Jm,Qm),zm+=3}}Tt.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:Mm,curveSegments:Rm},Rm=Rm||12;var Pm=[],Lm=[],Im=[],Bm=[],Nm=0,zm=0;if(!1===Array.isArray(Mm))Cm(Mm);else for(var Dm=0;Dm<Mm.length;Dm++)Cm(Mm[Dm]),this.addGroup(Nm,zm,Dm),Nm+=zm,zm=0;this.setIndex(Pm),this.addAttribute("position",new _t(Lm,3)),this.addAttribute("normal",new _t(Im,3)),this.addAttribute("uv",new _t(Bm,2))}function io(Mm,Rm){if(Rm.shapes=[],Array.isArray(Mm))for(var Cm=0,Pm=Mm.length,Lm;Cm<Pm;Cm++)Lm=Mm[Cm],Rm.shapes.push(Lm.uuid);else Rm.shapes.push(Mm.uuid);return Rm}function no(Mm,Rm){Tt.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:Rm},Rm=Rm===void 0?1:Rm;var Cm=[],Pm=_Mathcos(yp.DEG2RAD*Rm),Lm=[0,0],Im={},Bm,Nm,zm,Dm=["a","b","c"],Fm;Mm.isBufferGeometry?(Fm=new ot,Fm.fromBufferGeometry(Mm)):Fm=Mm.clone(),Fm.mergeVertices(),Fm.computeFaceNormals();for(var Um=Fm.vertices,Om=Fm.faces,km=0,Vm=Om.length,Gm;km<Vm;km++){Gm=Om[km];for(var Hm=0;3>Hm;Hm++)Bm=Gm[Dm[Hm]],Nm=Gm[Dm[(Hm+1)%3]],Lm[0]=_Mathmin(Bm,Nm),Lm[1]=_Mathmax(Bm,Nm),zm=Lm[0]+","+Lm[1],void 0===Im[zm]?Im[zm]={index1:Lm[0],index2:Lm[1],face1:km,face2:void 0}:Im[zm].face2=km}for(zm in Im){var Wm=Im[zm];if(Wm.face2===void 0||Om[Wm.face1].normal.dot(Om[Wm.face2].normal)<=Pm){var jm=Um[Wm.index1];Cm.push(jm.x,jm.y,jm.z),jm=Um[Wm.index2],Cm.push(jm.x,jm.y,jm.z)}}this.addAttribute("position",new _t(Cm,3))}function so(Mm,Rm,Cm,Pm,Lm,Im,Bm,Nm){ot.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:Mm,radiusBottom:Rm,height:Cm,radialSegments:Pm,heightSegments:Lm,openEnded:Im,thetaStart:Bm,thetaLength:Nm},this.fromBufferGeometry(new lo(Mm,Rm,Cm,Pm,Lm,Im,Bm,Nm)),this.mergeVertices()}function lo(Mm,Rm,Cm,Pm,Lm,Im,Bm,Nm){function Dm(Xm){var Ym,Zm,Jm,Qm=new D,Km=new O,$m=0,eg=!0===Xm?Mm:Rm,tg=!0===Xm?1:-1;for(Zm=Gm,Ym=1;Ym<=Pm;Ym++)Om.push(0,Wm*tg,0),km.push(0,tg,0),Vm.push(0.5,0.5),Gm++;for(Jm=Gm,Ym=0;Ym<=Pm;Ym++){var rg=Ym/Pm,ag=rg*Nm+Bm,og=_Mathcos(ag),ig=_Mathsin(ag);Km.x=eg*ig,Km.y=Wm*tg,Km.z=eg*og,Om.push(Km.x,Km.y,Km.z),km.push(0,tg,0),Qm.x=0.5*og+0.5,Qm.y=0.5*ig*tg+0.5,Vm.push(Qm.x,Qm.y),Gm++}for(Ym=0;Ym<Pm;Ym++){var ng=Zm+Ym,sg=Jm+Ym;!0===Xm?Um.push(sg,sg+1,ng):Um.push(sg+1,sg,ng),$m+=3}Fm.addGroup(jm,$m,!0===Xm?1:2),jm+=$m}Tt.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:Mm,radiusBottom:Rm,height:Cm,radialSegments:Pm,heightSegments:Lm,openEnded:Im,thetaStart:Bm,thetaLength:Nm};var Fm=this;Mm=Mm===void 0?1:Mm,Rm=Rm===void 0?1:Rm,Cm=Cm||1,Pm=_Mathfloor(Pm)||8,Lm=_Mathfloor(Lm)||1,Im=Im!==void 0&&Im,Bm=Bm===void 0?0:Bm,Nm=Nm===void 0?2*_MathPI:Nm;var Um=[],Om=[],km=[],Vm=[],Gm=0,Hm=[],Wm=Cm/2,jm=0;(function(){var Xm,Ym,Zm=new O,Jm=new O,Qm=0,Km=(Rm-Mm)/Cm;for(Ym=0;Ym<=Lm;Ym++){var $m=[],eg=Ym/Lm,tg=eg*(Rm-Mm)+Mm;for(Xm=0;Xm<=Pm;Xm++){var rg=Xm/Pm,ag=rg*Nm+Bm,og=_Mathsin(ag),ig=_Mathcos(ag);Jm.x=tg*og,Jm.y=-eg*Cm+Wm,Jm.z=tg*ig,Om.push(Jm.x,Jm.y,Jm.z),Zm.set(og,Km,ig).normalize(),km.push(Zm.x,Zm.y,Zm.z),Vm.push(rg,1-eg),$m.push(Gm++)}Hm.push($m)}for(Xm=0;Xm<Pm;Xm++)for(Ym=0;Ym<Lm;Ym++){var ng=Hm[Ym][Xm],sg=Hm[Ym+1][Xm],lg=Hm[Ym+1][Xm+1],dg=Hm[Ym][Xm+1];Um.push(ng,sg,dg),Um.push(sg,lg,dg),Qm+=6}Fm.addGroup(jm,Qm,0),jm+=Qm})(),!1===Im&&(0<Mm&&Dm(!0),0<Rm&&Dm(!1)),this.setIndex(Um),this.addAttribute("position",new _t(Om,3)),this.addAttribute("normal",new _t(km,3)),this.addAttribute("uv",new _t(Vm,2))}function po(Mm,Rm,Cm,Pm,Lm,Im,Bm){so.call(this,0,Mm,Rm,Cm,Pm,Lm,Im,Bm),this.type="ConeGeometry",this.parameters={radius:Mm,height:Rm,radialSegments:Cm,heightSegments:Pm,openEnded:Lm,thetaStart:Im,thetaLength:Bm}}function co(Mm,Rm,Cm,Pm,Lm,Im,Bm){lo.call(this,0,Mm,Rm,Cm,Pm,Lm,Im,Bm),this.type="ConeBufferGeometry",this.parameters={radius:Mm,height:Rm,radialSegments:Cm,heightSegments:Pm,openEnded:Lm,thetaStart:Im,thetaLength:Bm}}function uo(Mm,Rm,Cm,Pm){ot.call(this),this.type="CircleGeometry",this.parameters={radius:Mm,segments:Rm,thetaStart:Cm,thetaLength:Pm},this.fromBufferGeometry(new mo(Mm,Rm,Cm,Pm)),this.mergeVertices()}function mo(Mm,Rm,Cm,Pm){Tt.call(this),this.type="CircleBufferGeometry",this.parameters={radius:Mm,segments:Rm,thetaStart:Cm,thetaLength:Pm},Mm=Mm||1,Rm=Rm===void 0?8:_Mathmax(3,Rm),Cm=Cm===void 0?0:Cm,Pm=Pm===void 0?2*_MathPI:Pm;var Lm=[],Im=[],Bm=[],Nm=[],zm,Dm,Fm=new O,Um=new D;for(Im.push(0,0,0),Bm.push(0,0,1),Nm.push(0.5,0.5),(Dm=0,zm=3);Dm<=Rm;Dm++,zm+=3){var Om=Cm+Dm/Rm*Pm;Fm.x=Mm*_Mathcos(Om),Fm.y=Mm*_Mathsin(Om),Im.push(Fm.x,Fm.y,Fm.z),Bm.push(0,0,1),Um.x=(Im[zm]/Mm+1)/2,Um.y=(Im[zm+1]/Mm+1)/2,Nm.push(Um.x,Um.y)}for(zm=1;zm<=Rm;zm++)Lm.push(zm,zm+1,0);this.setIndex(Lm),this.addAttribute("position",new _t(Im,3)),this.addAttribute("normal",new _t(Bm,3)),this.addAttribute("uv",new _t(Nm,2))}function go(Mm){Ge.call(this),this.type="ShadowMaterial",this.color=new Fe(0),this.opacity=1,this.lights=!0,this.transparent=!0,this.setValues(Mm)}function fo(Mm){Ct.call(this,Mm),this.type="RawShaderMaterial"}function yo(Mm){Ge.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Fe(16777215),this.roughness=0.5,this.metalness=0.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Fe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new D(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=0.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(Mm)}function _o(Mm){yo.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=0.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(Mm)}function xo(Mm){Ge.call(this),this.type="MeshPhongMaterial",this.color=new Fe(16777215),this.specular=new Fe(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Fe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new D(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Fl,this.reflectivity=1,this.refractionRatio=0.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(Mm)}function vo(Mm){xo.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(Mm)}function bo(Mm){Ge.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new D(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(Mm)}function To(Mm){Ge.call(this),this.type="MeshLambertMaterial",this.color=new Fe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Fe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Fl,this.reflectivity=1,this.refractionRatio=0.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(Mm)}function Eo(Mm){zr.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(Mm)}function So(Mm,Rm,Cm){var Pm=this,Lm=!1,Im=0,Bm=0,Nm;this.onStart=void 0,this.onLoad=Mm,this.onProgress=Rm,this.onError=Cm,this.itemStart=function(zm){Bm++,!1==Lm&&Pm.onStart!==void 0&&Pm.onStart(zm,Im,Bm),Lm=!0},this.itemEnd=function(zm){Im++,Pm.onProgress!==void 0&&Pm.onProgress(zm,Im,Bm),Im==Bm&&(Lm=!1,Pm.onLoad!==void 0&&Pm.onLoad())},this.itemError=function(zm){Pm.onError!==void 0&&Pm.onError(zm)},this.resolveURL=function(zm){return Nm?Nm(zm):zm},this.setURLModifier=function(zm){return Nm=zm,this}}function Ao(Mm){this.manager=Mm===void 0?am:Mm}function wo(Mm){this.manager=Mm===void 0?am:Mm,this._parser=null}function Mo(Mm){this.manager=Mm===void 0?am:Mm,this._parser=null}function Ro(Mm){this.manager=Mm===void 0?am:Mm}function Co(Mm){this.manager=Mm===void 0?am:Mm}function Po(Mm){this.manager=Mm===void 0?am:Mm}function Lo(){this.type="Curve",this.arcLengthDivisions=200}function Io(Mm,Rm,Cm,Pm,Lm,Im,Bm,Nm){Lo.call(this),this.type="EllipseCurve",this.aX=Mm||0,this.aY=Rm||0,this.xRadius=Cm||1,this.yRadius=Pm||1,this.aStartAngle=Lm||0,this.aEndAngle=Im||2*_MathPI,this.aClockwise=Bm||!1,this.aRotation=Nm||0}function Bo(Mm,Rm,Cm,Pm,Lm,Im){Io.call(this,Mm,Rm,Cm,Cm,Pm,Lm,Im),this.type="ArcCurve"}function No(){function Mm(Im,Bm,Nm,zm){Rm=Im,Cm=Nm,Pm=-3*Im+3*Bm-2*Nm-zm,Lm=2*Im-2*Bm+Nm+zm}var Rm=0,Cm=0,Pm=0,Lm=0;return{initCatmullRom:function(Im,Bm,Nm,zm,Dm){Mm(Bm,Nm,Dm*(Nm-Im),Dm*(zm-Bm))},initNonuniformCatmullRom:function(Im,Bm,Nm,zm,Dm,Fm,Um){var Om=(Bm-Im)/Dm-(Nm-Im)/(Dm+Fm)+(Nm-Bm)/Fm,km=(Nm-Bm)/Fm-(zm-Bm)/(Fm+Um)+(zm-Nm)/Um;Om*=Fm,km*=Fm,Mm(Bm,Nm,Om,km)},calc:function(Im){var Bm=Im*Im;return Rm+Cm*Im+Pm*Bm+Lm*(Bm*Im)}}}function zo(Mm,Rm,Cm,Pm){Lo.call(this),this.type="CatmullRomCurve3",this.points=Mm||[],this.closed=Rm||!1,this.curveType=Cm||"centripetal",this.tension=Pm||0.5}function Do(Mm,Rm,Cm,Pm,Lm){var Im=0.5*(Pm-Rm),Bm=0.5*(Lm-Cm),Nm=Mm*Mm;return(2*Cm-2*Pm+Im+Bm)*(Mm*Nm)+(-3*Cm+3*Pm-2*Im-Bm)*Nm+Im*Mm+Cm}function Fo(Mm,Rm){var Cm=1-Mm;return Cm*Cm*Rm}function Uo(Mm,Rm){return 2*(1-Mm)*Mm*Rm}function Oo(Mm,Rm){return Mm*Mm*Rm}function ko(Mm,Rm,Cm,Pm){return Fo(Mm,Rm)+Uo(Mm,Cm)+Oo(Mm,Pm)}function Vo(Mm,Rm){var Cm=1-Mm;return Cm*Cm*Cm*Rm}function Go(Mm,Rm){var Cm=1-Mm;return 3*Cm*Cm*Mm*Rm}function Ho(Mm,Rm){return 3*(1-Mm)*Mm*Mm*Rm}function Wo(Mm,Rm){return Mm*Mm*Mm*Rm}function jo(Mm,Rm,Cm,Pm,Lm){return Vo(Mm,Rm)+Go(Mm,Cm)+Ho(Mm,Pm)+Wo(Mm,Lm)}function qo(Mm,Rm,Cm,Pm){Lo.call(this),this.type="CubicBezierCurve",this.v0=Mm||new D,this.v1=Rm||new D,this.v2=Cm||new D,this.v3=Pm||new D}function Xo(Mm,Rm,Cm,Pm){Lo.call(this),this.type="CubicBezierCurve3",this.v0=Mm||new O,this.v1=Rm||new O,this.v2=Cm||new O,this.v3=Pm||new O}function Yo(Mm,Rm){Lo.call(this),this.type="LineCurve",this.v1=Mm||new D,this.v2=Rm||new D}function Zo(Mm,Rm){Lo.call(this),this.type="LineCurve3",this.v1=Mm||new O,this.v2=Rm||new O}function Jo(Mm,Rm,Cm){Lo.call(this),this.type="QuadraticBezierCurve",this.v0=Mm||new D,this.v1=Rm||new D,this.v2=Cm||new D}function Qo(Mm,Rm,Cm){Lo.call(this),this.type="QuadraticBezierCurve3",this.v0=Mm||new O,this.v1=Rm||new O,this.v2=Cm||new O}function Ko(Mm){Lo.call(this),this.type="SplineCurve",this.points=Mm||[]}function $o(){Lo.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function ai(Mm){$o.call(this),this.type="Path",this.currentPoint=new D,Mm&&this.setFromPoints(Mm)}function oi(Mm){ai.call(this,Mm),this.uuid=yp.generateUUID(),this.type="Shape",this.holes=[]}function di(Mm,Rm){$e.call(this),this.type="Light",this.color=new Fe(Mm),this.intensity=Rm===void 0?1:Rm,this.receiveShadow=void 0}function pi(Mm,Rm,Cm){di.call(this,Mm,Cm),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy($e.DefaultUp),this.updateMatrix(),this.groundColor=new Fe(Rm)}function ci(Mm){this.camera=Mm,this.bias=0,this.radius=1,this.mapSize=new D(512,512),this.map=null,this.matrix=new F}function ui(){ci.call(this,new yr(50,1,0.5,500))}function mi(Mm,Rm,Cm,Pm,Lm,Im){di.call(this,Mm,Rm),this.type="SpotLight",this.position.copy($e.DefaultUp),this.updateMatrix(),this.target=new $e,Object.defineProperty(this,"power",{get:function(){return this.intensity*_MathPI},set:function(Bm){this.intensity=Bm/_MathPI}}),this.distance=Cm===void 0?0:Cm,this.angle=Pm===void 0?_MathPI/3:Pm,this.penumbra=Lm===void 0?0:Lm,this.decay=Im===void 0?1:Im,this.shadow=new ui}function gi(Mm,Rm,Cm,Pm){di.call(this,Mm,Rm),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*_MathPI},set:function(Lm){this.intensity=Lm/(4*_MathPI)}}),this.distance=Cm===void 0?0:Cm,this.decay=Pm===void 0?1:Pm,this.shadow=new ci(new yr(90,1,0.5,500))}function _i(){ci.call(this,new tt(-5,5,5,-5,0.5,500))}function Ti(Mm,Rm){di.call(this,Mm,Rm),this.type="DirectionalLight",this.position.copy($e.DefaultUp),this.updateMatrix(),this.target=new $e,this.shadow=new _i}function Ei(Mm,Rm){di.call(this,Mm,Rm),this.type="AmbientLight",this.castShadow=void 0}function Si(Mm,Rm,Cm,Pm){di.call(this,Mm,Rm),this.type="RectAreaLight",this.position.set(0,1,0),this.updateMatrix(),this.width=Cm===void 0?10:Cm,this.height=Pm===void 0?10:Pm}function Ai(Mm,Rm,Cm,Pm){Fi.call(this,Mm,Rm,Cm,Pm)}function Mi(Mm,Rm,Cm){Fi.call(this,Mm,Rm,Cm)}function Ri(Mm,Rm,Cm,Pm){this.parameterPositions=Mm,this._cachedIndex=0,this.resultBuffer=Pm===void 0?new Rm.constructor(Cm):Pm,this.sampleValues=Rm,this.valueSize=Cm}function Ci(Mm,Rm,Cm,Pm){Ri.call(this,Mm,Rm,Cm,Pm)}function Pi(Mm,Rm,Cm,Pm){Fi.call(this,Mm,Rm,Cm,Pm)}function Li(Mm,Rm,Cm,Pm){Fi.call(this,Mm,Rm,Cm,Pm)}function Ii(Mm,Rm,Cm,Pm){Fi.call(this,Mm,Rm,Cm,Pm)}function Bi(Mm,Rm,Cm,Pm){Ri.call(this,Mm,Rm,Cm,Pm),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Ni(Mm,Rm,Cm,Pm){Ri.call(this,Mm,Rm,Cm,Pm)}function Di(Mm,Rm,Cm,Pm){Ri.call(this,Mm,Rm,Cm,Pm)}function Fi(Mm,Rm,Cm,Pm){if(Mm===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===Rm||0===Rm.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+Mm);this.name=Mm,this.times=pm.convertArray(Rm,this.TimeBufferType),this.values=pm.convertArray(Cm,this.ValueBufferType),this.setInterpolation(Pm||this.DefaultInterpolation),this.validate(),this.optimize()}function Ui(Mm,Rm,Cm,Pm){Fi.call(this,Mm,Rm,Cm,Pm)}function Oi(Mm,Rm,Cm){this.name=Mm,this.tracks=Cm,this.duration=Rm===void 0?-1:Rm,this.uuid=yp.generateUUID(),0>this.duration&&this.resetDuration(),this.optimize()}function ki(Mm){this.manager=Mm===void 0?am:Mm,this.textures={}}function Vi(Mm){this.manager=Mm===void 0?am:Mm}function Gi(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}}function Hi(Mm){"boolean"==typeof Mm&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),Mm=void 0),this.manager=Mm===void 0?am:Mm,this.withCredentials=!1}function Wi(Mm){this.manager=Mm===void 0?am:Mm,this.texturePath=""}function ji(Mm){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=Mm===void 0?am:Mm,this.options=void 0}function Xi(){this.type="ShapePath",this.subPaths=[],this.currentPath=null}function Yi(Mm){this.type="Font",this.data=Mm}function Zi(Mm){this.manager=Mm===void 0?am:Mm}function Ji(Mm){this.manager=Mm===void 0?am:Mm}function Qi(){this.type="StereoCamera",this.aspect=1,this.eyeSep=0.064,this.cameraL=new yr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new yr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function Ki(Mm,Rm,Cm){$e.call(this),this.type="CubeCamera";var Pm=90,Lm=1,Im=new yr(Pm,Lm,Mm,Rm);Im.up.set(0,-1,0),Im.lookAt(new O(1,0,0)),this.add(Im);var Bm=new yr(Pm,Lm,Mm,Rm);Bm.up.set(0,-1,0),Bm.lookAt(new O(-1,0,0)),this.add(Bm);var Nm=new yr(Pm,Lm,Mm,Rm);Nm.up.set(0,0,1),Nm.lookAt(new O(0,1,0)),this.add(Nm);var zm=new yr(Pm,Lm,Mm,Rm);zm.up.set(0,0,-1),zm.lookAt(new O(0,-1,0)),this.add(zm);var Dm=new yr(Pm,Lm,Mm,Rm);Dm.up.set(0,-1,0),Dm.lookAt(new O(0,0,1)),this.add(Dm);var Fm=new yr(Pm,Lm,Mm,Rm);Fm.up.set(0,-1,0),Fm.lookAt(new O(0,0,-1)),this.add(Fm);this.renderTarget=new Y(Cm,Cm,{format:Md,magFilter:pd,minFilter:pd}),this.renderTarget.texture.name="CubeCamera",this.update=function(Om,km){null===this.parent&&this.updateMatrixWorld();var Vm=this.renderTarget,Gm=Vm.texture.generateMipmaps;Vm.texture.generateMipmaps=!1,Vm.activeCubeFace=0,Om.render(km,Im,Vm),Vm.activeCubeFace=1,Om.render(km,Bm,Vm),Vm.activeCubeFace=2,Om.render(km,Nm,Vm),Vm.activeCubeFace=3,Om.render(km,zm,Vm),Vm.activeCubeFace=4,Om.render(km,Dm,Vm),Vm.texture.generateMipmaps=Gm,Vm.activeCubeFace=5,Om.render(km,Fm,Vm),Om.setRenderTarget(null)},this.clear=function(Om,km,Vm,Gm){for(var Hm=this.renderTarget,Wm=0;6>Wm;Wm++)Hm.activeCubeFace=Wm,Om.setRenderTarget(Hm),Om.clear(km,Vm,Gm);Om.setRenderTarget(null)}}function $i(){$e.call(this),this.type="AudioListener",this.context=xm.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function tn(Mm){$e.call(this),this.type="Audio",this.context=Mm.context,this.gain=this.context.createGain(),this.gain.connect(Mm.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.offset=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function rn(Mm){tn.call(this,Mm),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function on(Mm,Rm){this.analyser=Mm.context.createAnalyser(),this.analyser.fftSize=Rm===void 0?2048:Rm,this.data=new Uint8Array(this.analyser.frequencyBinCount),Mm.getOutput().connect(this.analyser)}function nn(Mm,Rm,Cm){this.binding=Mm,this.valueSize=Cm;var Pm=Float64Array,Lm;"quaternion"===Rm?Lm=this._slerp:"string"===Rm||"bool"===Rm?(Pm=Array,Lm=this._select):Lm=this._lerp;this.buffer=new Pm(4*Cm),this._mixBufferRegion=Lm,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function sn(Mm,Rm,Cm){var Pm=Cm||ln.parseTrackName(Rm);this._targetGroup=Mm,this._bindings=Mm.subscribe_(Rm,Pm)}function ln(Mm,Rm,Cm){this.path=Rm,this.parsedPath=Cm||ln.parseTrackName(Rm),this.node=ln.findNode(Mm,this.parsedPath.nodeName)||Mm,this.rootNode=Mm}function dn(){this.uuid=yp.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var Mm={};this._indicesByUUID=Mm;for(var Rm=0,Cm=arguments.length;Rm!==Cm;++Rm)Mm[arguments[Rm].uuid]=Rm;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var Pm=this;this.stats={objects:{get total(){return Pm._objects.length},get inUse(){return this.total-Pm.nCachedObjects_}},get bindingsPerObject(){return Pm._bindings.length}}}function pn(Mm,Rm,Cm){this._mixer=Mm,this._clip=Rm,this._localRoot=Cm||null;for(var Pm=Rm.tracks,Lm=Pm.length,Im=Array(Lm),Bm={endingStart:Zd,endingEnd:Zd},Nm=0,zm;Nm!==Lm;++Nm)zm=Pm[Nm].createInterpolant(null),Im[Nm]=zm,zm.settings=Bm;this._interpolantSettings=Bm,this._interpolants=Im,this._propertyBindings=Array(Lm),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Wd,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=Infinity,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function cn(Mm){this._root=Mm,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function un(Mm){"string"==typeof Mm&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),Mm=arguments[1]),this.value=Mm}function mn(){Tt.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function gn(Mm,Rm,Cm,Pm){this.uuid=yp.generateUUID(),this.data=Mm,this.itemSize=Rm,this.offset=Cm,this.normalized=!0===Pm}function yn(Mm,Rm){this.uuid=yp.generateUUID(),this.array=Mm,this.stride=Rm,this.count=Mm===void 0?0:Mm.length/Rm,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function _n(Mm,Rm,Cm){yn.call(this,Mm,Rm),this.meshPerAttribute=Cm||1}function xn(Mm,Rm,Cm){it.call(this,Mm,Rm),this.meshPerAttribute=Cm||1}function Tn(Mm,Rm,Cm,Pm){this.ray=new Pt(Mm,Rm),this.near=Cm||0,this.far=Pm||Infinity,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function En(Mm,Rm){return Mm.distance-Rm.distance}function Sn(Mm,Rm,Cm,Pm){if(!1!==Mm.visible&&(Mm.raycast(Rm,Cm),!0===Pm))for(var Lm=Mm.children,Im=0,Bm=Lm.length;Im<Bm;Im++)Sn(Lm[Im],Rm,Cm,!0)}function An(Mm){this.autoStart=!(Mm!==void 0)||Mm,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function wn(Mm,Rm,Cm){return this.radius=void 0===Mm?1:Mm,this.phi=void 0===Rm?0:Rm,this.theta=void 0===Cm?0:Cm,this}function Mn(Mm,Rm,Cm){return this.radius=void 0===Mm?1:Mm,this.theta=void 0===Rm?0:Rm,this.y=void 0===Cm?0:Cm,this}function Rn(Mm){$e.call(this),this.material=Mm,this.render=function(){}}function Cn(Mm,Rm,Cm,Pm){this.object=Mm,this.size=Rm===void 0?1:Rm;var Lm=Cm===void 0?16711680:Cm,Im=Pm===void 0?1:Pm,Bm=0,Nm=this.object.geometry;Nm&&Nm.isGeometry?Bm=3*Nm.faces.length:Nm&&Nm.isBufferGeometry&&(Bm=Nm.attributes.normal.count);var zm=new Tt,Dm=new _t(3*(2*Bm),3);zm.addAttribute("position",Dm),Fr.call(this,zm,new zr({color:Lm,linewidth:Im})),this.matrixAutoUpdate=!1,this.update()}function Pn(Mm,Rm){$e.call(this),this.light=Mm,this.light.updateMatrixWorld(),this.matrix=Mm.matrixWorld,this.matrixAutoUpdate=!1,this.color=Rm;for(var Cm=new Tt,Pm=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],Lm=0,Im=1,Bm=32;Lm<Bm;Lm++,Im++){var Nm=2*(Lm/Bm*_MathPI),zm=2*(Im/Bm*_MathPI);Pm.push(_Mathcos(Nm),_Mathsin(Nm),1,_Mathcos(zm),_Mathsin(zm),1)}Cm.addAttribute("position",new _t(Pm,3));var Dm=new zr({fog:!1});this.cone=new Fr(Cm,Dm),this.add(this.cone),this.update()}function Ln(Mm){var Rm=[];Mm&&Mm.isBone&&Rm.push(Mm);for(var Cm=0;Cm<Mm.children.length;Cm++)Rm.push.apply(Rm,Ln(Mm.children[Cm]));return Rm}function In(Mm){for(var Rm=Ln(Mm),Cm=new Tt,Pm=[],Lm=[],Im=new Fe(0,0,1),Bm=new Fe(0,1,0),Nm=0,zm;Nm<Rm.length;Nm++)zm=Rm[Nm],zm.parent&&zm.parent.isBone&&(Pm.push(0,0,0),Pm.push(0,0,0),Lm.push(Im.r,Im.g,Im.b),Lm.push(Bm.r,Bm.g,Bm.b));Cm.addAttribute("position",new _t(Pm,3)),Cm.addAttribute("color",new _t(Lm,3));var Dm=new zr({vertexColors:Zs,depthTest:!1,depthWrite:!1,transparent:!0});Fr.call(this,Cm,Dm),this.root=Mm,this.bones=Rm,this.matrix=Mm.matrixWorld,this.matrixAutoUpdate=!1}function Bn(Mm,Rm,Cm){this.light=Mm,this.light.updateMatrixWorld(),this.color=Cm;var Pm=new Qa(Rm,4,2),Lm=new Rt({wireframe:!0,fog:!1});Bt.call(this,Pm,Lm),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function Nn(Mm,Rm){$e.call(this),this.light=Mm,this.light.updateMatrixWorld(),this.matrix=Mm.matrixWorld,this.matrixAutoUpdate=!1,this.color=Rm;var Cm=new zr({fog:!1}),Pm=new Tt;Pm.addAttribute("position",new it(new Float32Array(15),3)),this.line=new Dr(Pm,Cm),this.add(this.line),this.update()}function zn(Mm,Rm,Cm){$e.call(this),this.light=Mm,this.light.updateMatrixWorld(),this.matrix=Mm.matrixWorld,this.matrixAutoUpdate=!1,this.color=Cm;var Pm=new $r(Rm);Pm.rotateY(0.5*_MathPI),this.material=new Rt({wireframe:!0,fog:!1}),this.color===void 0&&(this.material.vertexColors=Zs);var Lm=Pm.getAttribute("position"),Im=new Float32Array(3*Lm.count);Pm.addAttribute("color",new it(Im,3)),this.add(new Bt(Pm,this.material)),this.update()}function Dn(Mm,Rm,Cm,Pm){Mm=Mm||10,Rm=Rm||10,Cm=new Fe(Cm===void 0?4473924:Cm),Pm=new Fe(Pm===void 0?8947848:Pm);for(var Lm=Rm/2,Im=Mm/Rm,Bm=Mm/2,Nm=[],zm=[],Dm=0,Fm=0,Um=-Bm;Dm<=Rm;Dm++,Um+=Im){Nm.push(-Bm,0,Um,Bm,0,Um),Nm.push(Um,0,-Bm,Um,0,Bm);var Om=Dm===Lm?Cm:Pm;Om.toArray(zm,Fm),Fm+=3,Om.toArray(zm,Fm),Fm+=3,Om.toArray(zm,Fm),Fm+=3,Om.toArray(zm,Fm),Fm+=3}var km=new Tt;km.addAttribute("position",new _t(Nm,3)),km.addAttribute("color",new _t(zm,3));var Vm=new zr({vertexColors:Zs});Fr.call(this,km,Vm)}function Fn(Mm,Rm,Cm,Pm,Lm,Im){Mm=Mm||10,Rm=Rm||16,Cm=Cm||8,Pm=Pm||64,Lm=new Fe(Lm===void 0?4473924:Lm),Im=new Fe(Im===void 0?8947848:Im);var Bm=[],Nm=[],zm,Dm,Fm,Um,Om,km,Vm;for(Um=0;Um<=Rm;Um++)Fm=Um/Rm*(2*_MathPI),zm=_Mathsin(Fm)*Mm,Dm=_Mathcos(Fm)*Mm,Bm.push(0,0,0),Bm.push(zm,0,Dm),Vm=1&Um?Lm:Im,Nm.push(Vm.r,Vm.g,Vm.b),Nm.push(Vm.r,Vm.g,Vm.b);for(Um=0;Um<=Cm;Um++)for(Vm=1&Um?Lm:Im,km=Mm-Mm/Cm*Um,Om=0;Om<Pm;Om++)Fm=Om/Pm*(2*_MathPI),zm=_Mathsin(Fm)*km,Dm=_Mathcos(Fm)*km,Bm.push(zm,0,Dm),Nm.push(Vm.r,Vm.g,Vm.b),Fm=(Om+1)/Pm*(2*_MathPI),zm=_Mathsin(Fm)*km,Dm=_Mathcos(Fm)*km,Bm.push(zm,0,Dm),Nm.push(Vm.r,Vm.g,Vm.b);var Gm=new Tt;Gm.addAttribute("position",new _t(Bm,3)),Gm.addAttribute("color",new _t(Nm,3));var Hm=new zr({vertexColors:Zs});Fr.call(this,Gm,Hm)}function Un(Mm,Rm,Cm,Pm){this.object=Mm,this.size=Rm===void 0?1:Rm;var Lm=Cm===void 0?16776960:Cm,Im=Pm===void 0?1:Pm,Bm=0,Nm=this.object.geometry;Nm&&Nm.isGeometry?Bm=Nm.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var zm=new Tt,Dm=new _t(3*(2*Bm),3);zm.addAttribute("position",Dm),Fr.call(this,zm,new zr({color:Lm,linewidth:Im})),this.matrixAutoUpdate=!1,this.update()}function On(Mm,Rm,Cm){$e.call(this),this.light=Mm,this.light.updateMatrixWorld(),this.matrix=Mm.matrixWorld,this.matrixAutoUpdate=!1,this.color=Cm,Rm===void 0&&(Rm=1);var Pm=new Tt;Pm.addAttribute("position",new _t([-Rm,Rm,0,Rm,Rm,0,Rm,-Rm,0,-Rm,-Rm,0,-Rm,Rm,0],3));var Lm=new zr({fog:!1});this.lightPlane=new Dr(Pm,Lm),this.add(this.lightPlane),Pm=new Tt,Pm.addAttribute("position",new _t([0,0,0,0,0,1],3)),this.targetLine=new Dr(Pm,Lm),this.add(this.targetLine),this.update()}function kn(Mm){function Rm(km,Vm,Gm){Cm(km,Gm),Cm(Vm,Gm)}function Cm(km,Vm){Im.push(0,0,0),Bm.push(Vm.r,Vm.g,Vm.b),Nm[km]===void 0&&(Nm[km]=[]),Nm[km].push(Im.length/3-1)}var Pm=new Tt,Lm=new zr({color:16777215,vertexColors:Ys}),Im=[],Bm=[],Nm={},zm=new Fe(16755200),Dm=new Fe(16711680),Fm=new Fe(43775),Um=new Fe(16777215),Om=new Fe(3355443);Rm("n1","n2",zm),Rm("n2","n4",zm),Rm("n4","n3",zm),Rm("n3","n1",zm),Rm("f1","f2",zm),Rm("f2","f4",zm),Rm("f4","f3",zm),Rm("f3","f1",zm),Rm("n1","f1",zm),Rm("n2","f2",zm),Rm("n3","f3",zm),Rm("n4","f4",zm),Rm("p","n1",Dm),Rm("p","n2",Dm),Rm("p","n3",Dm),Rm("p","n4",Dm),Rm("u1","u2",Fm),Rm("u2","u3",Fm),Rm("u3","u1",Fm),Rm("c","t",Um),Rm("p","c",Om),Rm("cn1","cn2",Om),Rm("cn3","cn4",Om),Rm("cf1","cf2",Om),Rm("cf3","cf4",Om),Pm.addAttribute("position",new _t(Im,3)),Pm.addAttribute("color",new _t(Bm,3)),Fr.call(this,Pm,Lm),this.camera=Mm,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=Mm.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=Nm,this.update()}function Vn(Mm,Rm){this.object=Mm,Rm===void 0&&(Rm=16776960);var Cm=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),Pm=new Float32Array(24),Lm=new Tt;Lm.setIndex(new it(Cm,1)),Lm.addAttribute("position",new it(Pm,3)),Fr.call(this,Lm,new zr({color:Rm})),this.matrixAutoUpdate=!1,this.update()}function Gn(Mm,Rm){this.type="Box3Helper",this.box=Mm;var Cm=Rm===void 0?16776960:Rm,Pm=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),Im=new Tt;Im.setIndex(new it(Pm,1)),Im.addAttribute("position",new _t([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),Fr.call(this,Im,new zr({color:Cm})),this.geometry.computeBoundingSphere()}function Hn(Mm,Rm,Cm){this.type="PlaneHelper",this.plane=Mm,this.size=Rm===void 0?1:Rm;var Pm=Cm===void 0?16776960:Cm,Im=new Tt;Im.addAttribute("position",new _t([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),Im.computeBoundingSphere(),Dr.call(this,Im,new zr({color:Pm}));var Nm=new Tt;Nm.addAttribute("position",new _t([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),Nm.computeBoundingSphere(),this.add(new Bt(Nm,new Rt({color:Pm,opacity:0.2,transparent:!0,depthWrite:!1})))}function Wn(Mm,Rm,Cm,Pm,Lm,Im){$e.call(this),Pm===void 0&&(Pm=16776960),Cm===void 0&&(Cm=1),Lm===void 0&&(Lm=0.2*Cm),Im===void 0&&(Im=0.2*Lm),vm==void 0&&(vm=new Tt,vm.addAttribute("position",new _t([0,0,0,0,1,0],3)),bm=new lo(0,0.5,1,5,1),bm.translate(0,-0.5,0)),this.position.copy(Rm),this.line=new Dr(vm,new zr({color:Pm})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Bt(bm,new Rt({color:Pm})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(Mm),this.setLength(Cm,Lm,Im)}function jn(Mm){Mm=Mm||1;var Rm=[0,0,0,Mm,0,0,0,0,0,0,Mm,0,0,0,0,0,0,Mm],Pm=new Tt;Pm.addAttribute("position",new _t(Rm,3)),Pm.addAttribute("color",new _t([1,0,0,1,0.6,0,0,1,0,0.6,1,0,0,0,1,0,0.6,1],3));var Lm=new zr({vertexColors:Zs});Fr.call(this,Pm,Lm)}function qn(Mm,Rm,Cm,Pm,Lm,Im,Bm){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new rt(Mm,Rm,Cm,Lm,Im,Bm)}function Xn(Mm){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),Mm}function Yn(Mm){return void 0===Mm&&(Mm=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),Mm.isMultiMaterial=!0,Mm.materials=Mm,Mm.clone=function(){return Mm.slice()},Mm}function Zn(Mm,Rm){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new kr(Mm,Rm)}function Jn(Mm){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Pr(Mm)}function Qn(Mm,Rm){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new kr(Mm,Rm)}function Kn(Mm){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Or(Mm)}function $n(Mm){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Or(Mm)}function rs(Mm){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Or(Mm)}function as(Mm,Rm,Cm){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new O(Mm,Rm,Cm)}function os(Mm,Rm){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new it(Mm,Rm).setDynamic(!0)}function is(Mm,Rm){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new nt(Mm,Rm)}function ss(Mm,Rm){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new ct(Mm,Rm)}function ls(Mm,Rm){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new ut(Mm,Rm)}function ds(Mm,Rm){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new mt(Mm,Rm)}function ps(Mm,Rm){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new ft(Mm,Rm)}function us(Mm,Rm){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new ht(Mm,Rm)}function ms(Mm,Rm){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new yt(Mm,Rm)}function fs(Mm,Rm){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new _t(Mm,Rm)}function hs(Mm,Rm){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new xt(Mm,Rm)}function ys(Mm){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),zo.call(this,Mm),this.type="catmullrom",this.closed=!0}function _s(Mm){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),zo.call(this,Mm),this.type="catmullrom"}function xs(Mm){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),zo.call(this,Mm),this.type="catmullrom"}function Ts(Mm){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new jn(Mm)}function Es(Mm,Rm){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new Vn(Mm,Rm)}function Ss(Mm,Rm){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Fr(new no(Mm.geometry),new zr({color:void 0===Rm?16777215:Rm}))}function As(Mm,Rm){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Fr(new jr(Mm.geometry),new zr({color:void 0===Rm?16777215:Rm}))}function ws(Mm){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Ao(Mm)}function Ms(Mm){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Mo(Mm)}function Rs(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(Mm,Rm){console.warn("THREE.Projector: .projectVector() is now vector.project()."),Mm.project(Rm)},this.unprojectVector=function(Mm,Rm){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),Mm.unproject(Rm)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}}function Cs(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}}Object.defineProperty(S,"__esModule",{value:!0}),A.d(S,"WebGLRenderTargetCube",function(){return Y}),A.d(S,"WebGLRenderTarget",function(){return X}),A.d(S,"WebGLRenderer",function(){return Sr}),A.d(S,"ShaderLib",function(){return Wu}),A.d(S,"UniformsLib",function(){return Cp}),A.d(S,"UniformsUtils",function(){return Pp}),A.d(S,"ShaderChunk",function(){return Hu}),A.d(S,"FogExp2",function(){return Ar}),A.d(S,"Fog",function(){return wr}),A.d(S,"Scene",function(){return Mr}),A.d(S,"LensFlare",function(){return Rr}),A.d(S,"Sprite",function(){return Pr}),A.d(S,"LOD",function(){return Lr}),A.d(S,"SkinnedMesh",function(){return Nr}),A.d(S,"Skeleton",function(){return Ir}),A.d(S,"Bone",function(){return Br}),A.d(S,"Mesh",function(){return Bt}),A.d(S,"LineSegments",function(){return Fr}),A.d(S,"LineLoop",function(){return Ur}),A.d(S,"Line",function(){return Dr}),A.d(S,"Points",function(){return kr}),A.d(S,"Group",function(){return Vr}),A.d(S,"VideoTexture",function(){return Gr}),A.d(S,"DataTexture",function(){return Z}),A.d(S,"CompressedTexture",function(){return Hr}),A.d(S,"CubeTexture",function(){return J}),A.d(S,"CanvasTexture",function(){return ke}),A.d(S,"DepthTexture",function(){return Wr}),A.d(S,"Texture",function(){return H}),A.d(S,"CompressedTextureLoader",function(){return wo}),A.d(S,"DataTextureLoader",function(){return Mo}),A.d(S,"CubeTextureLoader",function(){return Co}),A.d(S,"TextureLoader",function(){return Po}),A.d(S,"ObjectLoader",function(){return Wi}),A.d(S,"MaterialLoader",function(){return ki}),A.d(S,"BufferGeometryLoader",function(){return Vi}),A.d(S,"DefaultLoadingManager",function(){return am}),A.d(S,"LoadingManager",function(){return So}),A.d(S,"JSONLoader",function(){return Hi}),A.d(S,"ImageLoader",function(){return Ro}),A.d(S,"ImageBitmapLoader",function(){return ji}),A.d(S,"FontLoader",function(){return Zi}),A.d(S,"FileLoader",function(){return Ao}),A.d(S,"Loader",function(){return Gi}),A.d(S,"LoaderUtils",function(){return gm}),A.d(S,"Cache",function(){return rm}),A.d(S,"AudioLoader",function(){return Ji}),A.d(S,"SpotLightShadow",function(){return ui}),A.d(S,"SpotLight",function(){return mi}),A.d(S,"PointLight",function(){return gi}),A.d(S,"RectAreaLight",function(){return Si}),A.d(S,"HemisphereLight",function(){return pi}),A.d(S,"DirectionalLightShadow",function(){return _i}),A.d(S,"DirectionalLight",function(){return Ti}),A.d(S,"AmbientLight",function(){return Ei}),A.d(S,"LightShadow",function(){return ci}),A.d(S,"Light",function(){return di}),A.d(S,"StereoCamera",function(){return Qi}),A.d(S,"PerspectiveCamera",function(){return yr}),A.d(S,"OrthographicCamera",function(){return tt}),A.d(S,"CubeCamera",function(){return Ki}),A.d(S,"ArrayCamera",function(){return _r}),A.d(S,"Camera",function(){return et}),A.d(S,"AudioListener",function(){return $i}),A.d(S,"PositionalAudio",function(){return rn}),A.d(S,"AudioContext",function(){return xm}),A.d(S,"AudioAnalyser",function(){return on}),A.d(S,"Audio",function(){return tn}),A.d(S,"VectorKeyframeTrack",function(){return Ui}),A.d(S,"StringKeyframeTrack",function(){return Ai}),A.d(S,"QuaternionKeyframeTrack",function(){return Pi}),A.d(S,"NumberKeyframeTrack",function(){return Ii}),A.d(S,"ColorKeyframeTrack",function(){return Li}),A.d(S,"BooleanKeyframeTrack",function(){return Mi}),A.d(S,"PropertyMixer",function(){return nn}),A.d(S,"PropertyBinding",function(){return ln}),A.d(S,"KeyframeTrack",function(){return Fi}),A.d(S,"AnimationUtils",function(){return pm}),A.d(S,"AnimationObjectGroup",function(){return dn}),A.d(S,"AnimationMixer",function(){return cn}),A.d(S,"AnimationClip",function(){return Oi}),A.d(S,"Uniform",function(){return un}),A.d(S,"InstancedBufferGeometry",function(){return mn}),A.d(S,"BufferGeometry",function(){return Tt}),A.d(S,"Geometry",function(){return ot}),A.d(S,"InterleavedBufferAttribute",function(){return gn}),A.d(S,"InstancedInterleavedBuffer",function(){return _n}),A.d(S,"InterleavedBuffer",function(){return yn}),A.d(S,"InstancedBufferAttribute",function(){return xn}),A.d(S,"Face3",function(){return rt}),A.d(S,"Object3D",function(){return $e}),A.d(S,"Raycaster",function(){return Tn}),A.d(S,"Layers",function(){return Ke}),A.d(S,"EventDispatcher",function(){return L}),A.d(S,"Clock",function(){return An}),A.d(S,"QuaternionLinearInterpolant",function(){return Ci}),A.d(S,"LinearInterpolant",function(){return Ni}),A.d(S,"DiscreteInterpolant",function(){return Di}),A.d(S,"CubicInterpolant",function(){return Bi}),A.d(S,"Interpolant",function(){return Ri}),A.d(S,"Triangle",function(){return It}),A.d(S,"Math",function(){return yp}),A.d(S,"Spherical",function(){return wn}),A.d(S,"Cylindrical",function(){return Mn}),A.d(S,"Plane",function(){return Xe}),A.d(S,"Frustum",function(){return Ye}),A.d(S,"Sphere",function(){return qe}),A.d(S,"Ray",function(){return Pt}),A.d(S,"Matrix4",function(){return F}),A.d(S,"Matrix3",function(){return G}),A.d(S,"Box3",function(){return je}),A.d(S,"Box2",function(){return Ue}),A.d(S,"Line3",function(){return Lt}),A.d(S,"Euler",function(){return Qe}),A.d(S,"Vector4",function(){return W}),A.d(S,"Vector3",function(){return O}),A.d(S,"Vector2",function(){return D}),A.d(S,"Quaternion",function(){return U}),A.d(S,"Color",function(){return Fe}),A.d(S,"ImmediateRenderObject",function(){return Rn}),A.d(S,"VertexNormalsHelper",function(){return Cn}),A.d(S,"SpotLightHelper",function(){return Pn}),A.d(S,"SkeletonHelper",function(){return In}),A.d(S,"PointLightHelper",function(){return Bn}),A.d(S,"RectAreaLightHelper",function(){return Nn}),A.d(S,"HemisphereLightHelper",function(){return zn}),A.d(S,"GridHelper",function(){return Dn}),A.d(S,"PolarGridHelper",function(){return Fn}),A.d(S,"FaceNormalsHelper",function(){return Un}),A.d(S,"DirectionalLightHelper",function(){return On}),A.d(S,"CameraHelper",function(){return kn}),A.d(S,"BoxHelper",function(){return Vn}),A.d(S,"Box3Helper",function(){return Gn}),A.d(S,"PlaneHelper",function(){return Hn}),A.d(S,"ArrowHelper",function(){return Wn}),A.d(S,"AxesHelper",function(){return jn}),A.d(S,"Shape",function(){return oi}),A.d(S,"Path",function(){return ai}),A.d(S,"ShapePath",function(){return Xi}),A.d(S,"Font",function(){return Yi}),A.d(S,"CurvePath",function(){return $o}),A.d(S,"Curve",function(){return Lo}),A.d(S,"ShapeUtils",function(){return Qu}),A.d(S,"SceneUtils",function(){return Tm}),A.d(S,"WebGLUtils",function(){return Er}),A.d(S,"WireframeGeometry",function(){return jr}),A.d(S,"ParametricGeometry",function(){return qr}),A.d(S,"ParametricBufferGeometry",function(){return Xr}),A.d(S,"TetrahedronGeometry",function(){return Jr}),A.d(S,"TetrahedronBufferGeometry",function(){return Qr}),A.d(S,"OctahedronGeometry",function(){return Kr}),A.d(S,"OctahedronBufferGeometry",function(){return $r}),A.d(S,"IcosahedronGeometry",function(){return ra}),A.d(S,"IcosahedronBufferGeometry",function(){return aa}),A.d(S,"DodecahedronGeometry",function(){return oa}),A.d(S,"DodecahedronBufferGeometry",function(){return ia}),A.d(S,"PolyhedronGeometry",function(){return Yr}),A.d(S,"PolyhedronBufferGeometry",function(){return Zr}),A.d(S,"TubeGeometry",function(){return sa}),A.d(S,"TubeBufferGeometry",function(){return la}),A.d(S,"TorusKnotGeometry",function(){return pa}),A.d(S,"TorusKnotBufferGeometry",function(){return ua}),A.d(S,"TorusGeometry",function(){return ma}),A.d(S,"TorusBufferGeometry",function(){return ga}),A.d(S,"TextGeometry",function(){return Ya}),A.d(S,"TextBufferGeometry",function(){return Za}),A.d(S,"SphereGeometry",function(){return Ja}),A.d(S,"SphereBufferGeometry",function(){return Qa}),A.d(S,"RingGeometry",function(){return Ka}),A.d(S,"RingBufferGeometry",function(){return $a}),A.d(S,"PlaneGeometry",function(){return At}),A.d(S,"PlaneBufferGeometry",function(){return wt}),A.d(S,"LatheGeometry",function(){return eo}),A.d(S,"LatheBufferGeometry",function(){return ro}),A.d(S,"ShapeGeometry",function(){return ao}),A.d(S,"ShapeBufferGeometry",function(){return oo}),A.d(S,"ExtrudeGeometry",function(){return ja}),A.d(S,"ExtrudeBufferGeometry",function(){return Xa}),A.d(S,"EdgesGeometry",function(){return no}),A.d(S,"ConeGeometry",function(){return po}),A.d(S,"ConeBufferGeometry",function(){return co}),A.d(S,"CylinderGeometry",function(){return so}),A.d(S,"CylinderBufferGeometry",function(){return lo}),A.d(S,"CircleGeometry",function(){return uo}),A.d(S,"CircleBufferGeometry",function(){return mo}),A.d(S,"BoxGeometry",function(){return Et}),A.d(S,"BoxBufferGeometry",function(){return St}),A.d(S,"ShadowMaterial",function(){return go}),A.d(S,"SpriteMaterial",function(){return Cr}),A.d(S,"RawShaderMaterial",function(){return fo}),A.d(S,"ShaderMaterial",function(){return Ct}),A.d(S,"PointsMaterial",function(){return Or}),A.d(S,"MeshPhysicalMaterial",function(){return _o}),A.d(S,"MeshStandardMaterial",function(){return yo}),A.d(S,"MeshPhongMaterial",function(){return xo}),A.d(S,"MeshToonMaterial",function(){return vo}),A.d(S,"MeshNormalMaterial",function(){return bo}),A.d(S,"MeshLambertMaterial",function(){return To}),A.d(S,"MeshDepthMaterial",function(){return He}),A.d(S,"MeshDistanceMaterial",function(){return We}),A.d(S,"MeshBasicMaterial",function(){return Rt}),A.d(S,"LineDashedMaterial",function(){return Eo}),A.d(S,"LineBasicMaterial",function(){return zr}),A.d(S,"Material",function(){return Ge}),A.d(S,"Float64BufferAttribute",function(){return xt}),A.d(S,"Float32BufferAttribute",function(){return _t}),A.d(S,"Uint32BufferAttribute",function(){return yt}),A.d(S,"Int32BufferAttribute",function(){return ht}),A.d(S,"Uint16BufferAttribute",function(){return ft}),A.d(S,"Int16BufferAttribute",function(){return mt}),A.d(S,"Uint8ClampedBufferAttribute",function(){return ut}),A.d(S,"Uint8BufferAttribute",function(){return ct}),A.d(S,"Int8BufferAttribute",function(){return nt}),A.d(S,"BufferAttribute",function(){return it}),A.d(S,"ArcCurve",function(){return Bo}),A.d(S,"CatmullRomCurve3",function(){return zo}),A.d(S,"CubicBezierCurve",function(){return qo}),A.d(S,"CubicBezierCurve3",function(){return Xo}),A.d(S,"EllipseCurve",function(){return Io}),A.d(S,"LineCurve",function(){return Yo}),A.d(S,"LineCurve3",function(){return Zo}),A.d(S,"QuadraticBezierCurve",function(){return Jo}),A.d(S,"QuadraticBezierCurve3",function(){return Qo}),A.d(S,"SplineCurve",function(){return Ko}),A.d(S,"REVISION",function(){return Ps}),A.d(S,"MOUSE",function(){return Ls}),A.d(S,"CullFaceNone",function(){return Is}),A.d(S,"CullFaceBack",function(){return Ns}),A.d(S,"CullFaceFront",function(){return zs}),A.d(S,"CullFaceFrontBack",function(){return Ds}),A.d(S,"FrontFaceDirectionCW",function(){return Fs}),A.d(S,"FrontFaceDirectionCCW",function(){return Us}),A.d(S,"BasicShadowMap",function(){return Os}),A.d(S,"PCFShadowMap",function(){return ks}),A.d(S,"PCFSoftShadowMap",function(){return Vs}),A.d(S,"FrontSide",function(){return Gs}),A.d(S,"BackSide",function(){return Hs}),A.d(S,"DoubleSide",function(){return Ws}),A.d(S,"FlatShading",function(){return js}),A.d(S,"SmoothShading",function(){return qs}),A.d(S,"NoColors",function(){return Xs}),A.d(S,"FaceColors",function(){return Ys}),A.d(S,"VertexColors",function(){return Zs}),A.d(S,"NoBlending",function(){return Js}),A.d(S,"NormalBlending",function(){return Qs}),A.d(S,"AdditiveBlending",function(){return Ks}),A.d(S,"SubtractiveBlending",function(){return $s}),A.d(S,"MultiplyBlending",function(){return el}),A.d(S,"CustomBlending",function(){return rl}),A.d(S,"AddEquation",function(){return al}),A.d(S,"SubtractEquation",function(){return nl}),A.d(S,"ReverseSubtractEquation",function(){return ll}),A.d(S,"MinEquation",function(){return dl}),A.d(S,"MaxEquation",function(){return ul}),A.d(S,"ZeroFactor",function(){return yl}),A.d(S,"OneFactor",function(){return _l}),A.d(S,"SrcColorFactor",function(){return xl}),A.d(S,"OneMinusSrcColorFactor",function(){return bl}),A.d(S,"SrcAlphaFactor",function(){return Tl}),A.d(S,"OneMinusSrcAlphaFactor",function(){return El}),A.d(S,"DstAlphaFactor",function(){return Sl}),A.d(S,"OneMinusDstAlphaFactor",function(){return Al}),A.d(S,"DstColorFactor",function(){return wl}),A.d(S,"OneMinusDstColorFactor",function(){return Ml}),A.d(S,"SrcAlphaSaturateFactor",function(){return Rl}),A.d(S,"NeverDepth",function(){return Cl}),A.d(S,"AlwaysDepth",function(){return Pl}),A.d(S,"LessDepth",function(){return Ll}),A.d(S,"LessEqualDepth",function(){return Il}),A.d(S,"EqualDepth",function(){return Bl}),A.d(S,"GreaterEqualDepth",function(){return Nl}),A.d(S,"GreaterDepth",function(){return zl}),A.d(S,"NotEqualDepth",function(){return Dl}),A.d(S,"MultiplyOperation",function(){return Fl}),A.d(S,"MixOperation",function(){return Ul}),A.d(S,"AddOperation",function(){return Ol}),A.d(S,"NoToneMapping",function(){return Vl}),A.d(S,"LinearToneMapping",function(){return Gl}),A.d(S,"ReinhardToneMapping",function(){return Hl}),A.d(S,"Uncharted2ToneMapping",function(){return Wl}),A.d(S,"CineonToneMapping",function(){return ql}),A.d(S,"UVMapping",function(){return Xl}),A.d(S,"CubeReflectionMapping",function(){return Yl}),A.d(S,"CubeRefractionMapping",function(){return Zl}),A.d(S,"EquirectangularReflectionMapping",function(){return Jl}),A.d(S,"EquirectangularRefractionMapping",function(){return Ql}),A.d(S,"SphericalReflectionMapping",function(){return Kl}),A.d(S,"CubeUVReflectionMapping",function(){return $l}),A.d(S,"CubeUVRefractionMapping",function(){return ed}),A.d(S,"RepeatWrapping",function(){return td}),A.d(S,"ClampToEdgeWrapping",function(){return rd}),A.d(S,"MirroredRepeatWrapping",function(){return od}),A.d(S,"NearestFilter",function(){return nd}),A.d(S,"NearestMipMapNearestFilter",function(){return sd}),A.d(S,"NearestMipMapLinearFilter",function(){return dd}),A.d(S,"LinearFilter",function(){return pd}),A.d(S,"LinearMipMapNearestFilter",function(){return cd}),A.d(S,"LinearMipMapLinearFilter",function(){return ud}),A.d(S,"UnsignedByteType",function(){return md}),A.d(S,"ByteType",function(){return gd}),A.d(S,"ShortType",function(){return fd}),A.d(S,"UnsignedShortType",function(){return hd}),A.d(S,"IntType",function(){return yd}),A.d(S,"UnsignedIntType",function(){return _d}),A.d(S,"FloatType",function(){return xd}),A.d(S,"HalfFloatType",function(){return vd}),A.d(S,"UnsignedShort4444Type",function(){return Td}),A.d(S,"UnsignedShort5551Type",function(){return Ed}),A.d(S,"UnsignedShort565Type",function(){return Sd}),A.d(S,"UnsignedInt248Type",function(){return Ad}),A.d(S,"AlphaFormat",function(){return wd}),A.d(S,"RGBFormat",function(){return Md}),A.d(S,"RGBAFormat",function(){return Rd}),A.d(S,"LuminanceFormat",function(){return Cd}),A.d(S,"LuminanceAlphaFormat",function(){return Pd}),A.d(S,"RGBEFormat",function(){return Ld}),A.d(S,"DepthFormat",function(){return Id}),A.d(S,"DepthStencilFormat",function(){return Bd}),A.d(S,"RGB_S3TC_DXT1_Format",function(){return Nd}),A.d(S,"RGBA_S3TC_DXT1_Format",function(){return zd}),A.d(S,"RGBA_S3TC_DXT3_Format",function(){return Dd}),A.d(S,"RGBA_S3TC_DXT5_Format",function(){return Fd}),A.d(S,"RGB_PVRTC_4BPPV1_Format",function(){return Ud}),A.d(S,"RGB_PVRTC_2BPPV1_Format",function(){return Od}),A.d(S,"RGBA_PVRTC_4BPPV1_Format",function(){return kd}),A.d(S,"RGBA_PVRTC_2BPPV1_Format",function(){return Vd}),A.d(S,"RGB_ETC1_Format",function(){return Gd}),A.d(S,"LoopOnce",function(){return Hd}),A.d(S,"LoopRepeat",function(){return Wd}),A.d(S,"LoopPingPong",function(){return jd}),A.d(S,"InterpolateDiscrete",function(){return qd}),A.d(S,"InterpolateLinear",function(){return Xd}),A.d(S,"InterpolateSmooth",function(){return Yd}),A.d(S,"ZeroCurvatureEnding",function(){return Zd}),A.d(S,"ZeroSlopeEnding",function(){return Jd}),A.d(S,"WrapAroundEnding",function(){return Qd}),A.d(S,"TrianglesDrawMode",function(){return Kd}),A.d(S,"TriangleStripDrawMode",function(){return $d}),A.d(S,"TriangleFanDrawMode",function(){return ep}),A.d(S,"LinearEncoding",function(){return tp}),A.d(S,"sRGBEncoding",function(){return ap}),A.d(S,"GammaEncoding",function(){return ip}),A.d(S,"RGBEEncoding",function(){return lp}),A.d(S,"LogLuvEncoding",function(){return dp}),A.d(S,"RGBM7Encoding",function(){return cp}),A.d(S,"RGBM16Encoding",function(){return mp}),A.d(S,"RGBDEncoding",function(){return gp}),A.d(S,"BasicDepthPacking",function(){return fp}),A.d(S,"RGBADepthPacking",function(){return hp}),A.d(S,"CubeGeometry",function(){return Et}),A.d(S,"Face4",function(){return qn}),A.d(S,"LineStrip",function(){return Em}),A.d(S,"LinePieces",function(){return Sm}),A.d(S,"MeshFaceMaterial",function(){return Xn}),A.d(S,"MultiMaterial",function(){return Yn}),A.d(S,"PointCloud",function(){return Zn}),A.d(S,"Particle",function(){return Jn}),A.d(S,"ParticleSystem",function(){return Qn}),A.d(S,"PointCloudMaterial",function(){return Kn}),A.d(S,"ParticleBasicMaterial",function(){return $n}),A.d(S,"ParticleSystemMaterial",function(){return rs}),A.d(S,"Vertex",function(){return as}),A.d(S,"DynamicBufferAttribute",function(){return os}),A.d(S,"Int8Attribute",function(){return is}),A.d(S,"Uint8Attribute",function(){return ss}),A.d(S,"Uint8ClampedAttribute",function(){return ls}),A.d(S,"Int16Attribute",function(){return ds}),A.d(S,"Uint16Attribute",function(){return ps}),A.d(S,"Int32Attribute",function(){return us}),A.d(S,"Uint32Attribute",function(){return ms}),A.d(S,"Float32Attribute",function(){return fs}),A.d(S,"Float64Attribute",function(){return hs}),A.d(S,"ClosedSplineCurve3",function(){return ys}),A.d(S,"SplineCurve3",function(){return _s}),A.d(S,"Spline",function(){return xs}),A.d(S,"AxisHelper",function(){return Ts}),A.d(S,"BoundingBoxHelper",function(){return Es}),A.d(S,"EdgesHelper",function(){return Ss}),A.d(S,"WireframeHelper",function(){return As}),A.d(S,"XHRLoader",function(){return ws}),A.d(S,"BinaryTextureLoader",function(){return Ms}),A.d(S,"GeometryUtils",function(){return Am}),A.d(S,"ImageUtils",function(){return wm}),A.d(S,"Projector",function(){return Rs}),A.d(S,"CanvasRenderer",function(){return Cs}),_NumberEPSILON===void 0&&(_NumberEPSILON=2.220446049250313e-16),_NumberisInteger===void 0&&(_NumberisInteger=function(Mm){return"number"==typeof Mm&&isFinite(Mm)&&_Mathfloor(Mm)===Mm}),_Mathsign===void 0&&(_Mathsign=function(Mm){return 0>Mm?-1:0<Mm?1:+Mm}),!1=="name"in Function.prototype&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),Object.assign===void 0&&function(){Object.assign=function(Mm){if(Mm===void 0||null===Mm)throw new TypeError("Cannot convert undefined or null to object");for(var Rm=Object(Mm),Cm=1,Pm;Cm<arguments.length;Cm++)if(Pm=arguments[Cm],void 0!==Pm&&null!==Pm)for(var Lm in Pm)Object.prototype.hasOwnProperty.call(Pm,Lm)&&(Rm[Lm]=Pm[Lm]);return Rm}}(),Object.assign(L.prototype,{addEventListener:function(Mm,Rm){this._listeners===void 0&&(this._listeners={});var Cm=this._listeners;Cm[Mm]===void 0&&(Cm[Mm]=[]),-1===Cm[Mm].indexOf(Rm)&&Cm[Mm].push(Rm)},hasEventListener:function(Mm,Rm){if(this._listeners===void 0)return!1;var Cm=this._listeners;return Cm[Mm]!==void 0&&-1!==Cm[Mm].indexOf(Rm)},removeEventListener:function(Mm,Rm){if(void 0!==this._listeners){var Cm=this._listeners,Pm=Cm[Mm];if(void 0!==Pm){var Lm=Pm.indexOf(Rm);-1!==Lm&&Pm.splice(Lm,1)}}},dispatchEvent:function(Mm){if(void 0!==this._listeners){var Rm=this._listeners,Cm=Rm[Mm.type];if(void 0!==Cm){Mm.target=this;for(var Pm=Cm.slice(0),Lm=0,Im=Pm.length;Lm<Im;Lm++)Pm[Lm].call(this,Mm)}}}});var Ps="89",Ls={LEFT:0,MIDDLE:1,RIGHT:2},Is=0,Ns=1,zs=2,Ds=3,Fs=0,Us=1,Os=0,ks=1,Vs=2,Gs=0,Hs=1,Ws=2,js=1,qs=2,Xs=0,Ys=1,Zs=2,Js=0,Qs=1,Ks=2,$s=3,el=4,rl=5,al=100,nl=101,ll=102,dl=103,ul=104,yl=200,_l=201,xl=202,bl=203,Tl=204,El=205,Sl=206,Al=207,wl=208,Ml=209,Rl=210,Cl=0,Pl=1,Ll=2,Il=3,Bl=4,Nl=5,zl=6,Dl=7,Fl=0,Ul=1,Ol=2,Vl=0,Gl=1,Hl=2,Wl=3,ql=4,Xl=300,Yl=301,Zl=302,Jl=303,Ql=304,Kl=305,$l=306,ed=307,td=1e3,rd=1001,od=1002,nd=1003,sd=1004,dd=1005,pd=1006,cd=1007,ud=1008,md=1009,gd=1010,fd=1011,hd=1012,yd=1013,_d=1014,xd=1015,vd=1016,Td=1017,Ed=1018,Sd=1019,Ad=1020,wd=1021,Md=1022,Rd=1023,Cd=1024,Pd=1025,Ld=Rd,Id=1026,Bd=1027,Nd=2001,zd=2002,Dd=2003,Fd=2004,Ud=2100,Od=2101,kd=2102,Vd=2103,Gd=2151,Hd=2200,Wd=2201,jd=2202,qd=2300,Xd=2301,Yd=2302,Zd=2400,Jd=2401,Qd=2402,Kd=0,$d=1,ep=2,tp=3e3,ap=3001,ip=3007,lp=3002,dp=3003,cp=3004,mp=3005,gp=3006,fp=3200,hp=3201,yp={DEG2RAD:_MathPI/180,RAD2DEG:180/_MathPI,generateUUID:function(){for(var Mm=[],Rm=0;256>Rm;Rm++)Mm[Rm]=(16>Rm?"0":"")+Rm.toString(16).toUpperCase();return function(){var Cm=0|4294967295*Math.random(),Pm=0|4294967295*Math.random(),Lm=0|4294967295*Math.random(),Im=0|4294967295*Math.random();return Mm[255&Cm]+Mm[255&Cm>>8]+Mm[255&Cm>>16]+Mm[255&Cm>>24]+"-"+Mm[255&Pm]+Mm[255&Pm>>8]+"-"+Mm[64|15&Pm>>16]+Mm[255&Pm>>24]+"-"+Mm[128|63&Lm]+Mm[255&Lm>>8]+"-"+Mm[255&Lm>>16]+Mm[255&Lm>>24]+Mm[255&Im]+Mm[255&Im>>8]+Mm[255&Im>>16]+Mm[255&Im>>24]}}(),clamp:function(Mm,Rm,Cm){return _Mathmax(Rm,_Mathmin(Cm,Mm))},euclideanModulo:function(Mm,Rm){return(Mm%Rm+Rm)%Rm},mapLinear:function(Mm,Rm,Cm,Pm,Lm){return Pm+(Mm-Rm)*(Lm-Pm)/(Cm-Rm)},lerp:function(Mm,Rm,Cm){return(1-Cm)*Mm+Cm*Rm},smoothstep:function(Mm,Rm,Cm){return Mm<=Rm?0:Mm>=Cm?1:(Mm=(Mm-Rm)/(Cm-Rm),Mm*Mm*(3-2*Mm))},smootherstep:function(Mm,Rm,Cm){return Mm<=Rm?0:Mm>=Cm?1:(Mm=(Mm-Rm)/(Cm-Rm),Mm*Mm*Mm*(Mm*(6*Mm-15)+10))},randInt:function(Mm,Rm){return Mm+_Mathfloor(Math.random()*(Rm-Mm+1))},randFloat:function(Mm,Rm){return Mm+Math.random()*(Rm-Mm)},randFloatSpread:function(Mm){return Mm*(0.5-Math.random())},degToRad:function(Mm){return Mm*yp.DEG2RAD},radToDeg:function(Mm){return Mm*yp.RAD2DEG},isPowerOfTwo:function(Mm){return 0==(Mm&Mm-1)&&0!==Mm},ceilPowerOfTwo:function(Mm){return _Mathpow(2,_Mathceil(_Mathlog(Mm)/_MathLN))},floorPowerOfTwo:function(Mm){return _Mathpow(2,_Mathfloor(_Mathlog(Mm)/_MathLN))}};Object.defineProperties(D.prototype,{width:{get:function(){return this.x},set:function(Mm){this.x=Mm}},height:{get:function(){return this.y},set:function(Mm){this.y=Mm}}}),Object.assign(D.prototype,{isVector2:!0,set:function(Mm,Rm){return this.x=Mm,this.y=Rm,this},setScalar:function(Mm){return this.x=Mm,this.y=Mm,this},setX:function(Mm){return this.x=Mm,this},setY:function(Mm){return this.y=Mm,this},setComponent:function(Mm,Rm){switch(Mm){case 0:this.x=Rm;break;case 1:this.y=Rm;break;default:throw new Error("index is out of range: "+Mm);}return this},getComponent:function(Mm){switch(Mm){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+Mm);}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(Mm){return this.x=Mm.x,this.y=Mm.y,this},add:function(Mm,Rm){return void 0===Rm?(this.x+=Mm.x,this.y+=Mm.y,this):(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(Mm,Rm))},addScalar:function(Mm){return this.x+=Mm,this.y+=Mm,this},addVectors:function(Mm,Rm){return this.x=Mm.x+Rm.x,this.y=Mm.y+Rm.y,this},addScaledVector:function(Mm,Rm){return this.x+=Mm.x*Rm,this.y+=Mm.y*Rm,this},sub:function(Mm,Rm){return void 0===Rm?(this.x-=Mm.x,this.y-=Mm.y,this):(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(Mm,Rm))},subScalar:function(Mm){return this.x-=Mm,this.y-=Mm,this},subVectors:function(Mm,Rm){return this.x=Mm.x-Rm.x,this.y=Mm.y-Rm.y,this},multiply:function(Mm){return this.x*=Mm.x,this.y*=Mm.y,this},multiplyScalar:function(Mm){return this.x*=Mm,this.y*=Mm,this},divide:function(Mm){return this.x/=Mm.x,this.y/=Mm.y,this},divideScalar:function(Mm){return this.multiplyScalar(1/Mm)},applyMatrix3:function(Mm){var Rm=this.x,Cm=this.y,Pm=Mm.elements;return this.x=Pm[0]*Rm+Pm[3]*Cm+Pm[6],this.y=Pm[1]*Rm+Pm[4]*Cm+Pm[7],this},min:function(Mm){return this.x=_Mathmin(this.x,Mm.x),this.y=_Mathmin(this.y,Mm.y),this},max:function(Mm){return this.x=_Mathmax(this.x,Mm.x),this.y=_Mathmax(this.y,Mm.y),this},clamp:function(Mm,Rm){return this.x=_Mathmax(Mm.x,_Mathmin(Rm.x,this.x)),this.y=_Mathmax(Mm.y,_Mathmin(Rm.y,this.y)),this},clampScalar:function(){var Mm=new D,Rm=new D;return function(Pm,Lm){return Mm.set(Pm,Pm),Rm.set(Lm,Lm),this.clamp(Mm,Rm)}}(),clampLength:function(Mm,Rm){var Cm=this.length();return this.divideScalar(Cm||1).multiplyScalar(_Mathmax(Mm,_Mathmin(Rm,Cm)))},floor:function(){return this.x=_Mathfloor(this.x),this.y=_Mathfloor(this.y),this},ceil:function(){return this.x=_Mathceil(this.x),this.y=_Mathceil(this.y),this},round:function(){return this.x=_Mathround(this.x),this.y=_Mathround(this.y),this},roundToZero:function(){return this.x=0>this.x?_Mathceil(this.x):_Mathfloor(this.x),this.y=0>this.y?_Mathceil(this.y):_Mathfloor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(Mm){return this.x*Mm.x+this.y*Mm.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return _Mathsqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return _Mathabs(this.x)+_Mathabs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var Mm=_Mathatan(this.y,this.x);return 0>Mm&&(Mm+=2*_MathPI),Mm},distanceTo:function(Mm){return _Mathsqrt(this.distanceToSquared(Mm))},distanceToSquared:function(Mm){var Rm=this.x-Mm.x,Cm=this.y-Mm.y;return Rm*Rm+Cm*Cm},manhattanDistanceTo:function(Mm){return _Mathabs(this.x-Mm.x)+_Mathabs(this.y-Mm.y)},setLength:function(Mm){return this.normalize().multiplyScalar(Mm)},lerp:function(Mm,Rm){return this.x+=(Mm.x-this.x)*Rm,this.y+=(Mm.y-this.y)*Rm,this},lerpVectors:function(Mm,Rm,Cm){return this.subVectors(Rm,Mm).multiplyScalar(Cm).add(Mm)},equals:function(Mm){return Mm.x===this.x&&Mm.y===this.y},fromArray:function(Mm,Rm){return void 0===Rm&&(Rm=0),this.x=Mm[Rm],this.y=Mm[Rm+1],this},toArray:function(Mm,Rm){return void 0===Mm&&(Mm=[]),void 0===Rm&&(Rm=0),Mm[Rm]=this.x,Mm[Rm+1]=this.y,Mm},fromBufferAttribute:function(Mm,Rm,Cm){return void 0!==Cm&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=Mm.getX(Rm),this.y=Mm.getY(Rm),this},rotateAround:function(Mm,Rm){var Cm=_Mathcos(Rm),Pm=_Mathsin(Rm),Lm=this.x-Mm.x,Im=this.y-Mm.y;return this.x=Lm*Cm-Im*Pm+Mm.x,this.y=Lm*Pm+Im*Cm+Mm.y,this}}),Object.assign(F.prototype,{isMatrix4:!0,set:function(Mm,Rm,Cm,Pm,Lm,Im,Bm,Nm,zm,Dm,Fm,Um,Om,km,Vm,Gm){var Hm=this.elements;return Hm[0]=Mm,Hm[4]=Rm,Hm[8]=Cm,Hm[12]=Pm,Hm[1]=Lm,Hm[5]=Im,Hm[9]=Bm,Hm[13]=Nm,Hm[2]=zm,Hm[6]=Dm,Hm[10]=Fm,Hm[14]=Um,Hm[3]=Om,Hm[7]=km,Hm[11]=Vm,Hm[15]=Gm,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return new F().fromArray(this.elements)},copy:function(Mm){var Rm=this.elements,Cm=Mm.elements;return Rm[0]=Cm[0],Rm[1]=Cm[1],Rm[2]=Cm[2],Rm[3]=Cm[3],Rm[4]=Cm[4],Rm[5]=Cm[5],Rm[6]=Cm[6],Rm[7]=Cm[7],Rm[8]=Cm[8],Rm[9]=Cm[9],Rm[10]=Cm[10],Rm[11]=Cm[11],Rm[12]=Cm[12],Rm[13]=Cm[13],Rm[14]=Cm[14],Rm[15]=Cm[15],this},copyPosition:function(Mm){var Rm=this.elements,Cm=Mm.elements;return Rm[12]=Cm[12],Rm[13]=Cm[13],Rm[14]=Cm[14],this},extractBasis:function(Mm,Rm,Cm){return Mm.setFromMatrixColumn(this,0),Rm.setFromMatrixColumn(this,1),Cm.setFromMatrixColumn(this,2),this},makeBasis:function(Mm,Rm,Cm){return this.set(Mm.x,Rm.x,Cm.x,0,Mm.y,Rm.y,Cm.y,0,Mm.z,Rm.z,Cm.z,0,0,0,0,1),this},extractRotation:function(){var Mm=new O;return function(Cm){var Pm=this.elements,Lm=Cm.elements,Im=1/Mm.setFromMatrixColumn(Cm,0).length(),Bm=1/Mm.setFromMatrixColumn(Cm,1).length(),Nm=1/Mm.setFromMatrixColumn(Cm,2).length();return Pm[0]=Lm[0]*Im,Pm[1]=Lm[1]*Im,Pm[2]=Lm[2]*Im,Pm[4]=Lm[4]*Bm,Pm[5]=Lm[5]*Bm,Pm[6]=Lm[6]*Bm,Pm[8]=Lm[8]*Nm,Pm[9]=Lm[9]*Nm,Pm[10]=Lm[10]*Nm,this}}(),makeRotationFromEuler:function(Mm){Mm&&Mm.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var Rm=this.elements,Cm=Mm.x,Pm=Mm.y,Lm=Mm.z,Im=_Mathcos(Cm),Bm=_Mathsin(Cm),Nm=_Mathcos(Pm),zm=_Mathsin(Pm),Dm=_Mathcos(Lm),Fm=_Mathsin(Lm);if("XYZ"===Mm.order){var Um=Im*Dm,Om=Im*Fm,km=Bm*Dm,Vm=Bm*Fm;Rm[0]=Nm*Dm,Rm[4]=-Nm*Fm,Rm[8]=zm,Rm[1]=Om+km*zm,Rm[5]=Um-Vm*zm,Rm[9]=-Bm*Nm,Rm[2]=Vm-Um*zm,Rm[6]=km+Om*zm,Rm[10]=Im*Nm}else if("YXZ"===Mm.order){var Gm=Nm*Dm,Hm=Nm*Fm,Wm=zm*Dm,jm=zm*Fm;Rm[0]=Gm+jm*Bm,Rm[4]=Wm*Bm-Hm,Rm[8]=Im*zm,Rm[1]=Im*Fm,Rm[5]=Im*Dm,Rm[9]=-Bm,Rm[2]=Hm*Bm-Wm,Rm[6]=jm+Gm*Bm,Rm[10]=Im*Nm}else if("ZXY"===Mm.order){var Gm=Nm*Dm,Hm=Nm*Fm,Wm=zm*Dm,jm=zm*Fm;Rm[0]=Gm-jm*Bm,Rm[4]=-Im*Fm,Rm[8]=Wm+Hm*Bm,Rm[1]=Hm+Wm*Bm,Rm[5]=Im*Dm,Rm[9]=jm-Gm*Bm,Rm[2]=-Im*zm,Rm[6]=Bm,Rm[10]=Im*Nm}else if("ZYX"===Mm.order){var Um=Im*Dm,Om=Im*Fm,km=Bm*Dm,Vm=Bm*Fm;Rm[0]=Nm*Dm,Rm[4]=km*zm-Om,Rm[8]=Um*zm+Vm,Rm[1]=Nm*Fm,Rm[5]=Vm*zm+Um,Rm[9]=Om*zm-km,Rm[2]=-zm,Rm[6]=Bm*Nm,Rm[10]=Im*Nm}else if("YZX"===Mm.order){var Xm=Im*Nm,Ym=Im*zm,Zm=Bm*Nm,Jm=Bm*zm;Rm[0]=Nm*Dm,Rm[4]=Jm-Xm*Fm,Rm[8]=Zm*Fm+Ym,Rm[1]=Fm,Rm[5]=Im*Dm,Rm[9]=-Bm*Dm,Rm[2]=-zm*Dm,Rm[6]=Ym*Fm+Zm,Rm[10]=Xm-Jm*Fm}else if("XZY"===Mm.order){var Xm=Im*Nm,Ym=Im*zm,Zm=Bm*Nm,Jm=Bm*zm;Rm[0]=Nm*Dm,Rm[4]=-Fm,Rm[8]=zm*Dm,Rm[1]=Xm*Fm+Jm,Rm[5]=Im*Dm,Rm[9]=Ym*Fm-Zm,Rm[2]=Zm*Fm-Ym,Rm[6]=Bm*Dm,Rm[10]=Jm*Fm+Xm}return Rm[3]=0,Rm[7]=0,Rm[11]=0,Rm[12]=0,Rm[13]=0,Rm[14]=0,Rm[15]=1,this},makeRotationFromQuaternion:function(Mm){var Rm=this.elements,Cm=Mm._x,Pm=Mm._y,Lm=Mm._z,Im=Mm._w,Bm=Cm+Cm,Nm=Pm+Pm,zm=Lm+Lm,Dm=Cm*Bm,Fm=Cm*Nm,Um=Cm*zm,Om=Pm*Nm,km=Pm*zm,Vm=Lm*zm,Gm=Im*Bm,Hm=Im*Nm,Wm=Im*zm;return Rm[0]=1-(Om+Vm),Rm[4]=Fm-Wm,Rm[8]=Um+Hm,Rm[1]=Fm+Wm,Rm[5]=1-(Dm+Vm),Rm[9]=km-Gm,Rm[2]=Um-Hm,Rm[6]=km+Gm,Rm[10]=1-(Dm+Om),Rm[3]=0,Rm[7]=0,Rm[11]=0,Rm[12]=0,Rm[13]=0,Rm[14]=0,Rm[15]=1,this},lookAt:function(){var Mm=new O,Rm=new O,Cm=new O;return function(Lm,Im,Bm){var Nm=this.elements;return Cm.subVectors(Lm,Im),0===Cm.lengthSq()&&(Cm.z=1),Cm.normalize(),Mm.crossVectors(Bm,Cm),0===Mm.lengthSq()&&(1===_Mathabs(Bm.z)?Cm.x+=1e-4:Cm.z+=1e-4,Cm.normalize(),Mm.crossVectors(Bm,Cm)),Mm.normalize(),Rm.crossVectors(Cm,Mm),Nm[0]=Mm.x,Nm[4]=Rm.x,Nm[8]=Cm.x,Nm[1]=Mm.y,Nm[5]=Rm.y,Nm[9]=Cm.y,Nm[2]=Mm.z,Nm[6]=Rm.z,Nm[10]=Cm.z,this}}(),multiply:function(Mm,Rm){return void 0===Rm?this.multiplyMatrices(this,Mm):(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(Mm,Rm))},premultiply:function(Mm){return this.multiplyMatrices(Mm,this)},multiplyMatrices:function(Mm,Rm){var Cm=Mm.elements,Pm=Rm.elements,Lm=this.elements,Im=Cm[0],Bm=Cm[4],Nm=Cm[8],zm=Cm[12],Dm=Cm[1],Fm=Cm[5],Um=Cm[9],Om=Cm[13],km=Cm[2],Vm=Cm[6],Gm=Cm[10],Hm=Cm[14],Wm=Cm[3],jm=Cm[7],Xm=Cm[11],Ym=Cm[15],Zm=Pm[0],Jm=Pm[4],Qm=Pm[8],Km=Pm[12],$m=Pm[1],eg=Pm[5],tg=Pm[9],rg=Pm[13],ag=Pm[2],og=Pm[6],ig=Pm[10],ng=Pm[14],sg=Pm[3],lg=Pm[7],dg=Pm[11],pg=Pm[15];return Lm[0]=Im*Zm+Bm*$m+Nm*ag+zm*sg,Lm[4]=Im*Jm+Bm*eg+Nm*og+zm*lg,Lm[8]=Im*Qm+Bm*tg+Nm*ig+zm*dg,Lm[12]=Im*Km+Bm*rg+Nm*ng+zm*pg,Lm[1]=Dm*Zm+Fm*$m+Um*ag+Om*sg,Lm[5]=Dm*Jm+Fm*eg+Um*og+Om*lg,Lm[9]=Dm*Qm+Fm*tg+Um*ig+Om*dg,Lm[13]=Dm*Km+Fm*rg+Um*ng+Om*pg,Lm[2]=km*Zm+Vm*$m+Gm*ag+Hm*sg,Lm[6]=km*Jm+Vm*eg+Gm*og+Hm*lg,Lm[10]=km*Qm+Vm*tg+Gm*ig+Hm*dg,Lm[14]=km*Km+Vm*rg+Gm*ng+Hm*pg,Lm[3]=Wm*Zm+jm*$m+Xm*ag+Ym*sg,Lm[7]=Wm*Jm+jm*eg+Xm*og+Ym*lg,Lm[11]=Wm*Qm+jm*tg+Xm*ig+Ym*dg,Lm[15]=Wm*Km+jm*rg+Xm*ng+Ym*pg,this},multiplyScalar:function(Mm){var Rm=this.elements;return Rm[0]*=Mm,Rm[4]*=Mm,Rm[8]*=Mm,Rm[12]*=Mm,Rm[1]*=Mm,Rm[5]*=Mm,Rm[9]*=Mm,Rm[13]*=Mm,Rm[2]*=Mm,Rm[6]*=Mm,Rm[10]*=Mm,Rm[14]*=Mm,Rm[3]*=Mm,Rm[7]*=Mm,Rm[11]*=Mm,Rm[15]*=Mm,this},applyToBufferAttribute:function(){var Mm=new O;return function(Cm){for(var Pm=0,Lm=Cm.count;Pm<Lm;Pm++)Mm.x=Cm.getX(Pm),Mm.y=Cm.getY(Pm),Mm.z=Cm.getZ(Pm),Mm.applyMatrix4(this),Cm.setXYZ(Pm,Mm.x,Mm.y,Mm.z);return Cm}}(),determinant:function(){var Mm=this.elements,Rm=Mm[0],Cm=Mm[4],Pm=Mm[8],Lm=Mm[12],Im=Mm[1],Bm=Mm[5],Nm=Mm[9],zm=Mm[13],Dm=Mm[2],Fm=Mm[6],Um=Mm[10],Om=Mm[14],km=Mm[3],Vm=Mm[7],Gm=Mm[11],Hm=Mm[15];return km*(+Lm*Nm*Fm-Pm*zm*Fm-Lm*Bm*Um+Cm*zm*Um+Pm*Bm*Om-Cm*Nm*Om)+Vm*(+Rm*Nm*Om-Rm*zm*Um+Lm*Im*Um-Pm*Im*Om+Pm*zm*Dm-Lm*Nm*Dm)+Gm*(+Rm*zm*Fm-Rm*Bm*Om-Lm*Im*Fm+Cm*Im*Om+Lm*Bm*Dm-Cm*zm*Dm)+Hm*(-Pm*Bm*Dm-Rm*Nm*Fm+Rm*Bm*Um+Pm*Im*Fm-Cm*Im*Um+Cm*Nm*Dm)},transpose:function(){var Mm=this.elements,Rm;return Rm=Mm[1],Mm[1]=Mm[4],Mm[4]=Rm,Rm=Mm[2],Mm[2]=Mm[8],Mm[8]=Rm,Rm=Mm[6],Mm[6]=Mm[9],Mm[9]=Rm,Rm=Mm[3],Mm[3]=Mm[12],Mm[12]=Rm,Rm=Mm[7],Mm[7]=Mm[13],Mm[13]=Rm,Rm=Mm[11],Mm[11]=Mm[14],Mm[14]=Rm,this},setPosition:function(Mm){var Rm=this.elements;return Rm[12]=Mm.x,Rm[13]=Mm.y,Rm[14]=Mm.z,this},getInverse:function(Mm,Rm){var Cm=this.elements,Pm=Mm.elements,Lm=Pm[0],Im=Pm[1],Bm=Pm[2],Nm=Pm[3],zm=Pm[4],Dm=Pm[5],Fm=Pm[6],Um=Pm[7],Om=Pm[8],km=Pm[9],Vm=Pm[10],Gm=Pm[11],Hm=Pm[12],Wm=Pm[13],jm=Pm[14],Xm=Pm[15],Ym=km*jm*Um-Wm*Vm*Um+Wm*Fm*Gm-Dm*jm*Gm-km*Fm*Xm+Dm*Vm*Xm,Zm=Hm*Vm*Um-Om*jm*Um-Hm*Fm*Gm+zm*jm*Gm+Om*Fm*Xm-zm*Vm*Xm,Jm=Om*Wm*Um-Hm*km*Um+Hm*Dm*Gm-zm*Wm*Gm-Om*Dm*Xm+zm*km*Xm,Qm=Hm*km*Fm-Om*Wm*Fm-Hm*Dm*Vm+zm*Wm*Vm+Om*Dm*jm-zm*km*jm,Km=Lm*Ym+Im*Zm+Bm*Jm+Nm*Qm;if(0==Km){var $m="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===Rm)throw new Error($m);else console.warn($m);return this.identity()}var eg=1/Km;return Cm[0]=Ym*eg,Cm[1]=(Wm*Vm*Nm-km*jm*Nm-Wm*Bm*Gm+Im*jm*Gm+km*Bm*Xm-Im*Vm*Xm)*eg,Cm[2]=(Dm*jm*Nm-Wm*Fm*Nm+Wm*Bm*Um-Im*jm*Um-Dm*Bm*Xm+Im*Fm*Xm)*eg,Cm[3]=(km*Fm*Nm-Dm*Vm*Nm-km*Bm*Um+Im*Vm*Um+Dm*Bm*Gm-Im*Fm*Gm)*eg,Cm[4]=Zm*eg,Cm[5]=(Om*jm*Nm-Hm*Vm*Nm+Hm*Bm*Gm-Lm*jm*Gm-Om*Bm*Xm+Lm*Vm*Xm)*eg,Cm[6]=(Hm*Fm*Nm-zm*jm*Nm-Hm*Bm*Um+Lm*jm*Um+zm*Bm*Xm-Lm*Fm*Xm)*eg,Cm[7]=(zm*Vm*Nm-Om*Fm*Nm+Om*Bm*Um-Lm*Vm*Um-zm*Bm*Gm+Lm*Fm*Gm)*eg,Cm[8]=Jm*eg,Cm[9]=(Hm*km*Nm-Om*Wm*Nm-Hm*Im*Gm+Lm*Wm*Gm+Om*Im*Xm-Lm*km*Xm)*eg,Cm[10]=(zm*Wm*Nm-Hm*Dm*Nm+Hm*Im*Um-Lm*Wm*Um-zm*Im*Xm+Lm*Dm*Xm)*eg,Cm[11]=(Om*Dm*Nm-zm*km*Nm-Om*Im*Um+Lm*km*Um+zm*Im*Gm-Lm*Dm*Gm)*eg,Cm[12]=Qm*eg,Cm[13]=(Om*Wm*Bm-Hm*km*Bm+Hm*Im*Vm-Lm*Wm*Vm-Om*Im*jm+Lm*km*jm)*eg,Cm[14]=(Hm*Dm*Bm-zm*Wm*Bm-Hm*Im*Fm+Lm*Wm*Fm+zm*Im*jm-Lm*Dm*jm)*eg,Cm[15]=(zm*km*Bm-Om*Dm*Bm+Om*Im*Fm-Lm*km*Fm-zm*Im*Vm+Lm*Dm*Vm)*eg,this},scale:function(Mm){var Rm=this.elements,Cm=Mm.x,Pm=Mm.y,Lm=Mm.z;return Rm[0]*=Cm,Rm[4]*=Pm,Rm[8]*=Lm,Rm[1]*=Cm,Rm[5]*=Pm,Rm[9]*=Lm,Rm[2]*=Cm,Rm[6]*=Pm,Rm[10]*=Lm,Rm[3]*=Cm,Rm[7]*=Pm,Rm[11]*=Lm,this},getMaxScaleOnAxis:function(){var Mm=this.elements,Rm=Mm[0]*Mm[0]+Mm[1]*Mm[1]+Mm[2]*Mm[2],Cm=Mm[4]*Mm[4]+Mm[5]*Mm[5]+Mm[6]*Mm[6],Pm=Mm[8]*Mm[8]+Mm[9]*Mm[9]+Mm[10]*Mm[10];return _Mathsqrt(_Mathmax(Rm,Cm,Pm))},makeTranslation:function(Mm,Rm,Cm){return this.set(1,0,0,Mm,0,1,0,Rm,0,0,1,Cm,0,0,0,1),this},makeRotationX:function(Mm){var Rm=_Mathcos(Mm),Cm=_Mathsin(Mm);return this.set(1,0,0,0,0,Rm,-Cm,0,0,Cm,Rm,0,0,0,0,1),this},makeRotationY:function(Mm){var Rm=_Mathcos(Mm),Cm=_Mathsin(Mm);return this.set(Rm,0,Cm,0,0,1,0,0,-Cm,0,Rm,0,0,0,0,1),this},makeRotationZ:function(Mm){var Rm=_Mathcos(Mm),Cm=_Mathsin(Mm);return this.set(Rm,-Cm,0,0,Cm,Rm,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(Mm,Rm){var Cm=_Mathcos(Rm),Pm=_Mathsin(Rm),Lm=1-Cm,Im=Mm.x,Bm=Mm.y,Nm=Mm.z,zm=Lm*Im,Dm=Lm*Bm;return this.set(zm*Im+Cm,zm*Bm-Pm*Nm,zm*Nm+Pm*Bm,0,zm*Bm+Pm*Nm,Dm*Bm+Cm,Dm*Nm-Pm*Im,0,zm*Nm-Pm*Bm,Dm*Nm+Pm*Im,Lm*Nm*Nm+Cm,0,0,0,0,1),this},makeScale:function(Mm,Rm,Cm){return this.set(Mm,0,0,0,0,Rm,0,0,0,0,Cm,0,0,0,0,1),this},makeShear:function(Mm,Rm,Cm){return this.set(1,Rm,Cm,0,Mm,1,Cm,0,Mm,Rm,1,0,0,0,0,1),this},compose:function(Mm,Rm,Cm){return this.makeRotationFromQuaternion(Rm),this.scale(Cm),this.setPosition(Mm),this},decompose:function(){var Mm=new O,Rm=new F;return function(Pm,Lm,Im){var Bm=this.elements,Nm=Mm.set(Bm[0],Bm[1],Bm[2]).length(),zm=Mm.set(Bm[4],Bm[5],Bm[6]).length(),Dm=Mm.set(Bm[8],Bm[9],Bm[10]).length(),Fm=this.determinant();0>Fm&&(Nm=-Nm),Pm.x=Bm[12],Pm.y=Bm[13],Pm.z=Bm[14],Rm.copy(this);var Um=1/Nm,Om=1/zm,km=1/Dm;return Rm.elements[0]*=Um,Rm.elements[1]*=Um,Rm.elements[2]*=Um,Rm.elements[4]*=Om,Rm.elements[5]*=Om,Rm.elements[6]*=Om,Rm.elements[8]*=km,Rm.elements[9]*=km,Rm.elements[10]*=km,Lm.setFromRotationMatrix(Rm),Im.x=Nm,Im.y=zm,Im.z=Dm,this}}(),makePerspective:function(Mm,Rm,Cm,Pm,Lm,Im){void 0===Im&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var Bm=this.elements;return Bm[0]=2*Lm/(Rm-Mm),Bm[4]=0,Bm[8]=(Rm+Mm)/(Rm-Mm),Bm[12]=0,Bm[1]=0,Bm[5]=2*Lm/(Cm-Pm),Bm[9]=(Cm+Pm)/(Cm-Pm),Bm[13]=0,Bm[2]=0,Bm[6]=0,Bm[10]=-(Im+Lm)/(Im-Lm),Bm[14]=-2*Im*Lm/(Im-Lm),Bm[3]=0,Bm[7]=0,Bm[11]=-1,Bm[15]=0,this},makeOrthographic:function(Mm,Rm,Cm,Pm,Lm,Im){var Bm=this.elements,Nm=1/(Rm-Mm),zm=1/(Cm-Pm),Dm=1/(Im-Lm);return Bm[0]=2*Nm,Bm[4]=0,Bm[8]=0,Bm[12]=-((Rm+Mm)*Nm),Bm[1]=0,Bm[5]=2*zm,Bm[9]=0,Bm[13]=-((Cm+Pm)*zm),Bm[2]=0,Bm[6]=0,Bm[10]=-2*Dm,Bm[14]=-((Im+Lm)*Dm),Bm[3]=0,Bm[7]=0,Bm[11]=0,Bm[15]=1,this},equals:function(Mm){for(var Rm=this.elements,Cm=Mm.elements,Pm=0;16>Pm;Pm++)if(Rm[Pm]!==Cm[Pm])return!1;return!0},fromArray:function(Mm,Rm){Rm===void 0&&(Rm=0);for(var Cm=0;16>Cm;Cm++)this.elements[Cm]=Mm[Cm+Rm];return this},toArray:function(Mm,Rm){void 0===Mm&&(Mm=[]),void 0===Rm&&(Rm=0);var Cm=this.elements;return Mm[Rm]=Cm[0],Mm[Rm+1]=Cm[1],Mm[Rm+2]=Cm[2],Mm[Rm+3]=Cm[3],Mm[Rm+4]=Cm[4],Mm[Rm+5]=Cm[5],Mm[Rm+6]=Cm[6],Mm[Rm+7]=Cm[7],Mm[Rm+8]=Cm[8],Mm[Rm+9]=Cm[9],Mm[Rm+10]=Cm[10],Mm[Rm+11]=Cm[11],Mm[Rm+12]=Cm[12],Mm[Rm+13]=Cm[13],Mm[Rm+14]=Cm[14],Mm[Rm+15]=Cm[15],Mm}}),Object.assign(U,{slerp:function(Mm,Rm,Cm,Pm){return Cm.copy(Mm).slerp(Rm,Pm)},slerpFlat:function(Mm,Rm,Cm,Pm,Lm,Im,Bm){var Nm=Cm[Pm+0],zm=Cm[Pm+1],Dm=Cm[Pm+2],Fm=Cm[Pm+3],Um=Lm[Im+0],Om=Lm[Im+1],km=Lm[Im+2],Vm=Lm[Im+3];if(Fm!==Vm||Nm!==Um||zm!==Om||Dm!==km){var Gm=1-Bm,Hm=Nm*Um+zm*Om+Dm*km+Fm*Vm,Wm=0<=Hm?1:-1,jm=1-Hm*Hm;if(jm>_NumberEPSILON){var Xm=_Mathsqrt(jm),Ym=_Mathatan(Xm,Hm*Wm);Gm=_Mathsin(Gm*Ym)/Xm,Bm=_Mathsin(Bm*Ym)/Xm}var Zm=Bm*Wm;if(Nm=Nm*Gm+Um*Zm,zm=zm*Gm+Om*Zm,Dm=Dm*Gm+km*Zm,Fm=Fm*Gm+Vm*Zm,Gm==1-Bm){var Jm=1/_Mathsqrt(Nm*Nm+zm*zm+Dm*Dm+Fm*Fm);Nm*=Jm,zm*=Jm,Dm*=Jm,Fm*=Jm}}Mm[Rm]=Nm,Mm[Rm+1]=zm,Mm[Rm+2]=Dm,Mm[Rm+3]=Fm}}),Object.defineProperties(U.prototype,{x:{get:function(){return this._x},set:function(Mm){this._x=Mm,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(Mm){this._y=Mm,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(Mm){this._z=Mm,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(Mm){this._w=Mm,this.onChangeCallback()}}}),Object.assign(U.prototype,{set:function(Mm,Rm,Cm,Pm){return this._x=Mm,this._y=Rm,this._z=Cm,this._w=Pm,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(Mm){return this._x=Mm.x,this._y=Mm.y,this._z=Mm.z,this._w=Mm.w,this.onChangeCallback(),this},setFromEuler:function(Mm,Rm){if(!(Mm&&Mm.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var Cm=Mm._x,Pm=Mm._y,Lm=Mm._z,Im=Mm.order,Bm=_Mathcos,Nm=_Mathsin,zm=Bm(Cm/2),Dm=Bm(Pm/2),Fm=Bm(Lm/2),Um=Nm(Cm/2),Om=Nm(Pm/2),km=Nm(Lm/2);return"XYZ"===Im?(this._x=Um*Dm*Fm+zm*Om*km,this._y=zm*Om*Fm-Um*Dm*km,this._z=zm*Dm*km+Um*Om*Fm,this._w=zm*Dm*Fm-Um*Om*km):"YXZ"===Im?(this._x=Um*Dm*Fm+zm*Om*km,this._y=zm*Om*Fm-Um*Dm*km,this._z=zm*Dm*km-Um*Om*Fm,this._w=zm*Dm*Fm+Um*Om*km):"ZXY"===Im?(this._x=Um*Dm*Fm-zm*Om*km,this._y=zm*Om*Fm+Um*Dm*km,this._z=zm*Dm*km+Um*Om*Fm,this._w=zm*Dm*Fm-Um*Om*km):"ZYX"===Im?(this._x=Um*Dm*Fm-zm*Om*km,this._y=zm*Om*Fm+Um*Dm*km,this._z=zm*Dm*km-Um*Om*Fm,this._w=zm*Dm*Fm+Um*Om*km):"YZX"===Im?(this._x=Um*Dm*Fm+zm*Om*km,this._y=zm*Om*Fm+Um*Dm*km,this._z=zm*Dm*km-Um*Om*Fm,this._w=zm*Dm*Fm-Um*Om*km):"XZY"===Im&&(this._x=Um*Dm*Fm-zm*Om*km,this._y=zm*Om*Fm-Um*Dm*km,this._z=zm*Dm*km+Um*Om*Fm,this._w=zm*Dm*Fm+Um*Om*km),!1!==Rm&&this.onChangeCallback(),this},setFromAxisAngle:function(Mm,Rm){var Cm=Rm/2,Pm=_Mathsin(Cm);return this._x=Mm.x*Pm,this._y=Mm.y*Pm,this._z=Mm.z*Pm,this._w=_Mathcos(Cm),this.onChangeCallback(),this},setFromRotationMatrix:function(Mm){var Rm=Mm.elements,Cm=Rm[0],Pm=Rm[4],Lm=Rm[8],Im=Rm[1],Bm=Rm[5],Nm=Rm[9],zm=Rm[2],Dm=Rm[6],Fm=Rm[10],Um=Cm+Bm+Fm,Om;return 0<Um?(Om=0.5/_Mathsqrt(Um+1),this._w=0.25/Om,this._x=(Dm-Nm)*Om,this._y=(Lm-zm)*Om,this._z=(Im-Pm)*Om):Cm>Bm&&Cm>Fm?(Om=2*_Mathsqrt(1+Cm-Bm-Fm),this._w=(Dm-Nm)/Om,this._x=0.25*Om,this._y=(Pm+Im)/Om,this._z=(Lm+zm)/Om):Bm>Fm?(Om=2*_Mathsqrt(1+Bm-Cm-Fm),this._w=(Lm-zm)/Om,this._x=(Pm+Im)/Om,this._y=0.25*Om,this._z=(Nm+Dm)/Om):(Om=2*_Mathsqrt(1+Fm-Cm-Bm),this._w=(Im-Pm)/Om,this._x=(Lm+zm)/Om,this._y=(Nm+Dm)/Om,this._z=0.25*Om),this.onChangeCallback(),this},setFromUnitVectors:function(){var Mm=new O,Rm;return function(Lm,Im){return void 0===Mm&&(Mm=new O),Rm=Lm.dot(Im)+1,Rm<1e-6?(Rm=0,_Mathabs(Lm.x)>_Mathabs(Lm.z)?Mm.set(-Lm.y,Lm.x,0):Mm.set(0,-Lm.z,Lm.y)):Mm.crossVectors(Lm,Im),this._x=Mm.x,this._y=Mm.y,this._z=Mm.z,this._w=Rm,this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(Mm){return this._x*Mm._x+this._y*Mm._y+this._z*Mm._z+this._w*Mm._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return _Mathsqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var Mm=this.length();return 0===Mm?(this._x=0,this._y=0,this._z=0,this._w=1):(Mm=1/Mm,this._x*=Mm,this._y*=Mm,this._z*=Mm,this._w*=Mm),this.onChangeCallback(),this},multiply:function(Mm,Rm){return void 0===Rm?this.multiplyQuaternions(this,Mm):(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(Mm,Rm))},premultiply:function(Mm){return this.multiplyQuaternions(Mm,this)},multiplyQuaternions:function(Mm,Rm){var Cm=Mm._x,Pm=Mm._y,Lm=Mm._z,Im=Mm._w,Bm=Rm._x,Nm=Rm._y,zm=Rm._z,Dm=Rm._w;return this._x=Cm*Dm+Im*Bm+Pm*zm-Lm*Nm,this._y=Pm*Dm+Im*Nm+Lm*Bm-Cm*zm,this._z=Lm*Dm+Im*zm+Cm*Nm-Pm*Bm,this._w=Im*Dm-Cm*Bm-Pm*Nm-Lm*zm,this.onChangeCallback(),this},slerp:function(Mm,Rm){if(0===Rm)return this;if(1===Rm)return this.copy(Mm);var Cm=this._x,Pm=this._y,Lm=this._z,Im=this._w,Bm=Im*Mm._w+Cm*Mm._x+Pm*Mm._y+Lm*Mm._z;if(0>Bm?(this._w=-Mm._w,this._x=-Mm._x,this._y=-Mm._y,this._z=-Mm._z,Bm=-Bm):this.copy(Mm),1<=Bm)return this._w=Im,this._x=Cm,this._y=Pm,this._z=Lm,this;var Nm=_Mathsqrt(1-Bm*Bm);if(1e-3>_Mathabs(Nm))return this._w=0.5*(Im+this._w),this._x=0.5*(Cm+this._x),this._y=0.5*(Pm+this._y),this._z=0.5*(Lm+this._z),this;var zm=_Mathatan(Nm,Bm),Dm=_Mathsin((1-Rm)*zm)/Nm,Fm=_Mathsin(Rm*zm)/Nm;return this._w=Im*Dm+this._w*Fm,this._x=Cm*Dm+this._x*Fm,this._y=Pm*Dm+this._y*Fm,this._z=Lm*Dm+this._z*Fm,this.onChangeCallback(),this},equals:function(Mm){return Mm._x===this._x&&Mm._y===this._y&&Mm._z===this._z&&Mm._w===this._w},fromArray:function(Mm,Rm){return void 0===Rm&&(Rm=0),this._x=Mm[Rm],this._y=Mm[Rm+1],this._z=Mm[Rm+2],this._w=Mm[Rm+3],this.onChangeCallback(),this},toArray:function(Mm,Rm){return void 0===Mm&&(Mm=[]),void 0===Rm&&(Rm=0),Mm[Rm]=this._x,Mm[Rm+1]=this._y,Mm[Rm+2]=this._z,Mm[Rm+3]=this._w,Mm},onChange:function(Mm){return this.onChangeCallback=Mm,this},onChangeCallback:function(){}}),Object.assign(O.prototype,{isVector3:!0,set:function(Mm,Rm,Cm){return this.x=Mm,this.y=Rm,this.z=Cm,this},setScalar:function(Mm){return this.x=Mm,this.y=Mm,this.z=Mm,this},setX:function(Mm){return this.x=Mm,this},setY:function(Mm){return this.y=Mm,this},setZ:function(Mm){return this.z=Mm,this},setComponent:function(Mm,Rm){switch(Mm){case 0:this.x=Rm;break;case 1:this.y=Rm;break;case 2:this.z=Rm;break;default:throw new Error("index is out of range: "+Mm);}return this},getComponent:function(Mm){switch(Mm){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+Mm);}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(Mm){return this.x=Mm.x,this.y=Mm.y,this.z=Mm.z,this},add:function(Mm,Rm){return void 0===Rm?(this.x+=Mm.x,this.y+=Mm.y,this.z+=Mm.z,this):(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(Mm,Rm))},addScalar:function(Mm){return this.x+=Mm,this.y+=Mm,this.z+=Mm,this},addVectors:function(Mm,Rm){return this.x=Mm.x+Rm.x,this.y=Mm.y+Rm.y,this.z=Mm.z+Rm.z,this},addScaledVector:function(Mm,Rm){return this.x+=Mm.x*Rm,this.y+=Mm.y*Rm,this.z+=Mm.z*Rm,this},sub:function(Mm,Rm){return void 0===Rm?(this.x-=Mm.x,this.y-=Mm.y,this.z-=Mm.z,this):(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(Mm,Rm))},subScalar:function(Mm){return this.x-=Mm,this.y-=Mm,this.z-=Mm,this},subVectors:function(Mm,Rm){return this.x=Mm.x-Rm.x,this.y=Mm.y-Rm.y,this.z=Mm.z-Rm.z,this},multiply:function(Mm,Rm){return void 0===Rm?(this.x*=Mm.x,this.y*=Mm.y,this.z*=Mm.z,this):(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(Mm,Rm))},multiplyScalar:function(Mm){return this.x*=Mm,this.y*=Mm,this.z*=Mm,this},multiplyVectors:function(Mm,Rm){return this.x=Mm.x*Rm.x,this.y=Mm.y*Rm.y,this.z=Mm.z*Rm.z,this},applyEuler:function(){var Mm=new U;return function(Cm){return Cm&&Cm.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Mm.setFromEuler(Cm))}}(),applyAxisAngle:function(){var Mm=new U;return function(Cm,Pm){return this.applyQuaternion(Mm.setFromAxisAngle(Cm,Pm))}}(),applyMatrix3:function(Mm){var Rm=this.x,Cm=this.y,Pm=this.z,Lm=Mm.elements;return this.x=Lm[0]*Rm+Lm[3]*Cm+Lm[6]*Pm,this.y=Lm[1]*Rm+Lm[4]*Cm+Lm[7]*Pm,this.z=Lm[2]*Rm+Lm[5]*Cm+Lm[8]*Pm,this},applyMatrix4:function(Mm){var Rm=this.x,Cm=this.y,Pm=this.z,Lm=Mm.elements,Im=1/(Lm[3]*Rm+Lm[7]*Cm+Lm[11]*Pm+Lm[15]);return this.x=(Lm[0]*Rm+Lm[4]*Cm+Lm[8]*Pm+Lm[12])*Im,this.y=(Lm[1]*Rm+Lm[5]*Cm+Lm[9]*Pm+Lm[13])*Im,this.z=(Lm[2]*Rm+Lm[6]*Cm+Lm[10]*Pm+Lm[14])*Im,this},applyQuaternion:function(Mm){var Rm=this.x,Cm=this.y,Pm=this.z,Lm=Mm.x,Im=Mm.y,Bm=Mm.z,Nm=Mm.w,zm=Nm*Rm+Im*Pm-Bm*Cm,Dm=Nm*Cm+Bm*Rm-Lm*Pm,Fm=Nm*Pm+Lm*Cm-Im*Rm,Um=-Lm*Rm-Im*Cm-Bm*Pm;return this.x=zm*Nm+Um*-Lm+Dm*-Bm-Fm*-Im,this.y=Dm*Nm+Um*-Im+Fm*-Lm-zm*-Bm,this.z=Fm*Nm+Um*-Bm+zm*-Im-Dm*-Lm,this},project:function(){var Mm=new F;return function(Cm){return Mm.multiplyMatrices(Cm.projectionMatrix,Mm.getInverse(Cm.matrixWorld)),this.applyMatrix4(Mm)}}(),unproject:function(){var Mm=new F;return function(Cm){return Mm.multiplyMatrices(Cm.matrixWorld,Mm.getInverse(Cm.projectionMatrix)),this.applyMatrix4(Mm)}}(),transformDirection:function(Mm){var Rm=this.x,Cm=this.y,Pm=this.z,Lm=Mm.elements;return this.x=Lm[0]*Rm+Lm[4]*Cm+Lm[8]*Pm,this.y=Lm[1]*Rm+Lm[5]*Cm+Lm[9]*Pm,this.z=Lm[2]*Rm+Lm[6]*Cm+Lm[10]*Pm,this.normalize()},divide:function(Mm){return this.x/=Mm.x,this.y/=Mm.y,this.z/=Mm.z,this},divideScalar:function(Mm){return this.multiplyScalar(1/Mm)},min:function(Mm){return this.x=_Mathmin(this.x,Mm.x),this.y=_Mathmin(this.y,Mm.y),this.z=_Mathmin(this.z,Mm.z),this},max:function(Mm){return this.x=_Mathmax(this.x,Mm.x),this.y=_Mathmax(this.y,Mm.y),this.z=_Mathmax(this.z,Mm.z),this},clamp:function(Mm,Rm){return this.x=_Mathmax(Mm.x,_Mathmin(Rm.x,this.x)),this.y=_Mathmax(Mm.y,_Mathmin(Rm.y,this.y)),this.z=_Mathmax(Mm.z,_Mathmin(Rm.z,this.z)),this},clampScalar:function(){var Mm=new O,Rm=new O;return function(Pm,Lm){return Mm.set(Pm,Pm,Pm),Rm.set(Lm,Lm,Lm),this.clamp(Mm,Rm)}}(),clampLength:function(Mm,Rm){var Cm=this.length();return this.divideScalar(Cm||1).multiplyScalar(_Mathmax(Mm,_Mathmin(Rm,Cm)))},floor:function(){return this.x=_Mathfloor(this.x),this.y=_Mathfloor(this.y),this.z=_Mathfloor(this.z),this},ceil:function(){return this.x=_Mathceil(this.x),this.y=_Mathceil(this.y),this.z=_Mathceil(this.z),this},round:function(){return this.x=_Mathround(this.x),this.y=_Mathround(this.y),this.z=_Mathround(this.z),this},roundToZero:function(){return this.x=0>this.x?_Mathceil(this.x):_Mathfloor(this.x),this.y=0>this.y?_Mathceil(this.y):_Mathfloor(this.y),this.z=0>this.z?_Mathceil(this.z):_Mathfloor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(Mm){return this.x*Mm.x+this.y*Mm.y+this.z*Mm.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return _Mathsqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return _Mathabs(this.x)+_Mathabs(this.y)+_Mathabs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(Mm){return this.normalize().multiplyScalar(Mm)},lerp:function(Mm,Rm){return this.x+=(Mm.x-this.x)*Rm,this.y+=(Mm.y-this.y)*Rm,this.z+=(Mm.z-this.z)*Rm,this},lerpVectors:function(Mm,Rm,Cm){return this.subVectors(Rm,Mm).multiplyScalar(Cm).add(Mm)},cross:function(Mm,Rm){return void 0===Rm?this.crossVectors(this,Mm):(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(Mm,Rm))},crossVectors:function(Mm,Rm){var Cm=Mm.x,Pm=Mm.y,Lm=Mm.z,Im=Rm.x,Bm=Rm.y,Nm=Rm.z;return this.x=Pm*Nm-Lm*Bm,this.y=Lm*Im-Cm*Nm,this.z=Cm*Bm-Pm*Im,this},projectOnVector:function(Mm){var Rm=Mm.dot(this)/Mm.lengthSq();return this.copy(Mm).multiplyScalar(Rm)},projectOnPlane:function(){var Mm=new O;return function(Cm){return Mm.copy(this).projectOnVector(Cm),this.sub(Mm)}}(),reflect:function(){var Mm=new O;return function(Cm){return this.sub(Mm.copy(Cm).multiplyScalar(2*this.dot(Cm)))}}(),angleTo:function(Mm){var Rm=this.dot(Mm)/_Mathsqrt(this.lengthSq()*Mm.lengthSq());return _Mathacos(yp.clamp(Rm,-1,1))},distanceTo:function(Mm){return _Mathsqrt(this.distanceToSquared(Mm))},distanceToSquared:function(Mm){var Rm=this.x-Mm.x,Cm=this.y-Mm.y,Pm=this.z-Mm.z;return Rm*Rm+Cm*Cm+Pm*Pm},manhattanDistanceTo:function(Mm){return _Mathabs(this.x-Mm.x)+_Mathabs(this.y-Mm.y)+_Mathabs(this.z-Mm.z)},setFromSpherical:function(Mm){var Rm=_Mathsin(Mm.phi)*Mm.radius;return this.x=Rm*_Mathsin(Mm.theta),this.y=_Mathcos(Mm.phi)*Mm.radius,this.z=Rm*_Mathcos(Mm.theta),this},setFromCylindrical:function(Mm){return this.x=Mm.radius*_Mathsin(Mm.theta),this.y=Mm.y,this.z=Mm.radius*_Mathcos(Mm.theta),this},setFromMatrixPosition:function(Mm){var Rm=Mm.elements;return this.x=Rm[12],this.y=Rm[13],this.z=Rm[14],this},setFromMatrixScale:function(Mm){var Rm=this.setFromMatrixColumn(Mm,0).length(),Cm=this.setFromMatrixColumn(Mm,1).length(),Pm=this.setFromMatrixColumn(Mm,2).length();return this.x=Rm,this.y=Cm,this.z=Pm,this},setFromMatrixColumn:function(Mm,Rm){return this.fromArray(Mm.elements,4*Rm)},equals:function(Mm){return Mm.x===this.x&&Mm.y===this.y&&Mm.z===this.z},fromArray:function(Mm,Rm){return void 0===Rm&&(Rm=0),this.x=Mm[Rm],this.y=Mm[Rm+1],this.z=Mm[Rm+2],this},toArray:function(Mm,Rm){return void 0===Mm&&(Mm=[]),void 0===Rm&&(Rm=0),Mm[Rm]=this.x,Mm[Rm+1]=this.y,Mm[Rm+2]=this.z,Mm},fromBufferAttribute:function(Mm,Rm,Cm){return void 0!==Cm&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=Mm.getX(Rm),this.y=Mm.getY(Rm),this.z=Mm.getZ(Rm),this}}),Object.assign(G.prototype,{isMatrix3:!0,set:function(Mm,Rm,Cm,Pm,Lm,Im,Bm,Nm,zm){var Dm=this.elements;return Dm[0]=Mm,Dm[1]=Pm,Dm[2]=Bm,Dm[3]=Rm,Dm[4]=Lm,Dm[5]=Nm,Dm[6]=Cm,Dm[7]=Im,Dm[8]=zm,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return new this.constructor().fromArray(this.elements)},copy:function(Mm){var Rm=this.elements,Cm=Mm.elements;return Rm[0]=Cm[0],Rm[1]=Cm[1],Rm[2]=Cm[2],Rm[3]=Cm[3],Rm[4]=Cm[4],Rm[5]=Cm[5],Rm[6]=Cm[6],Rm[7]=Cm[7],Rm[8]=Cm[8],this},setFromMatrix4:function(Mm){var Rm=Mm.elements;return this.set(Rm[0],Rm[4],Rm[8],Rm[1],Rm[5],Rm[9],Rm[2],Rm[6],Rm[10]),this},applyToBufferAttribute:function(){var Mm=new O;return function(Cm){for(var Pm=0,Lm=Cm.count;Pm<Lm;Pm++)Mm.x=Cm.getX(Pm),Mm.y=Cm.getY(Pm),Mm.z=Cm.getZ(Pm),Mm.applyMatrix3(this),Cm.setXYZ(Pm,Mm.x,Mm.y,Mm.z);return Cm}}(),multiply:function(Mm){return this.multiplyMatrices(this,Mm)},premultiply:function(Mm){return this.multiplyMatrices(Mm,this)},multiplyMatrices:function(Mm,Rm){var Cm=Mm.elements,Pm=Rm.elements,Lm=this.elements,Im=Cm[0],Bm=Cm[3],Nm=Cm[6],zm=Cm[1],Dm=Cm[4],Fm=Cm[7],Um=Cm[2],Om=Cm[5],km=Cm[8],Vm=Pm[0],Gm=Pm[3],Hm=Pm[6],Wm=Pm[1],jm=Pm[4],Xm=Pm[7],Ym=Pm[2],Zm=Pm[5],Jm=Pm[8];return Lm[0]=Im*Vm+Bm*Wm+Nm*Ym,Lm[3]=Im*Gm+Bm*jm+Nm*Zm,Lm[6]=Im*Hm+Bm*Xm+Nm*Jm,Lm[1]=zm*Vm+Dm*Wm+Fm*Ym,Lm[4]=zm*Gm+Dm*jm+Fm*Zm,Lm[7]=zm*Hm+Dm*Xm+Fm*Jm,Lm[2]=Um*Vm+Om*Wm+km*Ym,Lm[5]=Um*Gm+Om*jm+km*Zm,Lm[8]=Um*Hm+Om*Xm+km*Jm,this},multiplyScalar:function(Mm){var Rm=this.elements;return Rm[0]*=Mm,Rm[3]*=Mm,Rm[6]*=Mm,Rm[1]*=Mm,Rm[4]*=Mm,Rm[7]*=Mm,Rm[2]*=Mm,Rm[5]*=Mm,Rm[8]*=Mm,this},determinant:function(){var Mm=this.elements,Rm=Mm[0],Cm=Mm[1],Pm=Mm[2],Lm=Mm[3],Im=Mm[4],Bm=Mm[5],Nm=Mm[6],zm=Mm[7],Dm=Mm[8];return Rm*Im*Dm-Rm*Bm*zm-Cm*Lm*Dm+Cm*Bm*Nm+Pm*Lm*zm-Pm*Im*Nm},getInverse:function(Mm,Rm){Mm&&Mm.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var Cm=Mm.elements,Pm=this.elements,Lm=Cm[0],Im=Cm[1],Bm=Cm[2],Nm=Cm[3],zm=Cm[4],Dm=Cm[5],Fm=Cm[6],Um=Cm[7],Om=Cm[8],km=Om*zm-Dm*Um,Vm=Dm*Fm-Om*Nm,Gm=Um*Nm-zm*Fm,Hm=Lm*km+Im*Vm+Bm*Gm;if(0==Hm){var Wm="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===Rm)throw new Error(Wm);else console.warn(Wm);return this.identity()}var jm=1/Hm;return Pm[0]=km*jm,Pm[1]=(Bm*Um-Om*Im)*jm,Pm[2]=(Dm*Im-Bm*zm)*jm,Pm[3]=Vm*jm,Pm[4]=(Om*Lm-Bm*Fm)*jm,Pm[5]=(Bm*Nm-Dm*Lm)*jm,Pm[6]=Gm*jm,Pm[7]=(Im*Fm-Um*Lm)*jm,Pm[8]=(zm*Lm-Im*Nm)*jm,this},transpose:function(){var Rm=this.elements,Mm;return Mm=Rm[1],Rm[1]=Rm[3],Rm[3]=Mm,Mm=Rm[2],Rm[2]=Rm[6],Rm[6]=Mm,Mm=Rm[5],Rm[5]=Rm[7],Rm[7]=Mm,this},getNormalMatrix:function(Mm){return this.setFromMatrix4(Mm).getInverse(this).transpose()},transposeIntoArray:function(Mm){var Rm=this.elements;return Mm[0]=Rm[0],Mm[1]=Rm[3],Mm[2]=Rm[6],Mm[3]=Rm[1],Mm[4]=Rm[4],Mm[5]=Rm[7],Mm[6]=Rm[2],Mm[7]=Rm[5],Mm[8]=Rm[8],this},setUvTransform:function(Mm,Rm,Cm,Pm,Lm,Im,Bm){var Nm=_Mathcos(Lm),zm=_Mathsin(Lm);this.set(Cm*Nm,Cm*zm,-Cm*(Nm*Im+zm*Bm)+Im+Mm,-Pm*zm,Pm*Nm,-Pm*(-zm*Im+Nm*Bm)+Bm+Rm,0,0,1)},scale:function(Mm,Rm){var Cm=this.elements;return Cm[0]*=Mm,Cm[3]*=Mm,Cm[6]*=Mm,Cm[1]*=Rm,Cm[4]*=Rm,Cm[7]*=Rm,this},rotate:function(Mm){var Rm=_Mathcos(Mm),Cm=_Mathsin(Mm),Pm=this.elements,Lm=Pm[0],Im=Pm[3],Bm=Pm[6],Nm=Pm[1],zm=Pm[4],Dm=Pm[7];return Pm[0]=Rm*Lm+Cm*Nm,Pm[3]=Rm*Im+Cm*zm,Pm[6]=Rm*Bm+Cm*Dm,Pm[1]=-Cm*Lm+Rm*Nm,Pm[4]=-Cm*Im+Rm*zm,Pm[7]=-Cm*Bm+Rm*Dm,this},translate:function(Mm,Rm){var Cm=this.elements;return Cm[0]+=Mm*Cm[2],Cm[3]+=Mm*Cm[5],Cm[6]+=Mm*Cm[8],Cm[1]+=Rm*Cm[2],Cm[4]+=Rm*Cm[5],Cm[7]+=Rm*Cm[8],this},equals:function(Mm){for(var Rm=this.elements,Cm=Mm.elements,Pm=0;9>Pm;Pm++)if(Rm[Pm]!==Cm[Pm])return!1;return!0},fromArray:function(Mm,Rm){Rm===void 0&&(Rm=0);for(var Cm=0;9>Cm;Cm++)this.elements[Cm]=Mm[Cm+Rm];return this},toArray:function(Mm,Rm){void 0===Mm&&(Mm=[]),void 0===Rm&&(Rm=0);var Cm=this.elements;return Mm[Rm]=Cm[0],Mm[Rm+1]=Cm[1],Mm[Rm+2]=Cm[2],Mm[Rm+3]=Cm[3],Mm[Rm+4]=Cm[4],Mm[Rm+5]=Cm[5],Mm[Rm+6]=Cm[6],Mm[Rm+7]=Cm[7],Mm[Rm+8]=Cm[8],Mm}});var _p=0;H.DEFAULT_IMAGE=void 0,H.DEFAULT_MAPPING=Xl,H.prototype=Object.assign(Object.create(L.prototype),{constructor:H,isTexture:!0,clone:function(){return new this.constructor().copy(this)},copy:function(Mm){return this.name=Mm.name,this.image=Mm.image,this.mipmaps=Mm.mipmaps.slice(0),this.mapping=Mm.mapping,this.wrapS=Mm.wrapS,this.wrapT=Mm.wrapT,this.magFilter=Mm.magFilter,this.minFilter=Mm.minFilter,this.anisotropy=Mm.anisotropy,this.format=Mm.format,this.type=Mm.type,this.offset.copy(Mm.offset),this.repeat.copy(Mm.repeat),this.center.copy(Mm.center),this.rotation=Mm.rotation,this.matrixAutoUpdate=Mm.matrixAutoUpdate,this.matrix.copy(Mm.matrix),this.generateMipmaps=Mm.generateMipmaps,this.premultiplyAlpha=Mm.premultiplyAlpha,this.flipY=Mm.flipY,this.unpackAlignment=Mm.unpackAlignment,this.encoding=Mm.encoding,this},toJSON:function(Mm){function Rm(Im){var Bm;if(Im instanceof HTMLCanvasElement)Bm=Im;else{Bm=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),Bm.width=Im.width,Bm.height=Im.height;var Nm=Bm.getContext("2d");Im instanceof ImageData?Nm.putImageData(Im,0,0):Nm.drawImage(Im,0,0,Im.width,Im.height)}return 2048<Bm.width||2048<Bm.height?Bm.toDataURL("image/jpeg",0.6):Bm.toDataURL("image/png")}var Cm=void 0===Mm||"string"==typeof Mm;if(!Cm&&void 0!==Mm.textures[this.uuid])return Mm.textures[this.uuid];var Pm={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var Lm=this.image;void 0===Lm.uuid&&(Lm.uuid=yp.generateUUID()),Cm||void 0!==Mm.images[Lm.uuid]||(Mm.images[Lm.uuid]={uuid:Lm.uuid,url:Rm(Lm)}),Pm.image=Lm.uuid}return Cm||(Mm.textures[this.uuid]=Pm),Pm},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(Mm){if(this.mapping===Xl){if(Mm.applyMatrix3(this.matrix),0>Mm.x||1<Mm.x)switch(this.wrapS){case td:Mm.x-=_Mathfloor(Mm.x);break;case rd:Mm.x=0>Mm.x?0:1;break;case od:1===_Mathabs(_Mathfloor(Mm.x)%2)?Mm.x=_Mathceil(Mm.x)-Mm.x:Mm.x-=_Mathfloor(Mm.x);}if(0>Mm.y||1<Mm.y)switch(this.wrapT){case td:Mm.y-=_Mathfloor(Mm.y);break;case rd:Mm.y=0>Mm.y?0:1;break;case od:1===_Mathabs(_Mathfloor(Mm.y)%2)?Mm.y=_Mathceil(Mm.y)-Mm.y:Mm.y-=_Mathfloor(Mm.y);}this.flipY&&(Mm.y=1-Mm.y)}}}),Object.defineProperty(H.prototype,"needsUpdate",{set:function(Mm){!0===Mm&&this.version++}}),Object.assign(W.prototype,{isVector4:!0,set:function(Mm,Rm,Cm,Pm){return this.x=Mm,this.y=Rm,this.z=Cm,this.w=Pm,this},setScalar:function(Mm){return this.x=Mm,this.y=Mm,this.z=Mm,this.w=Mm,this},setX:function(Mm){return this.x=Mm,this},setY:function(Mm){return this.y=Mm,this},setZ:function(Mm){return this.z=Mm,this},setW:function(Mm){return this.w=Mm,this},setComponent:function(Mm,Rm){switch(Mm){case 0:this.x=Rm;break;case 1:this.y=Rm;break;case 2:this.z=Rm;break;case 3:this.w=Rm;break;default:throw new Error("index is out of range: "+Mm);}return this},getComponent:function(Mm){switch(Mm){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+Mm);}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(Mm){return this.x=Mm.x,this.y=Mm.y,this.z=Mm.z,this.w=void 0===Mm.w?1:Mm.w,this},add:function(Mm,Rm){return void 0===Rm?(this.x+=Mm.x,this.y+=Mm.y,this.z+=Mm.z,this.w+=Mm.w,this):(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(Mm,Rm))},addScalar:function(Mm){return this.x+=Mm,this.y+=Mm,this.z+=Mm,this.w+=Mm,this},addVectors:function(Mm,Rm){return this.x=Mm.x+Rm.x,this.y=Mm.y+Rm.y,this.z=Mm.z+Rm.z,this.w=Mm.w+Rm.w,this},addScaledVector:function(Mm,Rm){return this.x+=Mm.x*Rm,this.y+=Mm.y*Rm,this.z+=Mm.z*Rm,this.w+=Mm.w*Rm,this},sub:function(Mm,Rm){return void 0===Rm?(this.x-=Mm.x,this.y-=Mm.y,this.z-=Mm.z,this.w-=Mm.w,this):(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(Mm,Rm))},subScalar:function(Mm){return this.x-=Mm,this.y-=Mm,this.z-=Mm,this.w-=Mm,this},subVectors:function(Mm,Rm){return this.x=Mm.x-Rm.x,this.y=Mm.y-Rm.y,this.z=Mm.z-Rm.z,this.w=Mm.w-Rm.w,this},multiplyScalar:function(Mm){return this.x*=Mm,this.y*=Mm,this.z*=Mm,this.w*=Mm,this},applyMatrix4:function(Mm){var Rm=this.x,Cm=this.y,Pm=this.z,Lm=this.w,Im=Mm.elements;return this.x=Im[0]*Rm+Im[4]*Cm+Im[8]*Pm+Im[12]*Lm,this.y=Im[1]*Rm+Im[5]*Cm+Im[9]*Pm+Im[13]*Lm,this.z=Im[2]*Rm+Im[6]*Cm+Im[10]*Pm+Im[14]*Lm,this.w=Im[3]*Rm+Im[7]*Cm+Im[11]*Pm+Im[15]*Lm,this},divideScalar:function(Mm){return this.multiplyScalar(1/Mm)},setAxisAngleFromQuaternion:function(Mm){this.w=2*_Mathacos(Mm.w);var Rm=_Mathsqrt(1-Mm.w*Mm.w);return 1e-4>Rm?(this.x=1,this.y=0,this.z=0):(this.x=Mm.x/Rm,this.y=Mm.y/Rm,this.z=Mm.z/Rm),this},setAxisAngleFromRotationMatrix:function(Mm){var Im=0.01,Bm=0.1,Nm=Mm.elements,zm=Nm[0],Dm=Nm[4],Fm=Nm[8],Um=Nm[1],Om=Nm[5],km=Nm[9],Vm=Nm[2],Gm=Nm[6],Hm=Nm[10],Rm,Cm,Pm,Lm;if(_Mathabs(Dm-Um)<Im&&_Mathabs(Fm-Vm)<Im&&_Mathabs(km-Gm)<Im){if(_Mathabs(Dm+Um)<Bm&&_Mathabs(Fm+Vm)<Bm&&_Mathabs(km+Gm)<Bm&&_Mathabs(zm+Om+Hm-3)<Bm)return this.set(1,0,0,0),this;Rm=_MathPI;var Wm=(zm+1)/2,jm=(Om+1)/2,Xm=(Hm+1)/2,Ym=(Dm+Um)/4,Zm=(Fm+Vm)/4,Jm=(km+Gm)/4;return Wm>jm&&Wm>Xm?Wm<Im?(Cm=0,Pm=0.707106781,Lm=0.707106781):(Cm=_Mathsqrt(Wm),Pm=Ym/Cm,Lm=Zm/Cm):jm>Xm?jm<Im?(Cm=0.707106781,Pm=0,Lm=0.707106781):(Pm=_Mathsqrt(jm),Cm=Ym/Pm,Lm=Jm/Pm):Xm<Im?(Cm=0.707106781,Pm=0.707106781,Lm=0):(Lm=_Mathsqrt(Xm),Cm=Zm/Lm,Pm=Jm/Lm),this.set(Cm,Pm,Lm,Rm),this}var Qm=_Mathsqrt((Gm-km)*(Gm-km)+(Fm-Vm)*(Fm-Vm)+(Um-Dm)*(Um-Dm));return 1e-3>_Mathabs(Qm)&&(Qm=1),this.x=(Gm-km)/Qm,this.y=(Fm-Vm)/Qm,this.z=(Um-Dm)/Qm,this.w=_Mathacos((zm+Om+Hm-1)/2),this},min:function(Mm){return this.x=_Mathmin(this.x,Mm.x),this.y=_Mathmin(this.y,Mm.y),this.z=_Mathmin(this.z,Mm.z),this.w=_Mathmin(this.w,Mm.w),this},max:function(Mm){return this.x=_Mathmax(this.x,Mm.x),this.y=_Mathmax(this.y,Mm.y),this.z=_Mathmax(this.z,Mm.z),this.w=_Mathmax(this.w,Mm.w),this},clamp:function(Mm,Rm){return this.x=_Mathmax(Mm.x,_Mathmin(Rm.x,this.x)),this.y=_Mathmax(Mm.y,_Mathmin(Rm.y,this.y)),this.z=_Mathmax(Mm.z,_Mathmin(Rm.z,this.z)),this.w=_Mathmax(Mm.w,_Mathmin(Rm.w,this.w)),this},clampScalar:function(){var Mm,Rm;return function(Pm,Lm){return void 0==Mm&&(Mm=new W,Rm=new W),Mm.set(Pm,Pm,Pm,Pm),Rm.set(Lm,Lm,Lm,Lm),this.clamp(Mm,Rm)}}(),clampLength:function(Mm,Rm){var Cm=this.length();return this.divideScalar(Cm||1).multiplyScalar(_Mathmax(Mm,_Mathmin(Rm,Cm)))},floor:function(){return this.x=_Mathfloor(this.x),this.y=_Mathfloor(this.y),this.z=_Mathfloor(this.z),this.w=_Mathfloor(this.w),this},ceil:function(){return this.x=_Mathceil(this.x),this.y=_Mathceil(this.y),this.z=_Mathceil(this.z),this.w=_Mathceil(this.w),this},round:function(){return this.x=_Mathround(this.x),this.y=_Mathround(this.y),this.z=_Mathround(this.z),this.w=_Mathround(this.w),this},roundToZero:function(){return this.x=0>this.x?_Mathceil(this.x):_Mathfloor(this.x),this.y=0>this.y?_Mathceil(this.y):_Mathfloor(this.y),this.z=0>this.z?_Mathceil(this.z):_Mathfloor(this.z),this.w=0>this.w?_Mathceil(this.w):_Mathfloor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(Mm){return this.x*Mm.x+this.y*Mm.y+this.z*Mm.z+this.w*Mm.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return _Mathsqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return _Mathabs(this.x)+_Mathabs(this.y)+_Mathabs(this.z)+_Mathabs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(Mm){return this.normalize().multiplyScalar(Mm)},lerp:function(Mm,Rm){return this.x+=(Mm.x-this.x)*Rm,this.y+=(Mm.y-this.y)*Rm,this.z+=(Mm.z-this.z)*Rm,this.w+=(Mm.w-this.w)*Rm,this},lerpVectors:function(Mm,Rm,Cm){return this.subVectors(Rm,Mm).multiplyScalar(Cm).add(Mm)},equals:function(Mm){return Mm.x===this.x&&Mm.y===this.y&&Mm.z===this.z&&Mm.w===this.w},fromArray:function(Mm,Rm){return void 0===Rm&&(Rm=0),this.x=Mm[Rm],this.y=Mm[Rm+1],this.z=Mm[Rm+2],this.w=Mm[Rm+3],this},toArray:function(Mm,Rm){return void 0===Mm&&(Mm=[]),void 0===Rm&&(Rm=0),Mm[Rm]=this.x,Mm[Rm+1]=this.y,Mm[Rm+2]=this.z,Mm[Rm+3]=this.w,Mm},fromBufferAttribute:function(Mm,Rm,Cm){return void 0!==Cm&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=Mm.getX(Rm),this.y=Mm.getY(Rm),this.z=Mm.getZ(Rm),this.w=Mm.getW(Rm),this}}),X.prototype=Object.assign(Object.create(L.prototype),{constructor:X,isWebGLRenderTarget:!0,setSize:function(Mm,Rm){(this.width!==Mm||this.height!==Rm)&&(this.width=Mm,this.height=Rm,this.dispose()),this.viewport.set(0,0,Mm,Rm),this.scissor.set(0,0,Mm,Rm)},clone:function(){return new this.constructor().copy(this)},copy:function(Mm){return this.width=Mm.width,this.height=Mm.height,this.viewport.copy(Mm.viewport),this.texture=Mm.texture.clone(),this.depthBuffer=Mm.depthBuffer,this.stencilBuffer=Mm.stencilBuffer,this.depthTexture=Mm.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Y.prototype=Object.create(X.prototype),Y.prototype.constructor=Y,Y.prototype.isWebGLRenderTargetCube=!0,Z.prototype=Object.create(H.prototype),Z.prototype.constructor=Z,Z.prototype.isDataTexture=!0,J.prototype=Object.create(H.prototype),J.prototype.constructor=J,J.prototype.isCubeTexture=!0,Object.defineProperty(J.prototype,"images",{get:function(){return this.image},set:function(Mm){this.image=Mm}});var vp=new H,Tp=new J,Ep=[],Sp=[],Ap=new Float32Array(16),wp=new Float32Array(9);Be.prototype.setValue=function(Mm,Rm){for(var Cm=this.seq,Pm=0,Lm=Cm.length,Im;Pm!==Lm;++Pm)Im=Cm[Pm],Im.setValue(Mm,Rm[Im.id])};var Mp=/([\w\d_]+)(\])?(\[|\.)?/g;De.prototype.setValue=function(Mm,Rm,Cm){var Pm=this.map[Rm];Pm!==void 0&&Pm.setValue(Mm,Cm,this.renderer)},De.prototype.setOptional=function(Mm,Rm,Cm){var Pm=Rm[Cm];Pm!==void 0&&this.setValue(Mm,Cm,Pm)},De.upload=function(Mm,Rm,Cm,Pm){for(var Lm=0,Im=Rm.length;Lm!==Im;++Lm){var Bm=Rm[Lm],Nm=Cm[Bm.id];!1!==Nm.needsUpdate&&Bm.setValue(Mm,Nm.value,Pm)}},De.seqWithValue=function(Mm,Rm){for(var Cm=[],Pm=0,Lm=Mm.length,Im;Pm!==Lm;++Pm)Im=Mm[Pm],Im.id in Rm&&Cm.push(Im);return Cm};var Rp={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Object.assign(Fe.prototype,{isColor:!0,r:1,g:1,b:1,set:function(Mm){return Mm&&Mm.isColor?this.copy(Mm):"number"==typeof Mm?this.setHex(Mm):"string"==typeof Mm&&this.setStyle(Mm),this},setScalar:function(Mm){return this.r=Mm,this.g=Mm,this.b=Mm,this},setHex:function(Mm){return Mm=_Mathfloor(Mm),this.r=(255&Mm>>16)/255,this.g=(255&Mm>>8)/255,this.b=(255&Mm)/255,this},setRGB:function(Mm,Rm,Cm){return this.r=Mm,this.g=Rm,this.b=Cm,this},setHSL:function(){function Mm(Rm,Cm,Pm){return 0>Pm&&(Pm+=1),1<Pm&&(Pm-=1),Pm<1/6?Rm+6*(Cm-Rm)*Pm:Pm<1/2?Cm:Pm<2/3?Rm+6*(Cm-Rm)*(2/3-Pm):Rm}return function(Cm,Pm,Lm){if(Cm=yp.euclideanModulo(Cm,1),Pm=yp.clamp(Pm,0,1),Lm=yp.clamp(Lm,0,1),0===Pm)this.r=this.g=this.b=Lm;else{var Im=0.5>=Lm?Lm*(1+Pm):Lm+Pm-Lm*Pm,Bm=2*Lm-Im;this.r=Mm(Bm,Im,Cm+1/3),this.g=Mm(Bm,Im,Cm),this.b=Mm(Bm,Im,Cm-1/3)}return this}}(),setStyle:function(Mm){function Rm(Um){void 0===Um||1>parseFloat(Um)&&console.warn("THREE.Color: Alpha component of "+Mm+" will be ignored.")}var Cm;if(Cm=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(Mm)){var Pm,Lm=Cm[1],Im=Cm[2];switch(Lm){case"rgb":case"rgba":if(Pm=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(Im))return this.r=_Mathmin(255,parseInt(Pm[1],10))/255,this.g=_Mathmin(255,parseInt(Pm[2],10))/255,this.b=_Mathmin(255,parseInt(Pm[3],10))/255,Rm(Pm[5]),this;if(Pm=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(Im))return this.r=_Mathmin(100,parseInt(Pm[1],10))/100,this.g=_Mathmin(100,parseInt(Pm[2],10))/100,this.b=_Mathmin(100,parseInt(Pm[3],10))/100,Rm(Pm[5]),this;break;case"hsl":case"hsla":if(Pm=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(Im)){var Bm=parseFloat(Pm[1])/360,Nm=parseInt(Pm[2],10)/100,zm=parseInt(Pm[3],10)/100;return Rm(Pm[5]),this.setHSL(Bm,Nm,zm)}}}else if(Cm=/^\#([A-Fa-f0-9]+)$/.exec(Mm)){var Dm=Cm[1],Fm=Dm.length;if(3===Fm)return this.r=parseInt(Dm.charAt(0)+Dm.charAt(0),16)/255,this.g=parseInt(Dm.charAt(1)+Dm.charAt(1),16)/255,this.b=parseInt(Dm.charAt(2)+Dm.charAt(2),16)/255,this;if(6===Fm)return this.r=parseInt(Dm.charAt(0)+Dm.charAt(1),16)/255,this.g=parseInt(Dm.charAt(2)+Dm.charAt(3),16)/255,this.b=parseInt(Dm.charAt(4)+Dm.charAt(5),16)/255,this}if(Mm&&0<Mm.length){var Dm=Rp[Mm];void 0===Dm?console.warn("THREE.Color: Unknown color "+Mm):this.setHex(Dm)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(Mm){return this.r=Mm.r,this.g=Mm.g,this.b=Mm.b,this},copyGammaToLinear:function(Mm,Rm){return void 0===Rm&&(Rm=2),this.r=_Mathpow(Mm.r,Rm),this.g=_Mathpow(Mm.g,Rm),this.b=_Mathpow(Mm.b,Rm),this},copyLinearToGamma:function(Mm,Rm){void 0===Rm&&(Rm=2);var Cm=0<Rm?1/Rm:1;return this.r=_Mathpow(Mm.r,Cm),this.g=_Mathpow(Mm.g,Cm),this.b=_Mathpow(Mm.b,Cm),this},convertGammaToLinear:function(){var Mm=this.r,Rm=this.g,Cm=this.b;return this.r=Mm*Mm,this.g=Rm*Rm,this.b=Cm*Cm,this},convertLinearToGamma:function(){return this.r=_Mathsqrt(this.r),this.g=_Mathsqrt(this.g),this.b=_Mathsqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(Mm){var Rm=Mm||{h:0,s:0,l:0},Cm=this.r,Pm=this.g,Lm=this.b,Im=_Mathmax(Cm,Pm,Lm),Bm=_Mathmin(Cm,Pm,Lm),Dm=(Bm+Im)/2,Nm,zm;if(Bm===Im)Nm=0,zm=0;else{var Fm=Im-Bm;zm=0.5>=Dm?Fm/(Im+Bm):Fm/(2-Im-Bm),Im===Cm?Nm=(Pm-Lm)/Fm+(Pm<Lm?6:0):Im===Pm?Nm=(Lm-Cm)/Fm+2:Im===Lm?Nm=(Cm-Pm)/Fm+4:void 0,Nm/=6}return Rm.h=Nm,Rm.s=zm,Rm.l=Dm,Rm},getStyle:function(){return"rgb("+(0|255*this.r)+","+(0|255*this.g)+","+(0|255*this.b)+")"},offsetHSL:function(Mm,Rm,Cm){var Pm=this.getHSL();return Pm.h+=Mm,Pm.s+=Rm,Pm.l+=Cm,this.setHSL(Pm.h,Pm.s,Pm.l),this},add:function(Mm){return this.r+=Mm.r,this.g+=Mm.g,this.b+=Mm.b,this},addColors:function(Mm,Rm){return this.r=Mm.r+Rm.r,this.g=Mm.g+Rm.g,this.b=Mm.b+Rm.b,this},addScalar:function(Mm){return this.r+=Mm,this.g+=Mm,this.b+=Mm,this},sub:function(Mm){return this.r=_Mathmax(0,this.r-Mm.r),this.g=_Mathmax(0,this.g-Mm.g),this.b=_Mathmax(0,this.b-Mm.b),this},multiply:function(Mm){return this.r*=Mm.r,this.g*=Mm.g,this.b*=Mm.b,this},multiplyScalar:function(Mm){return this.r*=Mm,this.g*=Mm,this.b*=Mm,this},lerp:function(Mm,Rm){return this.r+=(Mm.r-this.r)*Rm,this.g+=(Mm.g-this.g)*Rm,this.b+=(Mm.b-this.b)*Rm,this},equals:function(Mm){return Mm.r===this.r&&Mm.g===this.g&&Mm.b===this.b},fromArray:function(Mm,Rm){return void 0===Rm&&(Rm=0),this.r=Mm[Rm],this.g=Mm[Rm+1],this.b=Mm[Rm+2],this},toArray:function(Mm,Rm){return void 0===Mm&&(Mm=[]),void 0===Rm&&(Rm=0),Mm[Rm]=this.r,Mm[Rm+1]=this.g,Mm[Rm+2]=this.b,Mm},toJSON:function(){return this.getHex()}});var Cp={common:{diffuse:{value:new Fe(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new G},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:0.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new D(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:2.5e-4},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Fe(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new Fe(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new G}}},Pp={merge:function(Mm){for(var Rm={},Cm=0,Pm;Cm<Mm.length;Cm++)for(var Lm in Pm=this.clone(Mm[Cm]),Pm)Rm[Lm]=Pm[Lm];return Rm},clone:function(Mm){var Rm={};for(var Cm in Mm)for(var Pm in Rm[Cm]={},Mm[Cm]){var Lm=Mm[Cm][Pm];Rm[Cm][Pm]=Lm&&(Lm.isColor||Lm.isMatrix3||Lm.isMatrix4||Lm.isVector2||Lm.isVector3||Lm.isVector4||Lm.isTexture)?Lm.clone():Array.isArray(Lm)?Lm.slice():Lm}return Rm}},Hu={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat theta = acos( dot( N, V ) );\n\tvec2 uv = vec2(\n\t\tsqrt( saturate( roughness ) ),\n\t\tsaturate( theta / ( 0.5 * PI ) ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.86267 + (0.49788 + 0.01436 * y ) * y;\n\tfloat b = 3.45068 + (4.18814 + y) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = (x > 0.0) ? v : 0.5 * inversesqrt( 1.0 - x * x ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tvec3 result = vec3( LTC_ClippedSphereFormFactor( vectorFormFactor ) );\n\treturn result;\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\n\t\tvec4 plane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t\t\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\n\t\t\tvec4 plane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_vertex:"\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltcMat;\tuniform sampler2D ltcMag;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tfloat norm = texture2D( ltcMag, uv ).a;\n\t\tvec4 t = texture2D( ltcMat, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3(   1,   0, t.y ),\n\t\t\tvec3(   0, t.z,   0 ),\n\t\t\tvec3( t.w,   0, t.x )\n\t\t);\n\t\treflectedLight.directSpecular += lightColor * material.specularColor * norm * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_template:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_fragment:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}\n",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n"},Wu={basic:{uniforms:Pp.merge([Cp.common,Cp.specularmap,Cp.envmap,Cp.aomap,Cp.lightmap,Cp.fog]),vertexShader:Hu.meshbasic_vert,fragmentShader:Hu.meshbasic_frag},lambert:{uniforms:Pp.merge([Cp.common,Cp.specularmap,Cp.envmap,Cp.aomap,Cp.lightmap,Cp.emissivemap,Cp.fog,Cp.lights,{emissive:{value:new Fe(0)}}]),vertexShader:Hu.meshlambert_vert,fragmentShader:Hu.meshlambert_frag},phong:{uniforms:Pp.merge([Cp.common,Cp.specularmap,Cp.envmap,Cp.aomap,Cp.lightmap,Cp.emissivemap,Cp.bumpmap,Cp.normalmap,Cp.displacementmap,Cp.gradientmap,Cp.fog,Cp.lights,{emissive:{value:new Fe(0)},specular:{value:new Fe(1118481)},shininess:{value:30}}]),vertexShader:Hu.meshphong_vert,fragmentShader:Hu.meshphong_frag},standard:{uniforms:Pp.merge([Cp.common,Cp.envmap,Cp.aomap,Cp.lightmap,Cp.emissivemap,Cp.bumpmap,Cp.normalmap,Cp.displacementmap,Cp.roughnessmap,Cp.metalnessmap,Cp.fog,Cp.lights,{emissive:{value:new Fe(0)},roughness:{value:0.5},metalness:{value:0.5},envMapIntensity:{value:1}}]),vertexShader:Hu.meshphysical_vert,fragmentShader:Hu.meshphysical_frag},points:{uniforms:Pp.merge([Cp.points,Cp.fog]),vertexShader:Hu.points_vert,fragmentShader:Hu.points_frag},dashed:{uniforms:Pp.merge([Cp.common,Cp.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Hu.linedashed_vert,fragmentShader:Hu.linedashed_frag},depth:{uniforms:Pp.merge([Cp.common,Cp.displacementmap]),vertexShader:Hu.depth_vert,fragmentShader:Hu.depth_frag},normal:{uniforms:Pp.merge([Cp.common,Cp.bumpmap,Cp.normalmap,Cp.displacementmap,{opacity:{value:1}}]),vertexShader:Hu.normal_vert,fragmentShader:Hu.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Hu.cube_vert,fragmentShader:Hu.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Hu.equirect_vert,fragmentShader:Hu.equirect_frag},distanceRGBA:{uniforms:Pp.merge([Cp.common,Cp.displacementmap,{referencePosition:{value:new O},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Hu.distanceRGBA_vert,fragmentShader:Hu.distanceRGBA_frag},shadow:{uniforms:Pp.merge([Cp.lights,Cp.fog,{color:{value:new Fe(0)},opacity:{value:1}}]),vertexShader:Hu.shadow_vert,fragmentShader:Hu.shadow_frag}};Wu.physical={uniforms:Pp.merge([Wu.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:Hu.meshphysical_vert,fragmentShader:Hu.meshphysical_frag},Object.assign(Ue.prototype,{set:function(Mm,Rm){return this.min.copy(Mm),this.max.copy(Rm),this},setFromPoints:function(Mm){this.makeEmpty();for(var Rm=0,Cm=Mm.length;Rm<Cm;Rm++)this.expandByPoint(Mm[Rm]);return this},setFromCenterAndSize:function(){var Mm=new D;return function(Cm,Pm){var Lm=Mm.copy(Pm).multiplyScalar(0.5);return this.min.copy(Cm).sub(Lm),this.max.copy(Cm).add(Lm),this}}(),clone:function(){return new this.constructor().copy(this)},copy:function(Mm){return this.min.copy(Mm.min),this.max.copy(Mm.max),this},makeEmpty:function(){return this.min.x=this.min.y=+Infinity,this.max.x=this.max.y=-Infinity,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(Mm){var Rm=Mm||new D;return this.isEmpty()?Rm.set(0,0):Rm.addVectors(this.min,this.max).multiplyScalar(0.5)},getSize:function(Mm){var Rm=Mm||new D;return this.isEmpty()?Rm.set(0,0):Rm.subVectors(this.max,this.min)},expandByPoint:function(Mm){return this.min.min(Mm),this.max.max(Mm),this},expandByVector:function(Mm){return this.min.sub(Mm),this.max.add(Mm),this},expandByScalar:function(Mm){return this.min.addScalar(-Mm),this.max.addScalar(Mm),this},containsPoint:function(Mm){return Mm.x<this.min.x||Mm.x>this.max.x||Mm.y<this.min.y||Mm.y>this.max.y?!1:!0},containsBox:function(Mm){return this.min.x<=Mm.min.x&&Mm.max.x<=this.max.x&&this.min.y<=Mm.min.y&&Mm.max.y<=this.max.y},getParameter:function(Mm,Rm){var Cm=Rm||new D;return Cm.set((Mm.x-this.min.x)/(this.max.x-this.min.x),(Mm.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(Mm){return Mm.max.x<this.min.x||Mm.min.x>this.max.x||Mm.max.y<this.min.y||Mm.min.y>this.max.y?!1:!0},clampPoint:function(Mm,Rm){var Cm=Rm||new D;return Cm.copy(Mm).clamp(this.min,this.max)},distanceToPoint:function(){var Mm=new D;return function(Cm){var Pm=Mm.copy(Cm).clamp(this.min,this.max);return Pm.sub(Cm).length()}}(),intersect:function(Mm){return this.min.max(Mm.min),this.max.min(Mm.max),this},union:function(Mm){return this.min.min(Mm.min),this.max.max(Mm.max),this},translate:function(Mm){return this.min.add(Mm),this.max.add(Mm),this},equals:function(Mm){return Mm.min.equals(this.min)&&Mm.max.equals(this.max)}}),ke.prototype=Object.create(H.prototype),ke.prototype.constructor=ke;var ju=0;Ge.prototype=Object.assign(Object.create(L.prototype),{constructor:Ge,isMaterial:!0,onBeforeCompile:function(){},setValues:function(Mm){if(void 0!==Mm)for(var Rm in Mm){var Cm=Mm[Rm];if(void 0===Cm){console.warn("THREE.Material: '"+Rm+"' parameter is undefined.");continue}if("shading"==Rm){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=Cm===js;continue}var Pm=this[Rm];if(void 0===Pm){console.warn("THREE."+this.type+": '"+Rm+"' is not a property of this material.");continue}Pm&&Pm.isColor?Pm.set(Cm):Pm&&Pm.isVector3&&Cm&&Cm.isVector3?Pm.copy(Cm):"overdraw"==Rm?this[Rm]=+Cm:this[Rm]=Cm}},toJSON:function(Mm){function Rm(Bm){var Nm=[];for(var zm in Bm){var Dm=Bm[zm];delete Dm.metadata,Nm.push(Dm)}return Nm}var Cm=void 0===Mm||"string"==typeof Mm;Cm&&(Mm={textures:{},images:{}});var Pm={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};if(Pm.uuid=this.uuid,Pm.type=this.type,""!==this.name&&(Pm.name=this.name),this.color&&this.color.isColor&&(Pm.color=this.color.getHex()),void 0!==this.roughness&&(Pm.roughness=this.roughness),void 0!==this.metalness&&(Pm.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(Pm.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(Pm.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(Pm.specular=this.specular.getHex()),void 0!==this.shininess&&(Pm.shininess=this.shininess),void 0!==this.clearCoat&&(Pm.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(Pm.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(Pm.map=this.map.toJSON(Mm).uuid),this.alphaMap&&this.alphaMap.isTexture&&(Pm.alphaMap=this.alphaMap.toJSON(Mm).uuid),this.lightMap&&this.lightMap.isTexture&&(Pm.lightMap=this.lightMap.toJSON(Mm).uuid),this.bumpMap&&this.bumpMap.isTexture&&(Pm.bumpMap=this.bumpMap.toJSON(Mm).uuid,Pm.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(Pm.normalMap=this.normalMap.toJSON(Mm).uuid,Pm.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(Pm.displacementMap=this.displacementMap.toJSON(Mm).uuid,Pm.displacementScale=this.displacementScale,Pm.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(Pm.roughnessMap=this.roughnessMap.toJSON(Mm).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(Pm.metalnessMap=this.metalnessMap.toJSON(Mm).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(Pm.emissiveMap=this.emissiveMap.toJSON(Mm).uuid),this.specularMap&&this.specularMap.isTexture&&(Pm.specularMap=this.specularMap.toJSON(Mm).uuid),this.envMap&&this.envMap.isTexture&&(Pm.envMap=this.envMap.toJSON(Mm).uuid,Pm.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(Pm.gradientMap=this.gradientMap.toJSON(Mm).uuid),void 0!==this.size&&(Pm.size=this.size),void 0!==this.sizeAttenuation&&(Pm.sizeAttenuation=this.sizeAttenuation),this.blending!==Qs&&(Pm.blending=this.blending),!0===this.flatShading&&(Pm.flatShading=this.flatShading),this.side!==Gs&&(Pm.side=this.side),this.vertexColors!==Xs&&(Pm.vertexColors=this.vertexColors),1>this.opacity&&(Pm.opacity=this.opacity),!0===this.transparent&&(Pm.transparent=this.transparent),Pm.depthFunc=this.depthFunc,Pm.depthTest=this.depthTest,Pm.depthWrite=this.depthWrite,0!==this.rotation&&(Pm.rotation=this.rotation),1!==this.linewidth&&(Pm.linewidth=this.linewidth),void 0!==this.dashSize&&(Pm.dashSize=this.dashSize),void 0!==this.gapSize&&(Pm.gapSize=this.gapSize),void 0!==this.scale&&(Pm.scale=this.scale),!0===this.dithering&&(Pm.dithering=!0),0<this.alphaTest&&(Pm.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(Pm.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(Pm.wireframe=this.wireframe),1<this.wireframeLinewidth&&(Pm.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(Pm.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(Pm.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(Pm.morphTargets=!0),!0===this.skinning&&(Pm.skinning=!0),!1===this.visible&&(Pm.visible=!1),"{}"!==JSON.stringify(this.userData)&&(Pm.userData=this.userData),Cm){var Lm=Rm(Mm.textures),Im=Rm(Mm.images);0<Lm.length&&(Pm.textures=Lm),0<Im.length&&(Pm.images=Im)}return Pm},clone:function(){return new this.constructor().copy(this)},copy:function(Mm){this.name=Mm.name,this.fog=Mm.fog,this.lights=Mm.lights,this.blending=Mm.blending,this.side=Mm.side,this.flatShading=Mm.flatShading,this.vertexColors=Mm.vertexColors,this.opacity=Mm.opacity,this.transparent=Mm.transparent,this.blendSrc=Mm.blendSrc,this.blendDst=Mm.blendDst,this.blendEquation=Mm.blendEquation,this.blendSrcAlpha=Mm.blendSrcAlpha,this.blendDstAlpha=Mm.blendDstAlpha,this.blendEquationAlpha=Mm.blendEquationAlpha,this.depthFunc=Mm.depthFunc,this.depthTest=Mm.depthTest,this.depthWrite=Mm.depthWrite,this.colorWrite=Mm.colorWrite,this.precision=Mm.precision,this.polygonOffset=Mm.polygonOffset,this.polygonOffsetFactor=Mm.polygonOffsetFactor,this.polygonOffsetUnits=Mm.polygonOffsetUnits,this.dithering=Mm.dithering,this.alphaTest=Mm.alphaTest,this.premultipliedAlpha=Mm.premultipliedAlpha,this.overdraw=Mm.overdraw,this.visible=Mm.visible,this.userData=JSON.parse(JSON.stringify(Mm.userData)),this.clipShadows=Mm.clipShadows,this.clipIntersection=Mm.clipIntersection;var Rm=Mm.clippingPlanes,Cm=null;if(null!==Rm){var Pm=Rm.length;Cm=Array(Pm);for(var Lm=0;Lm!==Pm;++Lm)Cm[Lm]=Rm[Lm].clone()}return this.clippingPlanes=Cm,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),He.prototype=Object.create(Ge.prototype),He.prototype.constructor=He,He.prototype.isMeshDepthMaterial=!0,He.prototype.copy=function(Mm){return Ge.prototype.copy.call(this,Mm),this.depthPacking=Mm.depthPacking,this.skinning=Mm.skinning,this.morphTargets=Mm.morphTargets,this.map=Mm.map,this.alphaMap=Mm.alphaMap,this.displacementMap=Mm.displacementMap,this.displacementScale=Mm.displacementScale,this.displacementBias=Mm.displacementBias,this.wireframe=Mm.wireframe,this.wireframeLinewidth=Mm.wireframeLinewidth,this},We.prototype=Object.create(Ge.prototype),We.prototype.constructor=We,We.prototype.isMeshDistanceMaterial=!0,We.prototype.copy=function(Mm){return Ge.prototype.copy.call(this,Mm),this.referencePosition.copy(Mm.referencePosition),this.nearDistance=Mm.nearDistance,this.farDistance=Mm.farDistance,this.skinning=Mm.skinning,this.morphTargets=Mm.morphTargets,this.map=Mm.map,this.alphaMap=Mm.alphaMap,this.displacementMap=Mm.displacementMap,this.displacementScale=Mm.displacementScale,this.displacementBias=Mm.displacementBias,this},Object.assign(je.prototype,{isBox3:!0,set:function(Mm,Rm){return this.min.copy(Mm),this.max.copy(Rm),this},setFromArray:function(Mm){for(var Rm=+Infinity,Cm=+Infinity,Pm=+Infinity,Lm=-Infinity,Im=-Infinity,Bm=-Infinity,Nm=0,zm=Mm.length;Nm<zm;Nm+=3){var Dm=Mm[Nm],Fm=Mm[Nm+1],Um=Mm[Nm+2];Dm<Rm&&(Rm=Dm),Fm<Cm&&(Cm=Fm),Um<Pm&&(Pm=Um),Dm>Lm&&(Lm=Dm),Fm>Im&&(Im=Fm),Um>Bm&&(Bm=Um)}return this.min.set(Rm,Cm,Pm),this.max.set(Lm,Im,Bm),this},setFromBufferAttribute:function(Mm){for(var Rm=+Infinity,Cm=+Infinity,Pm=+Infinity,Lm=-Infinity,Im=-Infinity,Bm=-Infinity,Nm=0,zm=Mm.count;Nm<zm;Nm++){var Dm=Mm.getX(Nm),Fm=Mm.getY(Nm),Um=Mm.getZ(Nm);Dm<Rm&&(Rm=Dm),Fm<Cm&&(Cm=Fm),Um<Pm&&(Pm=Um),Dm>Lm&&(Lm=Dm),Fm>Im&&(Im=Fm),Um>Bm&&(Bm=Um)}return this.min.set(Rm,Cm,Pm),this.max.set(Lm,Im,Bm),this},setFromPoints:function(Mm){this.makeEmpty();for(var Rm=0,Cm=Mm.length;Rm<Cm;Rm++)this.expandByPoint(Mm[Rm]);return this},setFromCenterAndSize:function(){var Mm=new O;return function(Cm,Pm){var Lm=Mm.copy(Pm).multiplyScalar(0.5);return this.min.copy(Cm).sub(Lm),this.max.copy(Cm).add(Lm),this}}(),setFromObject:function(Mm){return this.makeEmpty(),this.expandByObject(Mm)},clone:function(){return new this.constructor().copy(this)},copy:function(Mm){return this.min.copy(Mm.min),this.max.copy(Mm.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=+Infinity,this.max.x=this.max.y=this.max.z=-Infinity,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(Mm){var Rm=Mm||new O;return this.isEmpty()?Rm.set(0,0,0):Rm.addVectors(this.min,this.max).multiplyScalar(0.5)},getSize:function(Mm){var Rm=Mm||new O;return this.isEmpty()?Rm.set(0,0,0):Rm.subVectors(this.max,this.min)},expandByPoint:function(Mm){return this.min.min(Mm),this.max.max(Mm),this},expandByVector:function(Mm){return this.min.sub(Mm),this.max.add(Mm),this},expandByScalar:function(Mm){return this.min.addScalar(-Mm),this.max.addScalar(Mm),this},expandByObject:function(){function Mm(Im){var Bm=Im.geometry;if(Bm!==void 0)if(Bm.isGeometry){var Nm=Bm.vertices;for(Cm=0,Pm=Nm.length;Cm<Pm;Cm++)Lm.copy(Nm[Cm]),Lm.applyMatrix4(Im.matrixWorld),Rm.expandByPoint(Lm)}else if(Bm.isBufferGeometry){var zm=Bm.attributes.position;if(void 0!==zm)for(Cm=0,Pm=zm.count;Cm<Pm;Cm++)Lm.fromBufferAttribute(zm,Cm).applyMatrix4(Im.matrixWorld),Rm.expandByPoint(Lm)}}var Rm,Cm,Pm,Lm=new O;return function(Bm){return Rm=this,Bm.updateMatrixWorld(!0),Bm.traverse(Mm),this}}(),containsPoint:function(Mm){return Mm.x<this.min.x||Mm.x>this.max.x||Mm.y<this.min.y||Mm.y>this.max.y||Mm.z<this.min.z||Mm.z>this.max.z?!1:!0},containsBox:function(Mm){return this.min.x<=Mm.min.x&&Mm.max.x<=this.max.x&&this.min.y<=Mm.min.y&&Mm.max.y<=this.max.y&&this.min.z<=Mm.min.z&&Mm.max.z<=this.max.z},getParameter:function(Mm,Rm){var Cm=Rm||new O;return Cm.set((Mm.x-this.min.x)/(this.max.x-this.min.x),(Mm.y-this.min.y)/(this.max.y-this.min.y),(Mm.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(Mm){return Mm.max.x<this.min.x||Mm.min.x>this.max.x||Mm.max.y<this.min.y||Mm.min.y>this.max.y||Mm.max.z<this.min.z||Mm.min.z>this.max.z?!1:!0},intersectsSphere:function(){var Mm=new O;return function(Cm){return this.clampPoint(Cm.center,Mm),Mm.distanceToSquared(Cm.center)<=Cm.radius*Cm.radius}}(),intersectsPlane:function(Mm){var Rm,Cm;return 0<Mm.normal.x?(Rm=Mm.normal.x*this.min.x,Cm=Mm.normal.x*this.max.x):(Rm=Mm.normal.x*this.max.x,Cm=Mm.normal.x*this.min.x),0<Mm.normal.y?(Rm+=Mm.normal.y*this.min.y,Cm+=Mm.normal.y*this.max.y):(Rm+=Mm.normal.y*this.max.y,Cm+=Mm.normal.y*this.min.y),0<Mm.normal.z?(Rm+=Mm.normal.z*this.min.z,Cm+=Mm.normal.z*this.max.z):(Rm+=Mm.normal.z*this.max.z,Cm+=Mm.normal.z*this.min.z),Rm<=Mm.constant&&Cm>=Mm.constant},clampPoint:function(Mm,Rm){var Cm=Rm||new O;return Cm.copy(Mm).clamp(this.min,this.max)},distanceToPoint:function(){var Mm=new O;return function(Cm){var Pm=Mm.copy(Cm).clamp(this.min,this.max);return Pm.sub(Cm).length()}}(),getBoundingSphere:function(){var Mm=new O;return function(Cm){var Pm=Cm||new qe;return this.getCenter(Pm.center),Pm.radius=0.5*this.getSize(Mm).length(),Pm}}(),intersect:function(Mm){return this.min.max(Mm.min),this.max.min(Mm.max),this.isEmpty()&&this.makeEmpty(),this},union:function(Mm){return this.min.min(Mm.min),this.max.max(Mm.max),this},applyMatrix4:function(){var Mm=[new O,new O,new O,new O,new O,new O,new O,new O];return function(Cm){return this.isEmpty()?this:(Mm[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(Cm),Mm[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(Cm),Mm[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(Cm),Mm[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(Cm),Mm[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(Cm),Mm[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(Cm),Mm[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(Cm),Mm[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(Cm),this.setFromPoints(Mm),this)}}(),translate:function(Mm){return this.min.add(Mm),this.max.add(Mm),this},equals:function(Mm){return Mm.min.equals(this.min)&&Mm.max.equals(this.max)}}),Object.assign(qe.prototype,{set:function(Mm,Rm){return this.center.copy(Mm),this.radius=Rm,this},setFromPoints:function(){var Mm=new je;return function(Cm,Pm){var Lm=this.center;void 0===Pm?Mm.setFromPoints(Cm).getCenter(Lm):Lm.copy(Pm);for(var Im=0,Bm=0,Nm=Cm.length;Bm<Nm;Bm++)Im=_Mathmax(Im,Lm.distanceToSquared(Cm[Bm]));return this.radius=_Mathsqrt(Im),this}}(),clone:function(){return new this.constructor().copy(this)},copy:function(Mm){return this.center.copy(Mm.center),this.radius=Mm.radius,this},empty:function(){return 0>=this.radius},containsPoint:function(Mm){return Mm.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(Mm){return Mm.distanceTo(this.center)-this.radius},intersectsSphere:function(Mm){var Rm=this.radius+Mm.radius;return Mm.center.distanceToSquared(this.center)<=Rm*Rm},intersectsBox:function(Mm){return Mm.intersectsSphere(this)},intersectsPlane:function(Mm){return _Mathabs(Mm.distanceToPoint(this.center))<=this.radius},clampPoint:function(Mm,Rm){var Cm=this.center.distanceToSquared(Mm),Pm=Rm||new O;return Pm.copy(Mm),Cm>this.radius*this.radius&&(Pm.sub(this.center).normalize(),Pm.multiplyScalar(this.radius).add(this.center)),Pm},getBoundingBox:function(Mm){var Rm=Mm||new je;return Rm.set(this.center,this.center),Rm.expandByScalar(this.radius),Rm},applyMatrix4:function(Mm){return this.center.applyMatrix4(Mm),this.radius*=Mm.getMaxScaleOnAxis(),this},translate:function(Mm){return this.center.add(Mm),this},equals:function(Mm){return Mm.center.equals(this.center)&&Mm.radius===this.radius}}),Object.assign(Xe.prototype,{set:function(Mm,Rm){return this.normal.copy(Mm),this.constant=Rm,this},setComponents:function(Mm,Rm,Cm,Pm){return this.normal.set(Mm,Rm,Cm),this.constant=Pm,this},setFromNormalAndCoplanarPoint:function(Mm,Rm){return this.normal.copy(Mm),this.constant=-Rm.dot(this.normal),this},setFromCoplanarPoints:function(){var Mm=new O,Rm=new O;return function(Pm,Lm,Im){var Bm=Mm.subVectors(Im,Lm).cross(Rm.subVectors(Pm,Lm)).normalize();return this.setFromNormalAndCoplanarPoint(Bm,Pm),this}}(),clone:function(){return new this.constructor().copy(this)},copy:function(Mm){return this.normal.copy(Mm.normal),this.constant=Mm.constant,this},normalize:function(){var Mm=1/this.normal.length();return this.normal.multiplyScalar(Mm),this.constant*=Mm,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(Mm){return this.normal.dot(Mm)+this.constant},distanceToSphere:function(Mm){return this.distanceToPoint(Mm.center)-Mm.radius},projectPoint:function(Mm,Rm){var Cm=Rm||new O;return Cm.copy(this.normal).multiplyScalar(-this.distanceToPoint(Mm)).add(Mm)},intersectLine:function(){var Mm=new O;return function(Cm,Pm){var Lm=Pm||new O,Im=Cm.delta(Mm),Bm=this.normal.dot(Im);if(0===Bm)return 0===this.distanceToPoint(Cm.start)?Lm.copy(Cm.start):void 0;var Nm=-(Cm.start.dot(this.normal)+this.constant)/Bm;return 0>Nm||1<Nm?void 0:Lm.copy(Im).multiplyScalar(Nm).add(Cm.start)}}(),intersectsLine:function(Mm){var Rm=this.distanceToPoint(Mm.start),Cm=this.distanceToPoint(Mm.end);return 0>Rm&&0<Cm||0>Cm&&0<Rm},intersectsBox:function(Mm){return Mm.intersectsPlane(this)},intersectsSphere:function(Mm){return Mm.intersectsPlane(this)},coplanarPoint:function(Mm){var Rm=Mm||new O;return Rm.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var Mm=new O,Rm=new G;return function(Pm,Lm){var Im=Lm||Rm.getNormalMatrix(Pm),Bm=this.coplanarPoint(Mm).applyMatrix4(Pm),Nm=this.normal.applyMatrix3(Im).normalize();return this.constant=-Bm.dot(Nm),this}}(),translate:function(Mm){return this.constant-=Mm.dot(this.normal),this},equals:function(Mm){return Mm.normal.equals(this.normal)&&Mm.constant===this.constant}}),Object.assign(Ye.prototype,{set:function(Mm,Rm,Cm,Pm,Lm,Im){var Bm=this.planes;return Bm[0].copy(Mm),Bm[1].copy(Rm),Bm[2].copy(Cm),Bm[3].copy(Pm),Bm[4].copy(Lm),Bm[5].copy(Im),this},clone:function(){return new this.constructor().copy(this)},copy:function(Mm){for(var Rm=this.planes,Cm=0;6>Cm;Cm++)Rm[Cm].copy(Mm.planes[Cm]);return this},setFromMatrix:function(Mm){var Rm=this.planes,Cm=Mm.elements,Pm=Cm[0],Lm=Cm[1],Im=Cm[2],Bm=Cm[3],Nm=Cm[4],zm=Cm[5],Dm=Cm[6],Fm=Cm[7],Um=Cm[8],Om=Cm[9],km=Cm[10],Vm=Cm[11],Gm=Cm[12],Hm=Cm[13],Wm=Cm[14],jm=Cm[15];return Rm[0].setComponents(Bm-Pm,Fm-Nm,Vm-Um,jm-Gm).normalize(),Rm[1].setComponents(Bm+Pm,Fm+Nm,Vm+Um,jm+Gm).normalize(),Rm[2].setComponents(Bm+Lm,Fm+zm,Vm+Om,jm+Hm).normalize(),Rm[3].setComponents(Bm-Lm,Fm-zm,Vm-Om,jm-Hm).normalize(),Rm[4].setComponents(Bm-Im,Fm-Dm,Vm-km,jm-Wm).normalize(),Rm[5].setComponents(Bm+Im,Fm+Dm,Vm+km,jm+Wm).normalize(),this},intersectsObject:function(){var Mm=new qe;return function(Cm){var Pm=Cm.geometry;return null===Pm.boundingSphere&&Pm.computeBoundingSphere(),Mm.copy(Pm.boundingSphere).applyMatrix4(Cm.matrixWorld),this.intersectsSphere(Mm)}}(),intersectsSprite:function(){var Mm=new qe;return function(Cm){return Mm.center.set(0,0,0),Mm.radius=0.7071067811865476,Mm.applyMatrix4(Cm.matrixWorld),this.intersectsSphere(Mm)}}(),intersectsSphere:function(Mm){for(var Rm=this.planes,Cm=Mm.center,Pm=-Mm.radius,Lm=0,Im;6>Lm;Lm++)if(Im=Rm[Lm].distanceToPoint(Cm),Im<Pm)return!1;return!0},intersectsBox:function(){var Mm=new O,Rm=new O;return function(Pm){for(var Lm=this.planes,Im=0,Bm;6>Im;Im++){Bm=Lm[Im],Mm.x=0<Bm.normal.x?Pm.min.x:Pm.max.x,Rm.x=0<Bm.normal.x?Pm.max.x:Pm.min.x,Mm.y=0<Bm.normal.y?Pm.min.y:Pm.max.y,Rm.y=0<Bm.normal.y?Pm.max.y:Pm.min.y,Mm.z=0<Bm.normal.z?Pm.min.z:Pm.max.z,Rm.z=0<Bm.normal.z?Pm.max.z:Pm.min.z;var Nm=Bm.distanceToPoint(Mm),zm=Bm.distanceToPoint(Rm);if(0>Nm&&0>zm)return!1}return!0}}(),containsPoint:function(Mm){for(var Rm=this.planes,Cm=0;6>Cm;Cm++)if(0>Rm[Cm].distanceToPoint(Mm))return!1;return!0}}),Qe.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],Qe.DefaultOrder="XYZ",Object.defineProperties(Qe.prototype,{x:{get:function(){return this._x},set:function(Mm){this._x=Mm,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(Mm){this._y=Mm,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(Mm){this._z=Mm,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(Mm){this._order=Mm,this.onChangeCallback()}}}),Object.assign(Qe.prototype,{isEuler:!0,set:function(Mm,Rm,Cm,Pm){return this._x=Mm,this._y=Rm,this._z=Cm,this._order=Pm||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(Mm){return this._x=Mm._x,this._y=Mm._y,this._z=Mm._z,this._order=Mm._order,this.onChangeCallback(),this},setFromRotationMatrix:function(Mm,Rm,Cm){var Pm=yp.clamp,Lm=Mm.elements,Im=Lm[0],Bm=Lm[4],Nm=Lm[8],zm=Lm[1],Dm=Lm[5],Fm=Lm[9],Um=Lm[2],Om=Lm[6],km=Lm[10];return Rm=Rm||this._order,"XYZ"===Rm?(this._y=_Mathasin(Pm(Nm,-1,1)),0.99999>_Mathabs(Nm)?(this._x=_Mathatan(-Fm,km),this._z=_Mathatan(-Bm,Im)):(this._x=_Mathatan(Om,Dm),this._z=0)):"YXZ"===Rm?(this._x=_Mathasin(-Pm(Fm,-1,1)),0.99999>_Mathabs(Fm)?(this._y=_Mathatan(Nm,km),this._z=_Mathatan(zm,Dm)):(this._y=_Mathatan(-Um,Im),this._z=0)):"ZXY"===Rm?(this._x=_Mathasin(Pm(Om,-1,1)),0.99999>_Mathabs(Om)?(this._y=_Mathatan(-Um,km),this._z=_Mathatan(-Bm,Dm)):(this._y=0,this._z=_Mathatan(zm,Im))):"ZYX"===Rm?(this._y=_Mathasin(-Pm(Um,-1,1)),0.99999>_Mathabs(Um)?(this._x=_Mathatan(Om,km),this._z=_Mathatan(zm,Im)):(this._x=0,this._z=_Mathatan(-Bm,Dm))):"YZX"===Rm?(this._z=_Mathasin(Pm(zm,-1,1)),0.99999>_Mathabs(zm)?(this._x=_Mathatan(-Fm,Dm),this._y=_Mathatan(-Um,Im)):(this._x=0,this._y=_Mathatan(Nm,km))):"XZY"===Rm?(this._z=_Mathasin(-Pm(Bm,-1,1)),0.99999>_Mathabs(Bm)?(this._x=_Mathatan(Om,Dm),this._y=_Mathatan(Nm,Im)):(this._x=_Mathatan(-Fm,km),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+Rm),this._order=Rm,!1!==Cm&&this.onChangeCallback(),this},setFromQuaternion:function(){var Mm=new F;return function(Cm,Pm,Lm){return Mm.makeRotationFromQuaternion(Cm),this.setFromRotationMatrix(Mm,Pm,Lm)}}(),setFromVector3:function(Mm,Rm){return this.set(Mm.x,Mm.y,Mm.z,Rm||this._order)},reorder:function(){var Mm=new U;return function(Cm){return Mm.setFromEuler(this),this.setFromQuaternion(Mm,Cm)}}(),equals:function(Mm){return Mm._x===this._x&&Mm._y===this._y&&Mm._z===this._z&&Mm._order===this._order},fromArray:function(Mm){return this._x=Mm[0],this._y=Mm[1],this._z=Mm[2],void 0!==Mm[3]&&(this._order=Mm[3]),this.onChangeCallback(),this},toArray:function(Mm,Rm){return void 0===Mm&&(Mm=[]),void 0===Rm&&(Rm=0),Mm[Rm]=this._x,Mm[Rm+1]=this._y,Mm[Rm+2]=this._z,Mm[Rm+3]=this._order,Mm},toVector3:function(Mm){return Mm?Mm.set(this._x,this._y,this._z):new O(this._x,this._y,this._z)},onChange:function(Mm){return this.onChangeCallback=Mm,this},onChangeCallback:function(){}}),Object.assign(Ke.prototype,{set:function(Mm){this.mask=0|1<<Mm},enable:function(Mm){this.mask|=0|1<<Mm},toggle:function(Mm){this.mask^=0|1<<Mm},disable:function(Mm){this.mask&=~(0|1<<Mm)},test:function(Mm){return 0!=(this.mask&Mm.mask)}});var qu=0;$e.DefaultUp=new O(0,1,0),$e.DefaultMatrixAutoUpdate=!0,$e.prototype=Object.assign(Object.create(L.prototype),{constructor:$e,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(Mm){this.matrix.multiplyMatrices(Mm,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(Mm){return this.quaternion.premultiply(Mm),this},setRotationFromAxisAngle:function(Mm,Rm){this.quaternion.setFromAxisAngle(Mm,Rm)},setRotationFromEuler:function(Mm){this.quaternion.setFromEuler(Mm,!0)},setRotationFromMatrix:function(Mm){this.quaternion.setFromRotationMatrix(Mm)},setRotationFromQuaternion:function(Mm){this.quaternion.copy(Mm)},rotateOnAxis:function(){var Mm=new U;return function(Cm,Pm){return Mm.setFromAxisAngle(Cm,Pm),this.quaternion.multiply(Mm),this}}(),rotateOnWorldAxis:function(){var Mm=new U;return function(Cm,Pm){return Mm.setFromAxisAngle(Cm,Pm),this.quaternion.premultiply(Mm),this}}(),rotateX:function(){var Mm=new O(1,0,0);return function(Cm){return this.rotateOnAxis(Mm,Cm)}}(),rotateY:function(){var Mm=new O(0,1,0);return function(Cm){return this.rotateOnAxis(Mm,Cm)}}(),rotateZ:function(){var Mm=new O(0,0,1);return function(Cm){return this.rotateOnAxis(Mm,Cm)}}(),translateOnAxis:function(){var Mm=new O;return function(Cm,Pm){return Mm.copy(Cm).applyQuaternion(this.quaternion),this.position.add(Mm.multiplyScalar(Pm)),this}}(),translateX:function(){var Mm=new O(1,0,0);return function(Cm){return this.translateOnAxis(Mm,Cm)}}(),translateY:function(){var Mm=new O(0,1,0);return function(Cm){return this.translateOnAxis(Mm,Cm)}}(),translateZ:function(){var Mm=new O(0,0,1);return function(Cm){return this.translateOnAxis(Mm,Cm)}}(),localToWorld:function(Mm){return Mm.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var Mm=new F;return function(Cm){return Cm.applyMatrix4(Mm.getInverse(this.matrixWorld))}}(),lookAt:function(){var Mm=new F,Rm=new O;return function(Pm,Lm,Im){Pm.isVector3?Rm.copy(Pm):Rm.set(Pm,Lm,Im),this.isCamera?Mm.lookAt(this.position,Rm,this.up):Mm.lookAt(Rm,this.position,this.up),this.quaternion.setFromRotationMatrix(Mm)}}(),add:function(Mm){if(1<arguments.length){for(var Rm=0;Rm<arguments.length;Rm++)this.add(arguments[Rm]);return this}return Mm===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",Mm),this):(Mm&&Mm.isObject3D?(null!==Mm.parent&&Mm.parent.remove(Mm),Mm.parent=this,Mm.dispatchEvent({type:"added"}),this.children.push(Mm)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",Mm),this)},remove:function(Mm){if(1<arguments.length){for(var Rm=0;Rm<arguments.length;Rm++)this.remove(arguments[Rm]);return this}var Cm=this.children.indexOf(Mm);return-1!==Cm&&(Mm.parent=null,Mm.dispatchEvent({type:"removed"}),this.children.splice(Cm,1)),this},getObjectById:function(Mm){return this.getObjectByProperty("id",Mm)},getObjectByName:function(Mm){return this.getObjectByProperty("name",Mm)},getObjectByProperty:function(Mm,Rm){if(this[Mm]===Rm)return this;for(var Cm=0,Pm=this.children.length;Cm<Pm;Cm++){var Lm=this.children[Cm],Im=Lm.getObjectByProperty(Mm,Rm);if(Im!==void 0)return Im}},getWorldPosition:function(Mm){var Rm=Mm||new O;return this.updateMatrixWorld(!0),Rm.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var Mm=new O,Rm=new O;return function(Pm){var Lm=Pm||new U;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(Mm,Lm,Rm),Lm}}(),getWorldRotation:function(){var Mm=new U;return function(Cm){var Pm=Cm||new Qe;return this.getWorldQuaternion(Mm),Pm.setFromQuaternion(Mm,this.rotation.order,!1)}}(),getWorldScale:function(){var Mm=new O,Rm=new U;return function(Pm){var Lm=Pm||new O;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(Mm,Rm,Lm),Lm}}(),getWorldDirection:function(){var Mm=new U;return function(Cm){var Pm=Cm||new O;return this.getWorldQuaternion(Mm),Pm.set(0,0,1).applyQuaternion(Mm)}}(),raycast:function(){},traverse:function(Mm){Mm(this);for(var Rm=this.children,Cm=0,Pm=Rm.length;Cm<Pm;Cm++)Rm[Cm].traverse(Mm)},traverseVisible:function(Mm){if(!1!==this.visible){Mm(this);for(var Rm=this.children,Cm=0,Pm=Rm.length;Cm<Pm;Cm++)Rm[Cm].traverseVisible(Mm)}},traverseAncestors:function(Mm){var Rm=this.parent;null!==Rm&&(Mm(Rm),Rm.traverseAncestors(Mm))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(Mm){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||Mm)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,Mm=!0);for(var Rm=this.children,Cm=0,Pm=Rm.length;Cm<Pm;Cm++)Rm[Cm].updateMatrixWorld(Mm)},toJSON:function(Mm){function Rm(Hm,Wm){return void 0===Hm[Wm.uuid]&&(Hm[Wm.uuid]=Wm.toJSON(Mm)),Wm.uuid}function Cm(Hm){var Wm=[];for(var jm in Hm){var Xm=Hm[jm];delete Xm.metadata,Wm.push(Xm)}return Wm}var Pm=void 0===Mm||"string"==typeof Mm,Lm={};Pm&&(Mm={geometries:{},materials:{},textures:{},images:{},shapes:{}},Lm.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var Im={};if(Im.uuid=this.uuid,Im.type=this.type,""!==this.name&&(Im.name=this.name),!0===this.castShadow&&(Im.castShadow=!0),!0===this.receiveShadow&&(Im.receiveShadow=!0),!1===this.visible&&(Im.visible=!1),"{}"!==JSON.stringify(this.userData)&&(Im.userData=this.userData),Im.matrix=this.matrix.toArray(),void 0!==this.geometry){Im.geometry=Rm(Mm.geometries,this.geometry);var Bm=this.geometry.parameters;if(void 0!==Bm&&void 0!==Bm.shapes){var Nm=Bm.shapes;if(Array.isArray(Nm))for(var zm=0,Dm=Nm.length,Fm;zm<Dm;zm++)Fm=Nm[zm],Rm(Mm.shapes,Fm);else Rm(Mm.shapes,Nm)}}if(void 0!==this.material)if(Array.isArray(this.material)){for(var Um=[],zm=0,Dm=this.material.length;zm<Dm;zm++)Um.push(Rm(Mm.materials,this.material[zm]));Im.material=Um}else Im.material=Rm(Mm.materials,this.material);if(0<this.children.length){Im.children=[];for(var zm=0;zm<this.children.length;zm++)Im.children.push(this.children[zm].toJSON(Mm).object)}if(Pm){var Om=Cm(Mm.geometries),km=Cm(Mm.materials),Vm=Cm(Mm.textures),Gm=Cm(Mm.images),Nm=Cm(Mm.shapes);0<Om.length&&(Lm.geometries=Om),0<km.length&&(Lm.materials=km),0<Vm.length&&(Lm.textures=Vm),0<Gm.length&&(Lm.images=Gm),0<Nm.length&&(Lm.shapes=Nm)}return Lm.object=Im,Lm},clone:function(Mm){return new this.constructor().copy(this,Mm)},copy:function(Mm,Rm){if(void 0===Rm&&(Rm=!0),this.name=Mm.name,this.up.copy(Mm.up),this.position.copy(Mm.position),this.quaternion.copy(Mm.quaternion),this.scale.copy(Mm.scale),this.matrix.copy(Mm.matrix),this.matrixWorld.copy(Mm.matrixWorld),this.matrixAutoUpdate=Mm.matrixAutoUpdate,this.matrixWorldNeedsUpdate=Mm.matrixWorldNeedsUpdate,this.layers.mask=Mm.layers.mask,this.visible=Mm.visible,this.castShadow=Mm.castShadow,this.receiveShadow=Mm.receiveShadow,this.frustumCulled=Mm.frustumCulled,this.renderOrder=Mm.renderOrder,this.userData=JSON.parse(JSON.stringify(Mm.userData)),!0===Rm)for(var Cm=0,Pm;Cm<Mm.children.length;Cm++)Pm=Mm.children[Cm],this.add(Pm.clone());return this}}),et.prototype=Object.assign(Object.create($e.prototype),{constructor:et,isCamera:!0,copy:function(Mm,Rm){return $e.prototype.copy.call(this,Mm,Rm),this.matrixWorldInverse.copy(Mm.matrixWorldInverse),this.projectionMatrix.copy(Mm.projectionMatrix),this},getWorldDirection:function(){var Mm=new U;return function(Cm){var Pm=Cm||new O;return this.getWorldQuaternion(Mm),Pm.set(0,0,-1).applyQuaternion(Mm)}}(),updateMatrixWorld:function(Mm){$e.prototype.updateMatrixWorld.call(this,Mm),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return new this.constructor().copy(this)}}),tt.prototype=Object.assign(Object.create(et.prototype),{constructor:tt,isOrthographicCamera:!0,copy:function(Mm,Rm){return et.prototype.copy.call(this,Mm,Rm),this.left=Mm.left,this.right=Mm.right,this.top=Mm.top,this.bottom=Mm.bottom,this.near=Mm.near,this.far=Mm.far,this.zoom=Mm.zoom,this.view=null===Mm.view?null:Object.assign({},Mm.view),this},setViewOffset:function(Mm,Rm,Cm,Pm,Lm,Im){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=Mm,this.view.fullHeight=Rm,this.view.offsetX=Cm,this.view.offsetY=Pm,this.view.width=Lm,this.view.height=Im,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var Mm=(this.right-this.left)/(2*this.zoom),Rm=(this.top-this.bottom)/(2*this.zoom),Cm=(this.right+this.left)/2,Pm=(this.top+this.bottom)/2,Lm=Cm-Mm,Im=Cm+Mm,Bm=Pm+Rm,Nm=Pm-Rm;if(null!==this.view&&this.view.enabled){var zm=this.zoom/(this.view.width/this.view.fullWidth),Dm=this.zoom/(this.view.height/this.view.fullHeight),Fm=(this.right-this.left)/this.view.width,Um=(this.top-this.bottom)/this.view.height;Lm+=Fm*(this.view.offsetX/zm),Im=Lm+Fm*(this.view.width/zm),Bm-=Um*(this.view.offsetY/Dm),Nm=Bm-Um*(this.view.height/Dm)}this.projectionMatrix.makeOrthographic(Lm,Im,Bm,Nm,this.near,this.far)},toJSON:function(Mm){var Rm=$e.prototype.toJSON.call(this,Mm);return Rm.object.zoom=this.zoom,Rm.object.left=this.left,Rm.object.right=this.right,Rm.object.top=this.top,Rm.object.bottom=this.bottom,Rm.object.near=this.near,Rm.object.far=this.far,null!==this.view&&(Rm.object.view=Object.assign({},this.view)),Rm}}),Object.assign(rt.prototype,{clone:function(){return new this.constructor().copy(this)},copy:function(Mm){this.a=Mm.a,this.b=Mm.b,this.c=Mm.c,this.normal.copy(Mm.normal),this.color.copy(Mm.color),this.materialIndex=Mm.materialIndex;for(var Rm=0,Cm=Mm.vertexNormals.length;Rm<Cm;Rm++)this.vertexNormals[Rm]=Mm.vertexNormals[Rm].clone();for(var Rm=0,Cm=Mm.vertexColors.length;Rm<Cm;Rm++)this.vertexColors[Rm]=Mm.vertexColors[Rm].clone();return this}});var Xu=0;ot.prototype=Object.assign(Object.create(L.prototype),{constructor:ot,isGeometry:!0,applyMatrix:function(Mm){for(var Rm=new G().getNormalMatrix(Mm),Cm=0,Pm=this.vertices.length,Lm;Cm<Pm;Cm++)Lm=this.vertices[Cm],Lm.applyMatrix4(Mm);for(var Cm=0,Pm=this.faces.length,Im;Cm<Pm;Cm++){Im=this.faces[Cm],Im.normal.applyMatrix3(Rm).normalize();for(var Bm=0,Nm=Im.vertexNormals.length;Bm<Nm;Bm++)Im.vertexNormals[Bm].applyMatrix3(Rm).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var Mm=new F;return function(Cm){return Mm.makeRotationX(Cm),this.applyMatrix(Mm),this}}(),rotateY:function(){var Mm=new F;return function(Cm){return Mm.makeRotationY(Cm),this.applyMatrix(Mm),this}}(),rotateZ:function(){var Mm=new F;return function(Cm){return Mm.makeRotationZ(Cm),this.applyMatrix(Mm),this}}(),translate:function(){var Mm=new F;return function(Cm,Pm,Lm){return Mm.makeTranslation(Cm,Pm,Lm),this.applyMatrix(Mm),this}}(),scale:function(){var Mm=new F;return function(Cm,Pm,Lm){return Mm.makeScale(Cm,Pm,Lm),this.applyMatrix(Mm),this}}(),lookAt:function(){var Mm=new $e;return function(Cm){Mm.lookAt(Cm),Mm.updateMatrix(),this.applyMatrix(Mm.matrix)}}(),fromBufferGeometry:function(Mm){function Rm(Ym,Zm,Jm,Qm){var Km=void 0===Bm?[]:[Fm[Ym].clone(),Fm[Zm].clone(),Fm[Jm].clone()],$m=void 0===Nm?[]:[Cm.colors[Ym].clone(),Cm.colors[Zm].clone(),Cm.colors[Jm].clone()],eg=new rt(Ym,Zm,Jm,Km,$m,Qm);Cm.faces.push(eg),void 0!==zm&&Cm.faceVertexUvs[0].push([Um[Ym].clone(),Um[Zm].clone(),Um[Jm].clone()]),void 0!==Dm&&Cm.faceVertexUvs[1].push([Om[Ym].clone(),Om[Zm].clone(),Om[Jm].clone()])}var Cm=this,Pm=null===Mm.index?void 0:Mm.index.array,Lm=Mm.attributes,Im=Lm.position.array,Bm=void 0===Lm.normal?void 0:Lm.normal.array,Nm=void 0===Lm.color?void 0:Lm.color.array,zm=void 0===Lm.uv?void 0:Lm.uv.array,Dm=void 0===Lm.uv2?void 0:Lm.uv2.array;void 0!==Dm&&(this.faceVertexUvs[1]=[]);for(var Fm=[],Um=[],Om=[],km=0,Vm=0;km<Im.length;km+=3,Vm+=2)Cm.vertices.push(new O(Im[km],Im[km+1],Im[km+2])),void 0!==Bm&&Fm.push(new O(Bm[km],Bm[km+1],Bm[km+2])),void 0!==Nm&&Cm.colors.push(new Fe(Nm[km],Nm[km+1],Nm[km+2])),void 0!==zm&&Um.push(new D(zm[Vm],zm[Vm+1])),void 0!==Dm&&Om.push(new D(Dm[Vm],Dm[Vm+1]));var Gm=Mm.groups;if(0<Gm.length)for(var km=0;km<Gm.length;km++)for(var Hm=Gm[km],Wm=Hm.start,jm=Hm.count,Vm=Wm;Vm<Wm+jm;Vm+=3)void 0===Pm?Rm(Vm,Vm+1,Vm+2,Hm.materialIndex):Rm(Pm[Vm],Pm[Vm+1],Pm[Vm+2],Hm.materialIndex);else if(void 0!==Pm)for(var km=0;km<Pm.length;km+=3)Rm(Pm[km],Pm[km+1],Pm[km+2]);else for(var km=0;km<Im.length/3;km+=3)Rm(km,km+1,km+2);return this.computeFaceNormals(),null!==Mm.boundingBox&&(this.boundingBox=Mm.boundingBox.clone()),null!==Mm.boundingSphere&&(this.boundingSphere=Mm.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var Mm=this.boundingBox.getCenter().negate();return this.translate(Mm.x,Mm.y,Mm.z),Mm},normalize:function(){this.computeBoundingSphere();var Mm=this.boundingSphere.center,Rm=this.boundingSphere.radius,Cm=0===Rm?1:1/Rm,Pm=new F;return Pm.set(Cm,0,0,-Cm*Mm.x,0,Cm,0,-Cm*Mm.y,0,0,Cm,-Cm*Mm.z,0,0,0,1),this.applyMatrix(Pm),this},computeFaceNormals:function(){for(var Mm=new O,Rm=new O,Cm=0,Pm=this.faces.length;Cm<Pm;Cm++){var Lm=this.faces[Cm],Im=this.vertices[Lm.a],Bm=this.vertices[Lm.b],Nm=this.vertices[Lm.c];Mm.subVectors(Nm,Bm),Rm.subVectors(Im,Bm),Mm.cross(Rm),Mm.normalize(),Lm.normal.copy(Mm)}},computeVertexNormals:function(Mm){Mm===void 0&&(Mm=!0);var Rm,Cm,Pm,Lm,Im,Bm;for(Bm=Array(this.vertices.length),Rm=0,Cm=this.vertices.length;Rm<Cm;Rm++)Bm[Rm]=new O;if(Mm){var Nm,zm,Dm,Fm=new O,Um=new O;for(Pm=0,Lm=this.faces.length;Pm<Lm;Pm++)Im=this.faces[Pm],Nm=this.vertices[Im.a],zm=this.vertices[Im.b],Dm=this.vertices[Im.c],Fm.subVectors(Dm,zm),Um.subVectors(Nm,zm),Fm.cross(Um),Bm[Im.a].add(Fm),Bm[Im.b].add(Fm),Bm[Im.c].add(Fm)}else for(this.computeFaceNormals(),Pm=0,Lm=this.faces.length;Pm<Lm;Pm++)Im=this.faces[Pm],Bm[Im.a].add(Im.normal),Bm[Im.b].add(Im.normal),Bm[Im.c].add(Im.normal);for(Rm=0,Cm=this.vertices.length;Rm<Cm;Rm++)Bm[Rm].normalize();for(Pm=0,Lm=this.faces.length;Pm<Lm;Pm++){Im=this.faces[Pm];var Om=Im.vertexNormals;3===Om.length?(Om[0].copy(Bm[Im.a]),Om[1].copy(Bm[Im.b]),Om[2].copy(Bm[Im.c])):(Om[0]=Bm[Im.a].clone(),Om[1]=Bm[Im.b].clone(),Om[2]=Bm[Im.c].clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var Mm,Rm,Cm;for(this.computeFaceNormals(),Mm=0,Rm=this.faces.length;Mm<Rm;Mm++){Cm=this.faces[Mm];var Pm=Cm.vertexNormals;3===Pm.length?(Pm[0].copy(Cm.normal),Pm[1].copy(Cm.normal),Pm[2].copy(Cm.normal)):(Pm[0]=Cm.normal.clone(),Pm[1]=Cm.normal.clone(),Pm[2]=Cm.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var Mm,Rm,Cm,Pm,Lm;for(Cm=0,Pm=this.faces.length;Cm<Pm;Cm++)for(Lm=this.faces[Cm],Lm.__originalFaceNormal?Lm.__originalFaceNormal.copy(Lm.normal):Lm.__originalFaceNormal=Lm.normal.clone(),Lm.__originalVertexNormals||(Lm.__originalVertexNormals=[]),(Mm=0,Rm=Lm.vertexNormals.length);Mm<Rm;Mm++)Lm.__originalVertexNormals[Mm]?Lm.__originalVertexNormals[Mm].copy(Lm.vertexNormals[Mm]):Lm.__originalVertexNormals[Mm]=Lm.vertexNormals[Mm].clone();var Im=new ot;for(Im.faces=this.faces,Mm=0,Rm=this.morphTargets.length;Mm<Rm;Mm++){if(!this.morphNormals[Mm]){this.morphNormals[Mm]={},this.morphNormals[Mm].faceNormals=[],this.morphNormals[Mm].vertexNormals=[];var Bm=this.morphNormals[Mm].faceNormals,Nm=this.morphNormals[Mm].vertexNormals,zm,Dm;for(Cm=0,Pm=this.faces.length;Cm<Pm;Cm++)zm=new O,Dm={a:new O,b:new O,c:new O},Bm.push(zm),Nm.push(Dm)}var Fm=this.morphNormals[Mm];Im.vertices=this.morphTargets[Mm].vertices,Im.computeFaceNormals(),Im.computeVertexNormals();var zm,Dm;for(Cm=0,Pm=this.faces.length;Cm<Pm;Cm++)Lm=this.faces[Cm],zm=Fm.faceNormals[Cm],Dm=Fm.vertexNormals[Cm],zm.copy(Lm.normal),Dm.a.copy(Lm.vertexNormals[0]),Dm.b.copy(Lm.vertexNormals[1]),Dm.c.copy(Lm.vertexNormals[2])}for(Cm=0,Pm=this.faces.length;Cm<Pm;Cm++)Lm=this.faces[Cm],Lm.normal=Lm.__originalFaceNormal,Lm.vertexNormals=Lm.__originalVertexNormals},computeLineDistances:function(){for(var Mm=0,Rm=this.vertices,Cm=0,Pm=Rm.length;Cm<Pm;Cm++)0<Cm&&(Mm+=Rm[Cm].distanceTo(Rm[Cm-1])),this.lineDistances[Cm]=Mm},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new je),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new qe),this.boundingSphere.setFromPoints(this.vertices)},merge:function(Mm,Rm,Cm){if(!(Mm&&Mm.isGeometry))return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",Mm);var Lm=this.vertices.length,Im=this.vertices,Bm=Mm.vertices,Nm=this.faces,zm=Mm.faces,Dm=this.faceVertexUvs[0],Fm=Mm.faceVertexUvs[0],Um=this.colors,Om=Mm.colors,Pm;Cm===void 0&&(Cm=0),Rm!==void 0&&(Pm=new G().getNormalMatrix(Rm));for(var km=0,Vm=Bm.length;km<Vm;km++){var Gm=Bm[km],Hm=Gm.clone();Rm!==void 0&&Hm.applyMatrix4(Rm),Im.push(Hm)}for(var km=0,Vm=Om.length;km<Vm;km++)Um.push(Om[km].clone());for(km=0,Vm=zm.length;km<Vm;km++){var Wm=zm[km],Zm=Wm.vertexNormals,Jm=Wm.vertexColors,jm,Xm,Ym;jm=new rt(Wm.a+Lm,Wm.b+Lm,Wm.c+Lm),jm.normal.copy(Wm.normal),Pm!==void 0&&jm.normal.applyMatrix3(Pm).normalize();for(var Qm=0,Km=Zm.length;Qm<Km;Qm++)Xm=Zm[Qm].clone(),void 0!==Pm&&Xm.applyMatrix3(Pm).normalize(),jm.vertexNormals.push(Xm);jm.color.copy(Wm.color);for(var Qm=0,Km=Jm.length;Qm<Km;Qm++)Ym=Jm[Qm],jm.vertexColors.push(Ym.clone());jm.materialIndex=Wm.materialIndex+Cm,Nm.push(jm)}for(km=0,Vm=Fm.length;km<Vm;km++){var $m=Fm[km],eg=[];if(void 0!==$m){for(var Qm=0,Km=$m.length;Qm<Km;Qm++)eg.push($m[Qm].clone());Dm.push(eg)}}},mergeMesh:function(Mm){return Mm&&Mm.isMesh?void(Mm.matrixAutoUpdate&&Mm.updateMatrix(),this.merge(Mm.geometry,Mm.matrix)):void console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",Mm)},mergeVertices:function(){var Mm={},Rm=[],Cm=[],Bm=10000,Pm,Lm,Nm,zm,Dm,Fm,Um,Om;for(Nm=0,zm=this.vertices.length;Nm<zm;Nm++)Pm=this.vertices[Nm],Lm=_Mathround(Pm.x*Bm)+"_"+_Mathround(Pm.y*Bm)+"_"+_Mathround(Pm.z*Bm),void 0===Mm[Lm]?(Mm[Lm]=Nm,Rm.push(this.vertices[Nm]),Cm[Nm]=Rm.length-1):Cm[Nm]=Cm[Mm[Lm]];var km=[];for(Nm=0,zm=this.faces.length;Nm<zm;Nm++){Dm=this.faces[Nm],Dm.a=Cm[Dm.a],Dm.b=Cm[Dm.b],Dm.c=Cm[Dm.c],Fm=[Dm.a,Dm.b,Dm.c];for(var Vm=0;3>Vm;Vm++)if(Fm[Vm]===Fm[(Vm+1)%3]){km.push(Nm);break}}for(Nm=km.length-1;0<=Nm;Nm--){var Gm=km[Nm];for(this.faces.splice(Gm,1),Um=0,Om=this.faceVertexUvs.length;Um<Om;Um++)this.faceVertexUvs[Um].splice(Gm,1)}var Hm=this.vertices.length-Rm.length;return this.vertices=Rm,Hm},setFromPoints:function(Mm){this.vertices=[];for(var Rm=0,Cm=Mm.length,Pm;Rm<Cm;Rm++)Pm=Mm[Rm],this.vertices.push(new O(Pm.x,Pm.y,Pm.z||0));return this},sortFacesByMaterialIndex:function(){for(var Rm=this.faces,Cm=Rm.length,Pm=0;Pm<Cm;Pm++)Rm[Pm]._id=Pm;Rm.sort(function(Dm,Fm){return Dm.materialIndex-Fm.materialIndex});var Lm=this.faceVertexUvs[0],Im=this.faceVertexUvs[1],Bm,Nm;Lm&&Lm.length===Cm&&(Bm=[]),Im&&Im.length===Cm&&(Nm=[]);for(var Pm=0,zm;Pm<Cm;Pm++)zm=Rm[Pm]._id,Bm&&Bm.push(Lm[zm]),Nm&&Nm.push(Im[zm]);Bm&&(this.faceVertexUvs[0]=Bm),Nm&&(this.faceVertexUvs[1]=Nm)},toJSON:function(){function Mm(ag,og,ig){return ig?ag|1<<og:ag&~(1<<og)}function Rm(ag){var og=ag.x.toString()+ag.y.toString()+ag.z.toString();return void 0===Om[og]?(Om[og]=Um.length/3,Um.push(ag.x,ag.y,ag.z),Om[og]):Om[og]}function Cm(ag){var og=ag.r.toString()+ag.g.toString()+ag.b.toString();return void 0===Vm[og]?(Vm[og]=km.length,km.push(ag.getHex()),Vm[og]):Vm[og]}function Pm(ag){var og=ag.x.toString()+ag.y.toString();return void 0===Hm[og]?(Hm[og]=Gm.length/2,Gm.push(ag.x,ag.y),Hm[og]):Hm[og]}var Lm={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(Lm.uuid=this.uuid,Lm.type=this.type,""!==this.name&&(Lm.name=this.name),void 0!==this.parameters){var Im=this.parameters;for(var Bm in Im)void 0!==Im[Bm]&&(Lm[Bm]=Im[Bm]);return Lm}for(var Nm=[],zm=0,Dm;zm<this.vertices.length;zm++)Dm=this.vertices[zm],Nm.push(Dm.x,Dm.y,Dm.z);for(var Fm=[],Um=[],Om={},km=[],Vm={},Gm=[],Hm={},zm=0;zm<this.faces.length;zm++){var Wm=this.faces[zm],Ym=void 0!==this.faceVertexUvs[0][zm],Zm=0<Wm.normal.length(),Jm=0<Wm.vertexNormals.length,Qm=1!==Wm.color.r||1!==Wm.color.g||1!==Wm.color.b,Km=0<Wm.vertexColors.length,$m=0;if($m=Mm($m,0,0),$m=Mm($m,1,!0),$m=Mm($m,2,!1),$m=Mm($m,3,Ym),$m=Mm($m,4,Zm),$m=Mm($m,5,Jm),$m=Mm($m,6,Qm),$m=Mm($m,7,Km),Fm.push($m),Fm.push(Wm.a,Wm.b,Wm.c),Fm.push(Wm.materialIndex),Ym){var eg=this.faceVertexUvs[0][zm];Fm.push(Pm(eg[0]),Pm(eg[1]),Pm(eg[2]))}if(Zm&&Fm.push(Rm(Wm.normal)),Jm){var tg=Wm.vertexNormals;Fm.push(Rm(tg[0]),Rm(tg[1]),Rm(tg[2]))}if(Qm&&Fm.push(Cm(Wm.color)),Km){var rg=Wm.vertexColors;Fm.push(Cm(rg[0]),Cm(rg[1]),Cm(rg[2]))}}return Lm.data={},Lm.data.vertices=Nm,Lm.data.normals=Um,0<km.length&&(Lm.data.colors=km),0<Gm.length&&(Lm.data.uvs=[Gm]),Lm.data.faces=Fm,Lm},clone:function(){return new ot().copy(this)},copy:function(Mm){var Rm,Cm,Pm,Lm,Im,Bm;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=Mm.name;var Nm=Mm.vertices;for(Rm=0,Cm=Nm.length;Rm<Cm;Rm++)this.vertices.push(Nm[Rm].clone());var zm=Mm.colors;for(Rm=0,Cm=zm.length;Rm<Cm;Rm++)this.colors.push(zm[Rm].clone());var Dm=Mm.faces;for(Rm=0,Cm=Dm.length;Rm<Cm;Rm++)this.faces.push(Dm[Rm].clone());for(Rm=0,Cm=Mm.faceVertexUvs.length;Rm<Cm;Rm++){var Fm=Mm.faceVertexUvs[Rm];for(void 0===this.faceVertexUvs[Rm]&&(this.faceVertexUvs[Rm]=[]),Pm=0,Lm=Fm.length;Pm<Lm;Pm++){var Um=Fm[Pm],Om=[];for(Im=0,Bm=Um.length;Im<Bm;Im++){var km=Um[Im];Om.push(km.clone())}this.faceVertexUvs[Rm].push(Om)}}var Vm=Mm.morphTargets;for(Rm=0,Cm=Vm.length;Rm<Cm;Rm++){var Gm={name:Vm[Rm].name};if(void 0!==Vm[Rm].vertices)for(Gm.vertices=[],Pm=0,Lm=Vm[Rm].vertices.length;Pm<Lm;Pm++)Gm.vertices.push(Vm[Rm].vertices[Pm].clone());if(void 0!==Vm[Rm].normals)for(Gm.normals=[],Pm=0,Lm=Vm[Rm].normals.length;Pm<Lm;Pm++)Gm.normals.push(Vm[Rm].normals[Pm].clone());this.morphTargets.push(Gm)}var Hm=Mm.morphNormals;for(Rm=0,Cm=Hm.length;Rm<Cm;Rm++){var Wm={};if(void 0!==Hm[Rm].vertexNormals)for(Wm.vertexNormals=[],Pm=0,Lm=Hm[Rm].vertexNormals.length;Pm<Lm;Pm++){var jm=Hm[Rm].vertexNormals[Pm],Xm={};Xm.a=jm.a.clone(),Xm.b=jm.b.clone(),Xm.c=jm.c.clone(),Wm.vertexNormals.push(Xm)}if(void 0!==Hm[Rm].faceNormals)for(Wm.faceNormals=[],Pm=0,Lm=Hm[Rm].faceNormals.length;Pm<Lm;Pm++)Wm.faceNormals.push(Hm[Rm].faceNormals[Pm].clone());this.morphNormals.push(Wm)}var Ym=Mm.skinWeights;for(Rm=0,Cm=Ym.length;Rm<Cm;Rm++)this.skinWeights.push(Ym[Rm].clone());var Zm=Mm.skinIndices;for(Rm=0,Cm=Zm.length;Rm<Cm;Rm++)this.skinIndices.push(Zm[Rm].clone());var Jm=Mm.lineDistances;for(Rm=0,Cm=Jm.length;Rm<Cm;Rm++)this.lineDistances.push(Jm[Rm]);var Qm=Mm.boundingBox;null!==Qm&&(this.boundingBox=Qm.clone());var Km=Mm.boundingSphere;return null!==Km&&(this.boundingSphere=Km.clone()),this.elementsNeedUpdate=Mm.elementsNeedUpdate,this.verticesNeedUpdate=Mm.verticesNeedUpdate,this.uvsNeedUpdate=Mm.uvsNeedUpdate,this.normalsNeedUpdate=Mm.normalsNeedUpdate,this.colorsNeedUpdate=Mm.colorsNeedUpdate,this.lineDistancesNeedUpdate=Mm.lineDistancesNeedUpdate,this.groupsNeedUpdate=Mm.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(it.prototype,"needsUpdate",{set:function(Mm){!0===Mm&&this.version++}}),Object.assign(it.prototype,{isBufferAttribute:!0,setArray:function(Mm){if(Array.isArray(Mm))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=Mm===void 0?0:Mm.length/this.itemSize,this.array=Mm},setDynamic:function(Mm){return this.dynamic=Mm,this},copy:function(Mm){return this.array=new Mm.array.constructor(Mm.array),this.itemSize=Mm.itemSize,this.count=Mm.count,this.normalized=Mm.normalized,this.dynamic=Mm.dynamic,this},copyAt:function(Mm,Rm,Cm){Mm*=this.itemSize,Cm*=Rm.itemSize;for(var Pm=0,Lm=this.itemSize;Pm<Lm;Pm++)this.array[Mm+Pm]=Rm.array[Cm+Pm];return this},copyArray:function(Mm){return this.array.set(Mm),this},copyColorsArray:function(Mm){for(var Rm=this.array,Cm=0,Pm=0,Lm=Mm.length,Im;Pm<Lm;Pm++)Im=Mm[Pm],void 0===Im&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",Pm),Im=new Fe),Rm[Cm++]=Im.r,Rm[Cm++]=Im.g,Rm[Cm++]=Im.b;return this},copyIndicesArray:function(Mm){for(var Rm=this.array,Cm=0,Pm=0,Lm=Mm.length,Im;Pm<Lm;Pm++)Im=Mm[Pm],Rm[Cm++]=Im.a,Rm[Cm++]=Im.b,Rm[Cm++]=Im.c;return this},copyVector2sArray:function(Mm){for(var Rm=this.array,Cm=0,Pm=0,Lm=Mm.length,Im;Pm<Lm;Pm++)Im=Mm[Pm],void 0===Im&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",Pm),Im=new D),Rm[Cm++]=Im.x,Rm[Cm++]=Im.y;return this},copyVector3sArray:function(Mm){for(var Rm=this.array,Cm=0,Pm=0,Lm=Mm.length,Im;Pm<Lm;Pm++)Im=Mm[Pm],void 0===Im&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",Pm),Im=new O),Rm[Cm++]=Im.x,Rm[Cm++]=Im.y,Rm[Cm++]=Im.z;return this},copyVector4sArray:function(Mm){for(var Rm=this.array,Cm=0,Pm=0,Lm=Mm.length,Im;Pm<Lm;Pm++)Im=Mm[Pm],void 0===Im&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",Pm),Im=new W),Rm[Cm++]=Im.x,Rm[Cm++]=Im.y,Rm[Cm++]=Im.z,Rm[Cm++]=Im.w;return this},set:function(Mm,Rm){return void 0===Rm&&(Rm=0),this.array.set(Mm,Rm),this},getX:function(Mm){return this.array[Mm*this.itemSize]},setX:function(Mm,Rm){return this.array[Mm*this.itemSize]=Rm,this},getY:function(Mm){return this.array[Mm*this.itemSize+1]},setY:function(Mm,Rm){return this.array[Mm*this.itemSize+1]=Rm,this},getZ:function(Mm){return this.array[Mm*this.itemSize+2]},setZ:function(Mm,Rm){return this.array[Mm*this.itemSize+2]=Rm,this},getW:function(Mm){return this.array[Mm*this.itemSize+3]},setW:function(Mm,Rm){return this.array[Mm*this.itemSize+3]=Rm,this},setXY:function(Mm,Rm,Cm){return Mm*=this.itemSize,this.array[Mm+0]=Rm,this.array[Mm+1]=Cm,this},setXYZ:function(Mm,Rm,Cm,Pm){return Mm*=this.itemSize,this.array[Mm+0]=Rm,this.array[Mm+1]=Cm,this.array[Mm+2]=Pm,this},setXYZW:function(Mm,Rm,Cm,Pm,Lm){return Mm*=this.itemSize,this.array[Mm+0]=Rm,this.array[Mm+1]=Cm,this.array[Mm+2]=Pm,this.array[Mm+3]=Lm,this},onUpload:function(Mm){return this.onUploadCallback=Mm,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),nt.prototype=Object.create(it.prototype),nt.prototype.constructor=nt,ct.prototype=Object.create(it.prototype),ct.prototype.constructor=ct,ut.prototype=Object.create(it.prototype),ut.prototype.constructor=ut,mt.prototype=Object.create(it.prototype),mt.prototype.constructor=mt,ft.prototype=Object.create(it.prototype),ft.prototype.constructor=ft,ht.prototype=Object.create(it.prototype),ht.prototype.constructor=ht,yt.prototype=Object.create(it.prototype),yt.prototype.constructor=yt,_t.prototype=Object.create(it.prototype),_t.prototype.constructor=_t,xt.prototype=Object.create(it.prototype),xt.prototype.constructor=xt,Object.assign(vt.prototype,{computeGroups:function(Mm){for(var Cm=[],Pm=void 0,Lm=Mm.faces,Im=0,Rm,Bm;Im<Lm.length;Im++)Bm=Lm[Im],Bm.materialIndex!==Pm&&(Pm=Bm.materialIndex,void 0!=Rm&&(Rm.count=3*Im-Rm.start,Cm.push(Rm)),Rm={start:3*Im,materialIndex:Pm});Rm!==void 0&&(Rm.count=3*Im-Rm.start,Cm.push(Rm)),this.groups=Cm},fromGeometry:function(Mm){var Rm=Mm.faces,Cm=Mm.vertices,Pm=Mm.faceVertexUvs,Lm=Pm[0]&&0<Pm[0].length,Im=Pm[1]&&0<Pm[1].length,Bm=Mm.morphTargets,Nm=Bm.length,zm;if(0<Nm){zm=[];for(var Dm=0;Dm<Nm;Dm++)zm[Dm]=[];this.morphTargets.position=zm}var Fm=Mm.morphNormals,Um=Fm.length,Om;if(0<Um){Om=[];for(var Dm=0;Dm<Um;Dm++)Om[Dm]=[];this.morphTargets.normal=Om}for(var km=Mm.skinIndices,Vm=Mm.skinWeights,Gm=km.length===Cm.length,Hm=Vm.length===Cm.length,Dm=0,Wm;Dm<Rm.length;Dm++){Wm=Rm[Dm],this.vertices.push(Cm[Wm.a],Cm[Wm.b],Cm[Wm.c]);var jm=Wm.vertexNormals;if(3===jm.length)this.normals.push(jm[0],jm[1],jm[2]);else{var Xm=Wm.normal;this.normals.push(Xm,Xm,Xm)}var Ym=Wm.vertexColors;if(3===Ym.length)this.colors.push(Ym[0],Ym[1],Ym[2]);else{var Zm=Wm.color;this.colors.push(Zm,Zm,Zm)}if(!0===Lm){var Jm=Pm[0][Dm];void 0===Jm?(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",Dm),this.uvs.push(new D,new D,new D)):this.uvs.push(Jm[0],Jm[1],Jm[2])}if(!0===Im){var Jm=Pm[1][Dm];void 0===Jm?(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",Dm),this.uvs2.push(new D,new D,new D)):this.uvs2.push(Jm[0],Jm[1],Jm[2])}for(var Qm=0,Km;Qm<Nm;Qm++)Km=Bm[Qm].vertices,zm[Qm].push(Km[Wm.a],Km[Wm.b],Km[Wm.c]);for(var Qm=0,$m;Qm<Um;Qm++)$m=Fm[Qm].vertexNormals[Dm],Om[Qm].push($m.a,$m.b,$m.c);Gm&&this.skinIndices.push(km[Wm.a],km[Wm.b],km[Wm.c]),Hm&&this.skinWeights.push(Vm[Wm.a],Vm[Wm.b],Vm[Wm.c])}return this.computeGroups(Mm),this.verticesNeedUpdate=Mm.verticesNeedUpdate,this.normalsNeedUpdate=Mm.normalsNeedUpdate,this.colorsNeedUpdate=Mm.colorsNeedUpdate,this.uvsNeedUpdate=Mm.uvsNeedUpdate,this.groupsNeedUpdate=Mm.groupsNeedUpdate,this}});var Yu=1;Tt.prototype=Object.assign(Object.create(L.prototype),{constructor:Tt,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(Mm){this.index=Array.isArray(Mm)?new(65535<bt(Mm)?yt:ft)(Mm,1):Mm},addAttribute:function(Mm,Rm){return Rm&&Rm.isBufferAttribute||Rm&&Rm.isInterleavedBufferAttribute?"index"===Mm?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),void this.setIndex(Rm)):(this.attributes[Mm]=Rm,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.addAttribute(Mm,new it(arguments[1],arguments[2])))},getAttribute:function(Mm){return this.attributes[Mm]},removeAttribute:function(Mm){return delete this.attributes[Mm],this},addGroup:function(Mm,Rm,Cm){this.groups.push({start:Mm,count:Rm,materialIndex:Cm===void 0?0:Cm})},clearGroups:function(){this.groups=[]},setDrawRange:function(Mm,Rm){this.drawRange.start=Mm,this.drawRange.count=Rm},applyMatrix:function(Mm){var Rm=this.attributes.position;void 0!==Rm&&(Mm.applyToBufferAttribute(Rm),Rm.needsUpdate=!0);var Cm=this.attributes.normal;if(void 0!==Cm){var Pm=new G().getNormalMatrix(Mm);Pm.applyToBufferAttribute(Cm),Cm.needsUpdate=!0}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var Mm=new F;return function(Cm){return Mm.makeRotationX(Cm),this.applyMatrix(Mm),this}}(),rotateY:function(){var Mm=new F;return function(Cm){return Mm.makeRotationY(Cm),this.applyMatrix(Mm),this}}(),rotateZ:function(){var Mm=new F;return function(Cm){return Mm.makeRotationZ(Cm),this.applyMatrix(Mm),this}}(),translate:function(){var Mm=new F;return function(Cm,Pm,Lm){return Mm.makeTranslation(Cm,Pm,Lm),this.applyMatrix(Mm),this}}(),scale:function(){var Mm=new F;return function(Cm,Pm,Lm){return Mm.makeScale(Cm,Pm,Lm),this.applyMatrix(Mm),this}}(),lookAt:function(){var Mm=new $e;return function(Cm){Mm.lookAt(Cm),Mm.updateMatrix(),this.applyMatrix(Mm.matrix)}}(),center:function(){this.computeBoundingBox();var Mm=this.boundingBox.getCenter().negate();return this.translate(Mm.x,Mm.y,Mm.z),Mm},setFromObject:function(Mm){var Rm=Mm.geometry;if(Mm.isPoints||Mm.isLine){var Cm=new _t(3*Rm.vertices.length,3),Pm=new _t(3*Rm.colors.length,3);if(this.addAttribute("position",Cm.copyVector3sArray(Rm.vertices)),this.addAttribute("color",Pm.copyColorsArray(Rm.colors)),Rm.lineDistances&&Rm.lineDistances.length===Rm.vertices.length){var Lm=new _t(Rm.lineDistances.length,1);this.addAttribute("lineDistance",Lm.copyArray(Rm.lineDistances))}null!==Rm.boundingSphere&&(this.boundingSphere=Rm.boundingSphere.clone()),null!==Rm.boundingBox&&(this.boundingBox=Rm.boundingBox.clone())}else Mm.isMesh&&Rm&&Rm.isGeometry&&this.fromGeometry(Rm);return this},setFromPoints:function(Mm){for(var Rm=[],Cm=0,Pm=Mm.length,Lm;Cm<Pm;Cm++)Lm=Mm[Cm],Rm.push(Lm.x,Lm.y,Lm.z||0);return this.addAttribute("position",new _t(Rm,3)),this},updateFromObject:function(Mm){var Rm=Mm.geometry;if(Mm.isMesh){var Cm=Rm.__directGeometry;if(!0===Rm.elementsNeedUpdate&&(Cm=void 0,Rm.elementsNeedUpdate=!1),void 0===Cm)return this.fromGeometry(Rm);Cm.verticesNeedUpdate=Rm.verticesNeedUpdate,Cm.normalsNeedUpdate=Rm.normalsNeedUpdate,Cm.colorsNeedUpdate=Rm.colorsNeedUpdate,Cm.uvsNeedUpdate=Rm.uvsNeedUpdate,Cm.groupsNeedUpdate=Rm.groupsNeedUpdate,Rm.verticesNeedUpdate=!1,Rm.normalsNeedUpdate=!1,Rm.colorsNeedUpdate=!1,Rm.uvsNeedUpdate=!1,Rm.groupsNeedUpdate=!1,Rm=Cm}var Pm;return!0===Rm.verticesNeedUpdate&&(Pm=this.attributes.position,void 0!==Pm&&(Pm.copyVector3sArray(Rm.vertices),Pm.needsUpdate=!0),Rm.verticesNeedUpdate=!1),!0===Rm.normalsNeedUpdate&&(Pm=this.attributes.normal,void 0!==Pm&&(Pm.copyVector3sArray(Rm.normals),Pm.needsUpdate=!0),Rm.normalsNeedUpdate=!1),!0===Rm.colorsNeedUpdate&&(Pm=this.attributes.color,void 0!==Pm&&(Pm.copyColorsArray(Rm.colors),Pm.needsUpdate=!0),Rm.colorsNeedUpdate=!1),Rm.uvsNeedUpdate&&(Pm=this.attributes.uv,void 0!==Pm&&(Pm.copyVector2sArray(Rm.uvs),Pm.needsUpdate=!0),Rm.uvsNeedUpdate=!1),Rm.lineDistancesNeedUpdate&&(Pm=this.attributes.lineDistance,void 0!==Pm&&(Pm.copyArray(Rm.lineDistances),Pm.needsUpdate=!0),Rm.lineDistancesNeedUpdate=!1),Rm.groupsNeedUpdate&&(Rm.computeGroups(Mm.geometry),this.groups=Rm.groups,Rm.groupsNeedUpdate=!1),this},fromGeometry:function(Mm){return Mm.__directGeometry=new vt().fromGeometry(Mm),this.fromDirectGeometry(Mm.__directGeometry)},fromDirectGeometry:function(Mm){var Rm=new Float32Array(3*Mm.vertices.length);if(this.addAttribute("position",new it(Rm,3).copyVector3sArray(Mm.vertices)),0<Mm.normals.length){var Cm=new Float32Array(3*Mm.normals.length);this.addAttribute("normal",new it(Cm,3).copyVector3sArray(Mm.normals))}if(0<Mm.colors.length){var Pm=new Float32Array(3*Mm.colors.length);this.addAttribute("color",new it(Pm,3).copyColorsArray(Mm.colors))}if(0<Mm.uvs.length){var Lm=new Float32Array(2*Mm.uvs.length);this.addAttribute("uv",new it(Lm,2).copyVector2sArray(Mm.uvs))}if(0<Mm.uvs2.length){var Im=new Float32Array(2*Mm.uvs2.length);this.addAttribute("uv2",new it(Im,2).copyVector2sArray(Mm.uvs2))}if(0<Mm.indices.length){var Bm=65535<bt(Mm.indices)?Uint32Array:Uint16Array,Nm=new Bm(3*Mm.indices.length);this.setIndex(new it(Nm,1).copyIndicesArray(Mm.indices))}for(var zm in this.groups=Mm.groups,Mm.morphTargets){for(var Dm=[],Fm=Mm.morphTargets[zm],Um=0,Om=Fm.length;Um<Om;Um++){var km=Fm[Um],Vm=new _t(3*km.length,3);Dm.push(Vm.copyVector3sArray(km))}this.morphAttributes[zm]=Dm}if(0<Mm.skinIndices.length){var Gm=new _t(4*Mm.skinIndices.length,4);this.addAttribute("skinIndex",Gm.copyVector4sArray(Mm.skinIndices))}if(0<Mm.skinWeights.length){var Hm=new _t(4*Mm.skinWeights.length,4);this.addAttribute("skinWeight",Hm.copyVector4sArray(Mm.skinWeights))}return null!==Mm.boundingSphere&&(this.boundingSphere=Mm.boundingSphere.clone()),null!==Mm.boundingBox&&(this.boundingBox=Mm.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new je);var Mm=this.attributes.position;Mm===void 0?this.boundingBox.makeEmpty():this.boundingBox.setFromBufferAttribute(Mm),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error("THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.",this)},computeBoundingSphere:function(){var Mm=new je,Rm=new O;return function(){null===this.boundingSphere&&(this.boundingSphere=new qe);var Pm=this.attributes.position;if(Pm){var Lm=this.boundingSphere.center;Mm.setFromBufferAttribute(Pm),Mm.getCenter(Lm);for(var Im=0,Bm=0,Nm=Pm.count;Bm<Nm;Bm++)Rm.x=Pm.getX(Bm),Rm.y=Pm.getY(Bm),Rm.z=Pm.getZ(Bm),Im=_Mathmax(Im,Lm.distanceToSquared(Rm));this.boundingSphere.radius=_Mathsqrt(Im),isNaN(this.boundingSphere.radius)&&console.error("THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.",this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var Mm=this.index,Rm=this.attributes,Cm=this.groups;if(Rm.position){var Pm=Rm.position.array;if(Rm.normal===void 0)this.addAttribute("normal",new it(new Float32Array(Pm.length),3));else for(var Lm=Rm.normal.array,Im=0,Bm=Lm.length;Im<Bm;Im++)Lm[Im]=0;var Nm=Rm.normal.array,zm,Dm,Fm,Um=new O,Om=new O,km=new O,Vm=new O,Gm=new O;if(Mm){var Hm=Mm.array;0===Cm.length&&this.addGroup(0,Hm.length);for(var Wm=0,jm=Cm.length;Wm<jm;++Wm)for(var Xm=Cm[Wm],Ym=Xm.start,Zm=Xm.count,Im=Ym,Bm=Ym+Zm;Im<Bm;Im+=3)zm=3*Hm[Im+0],Dm=3*Hm[Im+1],Fm=3*Hm[Im+2],Um.fromArray(Pm,zm),Om.fromArray(Pm,Dm),km.fromArray(Pm,Fm),Vm.subVectors(km,Om),Gm.subVectors(Um,Om),Vm.cross(Gm),Nm[zm]+=Vm.x,Nm[zm+1]+=Vm.y,Nm[zm+2]+=Vm.z,Nm[Dm]+=Vm.x,Nm[Dm+1]+=Vm.y,Nm[Dm+2]+=Vm.z,Nm[Fm]+=Vm.x,Nm[Fm+1]+=Vm.y,Nm[Fm+2]+=Vm.z}else for(var Im=0,Bm=Pm.length;Im<Bm;Im+=9)Um.fromArray(Pm,Im),Om.fromArray(Pm,Im+3),km.fromArray(Pm,Im+6),Vm.subVectors(km,Om),Gm.subVectors(Um,Om),Vm.cross(Gm),Nm[Im]=Vm.x,Nm[Im+1]=Vm.y,Nm[Im+2]=Vm.z,Nm[Im+3]=Vm.x,Nm[Im+4]=Vm.y,Nm[Im+5]=Vm.z,Nm[Im+6]=Vm.x,Nm[Im+7]=Vm.y,Nm[Im+8]=Vm.z;this.normalizeNormals(),Rm.normal.needsUpdate=!0}},merge:function(Mm,Rm){if(!(Mm&&Mm.isBufferGeometry))return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",Mm);Rm===void 0&&(Rm=0);var Cm=this.attributes;for(var Pm in Cm)if(Mm.attributes[Pm]!==void 0)for(var Lm=Cm[Pm],Im=Lm.array,Bm=Mm.attributes[Pm],Nm=Bm.array,zm=Bm.itemSize,Dm=0,Fm=zm*Rm;Dm<Nm.length;Dm++,Fm++)Im[Fm]=Nm[Dm];return this},normalizeNormals:function(){var Mm=new O;return function(){for(var Cm=this.attributes.normal,Pm=0,Lm=Cm.count;Pm<Lm;Pm++)Mm.x=Cm.getX(Pm),Mm.y=Cm.getY(Pm),Mm.z=Cm.getZ(Pm),Mm.normalize(),Cm.setXYZ(Pm,Mm.x,Mm.y,Mm.z)}}(),toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var Mm=new Tt,Rm=this.index.array,Cm=this.attributes;for(var Pm in Cm){for(var Lm=Cm[Pm],Im=Lm.array,Bm=Lm.itemSize,Nm=new Im.constructor(Rm.length*Bm),zm=0,Dm=0,Fm=0,Um=Rm.length;Fm<Um;Fm++){zm=Rm[Fm]*Bm;for(var Om=0;Om<Bm;Om++)Nm[Dm++]=Im[zm++]}Mm.addAttribute(Pm,new it(Nm,Bm))}return Mm},toJSON:function(){var Mm={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(Mm.uuid=this.uuid,Mm.type=this.type,""!==this.name&&(Mm.name=this.name),void 0!==this.parameters){var Rm=this.parameters;for(var Cm in Rm)void 0!==Rm[Cm]&&(Mm[Cm]=Rm[Cm]);return Mm}Mm.data={attributes:{}};var Pm=this.index;if(null!==Pm){var Lm=Array.prototype.slice.call(Pm.array);Mm.data.index={type:Pm.array.constructor.name,array:Lm}}var Im=this.attributes;for(var Cm in Im){var Bm=Im[Cm],Lm=Array.prototype.slice.call(Bm.array);Mm.data.attributes[Cm]={itemSize:Bm.itemSize,type:Bm.array.constructor.name,array:Lm,normalized:Bm.normalized}}var Nm=this.groups;0<Nm.length&&(Mm.data.groups=JSON.parse(JSON.stringify(Nm)));var zm=this.boundingSphere;return null!==zm&&(Mm.data.boundingSphere={center:zm.center.toArray(),radius:zm.radius}),Mm},clone:function(){return new Tt().copy(this)},copy:function(Mm){var Rm,Cm,Pm;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=Mm.name;var Lm=Mm.index;null!==Lm&&this.setIndex(Lm.clone());var Im=Mm.attributes;for(Rm in Im){var Bm=Im[Rm];this.addAttribute(Rm,Bm.clone())}var Nm=Mm.morphAttributes;for(Rm in Nm){var zm=[],Dm=Nm[Rm];for(Cm=0,Pm=Dm.length;Cm<Pm;Cm++)zm.push(Dm[Cm].clone());this.morphAttributes[Rm]=zm}var Fm=Mm.groups;for(Cm=0,Pm=Fm.length;Cm<Pm;Cm++){var Um=Fm[Cm];this.addGroup(Um.start,Um.count,Um.materialIndex)}var Om=Mm.boundingBox;null!==Om&&(this.boundingBox=Om.clone());var km=Mm.boundingSphere;return null!==km&&(this.boundingSphere=km.clone()),this.drawRange.start=Mm.drawRange.start,this.drawRange.count=Mm.drawRange.count,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Et.prototype=Object.create(ot.prototype),Et.prototype.constructor=Et,St.prototype=Object.create(Tt.prototype),St.prototype.constructor=St,At.prototype=Object.create(ot.prototype),At.prototype.constructor=At,wt.prototype=Object.create(Tt.prototype),wt.prototype.constructor=wt,Rt.prototype=Object.create(Ge.prototype),Rt.prototype.constructor=Rt,Rt.prototype.isMeshBasicMaterial=!0,Rt.prototype.copy=function(Mm){return Ge.prototype.copy.call(this,Mm),this.color.copy(Mm.color),this.map=Mm.map,this.lightMap=Mm.lightMap,this.lightMapIntensity=Mm.lightMapIntensity,this.aoMap=Mm.aoMap,this.aoMapIntensity=Mm.aoMapIntensity,this.specularMap=Mm.specularMap,this.alphaMap=Mm.alphaMap,this.envMap=Mm.envMap,this.combine=Mm.combine,this.reflectivity=Mm.reflectivity,this.refractionRatio=Mm.refractionRatio,this.wireframe=Mm.wireframe,this.wireframeLinewidth=Mm.wireframeLinewidth,this.wireframeLinecap=Mm.wireframeLinecap,this.wireframeLinejoin=Mm.wireframeLinejoin,this.skinning=Mm.skinning,this.morphTargets=Mm.morphTargets,this},Ct.prototype=Object.create(Ge.prototype),Ct.prototype.constructor=Ct,Ct.prototype.isShaderMaterial=!0,Ct.prototype.copy=function(Mm){return Ge.prototype.copy.call(this,Mm),this.fragmentShader=Mm.fragmentShader,this.vertexShader=Mm.vertexShader,this.uniforms=Pp.clone(Mm.uniforms),this.defines=Mm.defines,this.wireframe=Mm.wireframe,this.wireframeLinewidth=Mm.wireframeLinewidth,this.lights=Mm.lights,this.clipping=Mm.clipping,this.skinning=Mm.skinning,this.morphTargets=Mm.morphTargets,this.morphNormals=Mm.morphNormals,this.extensions=Mm.extensions,this},Ct.prototype.toJSON=function(Mm){var Rm=Ge.prototype.toJSON.call(this,Mm);return Rm.uniforms=this.uniforms,Rm.vertexShader=this.vertexShader,Rm.fragmentShader=this.fragmentShader,Rm},Object.assign(Pt.prototype,{set:function(Mm,Rm){return this.origin.copy(Mm),this.direction.copy(Rm),this},clone:function(){return new this.constructor().copy(this)},copy:function(Mm){return this.origin.copy(Mm.origin),this.direction.copy(Mm.direction),this},at:function(Mm,Rm){var Cm=Rm||new O;return Cm.copy(this.direction).multiplyScalar(Mm).add(this.origin)},lookAt:function(Mm){return this.direction.copy(Mm).sub(this.origin).normalize(),this},recast:function(){var Mm=new O;return function(Cm){return this.origin.copy(this.at(Cm,Mm)),this}}(),closestPointToPoint:function(Mm,Rm){var Cm=Rm||new O;Cm.subVectors(Mm,this.origin);var Pm=Cm.dot(this.direction);return 0>Pm?Cm.copy(this.origin):Cm.copy(this.direction).multiplyScalar(Pm).add(this.origin)},distanceToPoint:function(Mm){return _Mathsqrt(this.distanceSqToPoint(Mm))},distanceSqToPoint:function(){var Mm=new O;return function(Cm){var Pm=Mm.subVectors(Cm,this.origin).dot(this.direction);return 0>Pm?this.origin.distanceToSquared(Cm):(Mm.copy(this.direction).multiplyScalar(Pm).add(this.origin),Mm.distanceToSquared(Cm))}}(),distanceSqToSegment:function(){var Mm=new O,Rm=new O,Cm=new O;return function(Lm,Im,Bm,Nm){Mm.copy(Lm).add(Im).multiplyScalar(0.5),Rm.copy(Im).sub(Lm).normalize(),Cm.copy(this.origin).sub(Mm);var zm=0.5*Lm.distanceTo(Im),Dm=-this.direction.dot(Rm),Fm=Cm.dot(this.direction),Um=-Cm.dot(Rm),Om=Cm.lengthSq(),km=_Mathabs(1-Dm*Dm),Vm,Gm,Hm,Wm;if(!(0<km))Gm=0<Dm?-zm:zm,Vm=_Mathmax(0,-(Dm*Gm+Fm)),Hm=-Vm*Vm+Gm*(Gm+2*Um)+Om;else if(Vm=Dm*Um-Fm,Gm=Dm*Fm-Um,Wm=zm*km,!(0<=Vm))Gm<=-Wm?(Vm=_Mathmax(0,-(-Dm*zm+Fm)),Gm=0<Vm?-zm:_Mathmin(_Mathmax(-zm,-Um),zm),Hm=-Vm*Vm+Gm*(Gm+2*Um)+Om):Gm<=Wm?(Vm=0,Gm=_Mathmin(_Mathmax(-zm,-Um),zm),Hm=Gm*(Gm+2*Um)+Om):(Vm=_Mathmax(0,-(Dm*zm+Fm)),Gm=0<Vm?zm:_Mathmin(_Mathmax(-zm,-Um),zm),Hm=-Vm*Vm+Gm*(Gm+2*Um)+Om);else if(!(Gm>=-Wm))Gm=-zm,Vm=_Mathmax(0,-(Dm*Gm+Fm)),Hm=-Vm*Vm+Gm*(Gm+2*Um)+Om;else if(Gm<=Wm){var jm=1/km;Vm*=jm,Gm*=jm,Hm=Vm*(Vm+Dm*Gm+2*Fm)+Gm*(Dm*Vm+Gm+2*Um)+Om}else Gm=zm,Vm=_Mathmax(0,-(Dm*Gm+Fm)),Hm=-Vm*Vm+Gm*(Gm+2*Um)+Om;return Bm&&Bm.copy(this.direction).multiplyScalar(Vm).add(this.origin),Nm&&Nm.copy(Rm).multiplyScalar(Gm).add(Mm),Hm}}(),intersectSphere:function(){var Mm=new O;return function(Cm,Pm){Mm.subVectors(Cm.center,this.origin);var Lm=Mm.dot(this.direction),Im=Mm.dot(Mm)-Lm*Lm,Bm=Cm.radius*Cm.radius;if(Im>Bm)return null;var Nm=_Mathsqrt(Bm-Im),zm=Lm-Nm,Dm=Lm+Nm;return 0>zm&&0>Dm?null:0>zm?this.at(Dm,Pm):this.at(zm,Pm)}}(),intersectsSphere:function(Mm){return this.distanceToPoint(Mm.center)<=Mm.radius},distanceToPlane:function(Mm){var Rm=Mm.normal.dot(this.direction);if(0===Rm)return 0===Mm.distanceToPoint(this.origin)?0:null;var Cm=-(this.origin.dot(Mm.normal)+Mm.constant)/Rm;return 0<=Cm?Cm:null},intersectPlane:function(Mm,Rm){var Cm=this.distanceToPlane(Mm);return null===Cm?null:this.at(Cm,Rm)},intersectsPlane:function(Mm){var Rm=Mm.distanceToPoint(this.origin);if(0===Rm)return!0;var Cm=Mm.normal.dot(this.direction);return!!(0>Cm*Rm)},intersectBox:function(Mm,Rm){var zm=1/this.direction.x,Dm=1/this.direction.y,Fm=1/this.direction.z,Um=this.origin,Cm,Pm,Lm,Im,Bm,Nm;return(0<=zm?(Cm=(Mm.min.x-Um.x)*zm,Pm=(Mm.max.x-Um.x)*zm):(Cm=(Mm.max.x-Um.x)*zm,Pm=(Mm.min.x-Um.x)*zm),0<=Dm?(Lm=(Mm.min.y-Um.y)*Dm,Im=(Mm.max.y-Um.y)*Dm):(Lm=(Mm.max.y-Um.y)*Dm,Im=(Mm.min.y-Um.y)*Dm),Cm>Im||Lm>Pm)?null:((Lm>Cm||Cm!==Cm)&&(Cm=Lm),(Im<Pm||Pm!==Pm)&&(Pm=Im),0<=Fm?(Bm=(Mm.min.z-Um.z)*Fm,Nm=(Mm.max.z-Um.z)*Fm):(Bm=(Mm.max.z-Um.z)*Fm,Nm=(Mm.min.z-Um.z)*Fm),Cm>Nm||Bm>Pm)?null:((Bm>Cm||Cm!==Cm)&&(Cm=Bm),(Nm<Pm||Pm!==Pm)&&(Pm=Nm),0>Pm?null:this.at(0<=Cm?Cm:Pm,Rm))},intersectsBox:function(){var Mm=new O;return function(Cm){return null!==this.intersectBox(Cm,Mm)}}(),intersectTriangle:function(){var Mm=new O,Rm=new O,Cm=new O,Pm=new O;return function(Im,Bm,Nm,zm,Dm){Rm.subVectors(Bm,Im),Cm.subVectors(Nm,Im),Pm.crossVectors(Rm,Cm);var Fm=this.direction.dot(Pm),Um;if(0<Fm){if(zm)return null;Um=1}else if(0>Fm)Um=-1,Fm=-Fm;else return null;Mm.subVectors(this.origin,Im);var Om=Um*this.direction.dot(Cm.crossVectors(Mm,Cm));if(0>Om)return null;var km=Um*this.direction.dot(Rm.cross(Mm));if(0>km)return null;if(Om+km>Fm)return null;var Vm=-Um*Mm.dot(Pm);return 0>Vm?null:this.at(Vm/Fm,Dm)}}(),applyMatrix4:function(Mm){return this.origin.applyMatrix4(Mm),this.direction.transformDirection(Mm),this},equals:function(Mm){return Mm.origin.equals(this.origin)&&Mm.direction.equals(this.direction)}}),Object.assign(Lt.prototype,{set:function(Mm,Rm){return this.start.copy(Mm),this.end.copy(Rm),this},clone:function(){return new this.constructor().copy(this)},copy:function(Mm){return this.start.copy(Mm.start),this.end.copy(Mm.end),this},getCenter:function(Mm){var Rm=Mm||new O;return Rm.addVectors(this.start,this.end).multiplyScalar(0.5)},delta:function(Mm){var Rm=Mm||new O;return Rm.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(Mm,Rm){var Cm=Rm||new O;return this.delta(Cm).multiplyScalar(Mm).add(this.start)},closestPointToPointParameter:function(){var Mm=new O,Rm=new O;return function(Pm,Lm){Mm.subVectors(Pm,this.start),Rm.subVectors(this.end,this.start);var Im=Rm.dot(Rm),Bm=Rm.dot(Mm),Nm=Bm/Im;return Lm&&(Nm=yp.clamp(Nm,0,1)),Nm}}(),closestPointToPoint:function(Mm,Rm,Cm){var Pm=this.closestPointToPointParameter(Mm,Rm),Lm=Cm||new O;return this.delta(Lm).multiplyScalar(Pm).add(this.start)},applyMatrix4:function(Mm){return this.start.applyMatrix4(Mm),this.end.applyMatrix4(Mm),this},equals:function(Mm){return Mm.start.equals(this.start)&&Mm.end.equals(this.end)}}),Object.assign(It,{normal:function(){var Mm=new O;return function(Cm,Pm,Lm,Im){var Bm=Im||new O;Bm.subVectors(Lm,Pm),Mm.subVectors(Cm,Pm),Bm.cross(Mm);var Nm=Bm.lengthSq();return 0<Nm?Bm.multiplyScalar(1/_Mathsqrt(Nm)):Bm.set(0,0,0)}}(),barycoordFromPoint:function(){var Mm=new O,Rm=new O,Cm=new O;return function(Lm,Im,Bm,Nm,zm){Mm.subVectors(Nm,Im),Rm.subVectors(Bm,Im),Cm.subVectors(Lm,Im);var Dm=Mm.dot(Mm),Fm=Mm.dot(Rm),Um=Mm.dot(Cm),Om=Rm.dot(Rm),km=Rm.dot(Cm),Vm=Dm*Om-Fm*Fm,Gm=zm||new O;if(0==Vm)return Gm.set(-2,-1,-1);var Hm=1/Vm,Wm=(Om*Um-Fm*km)*Hm,jm=(Dm*km-Fm*Um)*Hm;return Gm.set(1-Wm-jm,jm,Wm)}}(),containsPoint:function(){var Mm=new O;return function(Cm,Pm,Lm,Im){var Bm=It.barycoordFromPoint(Cm,Pm,Lm,Im,Mm);return 0<=Bm.x&&0<=Bm.y&&1>=Bm.x+Bm.y}}()}),Object.assign(It.prototype,{set:function(Mm,Rm,Cm){return this.a.copy(Mm),this.b.copy(Rm),this.c.copy(Cm),this},setFromPointsAndIndices:function(Mm,Rm,Cm,Pm){return this.a.copy(Mm[Rm]),this.b.copy(Mm[Cm]),this.c.copy(Mm[Pm]),this},clone:function(){return new this.constructor().copy(this)},copy:function(Mm){return this.a.copy(Mm.a),this.b.copy(Mm.b),this.c.copy(Mm.c),this},area:function(){var Mm=new O,Rm=new O;return function(){return Mm.subVectors(this.c,this.b),Rm.subVectors(this.a,this.b),0.5*Mm.cross(Rm).length()}}(),midpoint:function(Mm){var Rm=Mm||new O;return Rm.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(Mm){return It.normal(this.a,this.b,this.c,Mm)},plane:function(Mm){var Rm=Mm||new Xe;return Rm.setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(Mm,Rm){return It.barycoordFromPoint(Mm,this.a,this.b,this.c,Rm)},containsPoint:function(Mm){return It.containsPoint(Mm,this.a,this.b,this.c)},closestPointToPoint:function(){var Mm=new Xe,Rm=[new Lt,new Lt,new Lt],Cm=new O,Pm=new O;return function(Im,Bm){var Nm=Bm||new O,zm=Infinity;if(Mm.setFromCoplanarPoints(this.a,this.b,this.c),Mm.projectPoint(Im,Cm),!0===this.containsPoint(Cm))Nm.copy(Cm);else{Rm[0].set(this.a,this.b),Rm[1].set(this.b,this.c),Rm[2].set(this.c,this.a);for(var Dm=0;Dm<Rm.length;Dm++){Rm[Dm].closestPointToPoint(Cm,!0,Pm);var Fm=Cm.distanceToSquared(Pm);Fm<zm&&(zm=Fm,Nm.copy(Pm))}}return Nm}}(),equals:function(Mm){return Mm.a.equals(this.a)&&Mm.b.equals(this.b)&&Mm.c.equals(this.c)}}),Bt.prototype=Object.assign(Object.create($e.prototype),{constructor:Bt,isMesh:!0,setDrawMode:function(Mm){this.drawMode=Mm},copy:function(Mm){return $e.prototype.copy.call(this,Mm),this.drawMode=Mm.drawMode,void 0!==Mm.morphTargetInfluences&&(this.morphTargetInfluences=Mm.morphTargetInfluences.slice()),void 0!==Mm.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},Mm.morphTargetDictionary)),this},updateMorphTargets:function(){var Mm=this.geometry,Rm,Cm,Pm;if(Mm.isBufferGeometry){var Lm=Mm.morphAttributes,Im=Object.keys(Lm);if(0<Im.length){var Bm=Lm[Im[0]];if(Bm!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},(Rm=0,Cm=Bm.length);Rm<Cm;Rm++)Pm=Bm[Rm].name||Rm+"",this.morphTargetInfluences.push(0),this.morphTargetDictionary[Pm]=Rm}}else{var Nm=Mm.morphTargets;if(Nm!==void 0&&0<Nm.length)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},(Rm=0,Cm=Nm.length);Rm<Cm;Rm++)Pm=Nm[Rm].name||Rm+"",this.morphTargetInfluences.push(0),this.morphTargetDictionary[Pm]=Rm}},raycast:function(){function Mm(jm,Xm,Ym,Zm,Jm,Qm,Km){return It.barycoordFromPoint(jm,Xm,Ym,Zm,Gm),Jm.multiplyScalar(Gm.x),Qm.multiplyScalar(Gm.y),Km.multiplyScalar(Gm.z),Jm.add(Qm).add(Km),Jm.clone()}function Rm(jm,Xm,Ym,Zm,Jm,Qm,Km,$m){var eg;if(eg=Xm.side===Hs?Zm.intersectTriangle(Km,Qm,Jm,!0,$m):Zm.intersectTriangle(Jm,Qm,Km,Xm.side!==Ws,$m),null===eg)return null;Wm.copy($m),Wm.applyMatrix4(jm.matrixWorld);var tg=Ym.ray.origin.distanceTo(Wm);return tg<Ym.near||tg>Ym.far?null:{distance:tg,point:Wm.clone(),object:jm}}function Cm(jm,Xm,Ym,Zm,Jm,Qm,Km,$m){Bm.fromBufferAttribute(Zm,Qm),Nm.fromBufferAttribute(Zm,Km),zm.fromBufferAttribute(Zm,$m);var eg=Rm(jm,jm.material,Xm,Ym,Bm,Nm,zm,Hm);return eg&&(Jm&&(Om.fromBufferAttribute(Jm,Qm),km.fromBufferAttribute(Jm,Km),Vm.fromBufferAttribute(Jm,$m),eg.uv=Mm(Hm,Bm,Nm,zm,Om,km,Vm)),eg.face=new rt(Qm,Km,$m,It.normal(Bm,Nm,zm)),eg.faceIndex=Qm),eg}var Pm=new F,Lm=new Pt,Im=new qe,Bm=new O,Nm=new O,zm=new O,Dm=new O,Fm=new O,Um=new O,Om=new D,km=new D,Vm=new D,Gm=new O,Hm=new O,Wm=new O;return function(Xm,Ym){var Zm=this.geometry,Jm=this.material,Qm=this.matrixWorld;if(void 0!==Jm&&(null===Zm.boundingSphere&&Zm.computeBoundingSphere(),Im.copy(Zm.boundingSphere),Im.applyMatrix4(Qm),!1!==Xm.ray.intersectsSphere(Im))&&(Pm.getInverse(Qm),Lm.copy(Xm.ray).applyMatrix4(Pm),null===Zm.boundingBox||!1!==Lm.intersectsBox(Zm.boundingBox))){var Km;if(Zm.isBufferGeometry){var rg=Zm.index,ag=Zm.attributes.position,og=Zm.attributes.uv,$m,eg,tg,ig,ng;if(null!==rg)for(ig=0,ng=rg.count;ig<ng;ig+=3)$m=rg.getX(ig),eg=rg.getX(ig+1),tg=rg.getX(ig+2),Km=Cm(this,Xm,Lm,ag,og,$m,eg,tg),Km&&(Km.faceIndex=_Mathfloor(ig/3),Ym.push(Km));else if(void 0!==ag)for(ig=0,ng=ag.count;ig<ng;ig+=3)$m=ig,eg=ig+1,tg=ig+2,Km=Cm(this,Xm,Lm,ag,og,$m,eg,tg),Km&&(Km.index=$m,Ym.push(Km))}else if(Zm.isGeometry){var pg=Array.isArray(Jm),cg=Zm.vertices,ug=Zm.faces,gg=Zm.faceVertexUvs[0],sg,lg,dg,mg;0<gg.length&&(mg=gg);for(var fg=0,hg=ug.length;fg<hg;fg++){var yg=ug[fg],_g=pg?Jm[yg.materialIndex]:Jm;if(void 0!==_g){if(sg=cg[yg.a],lg=cg[yg.b],dg=cg[yg.c],!0===_g.morphTargets){var xg=Zm.morphTargets,vg=this.morphTargetInfluences;Bm.set(0,0,0),Nm.set(0,0,0),zm.set(0,0,0);for(var bg=0,Tg=xg.length,Eg;bg<Tg;bg++)if(Eg=vg[bg],0!==Eg){var Sg=xg[bg].vertices;Bm.addScaledVector(Dm.subVectors(Sg[yg.a],sg),Eg),Nm.addScaledVector(Fm.subVectors(Sg[yg.b],lg),Eg),zm.addScaledVector(Um.subVectors(Sg[yg.c],dg),Eg)}Bm.add(sg),Nm.add(lg),zm.add(dg),sg=Bm,lg=Nm,dg=zm}if(Km=Rm(this,_g,Xm,Lm,sg,lg,dg,Hm),Km){if(mg&&mg[fg]){var Ag=mg[fg];Om.copy(Ag[0]),km.copy(Ag[1]),Vm.copy(Ag[2]),Km.uv=Mm(Hm,sg,lg,dg,Om,km,Vm)}Km.face=yg,Km.faceIndex=fg,Ym.push(Km)}}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var Zu=0;yr.prototype=Object.assign(Object.create(et.prototype),{constructor:yr,isPerspectiveCamera:!0,copy:function(Mm,Rm){return et.prototype.copy.call(this,Mm,Rm),this.fov=Mm.fov,this.zoom=Mm.zoom,this.near=Mm.near,this.far=Mm.far,this.focus=Mm.focus,this.aspect=Mm.aspect,this.view=null===Mm.view?null:Object.assign({},Mm.view),this.filmGauge=Mm.filmGauge,this.filmOffset=Mm.filmOffset,this},setFocalLength:function(Mm){var Rm=0.5*this.getFilmHeight()/Mm;this.fov=2*yp.RAD2DEG*_Mathatan2(Rm),this.updateProjectionMatrix()},getFocalLength:function(){var Mm=_Mathtan(0.5*yp.DEG2RAD*this.fov);return 0.5*this.getFilmHeight()/Mm},getEffectiveFOV:function(){return 2*yp.RAD2DEG*_Mathatan2(_Mathtan(0.5*yp.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*_Mathmin(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/_Mathmax(this.aspect,1)},setViewOffset:function(Mm,Rm,Cm,Pm,Lm,Im){this.aspect=Mm/Rm,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=Mm,this.view.fullHeight=Rm,this.view.offsetX=Cm,this.view.offsetY=Pm,this.view.width=Lm,this.view.height=Im,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var Mm=this.near,Rm=Mm*_Mathtan(0.5*yp.DEG2RAD*this.fov)/this.zoom,Cm=2*Rm,Pm=this.aspect*Cm,Lm=-0.5*Pm,Im=this.view;if(null!==this.view&&this.view.enabled){var Bm=Im.fullWidth,Nm=Im.fullHeight;Lm+=Im.offsetX*Pm/Bm,Rm-=Im.offsetY*Cm/Nm,Pm*=Im.width/Bm,Cm*=Im.height/Nm}var zm=this.filmOffset;0!==zm&&(Lm+=Mm*zm/this.getFilmWidth()),this.projectionMatrix.makePerspective(Lm,Lm+Pm,Rm,Rm-Cm,Mm,this.far)},toJSON:function(Mm){var Rm=$e.prototype.toJSON.call(this,Mm);return Rm.object.fov=this.fov,Rm.object.zoom=this.zoom,Rm.object.near=this.near,Rm.object.far=this.far,Rm.object.focus=this.focus,Rm.object.aspect=this.aspect,null!==this.view&&(Rm.object.view=Object.assign({},this.view)),Rm.object.filmGauge=this.filmGauge,Rm.object.filmOffset=this.filmOffset,Rm}}),_r.prototype=Object.assign(Object.create(yr.prototype),{constructor:_r,isArrayCamera:!0}),Ar.prototype.isFogExp2=!0,Ar.prototype.clone=function(){return new Ar(this.color.getHex(),this.density)},Ar.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},wr.prototype.isFog=!0,wr.prototype.clone=function(){return new wr(this.color.getHex(),this.near,this.far)},wr.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},Mr.prototype=Object.assign(Object.create($e.prototype),{constructor:Mr,copy:function(Mm,Rm){return $e.prototype.copy.call(this,Mm,Rm),null!==Mm.background&&(this.background=Mm.background.clone()),null!==Mm.fog&&(this.fog=Mm.fog.clone()),null!==Mm.overrideMaterial&&(this.overrideMaterial=Mm.overrideMaterial.clone()),this.autoUpdate=Mm.autoUpdate,this.matrixAutoUpdate=Mm.matrixAutoUpdate,this},toJSON:function(Mm){var Rm=$e.prototype.toJSON.call(this,Mm);return null!==this.background&&(Rm.object.background=this.background.toJSON(Mm)),null!==this.fog&&(Rm.object.fog=this.fog.toJSON()),Rm}}),Rr.prototype=Object.assign(Object.create($e.prototype),{constructor:Rr,isLensFlare:!0,copy:function(Mm){$e.prototype.copy.call(this,Mm),this.positionScreen.copy(Mm.positionScreen),this.customUpdateCallback=Mm.customUpdateCallback;for(var Rm=0,Cm=Mm.lensFlares.length;Rm<Cm;Rm++)this.lensFlares.push(Mm.lensFlares[Rm]);return this},add:function(Mm,Rm,Cm,Pm,Lm,Im){Rm===void 0&&(Rm=-1),Cm===void 0&&(Cm=0),Im===void 0&&(Im=1),Lm===void 0&&(Lm=new Fe(16777215)),Pm===void 0&&(Pm=Qs),Cm=_Mathmin(Cm,_Mathmax(0,Cm)),this.lensFlares.push({texture:Mm,size:Rm,distance:Cm,x:0,y:0,z:0,scale:1,rotation:0,opacity:Im,color:Lm,blending:Pm})},updateLensFlares:function(){var Rm=this.lensFlares.length,Mm,Cm,Pm=2*-this.positionScreen.x,Lm=2*-this.positionScreen.y;for(Mm=0;Mm<Rm;Mm++)Cm=this.lensFlares[Mm],Cm.x=this.positionScreen.x+Pm*Cm.distance,Cm.y=this.positionScreen.y+Lm*Cm.distance,Cm.wantedRotation=0.25*(Cm.x*_MathPI),Cm.rotation+=0.25*(Cm.wantedRotation-Cm.rotation)}}),Cr.prototype=Object.create(Ge.prototype),Cr.prototype.constructor=Cr,Cr.prototype.isSpriteMaterial=!0,Cr.prototype.copy=function(Mm){return Ge.prototype.copy.call(this,Mm),this.color.copy(Mm.color),this.map=Mm.map,this.rotation=Mm.rotation,this},Pr.prototype=Object.assign(Object.create($e.prototype),{constructor:Pr,isSprite:!0,raycast:function(){var Mm=new O,Rm=new O,Cm=new O;return function(Lm,Im){Rm.setFromMatrixPosition(this.matrixWorld),Lm.ray.closestPointToPoint(Rm,Mm),Cm.setFromMatrixScale(this.matrixWorld);var Bm=Cm.x*Cm.y/4;if(!(Rm.distanceToSquared(Mm)>Bm)){var Nm=Lm.ray.origin.distanceTo(Mm);Nm<Lm.near||Nm>Lm.far||Im.push({distance:Nm,point:Mm.clone(),face:null,object:this})}}}(),clone:function(){return new this.constructor(this.material).copy(this)}}),Lr.prototype=Object.assign(Object.create($e.prototype),{constructor:Lr,copy:function(Mm){$e.prototype.copy.call(this,Mm,!1);for(var Rm=Mm.levels,Cm=0,Pm=Rm.length,Lm;Cm<Pm;Cm++)Lm=Rm[Cm],this.addLevel(Lm.object.clone(),Lm.distance);return this},addLevel:function(Mm,Rm){Rm===void 0&&(Rm=0),Rm=_Mathabs(Rm);for(var Cm=this.levels,Pm=0;Pm<Cm.length&&!(Rm<Cm[Pm].distance);Pm++);Cm.splice(Pm,0,{distance:Rm,object:Mm}),this.add(Mm)},getObjectForDistance:function(Mm){for(var Rm=this.levels,Cm=1,Pm=Rm.length;Cm<Pm&&!(Mm<Rm[Cm].distance);Cm++);return Rm[Cm-1].object},raycast:function(){var Mm=new O;return function(Cm,Pm){Mm.setFromMatrixPosition(this.matrixWorld);var Lm=Cm.ray.origin.distanceTo(Mm);this.getObjectForDistance(Lm).raycast(Cm,Pm)}}(),update:function(){var Mm=new O,Rm=new O;return function(Pm){var Lm=this.levels;if(1<Lm.length){Mm.setFromMatrixPosition(Pm.matrixWorld),Rm.setFromMatrixPosition(this.matrixWorld);var Im=Mm.distanceTo(Rm);Lm[0].object.visible=!0;for(var Bm=1,Nm=Lm.length;Bm<Nm&&Im>=Lm[Bm].distance;Bm++)Lm[Bm-1].object.visible=!1,Lm[Bm].object.visible=!0;for(;Bm<Nm;Bm++)Lm[Bm].object.visible=!1}}}(),toJSON:function(Mm){var Rm=$e.prototype.toJSON.call(this,Mm);Rm.object.levels=[];for(var Cm=this.levels,Pm=0,Lm=Cm.length,Im;Pm<Lm;Pm++)Im=Cm[Pm],Rm.object.levels.push({object:Im.object.uuid,distance:Im.distance});return Rm}}),Object.assign(Ir.prototype,{calculateInverses:function(){this.boneInverses=[];for(var Mm=0,Rm=this.bones.length,Cm;Mm<Rm;Mm++)Cm=new F,this.bones[Mm]&&Cm.getInverse(this.bones[Mm].matrixWorld),this.boneInverses.push(Cm)},pose:function(){var Mm,Rm,Cm;for(Rm=0,Cm=this.bones.length;Rm<Cm;Rm++)Mm=this.bones[Rm],Mm&&Mm.matrixWorld.getInverse(this.boneInverses[Rm]);for(Rm=0,Cm=this.bones.length;Rm<Cm;Rm++)Mm=this.bones[Rm],Mm&&(Mm.parent&&Mm.parent.isBone?(Mm.matrix.getInverse(Mm.parent.matrixWorld),Mm.matrix.multiply(Mm.matrixWorld)):Mm.matrix.copy(Mm.matrixWorld),Mm.matrix.decompose(Mm.position,Mm.quaternion,Mm.scale))},update:function(){var Mm=new F,Rm=new F;return function(){for(var Pm=this.bones,Lm=this.boneInverses,Im=this.boneMatrices,Bm=this.boneTexture,Nm=0,zm=Pm.length,Dm;Nm<zm;Nm++)Dm=Pm[Nm]?Pm[Nm].matrixWorld:Rm,Mm.multiplyMatrices(Dm,Lm[Nm]),Mm.toArray(Im,16*Nm);Bm!==void 0&&(Bm.needsUpdate=!0)}}(),clone:function(){return new Ir(this.bones,this.boneInverses)}}),Br.prototype=Object.assign(Object.create($e.prototype),{constructor:Br,isBone:!0}),Nr.prototype=Object.assign(Object.create(Bt.prototype),{constructor:Nr,isSkinnedMesh:!0,initBones:function(){var Mm=[],Rm,Cm,Pm,Lm;if(this.geometry&&void 0!==this.geometry.bones){for(Pm=0,Lm=this.geometry.bones.length;Pm<Lm;Pm++)Cm=this.geometry.bones[Pm],Rm=new Br,Mm.push(Rm),Rm.name=Cm.name,Rm.position.fromArray(Cm.pos),Rm.quaternion.fromArray(Cm.rotq),void 0!==Cm.scl&&Rm.scale.fromArray(Cm.scl);for(Pm=0,Lm=this.geometry.bones.length;Pm<Lm;Pm++)Cm=this.geometry.bones[Pm],-1!==Cm.parent&&null!==Cm.parent&&void 0!==Mm[Cm.parent]?Mm[Cm.parent].add(Mm[Pm]):this.add(Mm[Pm])}return this.updateMatrixWorld(!0),Mm},bind:function(Mm,Rm){this.skeleton=Mm,Rm===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),Rm=this.matrixWorld),this.bindMatrix.copy(Rm),this.bindMatrixInverse.getInverse(Rm)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var Mm,Rm;if(this.geometry&&this.geometry.isGeometry)for(Rm=0;Rm<this.geometry.skinWeights.length;Rm++){var Cm=this.geometry.skinWeights[Rm];Mm=1/Cm.manhattanLength(),Mm===Infinity?Cm.set(1,0,0,0):Cm.multiplyScalar(Mm)}else if(this.geometry&&this.geometry.isBufferGeometry){var Pm=new W,Lm=this.geometry.attributes.skinWeight;for(Rm=0;Rm<Lm.count;Rm++)Pm.x=Lm.getX(Rm),Pm.y=Lm.getY(Rm),Pm.z=Lm.getZ(Rm),Pm.w=Lm.getW(Rm),Mm=1/Pm.manhattanLength(),Mm===Infinity?Pm.set(1,0,0,0):Pm.multiplyScalar(Mm),Lm.setXYZW(Rm,Pm.x,Pm.y,Pm.z,Pm.w)}},updateMatrixWorld:function(Mm){Bt.prototype.updateMatrixWorld.call(this,Mm),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),zr.prototype=Object.create(Ge.prototype),zr.prototype.constructor=zr,zr.prototype.isLineBasicMaterial=!0,zr.prototype.copy=function(Mm){return Ge.prototype.copy.call(this,Mm),this.color.copy(Mm.color),this.linewidth=Mm.linewidth,this.linecap=Mm.linecap,this.linejoin=Mm.linejoin,this},Dr.prototype=Object.assign(Object.create($e.prototype),{constructor:Dr,isLine:!0,raycast:function(){var Mm=new F,Rm=new Pt,Cm=new qe;return function(Lm,Im){var Bm=Lm.linePrecision,Nm=Bm*Bm,zm=this.geometry,Dm=this.matrixWorld;if(null===zm.boundingSphere&&zm.computeBoundingSphere(),Cm.copy(zm.boundingSphere),Cm.applyMatrix4(Dm),!1!==Lm.ray.intersectsSphere(Cm)){Mm.getInverse(Dm),Rm.copy(Lm.ray).applyMatrix4(Mm);var Fm=new O,Um=new O,Om=new O,km=new O,Vm=this&&this.isLineSegments?2:1;if(zm.isBufferGeometry){var Gm=zm.index,Hm=zm.attributes,Wm=Hm.position.array;if(null!==Gm)for(var jm=Gm.array,Xm=0,Ym=jm.length-1;Xm<Ym;Xm+=Vm){var Zm=jm[Xm],Jm=jm[Xm+1];Fm.fromArray(Wm,3*Zm),Um.fromArray(Wm,3*Jm);var Qm=Rm.distanceSqToSegment(Fm,Um,km,Om);if(!(Qm>Nm)){km.applyMatrix4(this.matrixWorld);var Km=Lm.ray.origin.distanceTo(km);Km<Lm.near||Km>Lm.far||Im.push({distance:Km,point:Om.clone().applyMatrix4(this.matrixWorld),index:Xm,face:null,faceIndex:null,object:this})}}else for(var Xm=0,Ym=Wm.length/3-1;Xm<Ym;Xm+=Vm){Fm.fromArray(Wm,3*Xm),Um.fromArray(Wm,3*Xm+3);var Qm=Rm.distanceSqToSegment(Fm,Um,km,Om);if(!(Qm>Nm)){km.applyMatrix4(this.matrixWorld);var Km=Lm.ray.origin.distanceTo(km);Km<Lm.near||Km>Lm.far||Im.push({distance:Km,point:Om.clone().applyMatrix4(this.matrixWorld),index:Xm,face:null,faceIndex:null,object:this})}}}else if(zm.isGeometry)for(var $m=zm.vertices,eg=$m.length,Xm=0,Qm;Xm<eg-1;Xm+=Vm)if(Qm=Rm.distanceSqToSegment($m[Xm],$m[Xm+1],km,Om),!(Qm>Nm)){km.applyMatrix4(this.matrixWorld);var Km=Lm.ray.origin.distanceTo(km);Km<Lm.near||Km>Lm.far||Im.push({distance:Km,point:Om.clone().applyMatrix4(this.matrixWorld),index:Xm,face:null,faceIndex:null,object:this})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Fr.prototype=Object.assign(Object.create(Dr.prototype),{constructor:Fr,isLineSegments:!0}),Ur.prototype=Object.assign(Object.create(Dr.prototype),{constructor:Ur,isLineLoop:!0}),Or.prototype=Object.create(Ge.prototype),Or.prototype.constructor=Or,Or.prototype.isPointsMaterial=!0,Or.prototype.copy=function(Mm){return Ge.prototype.copy.call(this,Mm),this.color.copy(Mm.color),this.map=Mm.map,this.size=Mm.size,this.sizeAttenuation=Mm.sizeAttenuation,this},kr.prototype=Object.assign(Object.create($e.prototype),{constructor:kr,isPoints:!0,raycast:function(){var Mm=new F,Rm=new Pt,Cm=new qe;return function(Lm,Im){function Bm(Qm,Km){var $m=Rm.distanceSqToPoint(Qm);if($m<Om){var eg=Rm.closestPointToPoint(Qm);eg.applyMatrix4(Dm);var tg=Lm.ray.origin.distanceTo(eg);if(tg<Lm.near||tg>Lm.far)return;Im.push({distance:tg,distanceToRay:_Mathsqrt($m),point:eg.clone(),index:Km,face:null,object:Nm})}}var Nm=this,zm=this.geometry,Dm=this.matrixWorld,Fm=Lm.params.Points.threshold;if(null===zm.boundingSphere&&zm.computeBoundingSphere(),Cm.copy(zm.boundingSphere),Cm.applyMatrix4(Dm),Cm.radius+=Fm,!1!==Lm.ray.intersectsSphere(Cm)){Mm.getInverse(Dm),Rm.copy(Lm.ray).applyMatrix4(Mm);var Um=Fm/((this.scale.x+this.scale.y+this.scale.z)/3),Om=Um*Um,km=new O;if(zm.isBufferGeometry){var Vm=zm.index,Gm=zm.attributes,Hm=Gm.position.array;if(null!==Vm)for(var Wm=Vm.array,jm=0,Xm=Wm.length,Ym;jm<Xm;jm++)Ym=Wm[jm],km.fromArray(Hm,3*Ym),Bm(km,Ym);else for(var jm=0,Zm=Hm.length/3;jm<Zm;jm++)km.fromArray(Hm,3*jm),Bm(km,jm)}else for(var Jm=zm.vertices,jm=0,Zm=Jm.length;jm<Zm;jm++)Bm(Jm[jm],jm)}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Vr.prototype=Object.assign(Object.create($e.prototype),{constructor:Vr,isGroup:!0}),Gr.prototype=Object.assign(Object.create(H.prototype),{constructor:Gr,isVideoTexture:!0,update:function(){var Mm=this.image;Mm.readyState>=Mm.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),Hr.prototype=Object.create(H.prototype),Hr.prototype.constructor=Hr,Hr.prototype.isCompressedTexture=!0,Wr.prototype=Object.create(H.prototype),Wr.prototype.constructor=Wr,Wr.prototype.isDepthTexture=!0,jr.prototype=Object.create(Tt.prototype),jr.prototype.constructor=jr,qr.prototype=Object.create(ot.prototype),qr.prototype.constructor=qr,Xr.prototype=Object.create(Tt.prototype),Xr.prototype.constructor=Xr,Yr.prototype=Object.create(ot.prototype),Yr.prototype.constructor=Yr,Zr.prototype=Object.create(Tt.prototype),Zr.prototype.constructor=Zr,Jr.prototype=Object.create(ot.prototype),Jr.prototype.constructor=Jr,Qr.prototype=Object.create(Zr.prototype),Qr.prototype.constructor=Qr,Kr.prototype=Object.create(ot.prototype),Kr.prototype.constructor=Kr,$r.prototype=Object.create(Zr.prototype),$r.prototype.constructor=$r,ra.prototype=Object.create(ot.prototype),ra.prototype.constructor=ra,aa.prototype=Object.create(Zr.prototype),aa.prototype.constructor=aa,oa.prototype=Object.create(ot.prototype),oa.prototype.constructor=oa,ia.prototype=Object.create(Zr.prototype),ia.prototype.constructor=ia,sa.prototype=Object.create(ot.prototype),sa.prototype.constructor=sa,la.prototype=Object.create(Tt.prototype),la.prototype.constructor=la,pa.prototype=Object.create(ot.prototype),pa.prototype.constructor=pa,ua.prototype=Object.create(Tt.prototype),ua.prototype.constructor=ua,ma.prototype=Object.create(ot.prototype),ma.prototype.constructor=ma,ga.prototype=Object.create(Tt.prototype),ga.prototype.constructor=ga;var Ju={triangulate:function(Mm,Rm,Cm){Cm=Cm||2;var Pm=Rm&&Rm.length,Lm=Pm?Rm[0]*Cm:Mm.length,Im=fa(Mm,0,Lm,Cm,!0),Bm=[];if(!Im)return Bm;var Nm,zm,Dm,Fm,Um,Om,km;if(Pm&&(Im=Sa(Mm,Rm,Im,Cm)),Mm.length>80*Cm){Nm=Dm=Mm[0],zm=Fm=Mm[1];for(var Vm=Cm;Vm<Lm;Vm+=Cm)Um=Mm[Vm],Om=Mm[Vm+1],Um<Nm&&(Nm=Um),Om<zm&&(zm=Om),Um>Dm&&(Dm=Um),Om>Fm&&(Fm=Om);km=_Mathmax(Dm-Nm,Fm-zm),km=0===km?0:1/km}return ya(Im,Bm,Cm,Nm,zm,km),Bm}},Qu={area:function(Mm){for(var Rm=Mm.length,Cm=0,Pm=Rm-1,Lm=0;Lm<Rm;Pm=Lm++)Cm+=Mm[Pm].x*Mm[Lm].y-Mm[Lm].x*Mm[Pm].y;return 0.5*Cm},isClockWise:function(Mm){return 0>Qu.area(Mm)},triangulateShape:function(Mm,Rm){function Cm(Fm){var Um=Fm.length;2<Um&&Fm[Um-1].equals(Fm[0])&&Fm.pop()}function Pm(Fm,Um){for(var Om=0;Om<Um.length;Om++)Fm.push(Um[Om].x),Fm.push(Um[Om].y)}var Lm=[],Im=[],Bm=[];Cm(Mm),Pm(Lm,Mm);var Nm=Mm.length;for(Rm.forEach(Cm),Dm=0;Dm<Rm.length;Dm++)Im.push(Nm),Nm+=Rm[Dm].length,Pm(Lm,Rm[Dm]);for(var zm=Ju.triangulate(Lm,Im),Dm=0;Dm<zm.length;Dm+=3)Bm.push(zm.slice(Dm,Dm+3));return Bm}};ja.prototype=Object.create(ot.prototype),ja.prototype.constructor=ja,Xa.prototype=Object.create(Tt.prototype),Xa.prototype.constructor=Xa,Xa.prototype.getArrays=function(){var Mm=this.getAttribute("position"),Rm=Mm?Array.prototype.slice.call(Mm.array):[],Cm=this.getAttribute("uv"),Pm=Cm?Array.prototype.slice.call(Cm.array):[],Lm=this.index,Im=Lm?Array.prototype.slice.call(Lm.array):[];return{position:Rm,uv:Pm,index:Im}},Xa.prototype.addShapeList=function(Mm,Rm){var Cm=Mm.length;Rm.arrays=this.getArrays();for(var Pm=0,Lm;Pm<Cm;Pm++)Lm=Mm[Pm],this.addShape(Lm,Rm);this.setIndex(Rm.arrays.index),this.addAttribute("position",new _t(Rm.arrays.position,3)),this.addAttribute("uv",new _t(Rm.arrays.uv,2))},Xa.prototype.addShape=function(Mm,Rm){function Cm(Bg,Ng,zg){return Ng||console.error("THREE.ExtrudeGeometry: vec does not exist"),Ng.clone().multiplyScalar(zg).add(Bg)}function Pm(Bg,Ng,zg){var Dg,Fg,Ug,Og=Bg.x-Ng.x,kg=Bg.y-Ng.y,Vg=zg.x-Bg.x,Gg=zg.y-Bg.y,Hg=Og*Og+kg*kg;if(_Mathabs(Og*Gg-kg*Vg)>_NumberEPSILON){var jg=_Mathsqrt(Hg),qg=_Mathsqrt(Vg*Vg+Gg*Gg),Xg=Ng.x-kg/jg,Yg=Ng.y+Og/jg,Zg=zg.x-Gg/qg,Jg=zg.y+Vg/qg,Qg=((Zg-Xg)*Gg-(Jg-Yg)*Vg)/(Og*Gg-kg*Vg);Dg=Xg+Og*Qg-Bg.x,Fg=Yg+kg*Qg-Bg.y;var Kg=Dg*Dg+Fg*Fg;if(2>=Kg)return new D(Dg,Fg);Ug=_Mathsqrt(Kg/2)}else{var $g=!1;Og>_NumberEPSILON?Vg>_NumberEPSILON&&($g=!0):Og<-_NumberEPSILON?Vg<-_NumberEPSILON&&($g=!0):_Mathsign(kg)===_Mathsign(Gg)&&($g=!0),$g?(Dg=-kg,Fg=Og,Ug=_Mathsqrt(Hg)):(Dg=Og,Fg=kg,Ug=_Mathsqrt(Hg/2))}return new D(Dg/Ug,Fg/Ug)}function Bm(Bg,Ng){var zg,Dg;for(Ag=Bg.length;0<=--Ag;){zg=Ag,Dg=Ag-1,0>Dg&&(Dg=Bg.length-1);var Fg=0,Ug=Qm+2*Ym;for(Fg=0;Fg<Ug;Fg++){var Og=bg*Fg,kg=bg*(Fg+1),Vg=Ng+zg+Og,Gg=Ng+Dg+Og,Hg=Ng+Dg+kg,Wg=Ng+zg+kg;Dm(Vg,Gg,Hg,Wg)}}}function Nm(Bg,Ng,zg){Hm.push(Bg),Hm.push(Ng),Hm.push(zg)}function zm(Bg,Ng,zg){Fm(Bg),Fm(Ng),Fm(zg);var Dg=km.length/3,Fg=tg.generateTopUV(dg,km,Dg-3,Dg-2,Dg-1);Um(Fg[0]),Um(Fg[1]),Um(Fg[2])}function Dm(Bg,Ng,zg,Dg){Fm(Bg),Fm(Ng),Fm(Dg),Fm(Ng),Fm(zg),Fm(Dg);var Fg=km.length/3,Ug=tg.generateSideWallUV(dg,km,Fg-6,Fg-3,Fg-2,Fg-1);Um(Ug[0]),Um(Ug[1]),Um(Ug[3]),Um(Ug[1]),Um(Ug[2]),Um(Ug[3])}function Fm(Bg){Vm.push(km.length/3),km.push(Hm[3*Bg+0]),km.push(Hm[3*Bg+1]),km.push(Hm[3*Bg+2])}function Um(Bg){Gm.push(Bg.x),Gm.push(Bg.y)}var Om=Rm.arrays?Rm.arrays:this.getArrays(),km=Om.position,Vm=Om.index,Gm=Om.uv,Hm=[],Wm=Rm.amount===void 0?100:Rm.amount,jm=Rm.bevelThickness===void 0?6:Rm.bevelThickness,Xm=Rm.bevelSize===void 0?jm-2:Rm.bevelSize,Ym=Rm.bevelSegments===void 0?3:Rm.bevelSegments,Zm=!(Rm.bevelEnabled!==void 0)||Rm.bevelEnabled,Jm=Rm.curveSegments===void 0?12:Rm.curveSegments,Qm=Rm.steps===void 0?1:Rm.steps,Km=Rm.extrudePath,$m,eg=!1,tg=Rm.UVGenerator===void 0?ja.WorldUVGenerator:Rm.UVGenerator,rg,ag,og,ig;Km&&($m=Km.getSpacedPoints(Qm),eg=!0,Zm=!1,rg=Rm.frames===void 0?Km.computeFrenetFrames(Qm,!1):Rm.frames,ag=new O,og=new O,ig=new O),Zm||(Ym=0,jm=0,Xm=0);var ng,sg,lg,dg=this,pg=Mm.extractPoints(Jm),cg=pg.shape,ug=pg.holes,mg=!Qu.isClockWise(cg);if(mg)for(cg=cg.reverse(),sg=0,lg=ug.length;sg<lg;sg++)ng=ug[sg],Qu.isClockWise(ng)&&(ug[sg]=ng.reverse());var gg=Qu.triangulateShape(cg,ug),fg=cg;for(sg=0,lg=ug.length;sg<lg;sg++)ng=ug[sg],cg=cg.concat(ng);for(var bg=cg.length,Eg=gg.length,Sg=[],Ag=0,wg=fg.length,Mg=wg-1,Rg=Ag+1,hg,yg,_g,xg,vg,Tg;Ag<wg;Ag++,Mg++,Rg++)Mg===wg&&(Mg=0),Rg===wg&&(Rg=0),Sg[Ag]=Pm(fg[Ag],fg[Mg],fg[Rg]);var Cg=[],Lg=Sg.concat(),Pg;for(sg=0,lg=ug.length;sg<lg;sg++){for(ng=ug[sg],Pg=[],(Ag=0,wg=ng.length,Mg=wg-1,Rg=Ag+1);Ag<wg;Ag++,Mg++,Rg++)Mg===wg&&(Mg=0),Rg===wg&&(Rg=0),Pg[Ag]=Pm(ng[Ag],ng[Mg],ng[Rg]);Cg.push(Pg),Lg=Lg.concat(Pg)}for(hg=0;hg<Ym;hg++){for(_g=hg/Ym,xg=jm*_Mathcos(_g*_MathPI/2),yg=Xm*_Mathsin(_g*_MathPI/2),(Ag=0,wg=fg.length);Ag<wg;Ag++)vg=Cm(fg[Ag],Sg[Ag],yg),Nm(vg.x,vg.y,-xg);for(sg=0,lg=ug.length;sg<lg;sg++)for(ng=ug[sg],Pg=Cg[sg],(Ag=0,wg=ng.length);Ag<wg;Ag++)vg=Cm(ng[Ag],Pg[Ag],yg),Nm(vg.x,vg.y,-xg)}for(yg=Xm,Ag=0;Ag<bg;Ag++)vg=Zm?Cm(cg[Ag],Lg[Ag],yg):cg[Ag],eg?(og.copy(rg.normals[0]).multiplyScalar(vg.x),ag.copy(rg.binormals[0]).multiplyScalar(vg.y),ig.copy($m[0]).add(og).add(ag),Nm(ig.x,ig.y,ig.z)):Nm(vg.x,vg.y,0);var Ig;for(Ig=1;Ig<=Qm;Ig++)for(Ag=0;Ag<bg;Ag++)vg=Zm?Cm(cg[Ag],Lg[Ag],yg):cg[Ag],eg?(og.copy(rg.normals[Ig]).multiplyScalar(vg.x),ag.copy(rg.binormals[Ig]).multiplyScalar(vg.y),ig.copy($m[Ig]).add(og).add(ag),Nm(ig.x,ig.y,ig.z)):Nm(vg.x,vg.y,Wm/Qm*Ig);for(hg=Ym-1;0<=hg;hg--){for(_g=hg/Ym,xg=jm*_Mathcos(_g*_MathPI/2),yg=Xm*_Mathsin(_g*_MathPI/2),(Ag=0,wg=fg.length);Ag<wg;Ag++)vg=Cm(fg[Ag],Sg[Ag],yg),Nm(vg.x,vg.y,Wm+xg);for(sg=0,lg=ug.length;sg<lg;sg++)for(ng=ug[sg],Pg=Cg[sg],(Ag=0,wg=ng.length);Ag<wg;Ag++)vg=Cm(ng[Ag],Pg[Ag],yg),eg?Nm(vg.x,vg.y+$m[Qm-1].y,$m[Qm-1].x+xg):Nm(vg.x,vg.y,Wm+xg)}(function(){var Bg=km.length/3;if(Zm){var Ng=0,zg=bg*Ng;for(Ag=0;Ag<Eg;Ag++)Tg=gg[Ag],zm(Tg[2]+zg,Tg[1]+zg,Tg[0]+zg);for(Ng=Qm+2*Ym,zg=bg*Ng,Ag=0;Ag<Eg;Ag++)Tg=gg[Ag],zm(Tg[0]+zg,Tg[1]+zg,Tg[2]+zg)}else{for(Ag=0;Ag<Eg;Ag++)Tg=gg[Ag],zm(Tg[2],Tg[1],Tg[0]);for(Ag=0;Ag<Eg;Ag++)Tg=gg[Ag],zm(Tg[0]+bg*Qm,Tg[1]+bg*Qm,Tg[2]+bg*Qm)}dg.addGroup(Bg,km.length/3-Bg,Rm.material===void 0?0:Rm.material)})(),function(){var Bg=km.length/3,Ng=0;for(Bm(fg,Ng),Ng+=fg.length,(sg=0,lg=ug.length);sg<lg;sg++)ng=ug[sg],Bm(ng,Ng),Ng+=ng.length;dg.addGroup(Bg,km.length/3-Bg,Rm.extrudeMaterial===void 0?1:Rm.extrudeMaterial)}(),Rm.arrays||(this.setIndex(Vm),this.addAttribute("position",new _t(km,3)),this.addAttribute("uv",new _t(Gm,2)))},ja.WorldUVGenerator={generateTopUV:function(Mm,Rm,Cm,Pm,Lm){var Im=Rm[3*Cm],Bm=Rm[3*Cm+1],Nm=Rm[3*Pm],zm=Rm[3*Pm+1],Dm=Rm[3*Lm],Fm=Rm[3*Lm+1];return[new D(Im,Bm),new D(Nm,zm),new D(Dm,Fm)]},generateSideWallUV:function(Mm,Rm,Cm,Pm,Lm,Im){var Bm=Rm[3*Cm],Nm=Rm[3*Cm+1],zm=Rm[3*Cm+2],Dm=Rm[3*Pm],Fm=Rm[3*Pm+1],Um=Rm[3*Pm+2],Om=Rm[3*Lm],km=Rm[3*Lm+1],Vm=Rm[3*Lm+2],Gm=Rm[3*Im],Hm=Rm[3*Im+1],Wm=Rm[3*Im+2];return 0.01>_Mathabs(Nm-Fm)?[new D(Bm,1-zm),new D(Dm,1-Um),new D(Om,1-Vm),new D(Gm,1-Wm)]:[new D(Nm,1-zm),new D(Fm,1-Um),new D(km,1-Vm),new D(Hm,1-Wm)]}},Ya.prototype=Object.create(ot.prototype),Ya.prototype.constructor=Ya,Za.prototype=Object.create(Xa.prototype),Za.prototype.constructor=Za,Ja.prototype=Object.create(ot.prototype),Ja.prototype.constructor=Ja,Qa.prototype=Object.create(Tt.prototype),Qa.prototype.constructor=Qa,Ka.prototype=Object.create(ot.prototype),Ka.prototype.constructor=Ka,$a.prototype=Object.create(Tt.prototype),$a.prototype.constructor=$a,eo.prototype=Object.create(ot.prototype),eo.prototype.constructor=eo,ro.prototype=Object.create(Tt.prototype),ro.prototype.constructor=ro,ao.prototype=Object.create(ot.prototype),ao.prototype.constructor=ao,ao.prototype.toJSON=function(){var Mm=ot.prototype.toJSON.call(this),Rm=this.parameters.shapes;return io(Rm,Mm)},oo.prototype=Object.create(Tt.prototype),oo.prototype.constructor=oo,oo.prototype.toJSON=function(){var Mm=Tt.prototype.toJSON.call(this),Rm=this.parameters.shapes;return io(Rm,Mm)},no.prototype=Object.create(Tt.prototype),no.prototype.constructor=no,so.prototype=Object.create(ot.prototype),so.prototype.constructor=so,lo.prototype=Object.create(Tt.prototype),lo.prototype.constructor=lo,po.prototype=Object.create(so.prototype),po.prototype.constructor=po,co.prototype=Object.create(lo.prototype),co.prototype.constructor=co,uo.prototype=Object.create(ot.prototype),uo.prototype.constructor=uo,mo.prototype=Object.create(Tt.prototype),mo.prototype.constructor=mo;var Ku=Object.freeze({WireframeGeometry:jr,ParametricGeometry:qr,ParametricBufferGeometry:Xr,TetrahedronGeometry:Jr,TetrahedronBufferGeometry:Qr,OctahedronGeometry:Kr,OctahedronBufferGeometry:$r,IcosahedronGeometry:ra,IcosahedronBufferGeometry:aa,DodecahedronGeometry:oa,DodecahedronBufferGeometry:ia,PolyhedronGeometry:Yr,PolyhedronBufferGeometry:Zr,TubeGeometry:sa,TubeBufferGeometry:la,TorusKnotGeometry:pa,TorusKnotBufferGeometry:ua,TorusGeometry:ma,TorusBufferGeometry:ga,TextGeometry:Ya,TextBufferGeometry:Za,SphereGeometry:Ja,SphereBufferGeometry:Qa,RingGeometry:Ka,RingBufferGeometry:$a,PlaneGeometry:At,PlaneBufferGeometry:wt,LatheGeometry:eo,LatheBufferGeometry:ro,ShapeGeometry:ao,ShapeBufferGeometry:oo,ExtrudeGeometry:ja,ExtrudeBufferGeometry:Xa,EdgesGeometry:no,ConeGeometry:po,ConeBufferGeometry:co,CylinderGeometry:so,CylinderBufferGeometry:lo,CircleGeometry:uo,CircleBufferGeometry:mo,BoxGeometry:Et,BoxBufferGeometry:St});go.prototype=Object.create(Ge.prototype),go.prototype.constructor=go,go.prototype.isShadowMaterial=!0,fo.prototype=Object.create(Ct.prototype),fo.prototype.constructor=fo,fo.prototype.isRawShaderMaterial=!0,yo.prototype=Object.create(Ge.prototype),yo.prototype.constructor=yo,yo.prototype.isMeshStandardMaterial=!0,yo.prototype.copy=function(Mm){return Ge.prototype.copy.call(this,Mm),this.defines={STANDARD:""},this.color.copy(Mm.color),this.roughness=Mm.roughness,this.metalness=Mm.metalness,this.map=Mm.map,this.lightMap=Mm.lightMap,this.lightMapIntensity=Mm.lightMapIntensity,this.aoMap=Mm.aoMap,this.aoMapIntensity=Mm.aoMapIntensity,this.emissive.copy(Mm.emissive),this.emissiveMap=Mm.emissiveMap,this.emissiveIntensity=Mm.emissiveIntensity,this.bumpMap=Mm.bumpMap,this.bumpScale=Mm.bumpScale,this.normalMap=Mm.normalMap,this.normalScale.copy(Mm.normalScale),this.displacementMap=Mm.displacementMap,this.displacementScale=Mm.displacementScale,this.displacementBias=Mm.displacementBias,this.roughnessMap=Mm.roughnessMap,this.metalnessMap=Mm.metalnessMap,this.alphaMap=Mm.alphaMap,this.envMap=Mm.envMap,this.envMapIntensity=Mm.envMapIntensity,this.refractionRatio=Mm.refractionRatio,this.wireframe=Mm.wireframe,this.wireframeLinewidth=Mm.wireframeLinewidth,this.wireframeLinecap=Mm.wireframeLinecap,this.wireframeLinejoin=Mm.wireframeLinejoin,this.skinning=Mm.skinning,this.morphTargets=Mm.morphTargets,this.morphNormals=Mm.morphNormals,this},_o.prototype=Object.create(yo.prototype),_o.prototype.constructor=_o,_o.prototype.isMeshPhysicalMaterial=!0,_o.prototype.copy=function(Mm){return yo.prototype.copy.call(this,Mm),this.defines={PHYSICAL:""},this.reflectivity=Mm.reflectivity,this.clearCoat=Mm.clearCoat,this.clearCoatRoughness=Mm.clearCoatRoughness,this},xo.prototype=Object.create(Ge.prototype),xo.prototype.constructor=xo,xo.prototype.isMeshPhongMaterial=!0,xo.prototype.copy=function(Mm){return Ge.prototype.copy.call(this,Mm),this.color.copy(Mm.color),this.specular.copy(Mm.specular),this.shininess=Mm.shininess,this.map=Mm.map,this.lightMap=Mm.lightMap,this.lightMapIntensity=Mm.lightMapIntensity,this.aoMap=Mm.aoMap,this.aoMapIntensity=Mm.aoMapIntensity,this.emissive.copy(Mm.emissive),this.emissiveMap=Mm.emissiveMap,this.emissiveIntensity=Mm.emissiveIntensity,this.bumpMap=Mm.bumpMap,this.bumpScale=Mm.bumpScale,this.normalMap=Mm.normalMap,this.normalScale.copy(Mm.normalScale),this.displacementMap=Mm.displacementMap,this.displacementScale=Mm.displacementScale,this.displacementBias=Mm.displacementBias,this.specularMap=Mm.specularMap,this.alphaMap=Mm.alphaMap,this.envMap=Mm.envMap,this.combine=Mm.combine,this.reflectivity=Mm.reflectivity,this.refractionRatio=Mm.refractionRatio,this.wireframe=Mm.wireframe,this.wireframeLinewidth=Mm.wireframeLinewidth,this.wireframeLinecap=Mm.wireframeLinecap,this.wireframeLinejoin=Mm.wireframeLinejoin,this.skinning=Mm.skinning,this.morphTargets=Mm.morphTargets,this.morphNormals=Mm.morphNormals,this},vo.prototype=Object.create(xo.prototype),vo.prototype.constructor=vo,vo.prototype.isMeshToonMaterial=!0,vo.prototype.copy=function(Mm){return xo.prototype.copy.call(this,Mm),this.gradientMap=Mm.gradientMap,this},bo.prototype=Object.create(Ge.prototype),bo.prototype.constructor=bo,bo.prototype.isMeshNormalMaterial=!0,bo.prototype.copy=function(Mm){return Ge.prototype.copy.call(this,Mm),this.bumpMap=Mm.bumpMap,this.bumpScale=Mm.bumpScale,this.normalMap=Mm.normalMap,this.normalScale.copy(Mm.normalScale),this.displacementMap=Mm.displacementMap,this.displacementScale=Mm.displacementScale,this.displacementBias=Mm.displacementBias,this.wireframe=Mm.wireframe,this.wireframeLinewidth=Mm.wireframeLinewidth,this.skinning=Mm.skinning,this.morphTargets=Mm.morphTargets,this.morphNormals=Mm.morphNormals,this},To.prototype=Object.create(Ge.prototype),To.prototype.constructor=To,To.prototype.isMeshLambertMaterial=!0,To.prototype.copy=function(Mm){return Ge.prototype.copy.call(this,Mm),this.color.copy(Mm.color),this.map=Mm.map,this.lightMap=Mm.lightMap,this.lightMapIntensity=Mm.lightMapIntensity,this.aoMap=Mm.aoMap,this.aoMapIntensity=Mm.aoMapIntensity,this.emissive.copy(Mm.emissive),this.emissiveMap=Mm.emissiveMap,this.emissiveIntensity=Mm.emissiveIntensity,this.specularMap=Mm.specularMap,this.alphaMap=Mm.alphaMap,this.envMap=Mm.envMap,this.combine=Mm.combine,this.reflectivity=Mm.reflectivity,this.refractionRatio=Mm.refractionRatio,this.wireframe=Mm.wireframe,this.wireframeLinewidth=Mm.wireframeLinewidth,this.wireframeLinecap=Mm.wireframeLinecap,this.wireframeLinejoin=Mm.wireframeLinejoin,this.skinning=Mm.skinning,this.morphTargets=Mm.morphTargets,this.morphNormals=Mm.morphNormals,this},Eo.prototype=Object.create(zr.prototype),Eo.prototype.constructor=Eo,Eo.prototype.isLineDashedMaterial=!0,Eo.prototype.copy=function(Mm){return zr.prototype.copy.call(this,Mm),this.scale=Mm.scale,this.dashSize=Mm.dashSize,this.gapSize=Mm.gapSize,this};var $u=Object.freeze({ShadowMaterial:go,SpriteMaterial:Cr,RawShaderMaterial:fo,ShaderMaterial:Ct,PointsMaterial:Or,MeshPhysicalMaterial:_o,MeshStandardMaterial:yo,MeshPhongMaterial:xo,MeshToonMaterial:vo,MeshNormalMaterial:bo,MeshLambertMaterial:To,MeshDepthMaterial:He,MeshDistanceMaterial:We,MeshBasicMaterial:Rt,LineDashedMaterial:Eo,LineBasicMaterial:zr,Material:Ge}),rm={enabled:!1,files:{},add:function(Mm,Rm){!1===this.enabled||(this.files[Mm]=Rm)},get:function(Mm){return!1===this.enabled?void 0:this.files[Mm]},remove:function(Mm){delete this.files[Mm]},clear:function(){this.files={}}},am=new So,om={};Object.assign(Ao.prototype,{load:function(Mm,Rm,Cm,Pm){void 0===Mm&&(Mm=""),void 0!==this.path&&(Mm=this.path+Mm),Mm=this.manager.resolveURL(Mm);var Lm=this,Im=rm.get(Mm);if(void 0!==Im)return Lm.manager.itemStart(Mm),setTimeout(function(){Rm&&Rm(Im),Lm.manager.itemEnd(Mm)},0),Im;if(void 0!==om[Mm])return void om[Mm].push({onLoad:Rm,onProgress:Cm,onError:Pm});var Bm=/^data:(.*?)(;base64)?,(.*)$/,Nm=Mm.match(Bm);if(Nm){var zm=Nm[1],Dm=!!Nm[2],Fm=Nm[3];Fm=window.decodeURIComponent(Fm),Dm&&(Fm=window.atob(Fm));try{var Om=(this.responseType||"").toLowerCase(),Um;switch(Om){case"arraybuffer":case"blob":for(var km=new Uint8Array(Fm.length),Vm=0;Vm<Fm.length;Vm++)km[Vm]=Fm.charCodeAt(Vm);Um="blob"===Om?new Blob([km.buffer],{type:zm}):km.buffer;break;case"document":var Gm=new DOMParser;Um=Gm.parseFromString(Fm,zm);break;case"json":Um=JSON.parse(Fm);break;default:Um=Fm;}window.setTimeout(function(){Rm&&Rm(Um),Lm.manager.itemEnd(Mm)},0)}catch(jm){window.setTimeout(function(){Pm&&Pm(jm),Lm.manager.itemEnd(Mm),Lm.manager.itemError(Mm)},0)}}else{om[Mm]=[],om[Mm].push({onLoad:Rm,onProgress:Cm,onError:Pm});var Hm=new XMLHttpRequest;for(var Wm in Hm.open("GET",Mm,!0),Hm.addEventListener("load",function(jm){var Xm=this.response;rm.add(Mm,Xm);var Ym=om[Mm];if(delete om[Mm],200===this.status){for(var Zm=0,Jm=Ym.length,Qm;Zm<Jm;Zm++)Qm=Ym[Zm],Qm.onLoad&&Qm.onLoad(Xm);Lm.manager.itemEnd(Mm)}else if(0===this.status){console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var Zm=0,Jm=Ym.length,Qm;Zm<Jm;Zm++)Qm=Ym[Zm],Qm.onLoad&&Qm.onLoad(Xm);Lm.manager.itemEnd(Mm)}else{for(var Zm=0,Jm=Ym.length,Qm;Zm<Jm;Zm++)Qm=Ym[Zm],Qm.onError&&Qm.onError(jm);Lm.manager.itemEnd(Mm),Lm.manager.itemError(Mm)}},!1),Hm.addEventListener("progress",function(jm){for(var Xm=om[Mm],Ym=0,Zm=Xm.length,Jm;Ym<Zm;Ym++)Jm=Xm[Ym],Jm.onProgress&&Jm.onProgress(jm)},!1),Hm.addEventListener("error",function(jm){var Xm=om[Mm];delete om[Mm];for(var Ym=0,Zm=Xm.length,Jm;Ym<Zm;Ym++)Jm=Xm[Ym],Jm.onError&&Jm.onError(jm);Lm.manager.itemEnd(Mm),Lm.manager.itemError(Mm)},!1),void 0!==this.responseType&&(Hm.responseType=this.responseType),void 0!==this.withCredentials&&(Hm.withCredentials=this.withCredentials),Hm.overrideMimeType&&Hm.overrideMimeType(void 0===this.mimeType?"text/plain":this.mimeType),this.requestHeader)Hm.setRequestHeader(Wm,this.requestHeader[Wm]);Hm.send(null)}return Lm.manager.itemStart(Mm),Hm},setPath:function(Mm){return this.path=Mm,this},setResponseType:function(Mm){return this.responseType=Mm,this},setWithCredentials:function(Mm){return this.withCredentials=Mm,this},setMimeType:function(Mm){return this.mimeType=Mm,this},setRequestHeader:function(Mm){return this.requestHeader=Mm,this}}),Object.assign(wo.prototype,{load:function(Mm,Rm,Cm,Pm){function Lm(Om){zm.load(Mm[Om],function(km){var Vm=Im._parser(km,!0);Bm[Om]={width:Vm.width,height:Vm.height,format:Vm.format,mipmaps:Vm.mipmaps},Dm+=1,6==Dm&&(1===Vm.mipmapCount&&(Nm.minFilter=pd),Nm.format=Vm.format,Nm.needsUpdate=!0,Rm&&Rm(Nm))},Cm,Pm)}var Im=this,Bm=[],Nm=new Hr;Nm.image=Bm;var zm=new Ao(this.manager);if(zm.setPath(this.path),zm.setResponseType("arraybuffer"),Array.isArray(Mm))for(var Dm=0,Fm=0,Um=Mm.length;Fm<Um;++Fm)Lm(Fm);else zm.load(Mm,function(Om){var km=Im._parser(Om,!0);if(km.isCubemap)for(var Vm=km.mipmaps.length/km.mipmapCount,Gm=0;Gm<Vm;Gm++){Bm[Gm]={mipmaps:[]};for(var Hm=0;Hm<km.mipmapCount;Hm++)Bm[Gm].mipmaps.push(km.mipmaps[Gm*km.mipmapCount+Hm]),Bm[Gm].format=km.format,Bm[Gm].width=km.width,Bm[Gm].height=km.height}else Nm.image.width=km.width,Nm.image.height=km.height,Nm.mipmaps=km.mipmaps;1===km.mipmapCount&&(Nm.minFilter=pd),Nm.format=km.format,Nm.needsUpdate=!0,Rm&&Rm(Nm)},Cm,Pm);return Nm},setPath:function(Mm){return this.path=Mm,this}}),Object.assign(Mo.prototype,{load:function(Mm,Rm,Cm,Pm){var Lm=this,Im=new Z,Bm=new Ao(this.manager);return Bm.setResponseType("arraybuffer"),Bm.load(Mm,function(Nm){var zm=Lm._parser(Nm);zm&&(void 0===zm.image?void 0!==zm.data&&(Im.image.width=zm.width,Im.image.height=zm.height,Im.image.data=zm.data):Im.image=zm.image,Im.wrapS=void 0===zm.wrapS?rd:zm.wrapS,Im.wrapT=void 0===zm.wrapT?rd:zm.wrapT,Im.magFilter=void 0===zm.magFilter?pd:zm.magFilter,Im.minFilter=void 0===zm.minFilter?ud:zm.minFilter,Im.anisotropy=void 0===zm.anisotropy?1:zm.anisotropy,void 0!==zm.format&&(Im.format=zm.format),void 0!==zm.type&&(Im.type=zm.type),void 0!==zm.mipmaps&&(Im.mipmaps=zm.mipmaps),1===zm.mipmapCount&&(Im.minFilter=pd),Im.needsUpdate=!0,Rm&&Rm(Im,zm))},Cm,Pm),Im}}),Object.assign(Ro.prototype,{crossOrigin:"Anonymous",load:function(Mm,Rm,Cm,Pm){void 0===Mm&&(Mm=""),void 0!==this.path&&(Mm=this.path+Mm),Mm=this.manager.resolveURL(Mm);var Lm=this,Im=rm.get(Mm);if(void 0!==Im)return Lm.manager.itemStart(Mm),setTimeout(function(){Rm&&Rm(Im),Lm.manager.itemEnd(Mm)},0),Im;var Bm=document.createElementNS("http://www.w3.org/1999/xhtml","img");return Bm.addEventListener("load",function(){rm.add(Mm,this),Rm&&Rm(this),Lm.manager.itemEnd(Mm)},!1),Bm.addEventListener("error",function(Nm){Pm&&Pm(Nm),Lm.manager.itemEnd(Mm),Lm.manager.itemError(Mm)},!1),"data:"!==Mm.substr(0,5)&&void 0!==this.crossOrigin&&(Bm.crossOrigin=this.crossOrigin),Lm.manager.itemStart(Mm),Bm.src=Mm,Bm},setCrossOrigin:function(Mm){return this.crossOrigin=Mm,this},setPath:function(Mm){return this.path=Mm,this}}),Object.assign(Co.prototype,{crossOrigin:"Anonymous",load:function(Mm,Rm,Cm,Pm){function Lm(Dm){Bm.load(Mm[Dm],function(Fm){Im.images[Dm]=Fm,Nm++,6==Nm&&(Im.needsUpdate=!0,Rm&&Rm(Im))},void 0,Pm)}var Im=new J,Bm=new Ro(this.manager);Bm.setCrossOrigin(this.crossOrigin),Bm.setPath(this.path);for(var Nm=0,zm=0;zm<Mm.length;++zm)Lm(zm);return Im},setCrossOrigin:function(Mm){return this.crossOrigin=Mm,this},setPath:function(Mm){return this.path=Mm,this}}),Object.assign(Po.prototype,{crossOrigin:"Anonymous",load:function(Mm,Rm,Cm,Pm){var Lm=new H,Im=new Ro(this.manager);return Im.setCrossOrigin(this.crossOrigin),Im.setPath(this.path),Im.load(Mm,function(Bm){Lm.image=Bm;var Nm=0<Mm.search(/\.(jpg|jpeg)$/)||0===Mm.search(/^data\:image\/jpeg/);Lm.format=Nm?Md:Rd,Lm.needsUpdate=!0,void 0!==Rm&&Rm(Lm)},Cm,Pm),Lm},setCrossOrigin:function(Mm){return this.crossOrigin=Mm,this},setPath:function(Mm){return this.path=Mm,this}}),Object.assign(Lo.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(Mm,Rm){var Cm=this.getUtoTmapping(Mm);return this.getPoint(Cm,Rm)},getPoints:function(Mm){Mm===void 0&&(Mm=5);for(var Rm=[],Cm=0;Cm<=Mm;Cm++)Rm.push(this.getPoint(Cm/Mm));return Rm},getSpacedPoints:function(Mm){Mm===void 0&&(Mm=5);for(var Rm=[],Cm=0;Cm<=Mm;Cm++)Rm.push(this.getPointAt(Cm/Mm));return Rm},getLength:function(){var Mm=this.getLengths();return Mm[Mm.length-1]},getLengths:function(Mm){if(void 0===Mm&&(Mm=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===Mm+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var Rm=[],Pm=this.getPoint(0),Im=0,Cm,Lm;for(Rm.push(0),Lm=1;Lm<=Mm;Lm++)Cm=this.getPoint(Lm/Mm),Im+=Cm.distanceTo(Pm),Rm.push(Im),Pm=Cm;return this.cacheArcLengths=Rm,Rm},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(Mm,Rm){var Cm=this.getLengths(),Pm=0,Lm=Cm.length,Im;Im=Rm?Rm:Mm*Cm[Lm-1];for(var Bm=0,Nm=Lm-1,zm;Bm<=Nm;)if(Pm=_Mathfloor(Bm+(Nm-Bm)/2),zm=Cm[Pm]-Im,0>zm)Bm=Pm+1;else if(0<zm)Nm=Pm-1;else{Nm=Pm;break}if(Pm=Nm,Cm[Pm]===Im)return Pm/(Lm-1);var Dm=Cm[Pm],Fm=Cm[Pm+1],Om=(Im-Dm)/(Fm-Dm),km=(Pm+Om)/(Lm-1);return km},getTangent:function(Mm){var Rm=1e-4,Cm=Mm-Rm,Pm=Mm+Rm;0>Cm&&(Cm=0),1<Pm&&(Pm=1);var Lm=this.getPoint(Cm),Im=this.getPoint(Pm),Bm=Im.clone().sub(Lm);return Bm.normalize()},getTangentAt:function(Mm){var Rm=this.getUtoTmapping(Mm);return this.getTangent(Rm)},computeFrenetFrames:function(Mm,Rm){var Cm=new O,Pm=[],Lm=[],Im=[],Bm=new O,Nm=new F,zm,Dm,Fm;for(zm=0;zm<=Mm;zm++)Dm=zm/Mm,Pm[zm]=this.getTangentAt(Dm),Pm[zm].normalize();Lm[0]=new O,Im[0]=new O;var Um=_NumberMAX_VALUE,Om=_Mathabs(Pm[0].x),km=_Mathabs(Pm[0].y),Vm=_Mathabs(Pm[0].z);for(Om<=Um&&(Um=Om,Cm.set(1,0,0)),km<=Um&&(Um=km,Cm.set(0,1,0)),Vm<=Um&&Cm.set(0,0,1),Bm.crossVectors(Pm[0],Cm).normalize(),Lm[0].crossVectors(Pm[0],Bm),Im[0].crossVectors(Pm[0],Lm[0]),zm=1;zm<=Mm;zm++)Lm[zm]=Lm[zm-1].clone(),Im[zm]=Im[zm-1].clone(),Bm.crossVectors(Pm[zm-1],Pm[zm]),Bm.length()>_NumberEPSILON&&(Bm.normalize(),Fm=_Mathacos(yp.clamp(Pm[zm-1].dot(Pm[zm]),-1,1)),Lm[zm].applyMatrix4(Nm.makeRotationAxis(Bm,Fm))),Im[zm].crossVectors(Pm[zm],Lm[zm]);if(!0===Rm)for(Fm=_Mathacos(yp.clamp(Lm[0].dot(Lm[Mm]),-1,1)),Fm/=Mm,0<Pm[0].dot(Bm.crossVectors(Lm[0],Lm[Mm]))&&(Fm=-Fm),zm=1;zm<=Mm;zm++)Lm[zm].applyMatrix4(Nm.makeRotationAxis(Pm[zm],Fm*zm)),Im[zm].crossVectors(Pm[zm],Lm[zm]);return{tangents:Pm,normals:Lm,binormals:Im}},clone:function(){return new this.constructor().copy(this)},copy:function(Mm){return this.arcLengthDivisions=Mm.arcLengthDivisions,this},toJSON:function(){var Mm={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"},arcLengthDivisions:this.arcLengthDivisions,type:this.type};return Mm},fromJSON:function(Mm){return this.arcLengthDivisions=Mm.arcLengthDivisions,this}}),Io.prototype=Object.create(Lo.prototype),Io.prototype.constructor=Io,Io.prototype.isEllipseCurve=!0,Io.prototype.getPoint=function(Mm,Rm){for(var Cm=Rm||new D,Pm=2*_MathPI,Lm=this.aEndAngle-this.aStartAngle,Im=_Mathabs(Lm)<_NumberEPSILON;0>Lm;)Lm+=Pm;for(;Lm>Pm;)Lm-=Pm;Lm<_NumberEPSILON&&(Im?Lm=0:Lm=Pm),!0!==this.aClockwise||Im||(Lm==Pm?Lm=-Pm:Lm-=Pm);var Bm=this.aStartAngle+Mm*Lm,Nm=this.aX+this.xRadius*_Mathcos(Bm),zm=this.aY+this.yRadius*_Mathsin(Bm);if(0!==this.aRotation){var Dm=_Mathcos(this.aRotation),Fm=_Mathsin(this.aRotation),Um=Nm-this.aX,Om=zm-this.aY;Nm=Um*Dm-Om*Fm+this.aX,zm=Um*Fm+Om*Dm+this.aY}return Cm.set(Nm,zm)},Io.prototype.copy=function(Mm){return Lo.prototype.copy.call(this,Mm),this.aX=Mm.aX,this.aY=Mm.aY,this.xRadius=Mm.xRadius,this.yRadius=Mm.yRadius,this.aStartAngle=Mm.aStartAngle,this.aEndAngle=Mm.aEndAngle,this.aClockwise=Mm.aClockwise,this.aRotation=Mm.aRotation,this},Io.prototype.toJSON=function(){var Mm=Lo.prototype.toJSON.call(this);return Mm.aX=this.aX,Mm.aY=this.aY,Mm.xRadius=this.xRadius,Mm.yRadius=this.yRadius,Mm.aStartAngle=this.aStartAngle,Mm.aEndAngle=this.aEndAngle,Mm.aClockwise=this.aClockwise,Mm.aRotation=this.aRotation,Mm},Io.prototype.fromJSON=function(Mm){return Lo.prototype.fromJSON.call(this,Mm),this.aX=Mm.aX,this.aY=Mm.aY,this.xRadius=Mm.xRadius,this.yRadius=Mm.yRadius,this.aStartAngle=Mm.aStartAngle,this.aEndAngle=Mm.aEndAngle,this.aClockwise=Mm.aClockwise,this.aRotation=Mm.aRotation,this},Bo.prototype=Object.create(Io.prototype),Bo.prototype.constructor=Bo,Bo.prototype.isArcCurve=!0;var im=new O,nm=new No,sm=new No,lm=new No;zo.prototype=Object.create(Lo.prototype),zo.prototype.constructor=zo,zo.prototype.isCatmullRomCurve3=!0,zo.prototype.getPoint=function(Mm,Rm){var Cm=Rm||new O,Pm=this.points,Lm=Pm.length,Im=(Lm-(this.closed?0:1))*Mm,Bm=_Mathfloor(Im),Nm=Im-Bm;this.closed?Bm+=0<Bm?0:(_Mathfloor(_Mathabs(Bm)/Pm.length)+1)*Pm.length:0==Nm&&Bm===Lm-1&&(Bm=Lm-2,Nm=1);var zm,Dm,Fm,Um;if(this.closed||0<Bm?zm=Pm[(Bm-1)%Lm]:(im.subVectors(Pm[0],Pm[1]).add(Pm[0]),zm=im),Dm=Pm[Bm%Lm],Fm=Pm[(Bm+1)%Lm],this.closed||Bm+2<Lm?Um=Pm[(Bm+2)%Lm]:(im.subVectors(Pm[Lm-1],Pm[Lm-2]).add(Pm[Lm-1]),Um=im),"centripetal"===this.curveType||"chordal"===this.curveType){var Om="chordal"===this.curveType?0.5:0.25,km=_Mathpow(zm.distanceToSquared(Dm),Om),Vm=_Mathpow(Dm.distanceToSquared(Fm),Om),Gm=_Mathpow(Fm.distanceToSquared(Um),Om);1e-4>Vm&&(Vm=1),1e-4>km&&(km=Vm),1e-4>Gm&&(Gm=Vm),nm.initNonuniformCatmullRom(zm.x,Dm.x,Fm.x,Um.x,km,Vm,Gm),sm.initNonuniformCatmullRom(zm.y,Dm.y,Fm.y,Um.y,km,Vm,Gm),lm.initNonuniformCatmullRom(zm.z,Dm.z,Fm.z,Um.z,km,Vm,Gm)}else"catmullrom"===this.curveType&&(nm.initCatmullRom(zm.x,Dm.x,Fm.x,Um.x,this.tension),sm.initCatmullRom(zm.y,Dm.y,Fm.y,Um.y,this.tension),lm.initCatmullRom(zm.z,Dm.z,Fm.z,Um.z,this.tension));return Cm.set(nm.calc(Nm),sm.calc(Nm),lm.calc(Nm)),Cm},zo.prototype.copy=function(Mm){Lo.prototype.copy.call(this,Mm),this.points=[];for(var Rm=0,Cm=Mm.points.length,Pm;Rm<Cm;Rm++)Pm=Mm.points[Rm],this.points.push(Pm.clone());return this.closed=Mm.closed,this.curveType=Mm.curveType,this.tension=Mm.tension,this},zo.prototype.toJSON=function(){var Mm=Lo.prototype.toJSON.call(this);Mm.points=[];for(var Rm=0,Cm=this.points.length,Pm;Rm<Cm;Rm++)Pm=this.points[Rm],Mm.points.push(Pm.toArray());return Mm.closed=this.closed,Mm.curveType=this.curveType,Mm.tension=this.tension,Mm},zo.prototype.fromJSON=function(Mm){Lo.prototype.fromJSON.call(this,Mm),this.points=[];for(var Rm=0,Cm=Mm.points.length,Pm;Rm<Cm;Rm++)Pm=Mm.points[Rm],this.points.push(new O().fromArray(Pm));return this.closed=Mm.closed,this.curveType=Mm.curveType,this.tension=Mm.tension,this},qo.prototype=Object.create(Lo.prototype),qo.prototype.constructor=qo,qo.prototype.isCubicBezierCurve=!0,qo.prototype.getPoint=function(Mm,Rm){var Cm=Rm||new D,Pm=this.v0,Lm=this.v1,Im=this.v2,Bm=this.v3;return Cm.set(jo(Mm,Pm.x,Lm.x,Im.x,Bm.x),jo(Mm,Pm.y,Lm.y,Im.y,Bm.y)),Cm},qo.prototype.copy=function(Mm){return Lo.prototype.copy.call(this,Mm),this.v0.copy(Mm.v0),this.v1.copy(Mm.v1),this.v2.copy(Mm.v2),this.v3.copy(Mm.v3),this},qo.prototype.toJSON=function(){var Mm=Lo.prototype.toJSON.call(this);return Mm.v0=this.v0.toArray(),Mm.v1=this.v1.toArray(),Mm.v2=this.v2.toArray(),Mm.v3=this.v3.toArray(),Mm},qo.prototype.fromJSON=function(Mm){return Lo.prototype.fromJSON.call(this,Mm),this.v0.fromArray(Mm.v0),this.v1.fromArray(Mm.v1),this.v2.fromArray(Mm.v2),this.v3.fromArray(Mm.v3),this},Xo.prototype=Object.create(Lo.prototype),Xo.prototype.constructor=Xo,Xo.prototype.isCubicBezierCurve3=!0,Xo.prototype.getPoint=function(Mm,Rm){var Cm=Rm||new O,Pm=this.v0,Lm=this.v1,Im=this.v2,Bm=this.v3;return Cm.set(jo(Mm,Pm.x,Lm.x,Im.x,Bm.x),jo(Mm,Pm.y,Lm.y,Im.y,Bm.y),jo(Mm,Pm.z,Lm.z,Im.z,Bm.z)),Cm},Xo.prototype.copy=function(Mm){return Lo.prototype.copy.call(this,Mm),this.v0.copy(Mm.v0),this.v1.copy(Mm.v1),this.v2.copy(Mm.v2),this.v3.copy(Mm.v3),this},Xo.prototype.toJSON=function(){var Mm=Lo.prototype.toJSON.call(this);return Mm.v0=this.v0.toArray(),Mm.v1=this.v1.toArray(),Mm.v2=this.v2.toArray(),Mm.v3=this.v3.toArray(),Mm},Xo.prototype.fromJSON=function(Mm){return Lo.prototype.fromJSON.call(this,Mm),this.v0.fromArray(Mm.v0),this.v1.fromArray(Mm.v1),this.v2.fromArray(Mm.v2),this.v3.fromArray(Mm.v3),this},Yo.prototype=Object.create(Lo.prototype),Yo.prototype.constructor=Yo,Yo.prototype.isLineCurve=!0,Yo.prototype.getPoint=function(Mm,Rm){var Cm=Rm||new D;return 1===Mm?Cm.copy(this.v2):(Cm.copy(this.v2).sub(this.v1),Cm.multiplyScalar(Mm).add(this.v1)),Cm},Yo.prototype.getPointAt=function(Mm,Rm){return this.getPoint(Mm,Rm)},Yo.prototype.getTangent=function(){var Mm=this.v2.clone().sub(this.v1);return Mm.normalize()},Yo.prototype.copy=function(Mm){return Lo.prototype.copy.call(this,Mm),this.v1.copy(Mm.v1),this.v2.copy(Mm.v2),this},Yo.prototype.toJSON=function(){var Mm=Lo.prototype.toJSON.call(this);return Mm.v1=this.v1.toArray(),Mm.v2=this.v2.toArray(),Mm},Yo.prototype.fromJSON=function(Mm){return Lo.prototype.fromJSON.call(this,Mm),this.v1.fromArray(Mm.v1),this.v2.fromArray(Mm.v2),this},Zo.prototype=Object.create(Lo.prototype),Zo.prototype.constructor=Zo,Zo.prototype.isLineCurve3=!0,Zo.prototype.getPoint=function(Mm,Rm){var Cm=Rm||new O;return 1===Mm?Cm.copy(this.v2):(Cm.copy(this.v2).sub(this.v1),Cm.multiplyScalar(Mm).add(this.v1)),Cm},Zo.prototype.getPointAt=function(Mm,Rm){return this.getPoint(Mm,Rm)},Zo.prototype.copy=function(Mm){return Lo.prototype.copy.call(this,Mm),this.v1.copy(Mm.v1),this.v2.copy(Mm.v2),this},Zo.prototype.toJSON=function(){var Mm=Lo.prototype.toJSON.call(this);return Mm.v1=this.v1.toArray(),Mm.v2=this.v2.toArray(),Mm},Zo.prototype.fromJSON=function(Mm){return Lo.prototype.fromJSON.call(this,Mm),this.v1.fromArray(Mm.v1),this.v2.fromArray(Mm.v2),this},Jo.prototype=Object.create(Lo.prototype),Jo.prototype.constructor=Jo,Jo.prototype.isQuadraticBezierCurve=!0,Jo.prototype.getPoint=function(Mm,Rm){var Cm=Rm||new D,Pm=this.v0,Lm=this.v1,Im=this.v2;return Cm.set(ko(Mm,Pm.x,Lm.x,Im.x),ko(Mm,Pm.y,Lm.y,Im.y)),Cm},Jo.prototype.copy=function(Mm){return Lo.prototype.copy.call(this,Mm),this.v0.copy(Mm.v0),this.v1.copy(Mm.v1),this.v2.copy(Mm.v2),this},Jo.prototype.toJSON=function(){var Mm=Lo.prototype.toJSON.call(this);return Mm.v0=this.v0.toArray(),Mm.v1=this.v1.toArray(),Mm.v2=this.v2.toArray(),Mm},Jo.prototype.fromJSON=function(Mm){return Lo.prototype.fromJSON.call(this,Mm),this.v0.fromArray(Mm.v0),this.v1.fromArray(Mm.v1),this.v2.fromArray(Mm.v2),this},Qo.prototype=Object.create(Lo.prototype),Qo.prototype.constructor=Qo,Qo.prototype.isQuadraticBezierCurve3=!0,Qo.prototype.getPoint=function(Mm,Rm){var Cm=Rm||new O,Pm=this.v0,Lm=this.v1,Im=this.v2;return Cm.set(ko(Mm,Pm.x,Lm.x,Im.x),ko(Mm,Pm.y,Lm.y,Im.y),ko(Mm,Pm.z,Lm.z,Im.z)),Cm},Qo.prototype.copy=function(Mm){return Lo.prototype.copy.call(this,Mm),this.v0.copy(Mm.v0),this.v1.copy(Mm.v1),this.v2.copy(Mm.v2),this},Qo.prototype.toJSON=function(){var Mm=Lo.prototype.toJSON.call(this);return Mm.v0=this.v0.toArray(),Mm.v1=this.v1.toArray(),Mm.v2=this.v2.toArray(),Mm},Qo.prototype.fromJSON=function(Mm){return Lo.prototype.fromJSON.call(this,Mm),this.v0.fromArray(Mm.v0),this.v1.fromArray(Mm.v1),this.v2.fromArray(Mm.v2),this},Ko.prototype=Object.create(Lo.prototype),Ko.prototype.constructor=Ko,Ko.prototype.isSplineCurve=!0,Ko.prototype.getPoint=function(Mm,Rm){var Cm=Rm||new D,Pm=this.points,Lm=(Pm.length-1)*Mm,Im=_Mathfloor(Lm),Bm=Lm-Im,Nm=Pm[0===Im?Im:Im-1],zm=Pm[Im],Dm=Pm[Im>Pm.length-2?Pm.length-1:Im+1],Fm=Pm[Im>Pm.length-3?Pm.length-1:Im+2];return Cm.set(Do(Bm,Nm.x,zm.x,Dm.x,Fm.x),Do(Bm,Nm.y,zm.y,Dm.y,Fm.y)),Cm},Ko.prototype.copy=function(Mm){Lo.prototype.copy.call(this,Mm),this.points=[];for(var Rm=0,Cm=Mm.points.length,Pm;Rm<Cm;Rm++)Pm=Mm.points[Rm],this.points.push(Pm.clone());return this},Ko.prototype.toJSON=function(){var Mm=Lo.prototype.toJSON.call(this);Mm.points=[];for(var Rm=0,Cm=this.points.length,Pm;Rm<Cm;Rm++)Pm=this.points[Rm],Mm.points.push(Pm.toArray());return Mm},Ko.prototype.fromJSON=function(Mm){Lo.prototype.fromJSON.call(this,Mm),this.points=[];for(var Rm=0,Cm=Mm.points.length,Pm;Rm<Cm;Rm++)Pm=Mm.points[Rm],this.points.push(new D().fromArray(Pm));return this};var dm=Object.freeze({ArcCurve:Bo,CatmullRomCurve3:zo,CubicBezierCurve:qo,CubicBezierCurve3:Xo,EllipseCurve:Io,LineCurve:Yo,LineCurve3:Zo,QuadraticBezierCurve:Jo,QuadraticBezierCurve3:Qo,SplineCurve:Ko});$o.prototype=Object.assign(Object.create(Lo.prototype),{constructor:$o,add:function(Mm){this.curves.push(Mm)},closePath:function(){var Mm=this.curves[0].getPoint(0),Rm=this.curves[this.curves.length-1].getPoint(1);Mm.equals(Rm)||this.curves.push(new Yo(Rm,Mm))},getPoint:function(Mm){for(var Rm=Mm*this.getLength(),Cm=this.getCurveLengths(),Pm=0;Pm<Cm.length;){if(Cm[Pm]>=Rm){var Lm=Cm[Pm]-Rm,Im=this.curves[Pm],Bm=Im.getLength(),Nm=0===Bm?0:1-Lm/Bm;return Im.getPointAt(Nm)}Pm++}return null},getLength:function(){var Mm=this.getCurveLengths();return Mm[Mm.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var Mm=[],Rm=0,Cm=0,Pm=this.curves.length;Cm<Pm;Cm++)Rm+=this.curves[Cm].getLength(),Mm.push(Rm);return this.cacheLengths=Mm,Mm},getSpacedPoints:function(Mm){void 0===Mm&&(Mm=40);for(var Rm=[],Cm=0;Cm<=Mm;Cm++)Rm.push(this.getPoint(Cm/Mm));return this.autoClose&&Rm.push(Rm[0]),Rm},getPoints:function(Mm){Mm=Mm||12;for(var Rm=[],Pm=0,Lm=this.curves,Cm;Pm<Lm.length;Pm++)for(var Im=Lm[Pm],Bm=Im&&Im.isEllipseCurve?2*Mm:Im&&Im.isLineCurve?1:Im&&Im.isSplineCurve?Mm*Im.points.length:Mm,Nm=Im.getPoints(Bm),zm=0,Dm;zm<Nm.length;zm++)Dm=Nm[zm],Cm&&Cm.equals(Dm)||(Rm.push(Dm),Cm=Dm);return this.autoClose&&1<Rm.length&&!Rm[Rm.length-1].equals(Rm[0])&&Rm.push(Rm[0]),Rm},copy:function(Mm){Lo.prototype.copy.call(this,Mm),this.curves=[];for(var Rm=0,Cm=Mm.curves.length,Pm;Rm<Cm;Rm++)Pm=Mm.curves[Rm],this.curves.push(Pm.clone());return this.autoClose=Mm.autoClose,this},toJSON:function(){var Mm=Lo.prototype.toJSON.call(this);Mm.autoClose=this.autoClose,Mm.curves=[];for(var Rm=0,Cm=this.curves.length,Pm;Rm<Cm;Rm++)Pm=this.curves[Rm],Mm.curves.push(Pm.toJSON());return Mm},fromJSON:function(Mm){Lo.prototype.fromJSON.call(this,Mm),this.autoClose=Mm.autoClose,this.curves=[];for(var Rm=0,Cm=Mm.curves.length,Pm;Rm<Cm;Rm++)Pm=Mm.curves[Rm],this.curves.push(new dm[Pm.type]().fromJSON(Pm));return this}}),ai.prototype=Object.assign(Object.create($o.prototype),{constructor:ai,setFromPoints:function(Mm){this.moveTo(Mm[0].x,Mm[0].y);for(var Rm=1,Cm=Mm.length;Rm<Cm;Rm++)this.lineTo(Mm[Rm].x,Mm[Rm].y)},moveTo:function(Mm,Rm){this.currentPoint.set(Mm,Rm)},lineTo:function(Mm,Rm){var Cm=new Yo(this.currentPoint.clone(),new D(Mm,Rm));this.curves.push(Cm),this.currentPoint.set(Mm,Rm)},quadraticCurveTo:function(Mm,Rm,Cm,Pm){var Lm=new Jo(this.currentPoint.clone(),new D(Mm,Rm),new D(Cm,Pm));this.curves.push(Lm),this.currentPoint.set(Cm,Pm)},bezierCurveTo:function(Mm,Rm,Cm,Pm,Lm,Im){var Bm=new qo(this.currentPoint.clone(),new D(Mm,Rm),new D(Cm,Pm),new D(Lm,Im));this.curves.push(Bm),this.currentPoint.set(Lm,Im)},splineThru:function(Mm){var Rm=[this.currentPoint.clone()].concat(Mm),Cm=new Ko(Rm);this.curves.push(Cm),this.currentPoint.copy(Mm[Mm.length-1])},arc:function(Mm,Rm,Cm,Pm,Lm,Im){var Bm=this.currentPoint.x,Nm=this.currentPoint.y;this.absarc(Mm+Bm,Rm+Nm,Cm,Pm,Lm,Im)},absarc:function(Mm,Rm,Cm,Pm,Lm,Im){this.absellipse(Mm,Rm,Cm,Cm,Pm,Lm,Im)},ellipse:function(Mm,Rm,Cm,Pm,Lm,Im,Bm,Nm){var zm=this.currentPoint.x,Dm=this.currentPoint.y;this.absellipse(Mm+zm,Rm+Dm,Cm,Pm,Lm,Im,Bm,Nm)},absellipse:function(Mm,Rm,Cm,Pm,Lm,Im,Bm,Nm){var zm=new Io(Mm,Rm,Cm,Pm,Lm,Im,Bm,Nm);if(0<this.curves.length){var Dm=zm.getPoint(0);Dm.equals(this.currentPoint)||this.lineTo(Dm.x,Dm.y)}this.curves.push(zm);var Fm=zm.getPoint(1);this.currentPoint.copy(Fm)},copy:function(Mm){return $o.prototype.copy.call(this,Mm),this.currentPoint.copy(Mm.currentPoint),this},toJSON:function(){var Mm=$o.prototype.toJSON.call(this);return Mm.currentPoint=this.currentPoint.toArray(),Mm},fromJSON:function(Mm){return $o.prototype.fromJSON.call(this,Mm),this.currentPoint.fromArray(Mm.currentPoint),this}}),oi.prototype=Object.assign(Object.create(ai.prototype),{constructor:oi,getPointsHoles:function(Mm){for(var Rm=[],Cm=0,Pm=this.holes.length;Cm<Pm;Cm++)Rm[Cm]=this.holes[Cm].getPoints(Mm);return Rm},extractPoints:function(Mm){return{shape:this.getPoints(Mm),holes:this.getPointsHoles(Mm)}},copy:function(Mm){ai.prototype.copy.call(this,Mm),this.holes=[];for(var Rm=0,Cm=Mm.holes.length,Pm;Rm<Cm;Rm++)Pm=Mm.holes[Rm],this.holes.push(Pm.clone());return this},toJSON:function(){var Mm=ai.prototype.toJSON.call(this);Mm.uuid=this.uuid,Mm.holes=[];for(var Rm=0,Cm=this.holes.length,Pm;Rm<Cm;Rm++)Pm=this.holes[Rm],Mm.holes.push(Pm.toJSON());return Mm},fromJSON:function(Mm){ai.prototype.fromJSON.call(this,Mm),this.uuid=Mm.uuid,this.holes=[];for(var Rm=0,Cm=Mm.holes.length,Pm;Rm<Cm;Rm++)Pm=Mm.holes[Rm],this.holes.push(new ai().fromJSON(Pm));return this}}),di.prototype=Object.assign(Object.create($e.prototype),{constructor:di,isLight:!0,copy:function(Mm){return $e.prototype.copy.call(this,Mm),this.color.copy(Mm.color),this.intensity=Mm.intensity,this},toJSON:function(Mm){var Rm=$e.prototype.toJSON.call(this,Mm);return Rm.object.color=this.color.getHex(),Rm.object.intensity=this.intensity,void 0!==this.groundColor&&(Rm.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(Rm.object.distance=this.distance),void 0!==this.angle&&(Rm.object.angle=this.angle),void 0!==this.decay&&(Rm.object.decay=this.decay),void 0!==this.penumbra&&(Rm.object.penumbra=this.penumbra),void 0!==this.shadow&&(Rm.object.shadow=this.shadow.toJSON()),Rm}}),pi.prototype=Object.assign(Object.create(di.prototype),{constructor:pi,isHemisphereLight:!0,copy:function(Mm){return di.prototype.copy.call(this,Mm),this.groundColor.copy(Mm.groundColor),this}}),Object.assign(ci.prototype,{copy:function(Mm){return this.camera=Mm.camera.clone(),this.bias=Mm.bias,this.radius=Mm.radius,this.mapSize.copy(Mm.mapSize),this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var Mm={};return 0!==this.bias&&(Mm.bias=this.bias),1!==this.radius&&(Mm.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(Mm.mapSize=this.mapSize.toArray()),Mm.camera=this.camera.toJSON(!1).object,delete Mm.camera.matrix,Mm}}),ui.prototype=Object.assign(Object.create(ci.prototype),{constructor:ui,isSpotLightShadow:!0,update:function(Mm){var Rm=this.camera,Cm=2*yp.RAD2DEG*Mm.angle,Pm=this.mapSize.width/this.mapSize.height,Lm=Mm.distance||Rm.far;(Cm!==Rm.fov||Pm!==Rm.aspect||Lm!==Rm.far)&&(Rm.fov=Cm,Rm.aspect=Pm,Rm.far=Lm,Rm.updateProjectionMatrix())}}),mi.prototype=Object.assign(Object.create(di.prototype),{constructor:mi,isSpotLight:!0,copy:function(Mm){return di.prototype.copy.call(this,Mm),this.distance=Mm.distance,this.angle=Mm.angle,this.penumbra=Mm.penumbra,this.decay=Mm.decay,this.target=Mm.target.clone(),this.shadow=Mm.shadow.clone(),this}}),gi.prototype=Object.assign(Object.create(di.prototype),{constructor:gi,isPointLight:!0,copy:function(Mm){return di.prototype.copy.call(this,Mm),this.distance=Mm.distance,this.decay=Mm.decay,this.shadow=Mm.shadow.clone(),this}}),_i.prototype=Object.assign(Object.create(ci.prototype),{constructor:_i}),Ti.prototype=Object.assign(Object.create(di.prototype),{constructor:Ti,isDirectionalLight:!0,copy:function(Mm){return di.prototype.copy.call(this,Mm),this.target=Mm.target.clone(),this.shadow=Mm.shadow.clone(),this}}),Ei.prototype=Object.assign(Object.create(di.prototype),{constructor:Ei,isAmbientLight:!0}),Si.prototype=Object.assign(Object.create(di.prototype),{constructor:Si,isRectAreaLight:!0,copy:function(Mm){return di.prototype.copy.call(this,Mm),this.width=Mm.width,this.height=Mm.height,this},toJSON:function(Mm){var Rm=di.prototype.toJSON.call(this,Mm);return Rm.object.width=this.width,Rm.object.height=this.height,Rm}}),Ai.prototype=Object.assign(Object.create(Fi.prototype),{constructor:Ai,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:qd,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Mi.prototype=Object.assign(Object.create(Fi.prototype),{constructor:Mi,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:qd,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Object.assign(Ri.prototype,{evaluate:function(Mm){var Rm=this.parameterPositions,Cm=this._cachedIndex,Pm=Rm[Cm],Lm=Rm[Cm-1];validate_interval:{seek:{var Im;linear_scan:{forward_scan:if(!(Mm<Pm)){for(var Bm=Cm+2;;){if(void 0===Pm){if(Mm<Lm)break forward_scan;return Cm=Rm.length,this._cachedIndex=Cm,this.afterEnd_(Cm-1,Mm,Lm)}if(Cm===Bm)break;if(Lm=Pm,Pm=Rm[++Cm],Mm<Pm)break seek}Im=Rm.length;break linear_scan}if(!(Mm>=Lm)){var Nm=Rm[1];Mm<Nm&&(Cm=2,Lm=Nm);for(var Bm=Cm-2;;){if(void 0===Lm)return this._cachedIndex=0,this.beforeStart_(0,Mm,Pm);if(Cm===Bm)break;if(Pm=Lm,Lm=Rm[--Cm-1],Mm>=Lm)break seek}Im=Cm,Cm=0;break linear_scan}break validate_interval}for(;Cm<Im;){var zm=Cm+Im>>>1;Mm<Rm[zm]?Im=zm:Cm=zm+1}if(Pm=Rm[Cm],Lm=Rm[Cm-1],void 0===Lm)return this._cachedIndex=0,this.beforeStart_(0,Mm,Pm);if(void 0===Pm)return Cm=Rm.length,this._cachedIndex=Cm,this.afterEnd_(Cm-1,Lm,Mm)}this._cachedIndex=Cm,this.intervalChanged_(Cm,Lm,Pm)}return this.interpolate_(Cm,Lm,Mm,Pm)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(Mm){for(var Rm=this.resultBuffer,Cm=this.sampleValues,Pm=this.valueSize,Im=0;Im!==Pm;++Im)Rm[Im]=Cm[Mm*Pm+Im];return Rm},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(Ri.prototype,{beforeStart_:Ri.prototype.copySampleValue_,afterEnd_:Ri.prototype.copySampleValue_}),Ci.prototype=Object.assign(Object.create(Ri.prototype),{constructor:Ci,interpolate_:function(Mm,Rm,Cm,Pm){for(var Lm=this.resultBuffer,Im=this.sampleValues,Bm=this.valueSize,Nm=Mm*Bm,Dm=Nm+Bm;Nm!==Dm;Nm+=4)U.slerpFlat(Lm,0,Im,Nm-Bm,Im,Nm,(Cm-Rm)/(Pm-Rm));return Lm}}),Pi.prototype=Object.assign(Object.create(Fi.prototype),{constructor:Pi,ValueTypeName:"quaternion",DefaultInterpolation:Xd,InterpolantFactoryMethodLinear:function(Mm){return new Ci(this.times,this.values,this.getValueSize(),Mm)},InterpolantFactoryMethodSmooth:void 0}),Li.prototype=Object.assign(Object.create(Fi.prototype),{constructor:Li,ValueTypeName:"color"}),Ii.prototype=Object.assign(Object.create(Fi.prototype),{constructor:Ii,ValueTypeName:"number"}),Bi.prototype=Object.assign(Object.create(Ri.prototype),{constructor:Bi,DefaultSettings_:{endingStart:Zd,endingEnd:Zd},intervalChanged_:function(Mm,Rm,Cm){var Pm=this.parameterPositions,Lm=Mm-2,Im=Mm+1,Bm=Pm[Lm],Nm=Pm[Im];if(Bm===void 0)switch(this.getSettings_().endingStart){case Jd:Lm=Mm,Bm=2*Rm-Cm;break;case Qd:Lm=Pm.length-2,Bm=Rm+Pm[Lm]-Pm[Lm+1];break;default:Lm=Mm,Bm=Cm;}if(void 0===Nm)switch(this.getSettings_().endingEnd){case Jd:Im=Mm,Nm=2*Cm-Rm;break;case Qd:Im=1,Nm=Cm+Pm[1]-Pm[0];break;default:Im=Mm-1,Nm=Rm;}var zm=0.5*(Cm-Rm),Dm=this.valueSize;this._weightPrev=zm/(Rm-Bm),this._weightNext=zm/(Nm-Cm),this._offsetPrev=Lm*Dm,this._offsetNext=Im*Dm},interpolate_:function(Mm,Rm,Cm,Pm){for(var Lm=this.resultBuffer,Im=this.sampleValues,Bm=this.valueSize,Nm=Mm*Bm,Dm=this._offsetPrev,Fm=this._offsetNext,Um=this._weightPrev,Om=this._weightNext,km=(Cm-Rm)/(Pm-Rm),Vm=km*km,Gm=Vm*km,Ym=0;Ym!==Bm;++Ym)Lm[Ym]=(-Um*Gm+2*Um*Vm-Um*km)*Im[Dm+Ym]+((1+Um)*Gm+(-1.5-2*Um)*Vm+(-0.5+Um)*km+1)*Im[Nm-Bm+Ym]+((-1-Om)*Gm+(1.5+Om)*Vm+0.5*km)*Im[Nm+Ym]+(Om*Gm-Om*Vm)*Im[Fm+Ym];return Lm}}),Ni.prototype=Object.assign(Object.create(Ri.prototype),{constructor:Ni,interpolate_:function(Mm,Rm,Cm,Pm){for(var Lm=this.resultBuffer,Im=this.sampleValues,Bm=this.valueSize,Nm=Mm*Bm,Dm=(Cm-Rm)/(Pm-Rm),Um=0;Um!==Bm;++Um)Lm[Um]=Im[Nm-Bm+Um]*(1-Dm)+Im[Nm+Um]*Dm;return Lm}}),Di.prototype=Object.assign(Object.create(Ri.prototype),{constructor:Di,interpolate_:function(Mm){return this.copySampleValue_(Mm-1)}});var pm={arraySlice:function(Mm,Rm,Cm){return pm.isTypedArray(Mm)?new Mm.constructor(Mm.subarray(Rm,void 0===Cm?Mm.length:Cm)):Mm.slice(Rm,Cm)},convertArray:function(Mm,Rm,Cm){return Mm&&(Cm||Mm.constructor!==Rm)?"number"==typeof Rm.BYTES_PER_ELEMENT?new Rm(Mm):Array.prototype.slice.call(Mm):Mm},isTypedArray:function(Mm){return ArrayBuffer.isView(Mm)&&!(Mm instanceof DataView)},getKeyframeOrder:function(Mm){for(var Cm=Mm.length,Pm=Array(Cm),Lm=0;Lm!==Cm;++Lm)Pm[Lm]=Lm;return Pm.sort(function(Im,Bm){return Mm[Im]-Mm[Bm]}),Pm},sortedArray:function(Mm,Rm,Cm){for(var Pm=Mm.length,Lm=new Mm.constructor(Pm),Im=0,Bm=0,Nm;Bm!==Pm;++Im){Nm=Cm[Im]*Rm;for(var zm=0;zm!==Rm;++zm)Lm[Bm++]=Mm[Nm+zm]}return Lm},flattenJSON:function(Mm,Rm,Cm,Pm){for(var Lm=1,Im=Mm[0];Im!==void 0&&Im[Pm]===void 0;)Im=Mm[Lm++];if(void 0!==Im){var Bm=Im[Pm];if(void 0!==Bm)if(Array.isArray(Bm))do Bm=Im[Pm],void 0!==Bm&&(Rm.push(Im.time),Cm.push.apply(Cm,Bm)),Im=Mm[Lm++];while(void 0!==Im);else if(void 0!==Bm.toArray)do Bm=Im[Pm],void 0!==Bm&&(Rm.push(Im.time),Bm.toArray(Cm,Cm.length)),Im=Mm[Lm++];while(void 0!==Im);else do Bm=Im[Pm],void 0!==Bm&&(Rm.push(Im.time),Cm.push(Bm)),Im=Mm[Lm++];while(void 0!==Im)}}};Object.assign(Fi,{parse:function(Mm){if(Mm.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var Rm=Fi._getTrackTypeForValueTypeName(Mm.type);if(Mm.times===void 0){var Cm=[],Pm=[];pm.flattenJSON(Mm.keys,Cm,Pm,"value"),Mm.times=Cm,Mm.values=Pm}return void 0===Rm.parse?new Rm(Mm.name,Mm.times,Mm.values,Mm.interpolation):Rm.parse(Mm)},toJSON:function(Mm){var Rm=Mm.constructor,Cm;if(void 0!==Rm.toJSON)Cm=Rm.toJSON(Mm);else{Cm={name:Mm.name,times:pm.convertArray(Mm.times,Array),values:pm.convertArray(Mm.values,Array)};var Pm=Mm.getInterpolation();Pm!==Mm.DefaultInterpolation&&(Cm.interpolation=Pm)}return Cm.type=Mm.ValueTypeName,Cm},_getTrackTypeForValueTypeName:function(Mm){switch(Mm.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Ii;case"vector":case"vector2":case"vector3":case"vector4":return Ui;case"color":return Li;case"quaternion":return Pi;case"bool":case"boolean":return Mi;case"string":return Ai;}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+Mm)}}),Object.assign(Fi.prototype,{constructor:Fi,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:Xd,InterpolantFactoryMethodDiscrete:function(Mm){return new Di(this.times,this.values,this.getValueSize(),Mm)},InterpolantFactoryMethodLinear:function(Mm){return new Ni(this.times,this.values,this.getValueSize(),Mm)},InterpolantFactoryMethodSmooth:function(Mm){return new Bi(this.times,this.values,this.getValueSize(),Mm)},setInterpolation:function(Mm){var Rm;if(Mm===qd?Rm=this.InterpolantFactoryMethodDiscrete:Mm===Xd?Rm=this.InterpolantFactoryMethodLinear:Mm===Yd?Rm=this.InterpolantFactoryMethodSmooth:void 0,void 0===Rm){var Cm="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant)if(Mm!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(Cm);return void console.warn("THREE.KeyframeTrack:",Cm)}this.createInterpolant=Rm},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return qd;case this.InterpolantFactoryMethodLinear:return Xd;case this.InterpolantFactoryMethodSmooth:return Yd;}},getValueSize:function(){return this.values.length/this.times.length},shift:function(Mm){if(0!==Mm)for(var Rm=this.times,Cm=0,Pm=Rm.length;Cm!==Pm;++Cm)Rm[Cm]+=Mm;return this},scale:function(Mm){if(1!==Mm)for(var Rm=this.times,Cm=0,Pm=Rm.length;Cm!==Pm;++Cm)Rm[Cm]*=Mm;return this},trim:function(Mm,Rm){for(var Cm=this.times,Pm=Cm.length,Lm=0,Im=Pm-1;Lm!==Pm&&Cm[Lm]<Mm;)++Lm;for(;-1!=Im&&Cm[Im]>Rm;)--Im;if(++Im,0!=Lm||Im!==Pm){Lm>=Im&&(Im=_Mathmax(Im,1),Lm=Im-1);var Bm=this.getValueSize();this.times=pm.arraySlice(Cm,Lm,Im),this.values=pm.arraySlice(this.values,Lm*Bm,Im*Bm)}return this},validate:function(){var Mm=!0,Rm=this.getValueSize();0!=Rm-_Mathfloor(Rm)&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),Mm=!1);var Cm=this.times,Pm=this.values,Lm=Cm.length;0===Lm&&(console.error("THREE.KeyframeTrack: Track is empty.",this),Mm=!1);for(var Im=null,Bm=0,Nm;Bm!==Lm;Bm++){if(Nm=Cm[Bm],"number"==typeof Nm&&isNaN(Nm)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,Bm,Nm),Mm=!1;break}if(null!=Im&&Im>Nm){console.error("THREE.KeyframeTrack: Out of order keys.",this,Bm,Nm,Im),Mm=!1;break}Im=Nm}if(Pm!==void 0&&pm.isTypedArray(Pm))for(var Bm=0,zm=Pm.length,Dm;Bm!==zm;++Bm)if(Dm=Pm[Bm],isNaN(Dm)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,Bm,Dm),Mm=!1;break}return Mm},optimize:function(){for(var Mm=this.times,Rm=this.values,Cm=this.getValueSize(),Pm=this.getInterpolation()===Yd,Lm=1,Im=Mm.length-1,Bm=1;Bm<Im;++Bm){var Nm=!1,zm=Mm[Bm],Dm=Mm[Bm+1];if(zm!==Dm&&(1!==Bm||zm!==zm[0]))if(!Pm){for(var Fm=Bm*Cm,km=0,Vm;km!==Cm;++km)if(Vm=Rm[Fm+km],Vm!==Rm[Fm-Cm+km]||Vm!==Rm[Fm+Cm+km]){Nm=!0;break}}else Nm=!0;if(Nm){if(Bm!==Lm){Mm[Lm]=Mm[Bm];for(var Gm=Bm*Cm,Hm=Lm*Cm,km=0;km!==Cm;++km)Rm[Hm+km]=Rm[Gm+km]}++Lm}}if(0<Im){Mm[Lm]=Mm[Im];for(var Gm=Im*Cm,Hm=Lm*Cm,km=0;km!==Cm;++km)Rm[Hm+km]=Rm[Gm+km];++Lm}return Lm!==Mm.length&&(this.times=pm.arraySlice(Mm,0,Lm),this.values=pm.arraySlice(Rm,0,Lm*Cm)),this}}),Ui.prototype=Object.assign(Object.create(Fi.prototype),{constructor:Ui,ValueTypeName:"vector"}),Object.assign(Oi,{parse:function(Mm){for(var Rm=[],Cm=Mm.tracks,Pm=1/(Mm.fps||1),Lm=0,Im=Cm.length;Lm!==Im;++Lm)Rm.push(Fi.parse(Cm[Lm]).scale(Pm));return new Oi(Mm.name,Mm.duration,Rm)},toJSON:function(Mm){for(var Rm=[],Cm=Mm.tracks,Pm={name:Mm.name,duration:Mm.duration,tracks:Rm},Lm=0,Im=Cm.length;Lm!==Im;++Lm)Rm.push(Fi.toJSON(Cm[Lm]));return Pm},CreateFromMorphTargetSequence:function(Mm,Rm,Cm,Pm){for(var Lm=Rm.length,Im=[],Bm=0;Bm<Lm;Bm++){var Nm=[],zm=[];Nm.push((Bm+Lm-1)%Lm,Bm,(Bm+1)%Lm),zm.push(0,1,0);var Dm=pm.getKeyframeOrder(Nm);Nm=pm.sortedArray(Nm,1,Dm),zm=pm.sortedArray(zm,1,Dm),Pm||0!==Nm[0]||(Nm.push(Lm),zm.push(zm[0])),Im.push(new Ii(".morphTargetInfluences["+Rm[Bm].name+"]",Nm,zm).scale(1/Cm))}return new Oi(Mm,-1,Im)},findByName:function(Mm,Rm){var Cm=Mm;if(!Array.isArray(Mm)){var Pm=Mm;Cm=Pm.geometry&&Pm.geometry.animations||Pm.animations}for(var Lm=0;Lm<Cm.length;Lm++)if(Cm[Lm].name===Rm)return Cm[Lm];return null},CreateClipsFromMorphTargetSequences:function(Mm,Rm,Cm){for(var Pm={},Lm=/^([\w-]*?)([\d]+)$/,Im=0,Bm=Mm.length;Im<Bm;Im++){var Nm=Mm[Im],zm=Nm.name.match(Lm);if(zm&&1<zm.length){var Dm=zm[1],Fm=Pm[Dm];Fm||(Pm[Dm]=Fm=[]),Fm.push(Nm)}}var Um=[];for(var Dm in Pm)Um.push(Oi.CreateFromMorphTargetSequence(Dm,Pm[Dm],Rm,Cm));return Um},parseAnimation:function(Mm,Rm){if(!Mm)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var Cm=function(Xm,Ym,Zm,Jm,Qm){if(0!==Zm.length){var Km=[],$m=[];pm.flattenJSON(Zm,Km,$m,Jm),0!==Km.length&&Qm.push(new Xm(Ym,Km,$m))}},Pm=[],Lm=Mm.name||"default",Im=Mm.length||-1,Bm=Mm.fps||30,Nm=Mm.hierarchy||[],zm=0,Dm;zm<Nm.length;zm++)if(Dm=Nm[zm].keys,Dm&&0!==Dm.length)if(Dm[0].morphTargets){for(var Fm={},Um=0;Um<Dm.length;Um++)if(Dm[Um].morphTargets)for(var Om=0;Om<Dm[Um].morphTargets.length;Om++)Fm[Dm[Um].morphTargets[Om]]=-1;for(var km in Fm){for(var Vm=[],Gm=[],Om=0,Hm;Om!==Dm[Um].morphTargets.length;++Om)Hm=Dm[Um],Vm.push(Hm.time),Gm.push(Hm.morphTarget===km?1:0);Pm.push(new Ii(".morphTargetInfluence["+km+"]",Vm,Gm))}Im=Fm.length*(Bm||1)}else{var Wm=".bones["+Rm[zm].name+"]";Cm(Ui,Wm+".position",Dm,"pos",Pm),Cm(Pi,Wm+".quaternion",Dm,"rot",Pm),Cm(Ui,Wm+".scale",Dm,"scl",Pm)}if(0===Pm.length)return null;var jm=new Oi(Lm,Im,Pm);return jm}}),Object.assign(Oi.prototype,{resetDuration:function(){for(var Mm=this.tracks,Rm=0,Cm=0,Pm=Mm.length,Lm;Cm!==Pm;++Cm)Lm=this.tracks[Cm],Rm=_Mathmax(Rm,Lm.times[Lm.times.length-1]);this.duration=Rm},trim:function(){for(var Mm=0;Mm<this.tracks.length;Mm++)this.tracks[Mm].trim(0,this.duration);return this},optimize:function(){for(var Mm=0;Mm<this.tracks.length;Mm++)this.tracks[Mm].optimize();return this}}),Object.assign(ki.prototype,{load:function(Mm,Rm,Cm,Pm){var Lm=this,Im=new Ao(Lm.manager);Im.load(Mm,function(Bm){Rm(Lm.parse(JSON.parse(Bm)))},Cm,Pm)},setTextures:function(Mm){this.textures=Mm},parse:function(Mm){function Rm(Im){return void 0===Cm[Im]&&console.warn("THREE.MaterialLoader: Undefined texture",Im),Cm[Im]}var Cm=this.textures,Pm=new $u[Mm.type];if(void 0!==Mm.uuid&&(Pm.uuid=Mm.uuid),void 0!==Mm.name&&(Pm.name=Mm.name),void 0!==Mm.color&&Pm.color.setHex(Mm.color),void 0!==Mm.roughness&&(Pm.roughness=Mm.roughness),void 0!==Mm.metalness&&(Pm.metalness=Mm.metalness),void 0!==Mm.emissive&&Pm.emissive.setHex(Mm.emissive),void 0!==Mm.specular&&Pm.specular.setHex(Mm.specular),void 0!==Mm.shininess&&(Pm.shininess=Mm.shininess),void 0!==Mm.clearCoat&&(Pm.clearCoat=Mm.clearCoat),void 0!==Mm.clearCoatRoughness&&(Pm.clearCoatRoughness=Mm.clearCoatRoughness),void 0!==Mm.uniforms&&(Pm.uniforms=Mm.uniforms),void 0!==Mm.vertexShader&&(Pm.vertexShader=Mm.vertexShader),void 0!==Mm.fragmentShader&&(Pm.fragmentShader=Mm.fragmentShader),void 0!==Mm.vertexColors&&(Pm.vertexColors=Mm.vertexColors),void 0!==Mm.fog&&(Pm.fog=Mm.fog),void 0!==Mm.flatShading&&(Pm.flatShading=Mm.flatShading),void 0!==Mm.blending&&(Pm.blending=Mm.blending),void 0!==Mm.side&&(Pm.side=Mm.side),void 0!==Mm.opacity&&(Pm.opacity=Mm.opacity),void 0!==Mm.transparent&&(Pm.transparent=Mm.transparent),void 0!==Mm.alphaTest&&(Pm.alphaTest=Mm.alphaTest),void 0!==Mm.depthTest&&(Pm.depthTest=Mm.depthTest),void 0!==Mm.depthWrite&&(Pm.depthWrite=Mm.depthWrite),void 0!==Mm.colorWrite&&(Pm.colorWrite=Mm.colorWrite),void 0!==Mm.wireframe&&(Pm.wireframe=Mm.wireframe),void 0!==Mm.wireframeLinewidth&&(Pm.wireframeLinewidth=Mm.wireframeLinewidth),void 0!==Mm.wireframeLinecap&&(Pm.wireframeLinecap=Mm.wireframeLinecap),void 0!==Mm.wireframeLinejoin&&(Pm.wireframeLinejoin=Mm.wireframeLinejoin),void 0!==Mm.rotation&&(Pm.rotation=Mm.rotation),1!==Mm.linewidth&&(Pm.linewidth=Mm.linewidth),void 0!==Mm.dashSize&&(Pm.dashSize=Mm.dashSize),void 0!==Mm.gapSize&&(Pm.gapSize=Mm.gapSize),void 0!==Mm.scale&&(Pm.scale=Mm.scale),void 0!==Mm.skinning&&(Pm.skinning=Mm.skinning),void 0!==Mm.morphTargets&&(Pm.morphTargets=Mm.morphTargets),void 0!==Mm.dithering&&(Pm.dithering=Mm.dithering),void 0!==Mm.visible&&(Pm.visible=Mm.visible),void 0!==Mm.userData&&(Pm.userData=Mm.userData),void 0!==Mm.shading&&(Pm.flatShading=1===Mm.shading),void 0!==Mm.size&&(Pm.size=Mm.size),void 0!==Mm.sizeAttenuation&&(Pm.sizeAttenuation=Mm.sizeAttenuation),void 0!==Mm.map&&(Pm.map=Rm(Mm.map)),void 0!==Mm.alphaMap&&(Pm.alphaMap=Rm(Mm.alphaMap),Pm.transparent=!0),void 0!==Mm.bumpMap&&(Pm.bumpMap=Rm(Mm.bumpMap)),void 0!==Mm.bumpScale&&(Pm.bumpScale=Mm.bumpScale),void 0!==Mm.normalMap&&(Pm.normalMap=Rm(Mm.normalMap)),void 0!==Mm.normalScale){var Lm=Mm.normalScale;!1===Array.isArray(Lm)&&(Lm=[Lm,Lm]),Pm.normalScale=new D().fromArray(Lm)}return void 0!==Mm.displacementMap&&(Pm.displacementMap=Rm(Mm.displacementMap)),void 0!==Mm.displacementScale&&(Pm.displacementScale=Mm.displacementScale),void 0!==Mm.displacementBias&&(Pm.displacementBias=Mm.displacementBias),void 0!==Mm.roughnessMap&&(Pm.roughnessMap=Rm(Mm.roughnessMap)),void 0!==Mm.metalnessMap&&(Pm.metalnessMap=Rm(Mm.metalnessMap)),void 0!==Mm.emissiveMap&&(Pm.emissiveMap=Rm(Mm.emissiveMap)),void 0!==Mm.emissiveIntensity&&(Pm.emissiveIntensity=Mm.emissiveIntensity),void 0!==Mm.specularMap&&(Pm.specularMap=Rm(Mm.specularMap)),void 0!==Mm.envMap&&(Pm.envMap=Rm(Mm.envMap)),void 0!==Mm.reflectivity&&(Pm.reflectivity=Mm.reflectivity),void 0!==Mm.lightMap&&(Pm.lightMap=Rm(Mm.lightMap)),void 0!==Mm.lightMapIntensity&&(Pm.lightMapIntensity=Mm.lightMapIntensity),void 0!==Mm.aoMap&&(Pm.aoMap=Rm(Mm.aoMap)),void 0!==Mm.aoMapIntensity&&(Pm.aoMapIntensity=Mm.aoMapIntensity),void 0!==Mm.gradientMap&&(Pm.gradientMap=Rm(Mm.gradientMap)),Pm}}),Object.assign(Vi.prototype,{load:function(Mm,Rm,Cm,Pm){var Lm=this,Im=new Ao(Lm.manager);Im.load(Mm,function(Bm){Rm(Lm.parse(JSON.parse(Bm)))},Cm,Pm)},parse:function(Mm){var Rm=new Tt,Cm=Mm.data.index;if(Cm!==void 0){var Pm=new um[Cm.type](Cm.array);Rm.setIndex(new it(Pm,1))}var Lm=Mm.data.attributes;for(var Im in Lm){var Bm=Lm[Im],Pm=new um[Bm.type](Bm.array);Rm.addAttribute(Im,new it(Pm,Bm.itemSize,Bm.normalized))}var Nm=Mm.data.groups||Mm.data.drawcalls||Mm.data.offsets;if(Nm!==void 0)for(var zm=0,Dm=Nm.length,Fm;zm!==Dm;++zm)Fm=Nm[zm],Rm.addGroup(Fm.start,Fm.count,Fm.materialIndex);var Um=Mm.data.boundingSphere;if(Um!==void 0){var Om=new O;Um.center!==void 0&&Om.fromArray(Um.center),Rm.boundingSphere=new qe(Om,Um.radius)}return Rm}});var um={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"==typeof Uint8ClampedArray?Uint8Array:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};Gi.Handlers={handlers:[],add:function(Mm,Rm){this.handlers.push(Mm,Rm)},get:function(Mm){for(var Rm=this.handlers,Cm=0,Pm=Rm.length;Cm<Pm;Cm+=2){var Lm=Rm[Cm],Im=Rm[Cm+1];if(Lm.test(Mm))return Im}return null}},Object.assign(Gi.prototype,{crossOrigin:void 0,initMaterials:function(Mm,Rm,Cm){for(var Pm=[],Lm=0;Lm<Mm.length;++Lm)Pm[Lm]=this.createMaterial(Mm[Lm],Rm,Cm);return Pm},createMaterial:function(){var Mm={NoBlending:Js,NormalBlending:Qs,AdditiveBlending:Ks,SubtractiveBlending:$s,MultiplyBlending:el,CustomBlending:rl},Rm=new Fe,Cm=new Po,Pm=new ki;return function(Im,Bm,Nm){function zm(km,Vm,Gm,Hm,Wm){var jm=Bm+km,Xm=Gi.Handlers.get(jm),Ym;null===Xm?(Cm.setCrossOrigin(Nm),Ym=Cm.load(jm)):Ym=Xm.load(jm),void 0!==Vm&&(Ym.repeat.fromArray(Vm),1!==Vm[0]&&(Ym.wrapS=td),1!==Vm[1]&&(Ym.wrapT=td)),void 0!==Gm&&Ym.offset.fromArray(Gm),void 0!==Hm&&("repeat"===Hm[0]&&(Ym.wrapS=td),"mirror"===Hm[0]&&(Ym.wrapS=od),"repeat"===Hm[1]&&(Ym.wrapT=td),"mirror"===Hm[1]&&(Ym.wrapT=od)),void 0!==Wm&&(Ym.anisotropy=Wm);var Zm=yp.generateUUID();return Dm[Zm]=Ym,Zm}var Dm={},Fm={uuid:yp.generateUUID(),type:"MeshLambertMaterial"};for(var Um in Im){var Om=Im[Um];switch(Um){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":Fm.name=Om;break;case"blending":Fm.blending=Mm[Om];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",Um,"is no longer supported.");break;case"colorDiffuse":Fm.color=Rm.fromArray(Om).getHex();break;case"colorSpecular":Fm.specular=Rm.fromArray(Om).getHex();break;case"colorEmissive":Fm.emissive=Rm.fromArray(Om).getHex();break;case"specularCoef":Fm.shininess=Om;break;case"shading":"basic"===Om.toLowerCase()&&(Fm.type="MeshBasicMaterial"),"phong"===Om.toLowerCase()&&(Fm.type="MeshPhongMaterial"),"standard"===Om.toLowerCase()&&(Fm.type="MeshStandardMaterial");break;case"mapDiffuse":Fm.map=zm(Om,Im.mapDiffuseRepeat,Im.mapDiffuseOffset,Im.mapDiffuseWrap,Im.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":Fm.emissiveMap=zm(Om,Im.mapEmissiveRepeat,Im.mapEmissiveOffset,Im.mapEmissiveWrap,Im.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":Fm.lightMap=zm(Om,Im.mapLightRepeat,Im.mapLightOffset,Im.mapLightWrap,Im.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":Fm.aoMap=zm(Om,Im.mapAORepeat,Im.mapAOOffset,Im.mapAOWrap,Im.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":Fm.bumpMap=zm(Om,Im.mapBumpRepeat,Im.mapBumpOffset,Im.mapBumpWrap,Im.mapBumpAnisotropy);break;case"mapBumpScale":Fm.bumpScale=Om;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":Fm.normalMap=zm(Om,Im.mapNormalRepeat,Im.mapNormalOffset,Im.mapNormalWrap,Im.mapNormalAnisotropy);break;case"mapNormalFactor":Fm.normalScale=[Om,Om];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":Fm.specularMap=zm(Om,Im.mapSpecularRepeat,Im.mapSpecularOffset,Im.mapSpecularWrap,Im.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":Fm.metalnessMap=zm(Om,Im.mapMetalnessRepeat,Im.mapMetalnessOffset,Im.mapMetalnessWrap,Im.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":Fm.roughnessMap=zm(Om,Im.mapRoughnessRepeat,Im.mapRoughnessOffset,Im.mapRoughnessWrap,Im.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":Fm.alphaMap=zm(Om,Im.mapAlphaRepeat,Im.mapAlphaOffset,Im.mapAlphaWrap,Im.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":Fm.side=Hs;break;case"doubleSided":Fm.side=Ws;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),Fm.opacity=Om;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":Fm[Um]=Om;break;case"vertexColors":!0===Om&&(Fm.vertexColors=Zs),"face"===Om&&(Fm.vertexColors=Ys);break;default:console.error("THREE.Loader.createMaterial: Unsupported",Um,Om);}}return"MeshBasicMaterial"===Fm.type&&delete Fm.emissive,"MeshPhongMaterial"!==Fm.type&&delete Fm.specular,1>Fm.opacity&&(Fm.transparent=!0),Pm.setTextures(Dm),Pm.parse(Fm)}}()});var gm={decodeText:function(Mm){if("undefined"!=typeof TextDecoder)return new TextDecoder().decode(Mm);for(var Rm="",Cm=0,Pm=Mm.length;Cm<Pm;Cm++)Rm+=String.fromCharCode(Mm[Cm]);return Rm},extractUrlBase:function(Mm){var Rm=Mm.split("/");return 1===Rm.length?"./":(Rm.pop(),Rm.join("/")+"/")}};Object.assign(Hi.prototype,{load:function(Mm,Rm,Cm,Pm){var Lm=this,Im=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:gm.extractUrlBase(Mm),Bm=new Ao(this.manager);Bm.setWithCredentials(this.withCredentials),Bm.load(Mm,function(Nm){var zm=JSON.parse(Nm),Dm=zm.metadata;if(Dm!==void 0){var Fm=Dm.type;if(Fm!==void 0){if("object"===Fm.toLowerCase())return void console.error("THREE.JSONLoader: "+Mm+" should be loaded with THREE.ObjectLoader instead.");if("scene"===Fm.toLowerCase())return void console.error("THREE.JSONLoader: "+Mm+" should be loaded with THREE.SceneLoader instead.")}}var Um=Lm.parse(zm,Im);Rm(Um.geometry,Um.materials)},Cm,Pm)},setTexturePath:function(Mm){this.texturePath=Mm},parse:function(){function Mm(Lm,Im){function Bm(gg,fg){return gg&1<<fg}var lg=Lm.faces,dg=Lm.vertices,pg=Lm.normals,cg=Lm.colors,ug=Lm.scale,mg=0,Nm,zm,Dm,Fm,Um,Om,km,Vm,Gm,Hm,Wm,jm,Xm,Ym,Zm,Jm,Qm,Km,$m,eg,tg,rg,ag,og,ig,ng,sg;if(Lm.uvs!==void 0){for(Nm=0;Nm<Lm.uvs.length;Nm++)Lm.uvs[Nm].length&&mg++;for(Nm=0;Nm<mg;Nm++)Im.faceVertexUvs[Nm]=[]}for(Fm=0,Um=dg.length;Fm<Um;)Km=new O,Km.x=dg[Fm++]*ug,Km.y=dg[Fm++]*ug,Km.z=dg[Fm++]*ug,Im.vertices.push(Km);for(Fm=0,Um=lg.length;Fm<Um;)if(Hm=lg[Fm++],Wm=Bm(Hm,0),jm=Bm(Hm,1),Xm=Bm(Hm,3),Ym=Bm(Hm,4),Zm=Bm(Hm,5),Jm=Bm(Hm,6),Qm=Bm(Hm,7),Wm){if(eg=new rt,eg.a=lg[Fm],eg.b=lg[Fm+1],eg.c=lg[Fm+3],tg=new rt,tg.a=lg[Fm+1],tg.b=lg[Fm+2],tg.c=lg[Fm+3],Fm+=4,jm&&(Gm=lg[Fm++],eg.materialIndex=Gm,tg.materialIndex=Gm),Dm=Im.faces.length,Xm)for(Nm=0;Nm<mg;Nm++)for(og=Lm.uvs[Nm],Im.faceVertexUvs[Nm][Dm]=[],Im.faceVertexUvs[Nm][Dm+1]=[],zm=0;4>zm;zm++)Vm=lg[Fm++],ng=og[2*Vm],sg=og[2*Vm+1],ig=new D(ng,sg),2!==zm&&Im.faceVertexUvs[Nm][Dm].push(ig),0!==zm&&Im.faceVertexUvs[Nm][Dm+1].push(ig);if(Ym&&(km=3*lg[Fm++],eg.normal.set(pg[km++],pg[km++],pg[km]),tg.normal.copy(eg.normal)),Zm)for(Nm=0;4>Nm;Nm++)km=3*lg[Fm++],ag=new O(pg[km++],pg[km++],pg[km]),2!==Nm&&eg.vertexNormals.push(ag),0!==Nm&&tg.vertexNormals.push(ag);if(Jm&&(Om=lg[Fm++],rg=cg[Om],eg.color.setHex(rg),tg.color.setHex(rg)),Qm)for(Nm=0;4>Nm;Nm++)Om=lg[Fm++],rg=cg[Om],2!==Nm&&eg.vertexColors.push(new Fe(rg)),0!==Nm&&tg.vertexColors.push(new Fe(rg));Im.faces.push(eg),Im.faces.push(tg)}else{if($m=new rt,$m.a=lg[Fm++],$m.b=lg[Fm++],$m.c=lg[Fm++],jm&&(Gm=lg[Fm++],$m.materialIndex=Gm),Dm=Im.faces.length,Xm)for(Nm=0;Nm<mg;Nm++)for(og=Lm.uvs[Nm],Im.faceVertexUvs[Nm][Dm]=[],zm=0;3>zm;zm++)Vm=lg[Fm++],ng=og[2*Vm],sg=og[2*Vm+1],ig=new D(ng,sg),Im.faceVertexUvs[Nm][Dm].push(ig);if(Ym&&(km=3*lg[Fm++],$m.normal.set(pg[km++],pg[km++],pg[km])),Zm)for(Nm=0;3>Nm;Nm++)km=3*lg[Fm++],ag=new O(pg[km++],pg[km++],pg[km]),$m.vertexNormals.push(ag);if(Jm&&(Om=lg[Fm++],$m.color.setHex(cg[Om])),Qm)for(Nm=0;3>Nm;Nm++)Om=lg[Fm++],$m.vertexColors.push(new Fe(cg[Om]));Im.faces.push($m)}}function Rm(Lm,Im){var Bm=Lm.influencesPerVertex===void 0?2:Lm.influencesPerVertex;if(Lm.skinWeights)for(var Nm=0,zm=Lm.skinWeights.length;Nm<zm;Nm+=Bm){var Dm=Lm.skinWeights[Nm],Fm=1<Bm?Lm.skinWeights[Nm+1]:0,Um=2<Bm?Lm.skinWeights[Nm+2]:0,Om=3<Bm?Lm.skinWeights[Nm+3]:0;Im.skinWeights.push(new W(Dm,Fm,Um,Om))}if(Lm.skinIndices)for(var Nm=0,zm=Lm.skinIndices.length;Nm<zm;Nm+=Bm){var km=Lm.skinIndices[Nm],Vm=1<Bm?Lm.skinIndices[Nm+1]:0,Gm=2<Bm?Lm.skinIndices[Nm+2]:0,Hm=3<Bm?Lm.skinIndices[Nm+3]:0;Im.skinIndices.push(new W(km,Vm,Gm,Hm))}Im.bones=Lm.bones,Im.bones&&0<Im.bones.length&&(Im.skinWeights.length!==Im.skinIndices.length||Im.skinIndices.length!==Im.vertices.length)&&console.warn("When skinning, number of vertices ("+Im.vertices.length+"), skinIndices ("+Im.skinIndices.length+"), and skinWeights ("+Im.skinWeights.length+") should match.")}function Cm(Lm,Im){var Bm=Lm.scale;if(Lm.morphTargets!==void 0)for(var Nm=0,zm=Lm.morphTargets.length;Nm<zm;Nm++){Im.morphTargets[Nm]={},Im.morphTargets[Nm].name=Lm.morphTargets[Nm].name,Im.morphTargets[Nm].vertices=[];for(var Dm=Im.morphTargets[Nm].vertices,Fm=Lm.morphTargets[Nm].vertices,Um=0,Om=Fm.length,km;Um<Om;Um+=3)km=new O,km.x=Fm[Um]*Bm,km.y=Fm[Um+1]*Bm,km.z=Fm[Um+2]*Bm,Dm.push(km)}if(void 0!==Lm.morphColors&&0<Lm.morphColors.length){console.warn("THREE.JSONLoader: \"morphColors\" no longer supported. Using them as face colors.");for(var Vm=Im.faces,Gm=Lm.morphColors[0].colors,Nm=0,zm=Vm.length;Nm<zm;Nm++)Vm[Nm].color.fromArray(Gm,3*Nm)}}function Pm(Lm,Im){var Bm=[],Nm=[];Lm.animation!==void 0&&Nm.push(Lm.animation),Lm.animations!==void 0&&(Lm.animations.length?Nm=Nm.concat(Lm.animations):Nm.push(Lm.animations));for(var zm=0,Dm;zm<Nm.length;zm++)Dm=Oi.parseAnimation(Nm[zm],Im.bones),Dm&&Bm.push(Dm);if(Im.morphTargets){var Fm=Oi.CreateClipsFromMorphTargetSequences(Im.morphTargets,10);Bm=Bm.concat(Fm)}0<Bm.length&&(Im.animations=Bm)}return function(Lm,Im){void 0!==Lm.data&&(Lm=Lm.data),Lm.scale=void 0===Lm.scale?1:1/Lm.scale;var Bm=new ot;if(Mm(Lm,Bm),Rm(Lm,Bm),Cm(Lm,Bm),Pm(Lm,Bm),Bm.computeFaceNormals(),Bm.computeBoundingSphere(),void 0===Lm.materials||0===Lm.materials.length)return{geometry:Bm};var Nm=Gi.prototype.initMaterials(Lm.materials,Im,this.crossOrigin);return{geometry:Bm,materials:Nm}}}()}),Object.assign(Wi.prototype,{load:function(Mm,Rm,Cm,Pm){""===this.texturePath&&(this.texturePath=Mm.substring(0,Mm.lastIndexOf("/")+1));var Lm=this,Im=new Ao(Lm.manager);Im.load(Mm,function(Bm){var Nm=null;try{Nm=JSON.parse(Bm)}catch(Dm){return void 0!==Pm&&Pm(Dm),void console.error("THREE:ObjectLoader: Can't parse "+Mm+".",Dm.message)}var zm=Nm.metadata;return void 0===zm||void 0===zm.type||"geometry"===zm.type.toLowerCase()?void console.error("THREE.ObjectLoader: Can't load "+Mm+". Use THREE.JSONLoader instead."):void Lm.parse(Nm,Rm)},Cm,Pm)},setTexturePath:function(Mm){this.texturePath=Mm},setCrossOrigin:function(Mm){this.crossOrigin=Mm},parse:function(Mm,Rm){var Cm=this.parseShape(Mm.shapes),Pm=this.parseGeometries(Mm.geometries,Cm),Lm=this.parseImages(Mm.images,function(){void 0!==Rm&&Rm(Nm)}),Im=this.parseTextures(Mm.textures,Lm),Bm=this.parseMaterials(Mm.materials,Im),Nm=this.parseObject(Mm.object,Pm,Bm);return Mm.animations&&(Nm.animations=this.parseAnimations(Mm.animations)),(void 0===Mm.images||0===Mm.images.length)&&void 0!==Rm&&Rm(Nm),Nm},parseShape:function(Mm){var Rm={};if(Mm!==void 0)for(var Cm=0,Pm=Mm.length,Lm;Cm<Pm;Cm++)Lm=new oi().fromJSON(Mm[Cm]),Rm[Lm.uuid]=Lm;return Rm},parseGeometries:function(Mm,Rm){var Cm={};if(Mm!==void 0)for(var Pm=new Hi,Lm=new Vi,Im=0,Bm=Mm.length;Im<Bm;Im++){var zm=Mm[Im],Nm;switch(zm.type){case"PlaneGeometry":case"PlaneBufferGeometry":Nm=new Ku[zm.type](zm.width,zm.height,zm.widthSegments,zm.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":Nm=new Ku[zm.type](zm.width,zm.height,zm.depth,zm.widthSegments,zm.heightSegments,zm.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":Nm=new Ku[zm.type](zm.radius,zm.segments,zm.thetaStart,zm.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":Nm=new Ku[zm.type](zm.radiusTop,zm.radiusBottom,zm.height,zm.radialSegments,zm.heightSegments,zm.openEnded,zm.thetaStart,zm.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":Nm=new Ku[zm.type](zm.radius,zm.height,zm.radialSegments,zm.heightSegments,zm.openEnded,zm.thetaStart,zm.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":Nm=new Ku[zm.type](zm.radius,zm.widthSegments,zm.heightSegments,zm.phiStart,zm.phiLength,zm.thetaStart,zm.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":Nm=new Ku[zm.type](zm.radius,zm.detail);break;case"RingGeometry":case"RingBufferGeometry":Nm=new Ku[zm.type](zm.innerRadius,zm.outerRadius,zm.thetaSegments,zm.phiSegments,zm.thetaStart,zm.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":Nm=new Ku[zm.type](zm.radius,zm.tube,zm.radialSegments,zm.tubularSegments,zm.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":Nm=new Ku[zm.type](zm.radius,zm.tube,zm.tubularSegments,zm.radialSegments,zm.p,zm.q);break;case"LatheGeometry":case"LatheBufferGeometry":Nm=new Ku[zm.type](zm.points,zm.segments,zm.phiStart,zm.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":Nm=new Ku[zm.type](zm.vertices,zm.indices,zm.radius,zm.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var Dm=[],Im=0,Bm=zm.shapes.length,Fm;Im<Bm;Im++)Fm=Rm[zm.shapes[Im]],Dm.push(Fm);Nm=new Ku[zm.type](Dm,zm.curveSegments);break;case"BufferGeometry":Nm=Lm.parse(zm);break;case"Geometry":Nm=Pm.parse(zm,this.texturePath).geometry;break;default:console.warn("THREE.ObjectLoader: Unsupported geometry type \""+zm.type+"\"");continue;}Nm.uuid=zm.uuid,void 0!==zm.name&&(Nm.name=zm.name),Cm[zm.uuid]=Nm}return Cm},parseMaterials:function(Mm,Rm){var Cm={};if(Mm!==void 0){var Pm=new ki;Pm.setTextures(Rm);for(var Lm=0,Im=Mm.length,Bm;Lm<Im;Lm++)if(Bm=Mm[Lm],"MultiMaterial"===Bm.type){for(var Nm=[],zm=0;zm<Bm.materials.length;zm++)Nm.push(Pm.parse(Bm.materials[zm]));Cm[Bm.uuid]=Nm}else Cm[Bm.uuid]=Pm.parse(Bm)}return Cm},parseAnimations:function(Mm){for(var Rm=[],Cm=0,Pm;Cm<Mm.length;Cm++)Pm=Oi.parse(Mm[Cm]),Rm.push(Pm);return Rm},parseImages:function(Mm,Rm){function Cm(Um){return Pm.manager.itemStart(Um),Bm.load(Um,function(){Pm.manager.itemEnd(Um)},void 0,function(){Pm.manager.itemEnd(Um),Pm.manager.itemError(Um)})}var Pm=this,Lm={};if(Mm!==void 0&&0<Mm.length){var Im=new So(Rm),Bm=new Ro(Im);Bm.setCrossOrigin(this.crossOrigin);for(var Nm=0,zm=Mm.length;Nm<zm;Nm++){var Dm=Mm[Nm],Fm=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(Dm.url)?Dm.url:Pm.texturePath+Dm.url;Lm[Dm.uuid]=Cm(Fm)}}return Lm},parseTextures:function(Mm,Rm){function Cm(zm,Dm){return"number"==typeof zm?zm:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",zm),Dm[zm])}var Pm={};if(Mm!==void 0)for(var Lm=0,Im=Mm.length,Bm;Lm<Im;Lm++){Bm=Mm[Lm],void 0===Bm.image&&console.warn("THREE.ObjectLoader: No \"image\" specified for",Bm.uuid),void 0===Rm[Bm.image]&&console.warn("THREE.ObjectLoader: Undefined image",Bm.image);var Nm=new H(Rm[Bm.image]);Nm.needsUpdate=!0,Nm.uuid=Bm.uuid,void 0!==Bm.name&&(Nm.name=Bm.name),void 0!==Bm.mapping&&(Nm.mapping=Cm(Bm.mapping,fm)),void 0!==Bm.offset&&Nm.offset.fromArray(Bm.offset),void 0!==Bm.repeat&&Nm.repeat.fromArray(Bm.repeat),void 0!==Bm.center&&Nm.center.fromArray(Bm.center),void 0!==Bm.rotation&&(Nm.rotation=Bm.rotation),void 0!==Bm.wrap&&(Nm.wrapS=Cm(Bm.wrap[0],hm),Nm.wrapT=Cm(Bm.wrap[1],hm)),void 0!==Bm.minFilter&&(Nm.minFilter=Cm(Bm.minFilter,ym)),void 0!==Bm.magFilter&&(Nm.magFilter=Cm(Bm.magFilter,ym)),void 0!==Bm.anisotropy&&(Nm.anisotropy=Bm.anisotropy),void 0!==Bm.flipY&&(Nm.flipY=Bm.flipY),Pm[Bm.uuid]=Nm}return Pm},parseObject:function(){var Mm=new F;return function(Cm,Pm,Lm){function Im(Hm){return void 0===Pm[Hm]&&console.warn("THREE.ObjectLoader: Undefined geometry",Hm),Pm[Hm]}function Bm(Hm){if(void 0!==Hm){if(Array.isArray(Hm)){for(var Wm=[],jm=0,Xm=Hm.length,Ym;jm<Xm;jm++)Ym=Hm[jm],void 0===Lm[Ym]&&console.warn("THREE.ObjectLoader: Undefined material",Ym),Wm.push(Lm[Ym]);return Wm}return void 0===Lm[Hm]&&console.warn("THREE.ObjectLoader: Undefined material",Hm),Lm[Hm]}}var Nm;switch(Cm.type){case"Scene":Nm=new Mr,void 0!==Cm.background&&_NumberisInteger(Cm.background)&&(Nm.background=new Fe(Cm.background)),void 0!==Cm.fog&&("Fog"===Cm.fog.type?Nm.fog=new wr(Cm.fog.color,Cm.fog.near,Cm.fog.far):"FogExp2"===Cm.fog.type&&(Nm.fog=new Ar(Cm.fog.color,Cm.fog.density)));break;case"PerspectiveCamera":Nm=new yr(Cm.fov,Cm.aspect,Cm.near,Cm.far),void 0!==Cm.focus&&(Nm.focus=Cm.focus),void 0!==Cm.zoom&&(Nm.zoom=Cm.zoom),void 0!==Cm.filmGauge&&(Nm.filmGauge=Cm.filmGauge),void 0!==Cm.filmOffset&&(Nm.filmOffset=Cm.filmOffset),void 0!==Cm.view&&(Nm.view=Object.assign({},Cm.view));break;case"OrthographicCamera":Nm=new tt(Cm.left,Cm.right,Cm.top,Cm.bottom,Cm.near,Cm.far);break;case"AmbientLight":Nm=new Ei(Cm.color,Cm.intensity);break;case"DirectionalLight":Nm=new Ti(Cm.color,Cm.intensity);break;case"PointLight":Nm=new gi(Cm.color,Cm.intensity,Cm.distance,Cm.decay);break;case"RectAreaLight":Nm=new Si(Cm.color,Cm.intensity,Cm.width,Cm.height);break;case"SpotLight":Nm=new mi(Cm.color,Cm.intensity,Cm.distance,Cm.angle,Cm.penumbra,Cm.decay);break;case"HemisphereLight":Nm=new pi(Cm.color,Cm.groundColor,Cm.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var zm=Im(Cm.geometry),Dm=Bm(Cm.material);Nm=zm.bones&&0<zm.bones.length?new Nr(zm,Dm):new Bt(zm,Dm);break;case"LOD":Nm=new Lr;break;case"Line":Nm=new Dr(Im(Cm.geometry),Bm(Cm.material),Cm.mode);break;case"LineLoop":Nm=new Ur(Im(Cm.geometry),Bm(Cm.material));break;case"LineSegments":Nm=new Fr(Im(Cm.geometry),Bm(Cm.material));break;case"PointCloud":case"Points":Nm=new kr(Im(Cm.geometry),Bm(Cm.material));break;case"Sprite":Nm=new Pr(Bm(Cm.material));break;case"Group":Nm=new Vr;break;default:Nm=new $e;}if(Nm.uuid=Cm.uuid,void 0!==Cm.name&&(Nm.name=Cm.name),void 0===Cm.matrix?(void 0!==Cm.position&&Nm.position.fromArray(Cm.position),void 0!==Cm.rotation&&Nm.rotation.fromArray(Cm.rotation),void 0!==Cm.quaternion&&Nm.quaternion.fromArray(Cm.quaternion),void 0!==Cm.scale&&Nm.scale.fromArray(Cm.scale)):(Mm.fromArray(Cm.matrix),Mm.decompose(Nm.position,Nm.quaternion,Nm.scale)),void 0!==Cm.castShadow&&(Nm.castShadow=Cm.castShadow),void 0!==Cm.receiveShadow&&(Nm.receiveShadow=Cm.receiveShadow),Cm.shadow&&(void 0!==Cm.shadow.bias&&(Nm.shadow.bias=Cm.shadow.bias),void 0!==Cm.shadow.radius&&(Nm.shadow.radius=Cm.shadow.radius),void 0!==Cm.shadow.mapSize&&Nm.shadow.mapSize.fromArray(Cm.shadow.mapSize),void 0!==Cm.shadow.camera&&(Nm.shadow.defaultCamera=this.parseObject(Cm.shadow.camera))),void 0!==Cm.visible&&(Nm.visible=Cm.visible),void 0!==Cm.userData&&(Nm.userData=Cm.userData),void 0!==Cm.children)for(var Fm=Cm.children,Um=0; Um<Fm.length; Um++)Nm.add(this.parseObject(Fm[Um],Pm,Lm));if("LOD"===Cm.type)for(var Om=Cm.levels,km=0; km<Om.length; km++){var Vm=Om[km],Gm=Nm.getObjectByProperty("uuid",Vm.object);void 0!==Gm&&Nm.addLevel(Gm,Vm.distance)}return Nm}}()});var fm={UVMapping:Xl,CubeReflectionMapping:Yl,CubeRefractionMapping:Zl,EquirectangularReflectionMapping:Jl,EquirectangularRefractionMapping:Ql,SphericalReflectionMapping:Kl,CubeUVReflectionMapping:$l,CubeUVRefractionMapping:ed},hm={RepeatWrapping:td,ClampToEdgeWrapping:rd,MirroredRepeatWrapping:od},ym={NearestFilter:nd,NearestMipMapNearestFilter:sd,NearestMipMapLinearFilter:dd,LinearFilter:pd,LinearMipMapNearestFilter:cd,LinearMipMapLinearFilter:ud};ji.prototype={constructor:ji,setOptions:function(Rm){return this.options=Rm,this},load:function(Rm,Cm,Pm,Lm){Rm===void 0&&(Rm=""),this.path!==void 0&&(Rm=this.path+Rm);var Im=this,Bm=rm.get(Rm);return void 0===Bm?void fetch(Rm).then(function(Nm){return Nm.blob()}).then(function(Nm){return createImageBitmap(Nm,Im.options)}).then(function(Nm){rm.add(Rm,Nm),Cm&&Cm(Nm),Im.manager.itemEnd(Rm)}).catch(function(Nm){Lm&&Lm(Nm),Im.manager.itemEnd(Rm),Im.manager.itemError(Rm)}):(Im.manager.itemStart(Rm),setTimeout(function(){Cm&&Cm(Bm),Im.manager.itemEnd(Rm)},0),Bm)},setCrossOrigin:function(){return this},setPath:function(Mm){return this.path=Mm,this}},Object.assign(Xi.prototype,{moveTo:function(Mm,Rm){this.currentPath=new ai,this.subPaths.push(this.currentPath),this.currentPath.moveTo(Mm,Rm)},lineTo:function(Mm,Rm){this.currentPath.lineTo(Mm,Rm)},quadraticCurveTo:function(Mm,Rm,Cm,Pm){this.currentPath.quadraticCurveTo(Mm,Rm,Cm,Pm)},bezierCurveTo:function(Mm,Rm,Cm,Pm,Lm,Im){this.currentPath.bezierCurveTo(Mm,Rm,Cm,Pm,Lm,Im)},splineThru:function(Mm){this.currentPath.splineThru(Mm)},toShapes:function(Mm,Rm){function Cm(ig){for(var ng=[],sg=0,lg=ig.length;sg<lg;sg++){var dg=ig[sg],pg=new oi;pg.curves=dg.curves,ng.push(pg)}return ng}function Pm(ig,ng){for(var sg=ng.length,lg=!1,dg=sg-1,pg=0;pg<sg;dg=pg++){var cg=ng[dg],ug=ng[pg],mg=ug.x-cg.x,gg=ug.y-cg.y;if(_Mathabs(gg)>_NumberEPSILON){if(0>gg&&(cg=ng[pg],mg=-mg,ug=ng[dg],gg=-gg),ig.y<cg.y||ig.y>ug.y)continue;if(ig.y!==cg.y){var fg=gg*(ig.x-cg.x)-mg*(ig.y-cg.y);if(0==fg)return!0;if(0>fg)continue;lg=!lg}else if(ig.x===cg.x)return!0}else{if(ig.y!==cg.y)continue;if(ug.x<=ig.x&&ig.x<=cg.x||cg.x<=ig.x&&ig.x<=ug.x)return!0}}return lg}var Lm=Qu.isClockWise,Im=this.subPaths;if(0===Im.length)return[];if(!0===Rm)return Cm(Im);var Dm=[],Bm,Nm,zm;if(1===Im.length)return Nm=Im[0],zm=new oi,zm.curves=Nm.curves,Dm.push(zm),Dm;var Fm=!Lm(Im[0].getPoints());Fm=Mm?!Fm:Fm;var Um=[],Om=[],km=[],Vm=0,Gm;Om[Vm]=void 0,km[Vm]=[];for(var Hm=0,Wm=Im.length;Hm<Wm;Hm++)Nm=Im[Hm],Gm=Nm.getPoints(),Bm=Lm(Gm),Bm=Mm?!Bm:Bm,Bm?(!Fm&&Om[Vm]&&Vm++,Om[Vm]={s:new oi,p:Gm},Om[Vm].s.curves=Nm.curves,Fm&&Vm++,km[Vm]=[]):km[Vm].push({h:Nm,p:Gm[0]});if(!Om[0])return Cm(Im);if(1<Om.length){for(var jm=!1,Xm=[],Ym=0,Zm=Om.length;Ym<Zm;Ym++)Um[Ym]=[];for(var Ym=0,Zm=Om.length,Jm;Ym<Zm;Ym++){Jm=km[Ym];for(var Qm=0;Qm<Jm.length;Qm++){for(var Km=Jm[Qm],$m=!0,eg=0;eg<Om.length;eg++)Pm(Km.p,Om[eg].p)&&(Ym!==eg&&Xm.push({froms:Ym,tos:eg,hole:Qm}),$m?($m=!1,Um[eg].push(Km)):jm=!0);$m&&Um[Ym].push(Km)}}0<Xm.length&&!jm&&(km=Um)}for(var Hm=0,rg=Om.length,tg;Hm<rg;Hm++){zm=Om[Hm].s,Dm.push(zm),tg=km[Hm];for(var ag=0,og=tg.length;ag<og;ag++)zm.holes.push(tg[ag].h)}return Dm}}),Object.assign(Yi.prototype,{isFont:!0,generateShapes:function(Mm,Rm,Cm){function Pm(Fm){for(var Um=(Fm+"").split(""),Om=Rm/Im.resolution,km=(Im.boundingBox.yMax-Im.boundingBox.yMin+Im.underlineThickness)*Om,Vm=0,Gm=0,Hm=[],Wm=0,jm;Wm<Um.length;Wm++)if(jm=Um[Wm],"\n"===jm)Vm=0,Gm-=km;else{var Xm=Lm(jm,Om,Vm,Gm);Vm+=Xm.offsetX,Hm.push(Xm.path)}return Hm}function Lm(Fm,Um,Om,km){var Vm=Im.glyphs[Fm]||Im.glyphs["?"];if(Vm){var Gm=new Xi,Hm=[],Wm,jm,Xm,Ym,Zm,Jm,Qm,Km,$m,eg,tg;if(Vm.o)for(var rg=Vm._cachedOutline||(Vm._cachedOutline=Vm.o.split(" ")),ag=0,og=rg.length,ig;ag<og;)ig=rg[ag++],"m"===ig?(Wm=rg[ag++]*Um+Om,jm=rg[ag++]*Um+km,Gm.moveTo(Wm,jm)):"l"===ig?(Wm=rg[ag++]*Um+Om,jm=rg[ag++]*Um+km,Gm.lineTo(Wm,jm)):"q"===ig?(Xm=rg[ag++]*Um+Om,Ym=rg[ag++]*Um+km,Qm=rg[ag++]*Um+Om,Km=rg[ag++]*Um+km,Gm.quadraticCurveTo(Qm,Km,Xm,Ym),tg=Hm[Hm.length-1],tg&&(Zm=tg.x,Jm=tg.y)):"b"===ig?(Xm=rg[ag++]*Um+Om,Ym=rg[ag++]*Um+km,Qm=rg[ag++]*Um+Om,Km=rg[ag++]*Um+km,$m=rg[ag++]*Um+Om,eg=rg[ag++]*Um+km,Gm.bezierCurveTo(Qm,Km,$m,eg,Xm,Ym),tg=Hm[Hm.length-1],tg&&(Zm=tg.x,Jm=tg.y)):void 0;return{offsetX:Vm.ha*Um,path:Gm}}}Rm===void 0&&(Rm=100),Cm===void 0&&(Cm=4);for(var Im=this.data,Bm=Pm(Mm),Nm=[],zm=0,Dm=Bm.length;zm<Dm;zm++)Array.prototype.push.apply(Nm,Bm[zm].toShapes());return Nm}}),Object.assign(Zi.prototype,{load:function(Mm,Rm,Cm,Pm){var Lm=this,Im=new Ao(this.manager);Im.setPath(this.path),Im.load(Mm,function(Bm){var Nm;try{Nm=JSON.parse(Bm)}catch(Dm){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),Nm=JSON.parse(Bm.substring(65,Bm.length-2))}var zm=Lm.parse(Nm);Rm&&Rm(zm)},Cm,Pm)},parse:function(Mm){return new Yi(Mm)},setPath:function(Mm){return this.path=Mm,this}});var _m,xm={getContext:function(){return void 0==_m&&(_m=new(window.AudioContext||window.webkitAudioContext)),_m},setContext:function(Mm){_m=Mm}};Object.assign(Ji.prototype,{load:function(Mm,Rm,Cm,Pm){var Lm=new Ao(this.manager);Lm.setResponseType("arraybuffer"),Lm.load(Mm,function(Im){var Bm=xm.getContext();Bm.decodeAudioData(Im,function(Nm){Rm(Nm)})},Cm,Pm)}}),Object.assign(Qi.prototype,{update:function(){var Mm,Rm,Cm,Pm,Lm,Im,Bm,Nm,zm=new F,Dm=new F;return function(Um){var Om=Mm!==this||Rm!==Um.focus||Cm!==Um.fov||Pm!==Um.aspect*this.aspect||Lm!==Um.near||Im!==Um.far||Bm!==Um.zoom||Nm!==this.eyeSep;if(Om){Mm=this,Rm=Um.focus,Cm=Um.fov,Pm=Um.aspect*this.aspect,Lm=Um.near,Im=Um.far,Bm=Um.zoom;var km=Um.projectionMatrix.clone();Nm=this.eyeSep/2;var Vm=Nm*Lm/Rm,Gm=Lm*_Mathtan(0.5*(yp.DEG2RAD*Cm))/Bm,Hm,Wm;Dm.elements[12]=-Nm,zm.elements[12]=Nm,Hm=-Gm*Pm+Vm,Wm=Gm*Pm+Vm,km.elements[0]=2*Lm/(Wm-Hm),km.elements[8]=(Wm+Hm)/(Wm-Hm),this.cameraL.projectionMatrix.copy(km),Hm=-Gm*Pm-Vm,Wm=Gm*Pm-Vm,km.elements[0]=2*Lm/(Wm-Hm),km.elements[8]=(Wm+Hm)/(Wm-Hm),this.cameraR.projectionMatrix.copy(km)}this.cameraL.matrixWorld.copy(Um.matrixWorld).multiply(Dm),this.cameraR.matrixWorld.copy(Um.matrixWorld).multiply(zm)}}()}),Ki.prototype=Object.create($e.prototype),Ki.prototype.constructor=Ki,$i.prototype=Object.assign(Object.create($e.prototype),{constructor:$i,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(Mm){null===this.filter?this.gain.disconnect(this.context.destination):(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)),this.filter=Mm,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(Mm){this.gain.gain.value=Mm},updateMatrixWorld:function(){var Mm=new O,Rm=new U,Cm=new O,Pm=new O;return function(Im){$e.prototype.updateMatrixWorld.call(this,Im);var Bm=this.context.listener,Nm=this.up;this.matrixWorld.decompose(Mm,Rm,Cm),Pm.set(0,0,-1).applyQuaternion(Rm),Bm.positionX?(Bm.positionX.setValueAtTime(Mm.x,this.context.currentTime),Bm.positionY.setValueAtTime(Mm.y,this.context.currentTime),Bm.positionZ.setValueAtTime(Mm.z,this.context.currentTime),Bm.forwardX.setValueAtTime(Pm.x,this.context.currentTime),Bm.forwardY.setValueAtTime(Pm.y,this.context.currentTime),Bm.forwardZ.setValueAtTime(Pm.z,this.context.currentTime),Bm.upX.setValueAtTime(Nm.x,this.context.currentTime),Bm.upY.setValueAtTime(Nm.y,this.context.currentTime),Bm.upZ.setValueAtTime(Nm.z,this.context.currentTime)):(Bm.setPosition(Mm.x,Mm.y,Mm.z),Bm.setOrientation(Pm.x,Pm.y,Pm.z,Nm.x,Nm.y,Nm.z))}}()}),tn.prototype=Object.assign(Object.create($e.prototype),{constructor:tn,getOutput:function(){return this.gain},setNodeSource:function(Mm){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=Mm,this.connect(),this},setBuffer:function(Mm){return this.buffer=Mm,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");var Mm=this.context.createBufferSource();return Mm.buffer=this.buffer,Mm.loop=this.loop,Mm.onended=this.onEnded.bind(this),Mm.playbackRate.setValueAtTime(this.playbackRate,this.startTime),this.startTime=this.context.currentTime,Mm.start(this.startTime,this.offset),this.isPlaying=!0,this.source=Mm,this.connect()},pause:function(){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(!0===this.isPlaying&&(this.source.stop(),this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this)},stop:function(){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),this.offset=0,this.isPlaying=!1,this)},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var Mm=1,Rm=this.filters.length;Mm<Rm;Mm++)this.filters[Mm-1].connect(this.filters[Mm]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var Mm=1,Rm=this.filters.length;Mm<Rm;Mm++)this.filters[Mm-1].disconnect(this.filters[Mm]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(Mm){return Mm||(Mm=[]),!0===this.isPlaying?(this.disconnect(),this.filters=Mm,this.connect()):this.filters=Mm,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(Mm){return this.setFilters(Mm?[Mm]:[])},setPlaybackRate:function(Mm){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.playbackRate=Mm,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this)},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(Mm){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.loop=Mm,!0===this.isPlaying&&(this.source.loop=this.loop),this)},getVolume:function(){return this.gain.gain.value},setVolume:function(Mm){return this.gain.gain.value=Mm,this}}),rn.prototype=Object.assign(Object.create(tn.prototype),{constructor:rn,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(Mm){this.panner.refDistance=Mm},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(Mm){this.panner.rolloffFactor=Mm},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(Mm){this.panner.distanceModel=Mm},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(Mm){this.panner.maxDistance=Mm},updateMatrixWorld:function(){var Mm=new O;return function(Cm){$e.prototype.updateMatrixWorld.call(this,Cm),Mm.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(Mm.x,Mm.y,Mm.z)}}()}),Object.assign(on.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var Mm=0,Rm=this.getFrequencyData(),Cm=0;Cm<Rm.length;Cm++)Mm+=Rm[Cm];return Mm/Rm.length}}),Object.assign(nn.prototype,{accumulate:function(Mm,Rm){var Cm=this.buffer,Pm=this.valueSize,Lm=Mm*Pm+Pm,Im=this.cumulativeWeight;if(0===Im){for(var Bm=0;Bm!==Pm;++Bm)Cm[Lm+Bm]=Cm[Bm];Im=Rm}else{Im+=Rm;var Nm=Rm/Im;this._mixBufferRegion(Cm,Lm,0,Nm,Pm)}this.cumulativeWeight=Im},apply:function(Mm){var Rm=this.valueSize,Cm=this.buffer,Pm=Mm*Rm+Rm,Lm=this.cumulativeWeight,Im=this.binding;if(this.cumulativeWeight=0,1>Lm){this._mixBufferRegion(Cm,Pm,3*Rm,1-Lm,Rm)}for(var Nm=Rm;Nm!==Rm+Rm;++Nm)if(Cm[Nm]!==Cm[Nm+Rm]){Im.setValue(Cm,Pm);break}},saveOriginalState:function(){var Mm=this.binding,Rm=this.buffer,Cm=this.valueSize,Pm=3*Cm;Mm.getValue(Rm,Pm);for(var Lm=Cm;Lm!==Pm;++Lm)Rm[Lm]=Rm[Pm+Lm%Cm];this.cumulativeWeight=0},restoreOriginalState:function(){var Mm=3*this.valueSize;this.binding.setValue(this.buffer,Mm)},_select:function(Mm,Rm,Cm,Pm,Lm){if(0.5<=Pm)for(var Im=0;Im!==Lm;++Im)Mm[Rm+Im]=Mm[Cm+Im]},_slerp:function(Mm,Rm,Cm,Pm){U.slerpFlat(Mm,Rm,Mm,Rm,Mm,Cm,Pm)},_lerp:function(Mm,Rm,Cm,Pm,Lm){for(var Bm=0,Nm;Bm!==Lm;++Bm)Nm=Rm+Bm,Mm[Nm]=Mm[Nm]*(1-Pm)+Mm[Cm+Bm]*Pm}}),Object.assign(sn.prototype,{getValue:function(Mm,Rm){this.bind();var Cm=this._targetGroup.nCachedObjects_,Pm=this._bindings[Cm];Pm!==void 0&&Pm.getValue(Mm,Rm)},setValue:function(Mm,Rm){for(var Cm=this._bindings,Pm=this._targetGroup.nCachedObjects_,Lm=Cm.length;Pm!==Lm;++Pm)Cm[Pm].setValue(Mm,Rm)},bind:function(){for(var Mm=this._bindings,Rm=this._targetGroup.nCachedObjects_,Cm=Mm.length;Rm!==Cm;++Rm)Mm[Rm].bind()},unbind:function(){for(var Mm=this._bindings,Rm=this._targetGroup.nCachedObjects_,Cm=Mm.length;Rm!==Cm;++Rm)Mm[Rm].unbind()}}),Object.assign(ln,{Composite:sn,create:function(Mm,Rm,Cm){return Mm&&Mm.isAnimationObjectGroup?new ln.Composite(Mm,Rm,Cm):new ln(Mm,Rm,Cm)},sanitizeNodeName:function(Mm){return Mm.replace(/\s/g,"_").replace(/[^\w-]/g,"")},parseTrackName:function(){var Mm=/((?:[\w-]+[\/:])*)/,Rm=/([\w-\.]+)?/,Cm=/(?:\.([\w-]+)(?:\[(.+)\])?)?/,Pm=/\.([\w-]+)(?:\[(.+)\])?/,Lm=new RegExp("^"+Mm.source+Rm.source+Cm.source+Pm.source+"$"),Im=["material","materials","bones"];return function(Bm){var Nm=Lm.exec(Bm);if(!Nm)throw new Error("PropertyBinding: Cannot parse trackName: "+Bm);var zm={nodeName:Nm[2],objectName:Nm[3],objectIndex:Nm[4],propertyName:Nm[5],propertyIndex:Nm[6]},Dm=zm.nodeName&&zm.nodeName.lastIndexOf(".");if(Dm!==void 0&&-1!==Dm){var Fm=zm.nodeName.substring(Dm+1);-1!==Im.indexOf(Fm)&&(zm.nodeName=zm.nodeName.substring(0,Dm),zm.objectName=Fm)}if(null===zm.propertyName||0===zm.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+Bm);return zm}}(),findNode:function(Mm,Rm){if(!Rm||""===Rm||"root"===Rm||"."===Rm||-1===Rm||Rm===Mm.name||Rm===Mm.uuid)return Mm;if(Mm.skeleton){var Cm=function(Bm){for(var Nm=0,zm;Nm<Bm.bones.length;Nm++)if(zm=Bm.bones[Nm],zm.name===Rm)return zm;return null},Pm=Cm(Mm.skeleton);if(Pm)return Pm}if(Mm.children){var Lm=function(Bm){for(var Nm=0,zm;Nm<Bm.length;Nm++){if(zm=Bm[Nm],zm.name===Rm||zm.uuid===Rm)return zm;var Dm=Lm(zm.children);if(Dm)return Dm}return null},Im=Lm(Mm.children);if(Im)return Im}return null}}),Object.assign(ln.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(Rm,Cm){Rm[Cm]=this.node[this.propertyName]},function(Rm,Cm){for(var Pm=this.resolvedProperty,Lm=0,Im=Pm.length;Lm!==Im;++Lm)Rm[Cm++]=Pm[Lm]},function(Rm,Cm){Rm[Cm]=this.resolvedProperty[this.propertyIndex]},function(Rm,Cm){this.resolvedProperty.toArray(Rm,Cm)}],SetterByBindingTypeAndVersioning:[[function(Rm,Cm){this.targetObject[this.propertyName]=Rm[Cm]},function(Rm,Cm){this.targetObject[this.propertyName]=Rm[Cm],this.targetObject.needsUpdate=!0},function(Rm,Cm){this.targetObject[this.propertyName]=Rm[Cm],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(Rm,Cm){for(var Pm=this.resolvedProperty,Lm=0,Im=Pm.length;Lm!==Im;++Lm)Pm[Lm]=Rm[Cm++]},function(Rm,Cm){for(var Pm=this.resolvedProperty,Lm=0,Im=Pm.length;Lm!==Im;++Lm)Pm[Lm]=Rm[Cm++];this.targetObject.needsUpdate=!0},function(Rm,Cm){for(var Pm=this.resolvedProperty,Lm=0,Im=Pm.length;Lm!==Im;++Lm)Pm[Lm]=Rm[Cm++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(Rm,Cm){this.resolvedProperty[this.propertyIndex]=Rm[Cm]},function(Rm,Cm){this.resolvedProperty[this.propertyIndex]=Rm[Cm],this.targetObject.needsUpdate=!0},function(Rm,Cm){this.resolvedProperty[this.propertyIndex]=Rm[Cm],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(Rm,Cm){this.resolvedProperty.fromArray(Rm,Cm)},function(Rm,Cm){this.resolvedProperty.fromArray(Rm,Cm),this.targetObject.needsUpdate=!0},function(Rm,Cm){this.resolvedProperty.fromArray(Rm,Cm),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(Rm,Cm){this.bind(),this.getValue(Rm,Cm)},setValue:function(Rm,Cm){this.bind(),this.setValue(Rm,Cm)},bind:function(){var Mm=this.node,Rm=this.parsedPath,Cm=Rm.objectName,Pm=Rm.propertyName,Lm=Rm.propertyIndex;if(Mm||(Mm=ln.findNode(this.rootNode,Rm.nodeName)||this.rootNode,this.node=Mm),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!Mm)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(Cm){var Im=Rm.objectIndex;switch(Cm){case"materials":if(!Mm.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!Mm.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);Mm=Mm.material.materials;break;case"bones":if(!Mm.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);Mm=Mm.skeleton.bones;for(var Bm=0;Bm<Mm.length;Bm++)if(Mm[Bm].name===Im){Im=Bm;break}break;default:if(void 0===Mm[Cm])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);Mm=Mm[Cm];}if(void 0!==Im){if(void 0===Mm[Im])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,Mm);Mm=Mm[Im]}}var Nm=Mm[Pm];if(void 0===Nm){var zm=Rm.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+zm+"."+Pm+" but it wasn't found.",Mm)}var Dm=this.Versioning.None;void 0===Mm.needsUpdate?void 0!==Mm.matrixWorldNeedsUpdate&&(Dm=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=Mm):(Dm=this.Versioning.NeedsUpdate,this.targetObject=Mm);var Fm=this.BindingType.Direct;if(void 0!==Lm){if("morphTargetInfluences"===Pm){if(!Mm.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(Mm.geometry.isBufferGeometry){if(!Mm.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(var Bm=0;Bm<this.node.geometry.morphAttributes.position.length;Bm++)if(Mm.geometry.morphAttributes.position[Bm].name===Lm){Lm=Bm;break}}else{if(!Mm.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(var Bm=0;Bm<this.node.geometry.morphTargets.length;Bm++)if(Mm.geometry.morphTargets[Bm].name===Lm){Lm=Bm;break}}}Fm=this.BindingType.ArrayElement,this.resolvedProperty=Nm,this.propertyIndex=Lm}else void 0!==Nm.fromArray&&void 0!==Nm.toArray?(Fm=this.BindingType.HasFromToArray,this.resolvedProperty=Nm):Array.isArray(Nm)?(Fm=this.BindingType.EntireArray,this.resolvedProperty=Nm):this.propertyName=Pm;this.getValue=this.GetterByBindingType[Fm],this.setValue=this.SetterByBindingTypeAndVersioning[Fm][Dm]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(ln.prototype,{_getValue_unbound:ln.prototype.getValue,_setValue_unbound:ln.prototype.setValue}),Object.assign(dn.prototype,{isAnimationObjectGroup:!0,add:function(){for(var Mm=this._objects,Rm=Mm.length,Cm=this.nCachedObjects_,Pm=this._indicesByUUID,Lm=this._paths,Im=this._parsedPaths,Bm=this._bindings,Nm=Bm.length,zm=0,Dm=arguments.length;zm!==Dm;++zm){var Fm=arguments[zm],Um=Fm.uuid,Om=Pm[Um],km=void 0;if(Om===void 0){Om=Rm++,Pm[Um]=Om,Mm.push(Fm);for(var Vm=0,Gm=Nm;Vm!==Gm;++Vm)Bm[Vm].push(new ln(Fm,Lm[Vm],Im[Vm]))}else if(Om<Cm){km=Mm[Om];var Hm=--Cm,Wm=Mm[Hm];Pm[Wm.uuid]=Om,Mm[Om]=Wm,Pm[Um]=Hm,Mm[Hm]=Fm;for(var Vm=0,Gm=Nm;Vm!==Gm;++Vm){var jm=Bm[Vm],Xm=jm[Hm],Ym=jm[Om];jm[Om]=Xm,Ym===void 0&&(Ym=new ln(Fm,Lm[Vm],Im[Vm])),jm[Hm]=Ym}}else Mm[Om]!==km&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=Cm},remove:function(){for(var Mm=this._objects,Rm=this.nCachedObjects_,Cm=this._indicesByUUID,Pm=this._bindings,Lm=Pm.length,Im=0,Bm=arguments.length;Im!==Bm;++Im){var Nm=arguments[Im],zm=Nm.uuid,Dm=Cm[zm];if(Dm!==void 0&&Dm>=Rm){var Fm=Rm++,Um=Mm[Fm];Cm[Um.uuid]=Dm,Mm[Dm]=Um,Cm[zm]=Fm,Mm[Fm]=Nm;for(var Om=0;Om!==Lm;++Om){var Vm=Pm[Om],Gm=Vm[Fm],Hm=Vm[Dm];Vm[Dm]=Gm,Vm[Fm]=Hm}}}this.nCachedObjects_=Rm},uncache:function(){for(var Mm=this._objects,Rm=Mm.length,Cm=this.nCachedObjects_,Pm=this._indicesByUUID,Lm=this._bindings,Im=Lm.length,Bm=0,Nm=arguments.length;Bm!==Nm;++Bm){var zm=arguments[Bm],Dm=zm.uuid,Fm=Pm[Dm];if(void 0!==Fm)if(delete Pm[Dm],Fm<Cm){var Um=--Cm,Om=Mm[Um],km=--Rm,Vm=Mm[km];Pm[Om.uuid]=Fm,Mm[Fm]=Om,Pm[Vm.uuid]=Um,Mm[Um]=Vm,Mm.pop();for(var Gm=0,Hm=Im;Gm!==Hm;++Gm){var Wm=Lm[Gm],jm=Wm[Um],Xm=Wm[km];Wm[Fm]=jm,Wm[Um]=Xm,Wm.pop()}}else{var km=--Rm,Vm=Mm[km];Pm[Vm.uuid]=Fm,Mm[Fm]=Vm,Mm.pop();for(var Gm=0,Hm=Im,Wm;Gm!==Hm;++Gm)Wm=Lm[Gm],Wm[Fm]=Wm[km],Wm.pop()}}this.nCachedObjects_=Cm},subscribe_:function(Mm,Rm){var Cm=this._bindingsIndicesByPath,Pm=Cm[Mm],Lm=this._bindings;if(Pm!==void 0)return Lm[Pm];var Im=this._paths,Bm=this._parsedPaths,Nm=this._objects,zm=Nm.length,Dm=this.nCachedObjects_,Fm=Array(zm);Pm=Lm.length,Cm[Mm]=Pm,Im.push(Mm),Bm.push(Rm),Lm.push(Fm);for(var Um=Dm,Om=Nm.length,km;Um!==Om;++Um)km=Nm[Um],Fm[Um]=new ln(km,Mm,Rm);return Fm},unsubscribe_:function(Mm){var Rm=this._bindingsIndicesByPath,Cm=Rm[Mm];if(Cm!==void 0){var Pm=this._paths,Lm=this._parsedPaths,Im=this._bindings,Bm=Im.length-1,Nm=Im[Bm],zm=Mm[Bm];Rm[zm]=Cm,Im[Cm]=Nm,Im.pop(),Lm[Cm]=Lm[Bm],Lm.pop(),Pm[Cm]=Pm[Bm],Pm.pop()}}}),Object.assign(pn.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(Mm){return this._startTime=Mm,this},setLoop:function(Mm,Rm){return this.loop=Mm,this.repetitions=Rm,this},setEffectiveWeight:function(Mm){return this.weight=Mm,this._effectiveWeight=this.enabled?Mm:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(Mm){return this._scheduleFading(Mm,0,1)},fadeOut:function(Mm){return this._scheduleFading(Mm,1,0)},crossFadeFrom:function(Mm,Rm,Cm){if(Mm.fadeOut(Rm),this.fadeIn(Rm),Cm){var Pm=this._clip.duration,Lm=Mm._clip.duration;Mm.warp(1,Lm/Pm,Rm),this.warp(Pm/Lm,1,Rm)}return this},crossFadeTo:function(Mm,Rm,Cm){return Mm.crossFadeFrom(this,Rm,Cm)},stopFading:function(){var Mm=this._weightInterpolant;return null!==Mm&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(Mm)),this},setEffectiveTimeScale:function(Mm){return this.timeScale=Mm,this._effectiveTimeScale=this.paused?0:Mm,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(Mm){return this.timeScale=this._clip.duration/Mm,this.stopWarping()},syncWith:function(Mm){return this.time=Mm.time,this.timeScale=Mm.timeScale,this.stopWarping()},halt:function(Mm){return this.warp(this._effectiveTimeScale,0,Mm)},warp:function(Mm,Rm,Cm){var Pm=this._mixer,Lm=Pm.time,Im=this._timeScaleInterpolant,Bm=this.timeScale;null===Im&&(Im=Pm._lendControlInterpolant(),this._timeScaleInterpolant=Im);var Nm=Im.parameterPositions,zm=Im.sampleValues;return Nm[0]=Lm,Nm[1]=Lm+Cm,zm[0]=Mm/Bm,zm[1]=Rm/Bm,this},stopWarping:function(){var Mm=this._timeScaleInterpolant;return null!==Mm&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(Mm)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(Mm,Rm,Cm,Pm){if(!this.enabled)return void this._updateWeight(Mm);var Lm=this._startTime;if(null!==Lm){var Im=(Mm-Lm)*Cm;if(0>Im||0===Cm)return;this._startTime=null,Rm=Cm*Im}Rm*=this._updateTimeScale(Mm);var Bm=this._updateTime(Rm),Nm=this._updateWeight(Mm);if(0<Nm)for(var zm=this._interpolants,Dm=this._propertyBindings,Fm=0,Um=zm.length;Fm!==Um;++Fm)zm[Fm].evaluate(Bm),Dm[Fm].accumulate(Pm,Nm)},_updateWeight:function(Mm){var Rm=0;if(this.enabled){Rm=this.weight;var Cm=this._weightInterpolant;if(null!==Cm){var Pm=Cm.evaluate(Mm)[0];Rm*=Pm,Mm>Cm.parameterPositions[1]&&(this.stopFading(),0===Pm&&(this.enabled=!1))}}return this._effectiveWeight=Rm,Rm},_updateTimeScale:function(Mm){var Rm=0;if(!this.paused){Rm=this.timeScale;var Cm=this._timeScaleInterpolant;if(null!==Cm){var Pm=Cm.evaluate(Mm)[0];Rm*=Pm,Mm>Cm.parameterPositions[1]&&(this.stopWarping(),0===Rm?this.paused=!0:this.timeScale=Rm)}}return this._effectiveTimeScale=Rm,Rm},_updateTime:function(Mm){var Rm=this.time+Mm;if(0===Mm)return Rm;var Cm=this._clip.duration,Pm=this.loop,Lm=this._loopCount;if(Pm===Hd){-1===Lm&&(this._loopCount=0,this._setEndings(!0,!0,!1));handle_stop:{if(Rm>=Cm)Rm=Cm;else if(0>Rm)Rm=0;else break handle_stop;this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:0>Mm?-1:1})}}else{var Im=Pm===jd;if(-1===Lm&&(0<=Mm?(Lm=0,this._setEndings(!0,0===this.repetitions,Im)):this._setEndings(0===this.repetitions,!0,Im)),Rm>=Cm||0>Rm){var Bm=_Mathfloor(Rm/Cm);Rm-=Cm*Bm,Lm+=_Mathabs(Bm);var Nm=this.repetitions-Lm;if(0>Nm)this.clampWhenFinished?this.paused=!0:this.enabled=!1,Rm=0<Mm?Cm:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<Mm?1:-1});else{if(0==Nm){var zm=0>Mm;this._setEndings(zm,!zm,Im)}else this._setEndings(!1,!1,Im);this._loopCount=Lm,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:Bm})}}if(Im&&1==(1&Lm))return this.time=Rm,Cm-Rm}return this.time=Rm,Rm},_setEndings:function(Mm,Rm,Cm){var Pm=this._interpolantSettings;Cm?(Pm.endingStart=Jd,Pm.endingEnd=Jd):(Pm.endingStart=Mm?this.zeroSlopeAtStart?Jd:Zd:Qd,Pm.endingEnd=Rm?this.zeroSlopeAtEnd?Jd:Zd:Qd)},_scheduleFading:function(Mm,Rm,Cm){var Pm=this._mixer,Lm=Pm.time,Im=this._weightInterpolant;null===Im&&(Im=Pm._lendControlInterpolant(),this._weightInterpolant=Im);var Bm=Im.parameterPositions,Nm=Im.sampleValues;return Bm[0]=Lm,Nm[0]=Rm,Bm[1]=Lm+Mm,Nm[1]=Cm,this}}),cn.prototype=Object.assign(Object.create(L.prototype),{constructor:cn,_bindAction:function(Mm,Rm){var Cm=Mm._localRoot||this._root,Pm=Mm._clip.tracks,Lm=Pm.length,Im=Mm._propertyBindings,Bm=Mm._interpolants,Nm=Cm.uuid,zm=this._bindingsByRootAndName,Dm=zm[Nm];Dm===void 0&&(Dm={},zm[Nm]=Dm);for(var Fm=0;Fm!==Lm;++Fm){var Um=Pm[Fm],Om=Um.name,km=Dm[Om];if(void 0!==km)Im[Fm]=km;else{if(km=Im[Fm],void 0!==km){null===km._cacheIndex&&(++km.referenceCount,this._addInactiveBinding(km,Nm,Om));continue}var Vm=Rm&&Rm._propertyBindings[Fm].binding.parsedPath;km=new nn(ln.create(Cm,Om,Vm),Um.ValueTypeName,Um.getValueSize()),++km.referenceCount,this._addInactiveBinding(km,Nm,Om),Im[Fm]=km}Bm[Fm].resultBuffer=km.buffer}},_activateAction:function(Mm){if(!this._isActiveAction(Mm)){if(null===Mm._cacheIndex){var Rm=(Mm._localRoot||this._root).uuid,Cm=Mm._clip.uuid,Pm=this._actionsByClip[Cm];this._bindAction(Mm,Pm&&Pm.knownActions[0]),this._addInactiveAction(Mm,Cm,Rm)}for(var Lm=Mm._propertyBindings,Im=0,Bm=Lm.length,Nm;Im!==Bm;++Im)Nm=Lm[Im],0==Nm.useCount++&&(this._lendBinding(Nm),Nm.saveOriginalState());this._lendAction(Mm)}},_deactivateAction:function(Mm){if(this._isActiveAction(Mm)){for(var Rm=Mm._propertyBindings,Cm=0,Pm=Rm.length,Lm;Cm!==Pm;++Cm)Lm=Rm[Cm],0==--Lm.useCount&&(Lm.restoreOriginalState(),this._takeBackBinding(Lm));this._takeBackAction(Mm)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var Mm=this;this.stats={actions:{get total(){return Mm._actions.length},get inUse(){return Mm._nActiveActions}},bindings:{get total(){return Mm._bindings.length},get inUse(){return Mm._nActiveBindings}},controlInterpolants:{get total(){return Mm._controlInterpolants.length},get inUse(){return Mm._nActiveControlInterpolants}}}},_isActiveAction:function(Mm){var Rm=Mm._cacheIndex;return null!==Rm&&Rm<this._nActiveActions},_addInactiveAction:function(Mm,Rm,Cm){var Pm=this._actions,Lm=this._actionsByClip,Im=Lm[Rm];if(Im===void 0)Im={knownActions:[Mm],actionByRoot:{}},Mm._byClipCacheIndex=0,Lm[Rm]=Im;else{var Bm=Im.knownActions;Mm._byClipCacheIndex=Bm.length,Bm.push(Mm)}Mm._cacheIndex=Pm.length,Pm.push(Mm),Im.actionByRoot[Cm]=Mm},_removeInactiveAction:function(Mm){var Rm=this._actions,Cm=Rm[Rm.length-1],Pm=Mm._cacheIndex;Cm._cacheIndex=Pm,Rm[Pm]=Cm,Rm.pop(),Mm._cacheIndex=null;var Lm=Mm._clip.uuid,Im=this._actionsByClip,Bm=Im[Lm],Nm=Bm.knownActions,zm=Nm[Nm.length-1],Dm=Mm._byClipCacheIndex;zm._byClipCacheIndex=Dm,Nm[Dm]=zm,Nm.pop(),Mm._byClipCacheIndex=null;var Fm=Bm.actionByRoot,Um=(Mm._localRoot||this._root).uuid;delete Fm[Um],0===Nm.length&&delete Im[Lm],this._removeInactiveBindingsForAction(Mm)},_removeInactiveBindingsForAction:function(Mm){for(var Rm=Mm._propertyBindings,Cm=0,Pm=Rm.length,Lm;Cm!==Pm;++Cm)Lm=Rm[Cm],0==--Lm.referenceCount&&this._removeInactiveBinding(Lm)},_lendAction:function(Mm){var Rm=this._actions,Cm=Mm._cacheIndex,Pm=this._nActiveActions++,Lm=Rm[Pm];Mm._cacheIndex=Pm,Rm[Pm]=Mm,Lm._cacheIndex=Cm,Rm[Cm]=Lm},_takeBackAction:function(Mm){var Rm=this._actions,Cm=Mm._cacheIndex,Pm=--this._nActiveActions,Lm=Rm[Pm];Mm._cacheIndex=Pm,Rm[Pm]=Mm,Lm._cacheIndex=Cm,Rm[Cm]=Lm},_addInactiveBinding:function(Mm,Rm,Cm){var Pm=this._bindingsByRootAndName,Lm=Pm[Rm],Im=this._bindings;Lm===void 0&&(Lm={},Pm[Rm]=Lm),Lm[Cm]=Mm,Mm._cacheIndex=Im.length,Im.push(Mm)},_removeInactiveBinding:function(Mm){var Rm=this._bindings,Cm=Mm.binding,Pm=Cm.rootNode.uuid,Lm=Cm.path,Im=this._bindingsByRootAndName,Bm=Im[Pm],Nm=Rm[Rm.length-1],zm=Mm._cacheIndex;Nm._cacheIndex=zm,Rm[zm]=Nm,Rm.pop(),delete Bm[Lm];remove_empty_map:{for(var Dm in Bm)break remove_empty_map;delete Im[Pm]}},_lendBinding:function(Mm){var Rm=this._bindings,Cm=Mm._cacheIndex,Pm=this._nActiveBindings++,Lm=Rm[Pm];Mm._cacheIndex=Pm,Rm[Pm]=Mm,Lm._cacheIndex=Cm,Rm[Cm]=Lm},_takeBackBinding:function(Mm){var Rm=this._bindings,Cm=Mm._cacheIndex,Pm=--this._nActiveBindings,Lm=Rm[Pm];Mm._cacheIndex=Pm,Rm[Pm]=Mm,Lm._cacheIndex=Cm,Rm[Cm]=Lm},_lendControlInterpolant:function(){var Mm=this._controlInterpolants,Rm=this._nActiveControlInterpolants++,Cm=Mm[Rm];return void 0===Cm&&(Cm=new Ni(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),Cm.__cacheIndex=Rm,Mm[Rm]=Cm),Cm},_takeBackControlInterpolant:function(Mm){var Rm=this._controlInterpolants,Cm=Mm.__cacheIndex,Pm=--this._nActiveControlInterpolants,Lm=Rm[Pm];Mm.__cacheIndex=Pm,Rm[Pm]=Mm,Lm.__cacheIndex=Cm,Rm[Cm]=Lm},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(Mm,Rm){var Cm=Rm||this._root,Pm=Cm.uuid,Lm="string"==typeof Mm?Oi.findByName(Cm,Mm):Mm,Im=null===Lm?Mm:Lm.uuid,Bm=this._actionsByClip[Im],Nm=null;if(void 0!==Bm){var zm=Bm.actionByRoot[Pm];if(void 0!==zm)return zm;Nm=Bm.knownActions[0],null===Lm&&(Lm=Nm._clip)}if(null===Lm)return null;var Dm=new pn(this,Lm,Rm);return this._bindAction(Dm,Nm),this._addInactiveAction(Dm,Im,Pm),Dm},existingAction:function(Mm,Rm){var Cm=Rm||this._root,Pm=Cm.uuid,Lm="string"==typeof Mm?Oi.findByName(Cm,Mm):Mm,Im=Lm?Lm.uuid:Mm,Bm=this._actionsByClip[Im];return void 0===Bm?null:Bm.actionByRoot[Pm]||null},stopAllAction:function(){var Mm=this._actions,Rm=this._nActiveActions,Cm=this._bindings,Pm=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var Lm=0;Lm!==Rm;++Lm)Mm[Lm].reset();for(var Lm=0;Lm!==Pm;++Lm)Cm[Lm].useCount=0;return this},update:function(Mm){Mm*=this.timeScale;for(var Rm=this._actions,Cm=this._nActiveActions,Pm=this.time+=Mm,Lm=_Mathsign(Mm),Im=this._accuIndex^=1,Bm=0,Nm;Bm!==Cm;++Bm)Nm=Rm[Bm],Nm._update(Pm,Mm,Lm,Im);for(var zm=this._bindings,Dm=this._nActiveBindings,Bm=0;Bm!==Dm;++Bm)zm[Bm].apply(Im);return this},getRoot:function(){return this._root},uncacheClip:function(Mm){var Rm=this._actions,Cm=Mm.uuid,Pm=this._actionsByClip,Lm=Pm[Cm];if(Lm!==void 0){for(var Im=Lm.knownActions,Bm=0,Nm=Im.length,zm;Bm!==Nm;++Bm){zm=Im[Bm],this._deactivateAction(zm);var Dm=zm._cacheIndex,Fm=Rm[Rm.length-1];zm._cacheIndex=null,zm._byClipCacheIndex=null,Fm._cacheIndex=Dm,Rm[Dm]=Fm,Rm.pop(),this._removeInactiveBindingsForAction(zm)}delete Pm[Cm]}},uncacheRoot:function(Mm){var Rm=Mm.uuid,Cm=this._actionsByClip;for(var Pm in Cm){var Lm=Cm[Pm].actionByRoot,Im=Lm[Rm];Im!==void 0&&(this._deactivateAction(Im),this._removeInactiveAction(Im))}var Bm=this._bindingsByRootAndName,Nm=Bm[Rm];if(Nm!==void 0)for(var zm in Nm){var Dm=Nm[zm];Dm.restoreOriginalState(),this._removeInactiveBinding(Dm)}},uncacheAction:function(Mm,Rm){var Cm=this.existingAction(Mm,Rm);null!==Cm&&(this._deactivateAction(Cm),this._removeInactiveAction(Cm))}}),un.prototype.clone=function(){return new un(this.value.clone===void 0?this.value:this.value.clone())},mn.prototype=Object.assign(Object.create(Tt.prototype),{constructor:mn,isInstancedBufferGeometry:!0,copy:function(Mm){return Tt.prototype.copy.call(this,Mm),this.maxInstancedCount=Mm.maxInstancedCount,this},clone:function(){return new this.constructor().copy(this)}}),Object.defineProperties(gn.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(gn.prototype,{isInterleavedBufferAttribute:!0,setX:function(Mm,Rm){return this.data.array[Mm*this.data.stride+this.offset]=Rm,this},setY:function(Mm,Rm){return this.data.array[Mm*this.data.stride+this.offset+1]=Rm,this},setZ:function(Mm,Rm){return this.data.array[Mm*this.data.stride+this.offset+2]=Rm,this},setW:function(Mm,Rm){return this.data.array[Mm*this.data.stride+this.offset+3]=Rm,this},getX:function(Mm){return this.data.array[Mm*this.data.stride+this.offset]},getY:function(Mm){return this.data.array[Mm*this.data.stride+this.offset+1]},getZ:function(Mm){return this.data.array[Mm*this.data.stride+this.offset+2]},getW:function(Mm){return this.data.array[Mm*this.data.stride+this.offset+3]},setXY:function(Mm,Rm,Cm){return Mm=Mm*this.data.stride+this.offset,this.data.array[Mm+0]=Rm,this.data.array[Mm+1]=Cm,this},setXYZ:function(Mm,Rm,Cm,Pm){return Mm=Mm*this.data.stride+this.offset,this.data.array[Mm+0]=Rm,this.data.array[Mm+1]=Cm,this.data.array[Mm+2]=Pm,this},setXYZW:function(Mm,Rm,Cm,Pm,Lm){return Mm=Mm*this.data.stride+this.offset,this.data.array[Mm+0]=Rm,this.data.array[Mm+1]=Cm,this.data.array[Mm+2]=Pm,this.data.array[Mm+3]=Lm,this}}),Object.defineProperty(yn.prototype,"needsUpdate",{set:function(Mm){!0===Mm&&this.version++}}),Object.assign(yn.prototype,{isInterleavedBuffer:!0,setArray:function(Mm){if(Array.isArray(Mm))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=Mm===void 0?0:Mm.length/this.stride,this.array=Mm},setDynamic:function(Mm){return this.dynamic=Mm,this},copy:function(Mm){return this.array=new Mm.array.constructor(Mm.array),this.count=Mm.count,this.stride=Mm.stride,this.dynamic=Mm.dynamic,this},copyAt:function(Mm,Rm,Cm){Mm*=this.stride,Cm*=Rm.stride;for(var Pm=0,Lm=this.stride;Pm<Lm;Pm++)this.array[Mm+Pm]=Rm.array[Cm+Pm];return this},set:function(Mm,Rm){return void 0===Rm&&(Rm=0),this.array.set(Mm,Rm),this},clone:function(){return new this.constructor().copy(this)},onUpload:function(Mm){return this.onUploadCallback=Mm,this}}),_n.prototype=Object.assign(Object.create(yn.prototype),{constructor:_n,isInstancedInterleavedBuffer:!0,copy:function(Mm){return yn.prototype.copy.call(this,Mm),this.meshPerAttribute=Mm.meshPerAttribute,this}}),xn.prototype=Object.assign(Object.create(it.prototype),{constructor:xn,isInstancedBufferAttribute:!0,copy:function(Mm){return it.prototype.copy.call(this,Mm),this.meshPerAttribute=Mm.meshPerAttribute,this}}),Object.assign(Tn.prototype,{linePrecision:1,set:function(Mm,Rm){this.ray.set(Mm,Rm)},setFromCamera:function(Mm,Rm){Rm&&Rm.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(Rm.matrixWorld),this.ray.direction.set(Mm.x,Mm.y,0.5).unproject(Rm).sub(this.ray.origin).normalize()):Rm&&Rm.isOrthographicCamera?(this.ray.origin.set(Mm.x,Mm.y,(Rm.near+Rm.far)/(Rm.near-Rm.far)).unproject(Rm),this.ray.direction.set(0,0,-1).transformDirection(Rm.matrixWorld)):console.error("THREE.Raycaster: Unsupported defaultCamera type.")},intersectObject:function(Mm,Rm){var Cm=[];return Sn(Mm,this,Cm,Rm),Cm.sort(En),Cm},intersectObjects:function(Mm,Rm){var Cm=[];if(!1===Array.isArray(Mm))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),Cm;for(var Pm=0,Lm=Mm.length;Pm<Lm;Pm++)Sn(Mm[Pm],this,Cm,Rm);return Cm.sort(En),Cm}}),Object.assign(An.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var Mm=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var Rm=("undefined"==typeof performance?Date:performance).now();Mm=(Rm-this.oldTime)/1e3,this.oldTime=Rm,this.elapsedTime+=Mm}return Mm}}),Object.assign(wn.prototype,{set:function(Mm,Rm,Cm){return this.radius=Mm,this.phi=Rm,this.theta=Cm,this},clone:function(){return new this.constructor().copy(this)},copy:function(Mm){return this.radius=Mm.radius,this.phi=Mm.phi,this.theta=Mm.theta,this},makeSafe:function(){var Mm=1e-6;return this.phi=_Mathmax(Mm,_Mathmin(_MathPI-Mm,this.phi)),this},setFromVector3:function(Mm){return this.radius=Mm.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=_Mathatan(Mm.x,Mm.z),this.phi=_Mathacos(yp.clamp(Mm.y/this.radius,-1,1))),this}}),Object.assign(Mn.prototype,{set:function(Mm,Rm,Cm){return this.radius=Mm,this.theta=Rm,this.y=Cm,this},clone:function(){return new this.constructor().copy(this)},copy:function(Mm){return this.radius=Mm.radius,this.theta=Mm.theta,this.y=Mm.y,this},setFromVector3:function(Mm){return this.radius=_Mathsqrt(Mm.x*Mm.x+Mm.z*Mm.z),this.theta=_Mathatan(Mm.x,Mm.z),this.y=Mm.y,this}}),Rn.prototype=Object.create($e.prototype),Rn.prototype.constructor=Rn,Rn.prototype.isImmediateRenderObject=!0,Cn.prototype=Object.create(Fr.prototype),Cn.prototype.constructor=Cn,Cn.prototype.update=function(){var Mm=new O,Rm=new O,Cm=new G;return function(){var Lm=["a","b","c"];this.object.updateMatrixWorld(!0),Cm.getNormalMatrix(this.object.matrixWorld);var Im=this.object.matrixWorld,Bm=this.geometry.attributes.position,Nm=this.object.geometry;if(Nm&&Nm.isGeometry)for(var zm=Nm.vertices,Dm=Nm.faces,Fm=0,Um=0,Om=Dm.length,km;Um<Om;Um++){km=Dm[Um];for(var Vm=0,Gm=km.vertexNormals.length;Vm<Gm;Vm++){var Hm=zm[km[Lm[Vm]]],Wm=km.vertexNormals[Vm];Mm.copy(Hm).applyMatrix4(Im),Rm.copy(Wm).applyMatrix3(Cm).normalize().multiplyScalar(this.size).add(Mm),Bm.setXYZ(Fm,Mm.x,Mm.y,Mm.z),++Fm,Bm.setXYZ(Fm,Rm.x,Rm.y,Rm.z),++Fm}}else if(Nm&&Nm.isBufferGeometry)for(var jm=Nm.attributes.position,Xm=Nm.attributes.normal,Fm=0,Vm=0,Gm=jm.count;Vm<Gm;Vm++)Mm.set(jm.getX(Vm),jm.getY(Vm),jm.getZ(Vm)).applyMatrix4(Im),Rm.set(Xm.getX(Vm),Xm.getY(Vm),Xm.getZ(Vm)),Rm.applyMatrix3(Cm).normalize().multiplyScalar(this.size).add(Mm),Bm.setXYZ(Fm,Mm.x,Mm.y,Mm.z),++Fm,Bm.setXYZ(Fm,Rm.x,Rm.y,Rm.z),++Fm;Bm.needsUpdate=!0}}(),Pn.prototype=Object.create($e.prototype),Pn.prototype.constructor=Pn,Pn.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Pn.prototype.update=function(){var Mm=new O,Rm=new O;return function(){this.light.updateMatrixWorld();var Pm=this.light.distance?this.light.distance:1e3,Lm=Pm*_Mathtan(this.light.angle);this.cone.scale.set(Lm,Lm,Pm),Mm.setFromMatrixPosition(this.light.matrixWorld),Rm.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Rm.sub(Mm)),this.color===void 0?this.cone.material.color.copy(this.light.color):this.cone.material.color.set(this.color)}}(),In.prototype=Object.create(Fr.prototype),In.prototype.constructor=In,In.prototype.updateMatrixWorld=function(){var Mm=new O,Rm=new F,Cm=new F;return function(Lm){var Im=this.bones,Bm=this.geometry,Nm=Bm.getAttribute("position");Cm.getInverse(this.root.matrixWorld);for(var zm=0,Dm=0,Fm;zm<Im.length;zm++)Fm=Im[zm],Fm.parent&&Fm.parent.isBone&&(Rm.multiplyMatrices(Cm,Fm.matrixWorld),Mm.setFromMatrixPosition(Rm),Nm.setXYZ(Dm,Mm.x,Mm.y,Mm.z),Rm.multiplyMatrices(Cm,Fm.parent.matrixWorld),Mm.setFromMatrixPosition(Rm),Nm.setXYZ(Dm+1,Mm.x,Mm.y,Mm.z),Dm+=2);Bm.getAttribute("position").needsUpdate=!0,$e.prototype.updateMatrixWorld.call(this,Lm)}}(),Bn.prototype=Object.create(Bt.prototype),Bn.prototype.constructor=Bn,Bn.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Bn.prototype.update=function(){this.color===void 0?this.material.color.copy(this.light.color):this.material.color.set(this.color)},Nn.prototype=Object.create($e.prototype),Nn.prototype.constructor=Nn,Nn.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Nn.prototype.update=function(){var Mm=0.5*this.light.width,Rm=0.5*this.light.height,Cm=this.line.geometry.attributes.position,Pm=Cm.array;Pm[0]=Mm,Pm[1]=-Rm,Pm[2]=0,Pm[3]=Mm,Pm[4]=Rm,Pm[5]=0,Pm[6]=-Mm,Pm[7]=Rm,Pm[8]=0,Pm[9]=-Mm,Pm[10]=-Rm,Pm[11]=0,Pm[12]=Mm,Pm[13]=-Rm,Pm[14]=0,Cm.needsUpdate=!0,this.color===void 0?this.line.material.color.copy(this.light.color):this.line.material.color.set(this.color)},zn.prototype=Object.create($e.prototype),zn.prototype.constructor=zn,zn.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},zn.prototype.update=function(){var Mm=new O,Rm=new Fe,Cm=new Fe;return function(){var Lm=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{var Im=Lm.geometry.getAttribute("color");Rm.copy(this.light.color),Cm.copy(this.light.groundColor);for(var Bm=0,Nm=Im.count,zm;Bm<Nm;Bm++)zm=Bm<Nm/2?Rm:Cm,Im.setXYZ(Bm,zm.r,zm.g,zm.b);Im.needsUpdate=!0}Lm.lookAt(Mm.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),Dn.prototype=Object.create(Fr.prototype),Dn.prototype.constructor=Dn,Fn.prototype=Object.create(Fr.prototype),Fn.prototype.constructor=Fn,Un.prototype=Object.create(Fr.prototype),Un.prototype.constructor=Un,Un.prototype.update=function(){var Mm=new O,Rm=new O,Cm=new G;return function(){this.object.updateMatrixWorld(!0),Cm.getNormalMatrix(this.object.matrixWorld);for(var Lm=this.object.matrixWorld,Im=this.geometry.attributes.position,Bm=this.object.geometry,Nm=Bm.vertices,zm=Bm.faces,Dm=0,Fm=0,Um=zm.length;Fm<Um;Fm++){var Om=zm[Fm],km=Om.normal;Mm.copy(Nm[Om.a]).add(Nm[Om.b]).add(Nm[Om.c]).divideScalar(3).applyMatrix4(Lm),Rm.copy(km).applyMatrix3(Cm).normalize().multiplyScalar(this.size).add(Mm),Im.setXYZ(Dm,Mm.x,Mm.y,Mm.z),++Dm,Im.setXYZ(Dm,Rm.x,Rm.y,Rm.z),++Dm}Im.needsUpdate=!0}}(),On.prototype=Object.create($e.prototype),On.prototype.constructor=On,On.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},On.prototype.update=function(){var Mm=new O,Rm=new O,Cm=new O;return function(){Mm.setFromMatrixPosition(this.light.matrixWorld),Rm.setFromMatrixPosition(this.light.target.matrixWorld),Cm.subVectors(Rm,Mm),this.lightPlane.lookAt(Cm),this.color===void 0?(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)):(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)),this.targetLine.lookAt(Cm),this.targetLine.scale.z=Cm.length()}}(),kn.prototype=Object.create(Fr.prototype),kn.prototype.constructor=kn,kn.prototype.update=function(){function Mm(Im,Bm,Nm,zm){Pm.set(Bm,Nm,zm).unproject(Lm);var Dm=Cm[Im];if(Dm!==void 0)for(var Fm=Rm.getAttribute("position"),Um=0,Om=Dm.length;Um<Om;Um++)Fm.setXYZ(Dm[Um],Pm.x,Pm.y,Pm.z)}var Rm,Cm,Pm=new O,Lm=new et;return function(){Rm=this.geometry,Cm=this.pointMap;var Bm=1,Nm=1;Lm.projectionMatrix.copy(this.camera.projectionMatrix),Mm("c",0,0,-1),Mm("t",0,0,1),Mm("n1",-Bm,-Nm,-1),Mm("n2",Bm,-Nm,-1),Mm("n3",-Bm,Nm,-1),Mm("n4",Bm,Nm,-1),Mm("f1",-Bm,-Nm,1),Mm("f2",Bm,-Nm,1),Mm("f3",-Bm,Nm,1),Mm("f4",Bm,Nm,1),Mm("u1",0.7*Bm,1.1*Nm,-1),Mm("u2",0.7*-Bm,1.1*Nm,-1),Mm("u3",0,2*Nm,-1),Mm("cf1",-Bm,0,1),Mm("cf2",Bm,0,1),Mm("cf3",0,-Nm,1),Mm("cf4",0,Nm,1),Mm("cn1",-Bm,0,-1),Mm("cn2",Bm,0,-1),Mm("cn3",0,-Nm,-1),Mm("cn4",0,Nm,-1),Rm.getAttribute("position").needsUpdate=!0}}(),Vn.prototype=Object.create(Fr.prototype),Vn.prototype.constructor=Vn,Vn.prototype.update=function(){var Mm=new je;return function(Cm){if(void 0!==Cm&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&Mm.setFromObject(this.object),!Mm.isEmpty()){var Pm=Mm.min,Lm=Mm.max,Im=this.geometry.attributes.position,Bm=Im.array;Bm[0]=Lm.x,Bm[1]=Lm.y,Bm[2]=Lm.z,Bm[3]=Pm.x,Bm[4]=Lm.y,Bm[5]=Lm.z,Bm[6]=Pm.x,Bm[7]=Pm.y,Bm[8]=Lm.z,Bm[9]=Lm.x,Bm[10]=Pm.y,Bm[11]=Lm.z,Bm[12]=Lm.x,Bm[13]=Lm.y,Bm[14]=Pm.z,Bm[15]=Pm.x,Bm[16]=Lm.y,Bm[17]=Pm.z,Bm[18]=Pm.x,Bm[19]=Pm.y,Bm[20]=Pm.z,Bm[21]=Lm.x,Bm[22]=Pm.y,Bm[23]=Pm.z,Im.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),Vn.prototype.setFromObject=function(Mm){return this.object=Mm,this.update(),this},Gn.prototype=Object.create(Fr.prototype),Gn.prototype.constructor=Gn,Gn.prototype.updateMatrixWorld=function(Mm){var Rm=this.box;Rm.isEmpty()||(Rm.getCenter(this.position),Rm.getSize(this.scale),this.scale.multiplyScalar(0.5),$e.prototype.updateMatrixWorld.call(this,Mm))},Hn.prototype=Object.create(Dr.prototype),Hn.prototype.constructor=Hn,Hn.prototype.updateMatrixWorld=function(Mm){var Rm=-this.plane.constant;1e-8>_Mathabs(Rm)&&(Rm=1e-8),this.scale.set(0.5*this.size,0.5*this.size,Rm),this.lookAt(this.plane.normal),$e.prototype.updateMatrixWorld.call(this,Mm)};var vm,bm;Wn.prototype=Object.create($e.prototype),Wn.prototype.constructor=Wn,Wn.prototype.setDirection=function(){var Mm=new O,Rm;return function(Pm){0.99999<Pm.y?this.quaternion.set(0,0,0,1):-0.99999>Pm.y?this.quaternion.set(1,0,0,0):(Mm.set(Pm.z,0,-Pm.x).normalize(),Rm=_Mathacos(Pm.y),this.quaternion.setFromAxisAngle(Mm,Rm))}}(),Wn.prototype.setLength=function(Mm,Rm,Cm){Rm===void 0&&(Rm=0.2*Mm),Cm===void 0&&(Cm=0.2*Rm),this.line.scale.set(1,_Mathmax(0,Mm-Rm),1),this.line.updateMatrix(),this.cone.scale.set(Cm,Rm,Cm),this.cone.position.y=Mm,this.cone.updateMatrix()},Wn.prototype.setColor=function(Mm){this.line.material.color.copy(Mm),this.cone.material.color.copy(Mm)},jn.prototype=Object.create(Fr.prototype),jn.prototype.constructor=jn;var Tm={createMultiMaterialObject:function(Mm,Rm){for(var Cm=new Vr,Pm=0,Lm=Rm.length;Pm<Lm;Pm++)Cm.add(new Bt(Mm,Rm[Pm]));return Cm},detach:function(Mm,Rm,Cm){Mm.applyMatrix(Rm.matrixWorld),Rm.remove(Mm),Cm.add(Mm)},attach:function(Mm,Rm,Cm){Mm.applyMatrix(new F().getInverse(Cm.matrixWorld)),Rm.remove(Mm),Cm.add(Mm)}},Em=0,Sm=1;Lo.create=function(Mm,Rm){return console.log("THREE.Curve.create() has been deprecated"),Mm.prototype=Object.create(Lo.prototype),Mm.prototype.constructor=Mm,Mm.prototype.getPoint=Rm,Mm},Object.assign($o.prototype,{createPointsGeometry:function(Mm){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var Rm=this.getPoints(Mm);return this.createGeometry(Rm)},createSpacedPointsGeometry:function(Mm){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var Rm=this.getSpacedPoints(Mm);return this.createGeometry(Rm)},createGeometry:function(Mm){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var Rm=new ot,Cm=0,Pm=Mm.length,Lm;Cm<Pm;Cm++)Lm=Mm[Cm],Rm.vertices.push(new O(Lm.x,Lm.y,Lm.z||0));return Rm}}),Object.assign(ai.prototype,{fromPoints:function(Mm){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(Mm)}}),ys.prototype=Object.create(zo.prototype),_s.prototype=Object.create(zo.prototype),xs.prototype=Object.create(zo.prototype),Object.assign(xs.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),Dn.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},In.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(Gi.prototype,{extractUrlBase:function(Mm){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),gm.extractUrlBase(Mm)}}),Object.assign(Ue.prototype,{center:function(Mm){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(Mm)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(Mm){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(Mm)},size:function(Mm){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(Mm)}}),Object.assign(je.prototype,{center:function(Mm){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(Mm)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(Mm){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(Mm)},isIntersectionSphere:function(Mm){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(Mm)},size:function(Mm){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(Mm)}}),Lt.prototype.center=function(Mm){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(Mm)},Object.assign(yp,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(Mm){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),yp.floorPowerOfTwo(Mm)},nextPowerOfTwo:function(Mm){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),yp.ceilPowerOfTwo(Mm)}}),Object.assign(G.prototype,{flattenToArrayOffset:function(Mm,Rm){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(Mm,Rm)},multiplyVector3:function(Mm){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),Mm.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(Mm){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(Mm)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(F.prototype,{extractPosition:function(Mm){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(Mm)},flattenToArrayOffset:function(Mm,Rm){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(Mm,Rm)},getPosition:function(){var Mm;return function(){return void 0==Mm&&(Mm=new O),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),Mm.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(Mm){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(Mm)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(Mm){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),Mm.applyMatrix4(this)},multiplyVector4:function(Mm){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),Mm.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(Mm){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),Mm.transformDirection(this)},crossVector:function(Mm){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),Mm.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(Mm){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(Mm)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(Mm,Rm,Cm,Pm,Lm,Im){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(Mm,Rm,Pm,Cm,Lm,Im)}}),Xe.prototype.isIntersectionLine=function(Mm){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(Mm)},U.prototype.multiplyVector3=function(Mm){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),Mm.applyQuaternion(this)},Object.assign(Pt.prototype,{isIntersectionBox:function(Mm){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(Mm)},isIntersectionPlane:function(Mm){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(Mm)},isIntersectionSphere:function(Mm){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(Mm)}}),Object.assign(oi.prototype,{extractAllPoints:function(Mm){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(Mm)},extrude:function(Mm){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new ja(this,Mm)},makeGeometry:function(Mm){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new ao(this,Mm)}}),Object.assign(D.prototype,{fromAttribute:function(Mm,Rm,Cm){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(Mm,Rm,Cm)},distanceToManhattan:function(Mm){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(Mm)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(O.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(Mm){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(Mm)},getScaleFromMatrix:function(Mm){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(Mm)},getColumnFromMatrix:function(Mm,Rm){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(Rm,Mm)},applyProjection:function(Mm){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(Mm)},fromAttribute:function(Mm,Rm,Cm){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(Mm,Rm,Cm)},distanceToManhattan:function(Mm){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(Mm)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(W.prototype,{fromAttribute:function(Mm,Rm,Cm){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(Mm,Rm,Cm)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),ot.prototype.computeTangents=function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")},Object.assign($e.prototype,{getChildByName:function(Mm){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(Mm)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(Mm,Rm){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(Rm,Mm)}}),Object.defineProperties($e.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(Mm){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=Mm}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(Lr.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(Ir.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Object.defineProperty(Lo.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(Mm){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=Mm}}),yr.prototype.setLens=function(Mm,Rm){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),Rm!==void 0&&(this.filmGauge=Rm),this.setFocalLength(Mm)},Object.defineProperties(di.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(Mm){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=Mm}},shadowCameraLeft:{set:function(Mm){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=Mm}},shadowCameraRight:{set:function(Mm){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=Mm}},shadowCameraTop:{set:function(Mm){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=Mm}},shadowCameraBottom:{set:function(Mm){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=Mm}},shadowCameraNear:{set:function(Mm){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=Mm}},shadowCameraFar:{set:function(Mm){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=Mm}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.defaultCamera ) instead.")}},shadowBias:{set:function(Mm){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=Mm}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(Mm){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=Mm}},shadowMapHeight:{set:function(Mm){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=Mm}}}),Object.defineProperties(it.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}}}),Object.assign(Tt.prototype,{addIndex:function(Mm){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(Mm)},addDrawCall:function(Mm,Rm,Cm){Cm!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(Mm,Rm)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(Tt.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(un.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(Ge.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Fe}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(Mm){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=Mm===js}}}),Object.defineProperties(xo.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(Ct.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(Mm){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=Mm}}}),Object.assign(Sr.prototype,{getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(Mm){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(Mm)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}}),Object.defineProperties(Sr.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(Mm){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=Mm}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(Mm){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=Mm}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(Mm){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace."),this.shadowMap.cullFace=Mm}}}),Object.defineProperties(Ze.prototype,{cullFace:{get:function(){return this.renderReverseSided?zs:Ns},set:function(Mm){var Rm=Mm!==Ns;console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+Rm+"."),this.renderReverseSided=Rm}}}),Object.defineProperties(X.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(Mm){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=Mm}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(Mm){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=Mm}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(Mm){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=Mm}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(Mm){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=Mm}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(Mm){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=Mm}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(Mm){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=Mm}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(Mm){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=Mm}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(Mm){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=Mm}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(Mm){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=Mm}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(Mm){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=Mm}}}),Object.assign(xr.prototype,{getStandingMatrix:function(){console.warn("THREE.WebVRManager: .getStandingMatrix() has been removed.")}}),Object.defineProperties(xr.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}}}),tn.prototype.load=function(Mm){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var Rm=this,Cm=new Ji;return Cm.load(Mm,function(Pm){Rm.setBuffer(Pm)}),this},on.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},Ki.prototype.updateCubeMap=function(Mm,Rm){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(Mm,Rm)};var Am={merge:function(Mm,Rm,Cm){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var Pm;Rm.isMesh&&(Rm.matrixAutoUpdate&&Rm.updateMatrix(),Pm=Rm.matrix,Rm=Rm.geometry),Mm.merge(Rm,Pm,Cm)},center:function(Mm){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),Mm.center()}},wm={crossOrigin:void 0,loadTexture:function(Mm,Rm,Cm,Pm){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var Lm=new Po;Lm.setCrossOrigin(this.crossOrigin);var Im=Lm.load(Mm,Cm,void 0,Pm);return Rm&&(Im.mapping=Rm),Im},loadTextureCube:function(Mm,Rm,Cm,Pm){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var Lm=new Co;Lm.setCrossOrigin(this.crossOrigin);var Im=Lm.load(Mm,Cm,void 0,Pm);return Rm&&(Im.mapping=Rm),Im},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}}},,function(E,S,A){E.exports=A(13),E.exports.color=A(12)},function(E,S,A){(function(L){var D,F,U="undefined"!=typeof E&&E.exports&&"undefined"!=typeof L?L:this||window;/*!
 * VERSION: 1.20.4
 * DATE: 2018-02-15
 * UPDATES AND DOCS AT: http://greensock.com
 * 
 * Includes all of the following: TweenLite, TweenMax, TimelineLite, TimelineMax, EasePack, CSSPlugin, RoundPropsPlugin, BezierPlugin, AttrPlugin, DirectionalRotationPlugin
 *
 * @license Copyright (c) 2008-2018, GreenSock. All rights reserved.
 * This work is subject to the terms at http://greensock.com/standard-license or for
 * Club GreenSock members, the software agreement that was issued with your membership.
 * 
 * @author: Jack Doyle, jack@greensock.com
 **/(U._gsQueue||(U._gsQueue=[])).push(function(){"use strict";U._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(O,G,H){var W=function(ne){var se=[],le=ne.length,pe;for(pe=0;pe!==le;se.push(ne[pe++]));return se},X=function(ne,se,le){var pe=ne.cycle,ue,ge;for(ue in pe)ge=pe[ue],ne[ue]="function"==typeof ge?ge(le,se[le]):ge[le%ge.length];delete ne.cycle},Y=function(ne,se,le){H.call(this,ne,se,le),this._cycle=0,this._yoyo=!0===this.vars.yoyo||!!this.vars.yoyoEase,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._repeat&&this._uncache(!0),this.render=Y.prototype.render},Z=1e-10,J=H._internals,Q=J.isSelector,K=J.isArray,$=Y.prototype=H.to({},0.1,{}),ee=[];Y.version="1.20.4",$.constructor=Y,$.kill()._gc=!1,Y.killTweensOf=Y.killDelayedCallsTo=H.killTweensOf,Y.getTweensOf=H.getTweensOf,Y.lagSmoothing=H.lagSmoothing,Y.ticker=H.ticker,Y.render=H.render,$.invalidate=function(){return this._yoyo=!0===this.vars.yoyo||!!this.vars.yoyoEase,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._yoyoEase=null,this._uncache(!0),H.prototype.invalidate.call(this)},$.updateTo=function(ne,se){var le=this.ratio,pe=this.vars.immediateRender||ne.immediateRender,ue;for(ue in se&&this._startTime<this._timeline._time&&(this._startTime=this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay)),ne)this.vars[ue]=ne[ue];if(this._initted||pe)if(se)this._initted=!1,pe&&this.render(0,!0,!0);else if(this._gc&&this._enabled(!0,!1),this._notifyPluginsOfEnabled&&this._firstPT&&H._onPluginEvent("_onDisable",this),0.998<this._time/this._duration){var ge=this._totalTime;this.render(0,!0,!1),this._initted=!1,this.render(ge,!0,!1)}else if(this._initted=!1,this._init(),0<this._time||pe)for(var he=this._firstPT,ye;he;)ye=he.s+he.c,he.c*=1/(1-le),he.s=ye-he.c,he=he._next;return this},$.render=function(ne,se,le){!this._initted&&0===this._duration&&this.vars.repeat&&this.invalidate();var pe=this._dirty?this.totalDuration():this._totalDuration,ue=this._time,ge=this._totalTime,fe=this._cycle,he=this._duration,ye=this._rawPrevTime,_e,xe,ve,Te,Ee,Se,Ae,we,Me;if(ne>=pe-1e-7&&0<=ne?(this._totalTime=pe,this._cycle=this._repeat,this._yoyo&&0!=(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=he,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1),!this._reversed&&(_e=!0,xe="onComplete",le=le||this._timeline.autoRemoveChildren),0===he&&(this._initted||!this.vars.lazy||le)&&(this._startTime===this._timeline._duration&&(ne=0),(0>ye||0>=ne&&-1e-7<=ne||ye===Z&&"isPause"!==this.data)&&ye!==ne&&(le=!0,ye>Z&&(xe="onReverseComplete")),this._rawPrevTime=we=!se||ne||ye===ne?ne:Z)):1e-7>ne?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==ge||0===he&&0<ye)&&(xe="onReverseComplete",_e=this._reversed),0>ne&&(this._active=!1,0===he&&(this._initted||!this.vars.lazy||le)&&(0<=ye&&(le=!0),this._rawPrevTime=we=!se||ne||ye===ne?ne:Z)),!this._initted&&(le=!0)):(this._totalTime=this._time=ne,0!==this._repeat&&(Te=he+this._repeatDelay,this._cycle=this._totalTime/Te>>0,0!==this._cycle&&this._cycle===this._totalTime/Te&&ge<=ne&&this._cycle--,this._time=this._totalTime-this._cycle*Te,this._yoyo&&0!=(1&this._cycle)&&(this._time=he-this._time,Me=this._yoyoEase||this.vars.yoyoEase,Me&&(!this._yoyoEase&&(!0!==Me||this._initted?this._yoyoEase=Me=!0===Me?this._ease:Me instanceof Ease?Me:Ease.map[Me]:(Me=this.vars.ease,this._yoyoEase=Me=Me?Me instanceof Ease?Me:"function"==typeof Me?new Ease(Me,this.vars.easeParams):Ease.map[Me]||H.defaultEase:H.defaultEase)),this.ratio=Me?1-Me.getRatio((he-this._time)/he):0)),this._time>he?this._time=he:0>this._time&&(this._time=0)),this._easeType&&!Me?(Ee=this._time/he,Se=this._easeType,Ae=this._easePower,(1===Se||3===Se&&0.5<=Ee)&&(Ee=1-Ee),3===Se&&(Ee*=2),1===Ae?Ee*=Ee:2===Ae?Ee*=Ee*Ee:3===Ae?Ee*=Ee*Ee*Ee:4===Ae&&(Ee*=Ee*Ee*Ee*Ee),this.ratio=1===Se?1-Ee:2===Se?Ee:0.5>this._time/he?Ee/2:1-Ee/2):!Me&&(this.ratio=this._ease.getRatio(this._time/he))),ue===this._time&&!le&&fe===this._cycle)return void(ge!==this._totalTime&&this._onUpdate&&!se&&this._callback("onUpdate"));if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!le&&this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration))return this._time=ue,this._totalTime=ge,this._rawPrevTime=ye,this._cycle=fe,J.lazyTweens.push(this),void(this._lazy=[ne,se]);!this._time||_e||Me?_e&&this._ease._calcEnd&&!Me&&(this.ratio=this._ease.getRatio(0===this._time?0:1)):this.ratio=this._ease.getRatio(this._time/he)}for(!1!==this._lazy&&(this._lazy=!1),this._active||this._paused||this._time===ue||!(0<=ne)||(this._active=!0),0===ge&&(2===this._initted&&0<ne&&this._init(),this._startAt&&(0<=ne?this._startAt.render(ne,!0,le):!xe&&(xe="_dummyGS")),this.vars.onStart&&(0!==this._totalTime||0===he)&&!se&&this._callback("onStart")),ve=this._firstPT;ve;)ve.f?ve.t[ve.p](ve.c*this.ratio+ve.s):ve.t[ve.p]=ve.c*this.ratio+ve.s,ve=ve._next;this._onUpdate&&(0>ne&&this._startAt&&this._startTime&&this._startAt.render(ne,!0,le),!se&&(this._totalTime!==ge||xe)&&this._callback("onUpdate")),this._cycle===fe||se||this._gc||!this.vars.onRepeat||this._callback("onRepeat"),xe&&(!this._gc||le)&&(0>ne&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(ne,!0,le),_e&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!se&&this.vars[xe]&&this._callback(xe),0===he&&this._rawPrevTime===Z&&we!==Z&&(this._rawPrevTime=0))},Y.to=function(ne,se,le){return new Y(ne,se,le)},Y.from=function(ne,se,le){return le.runBackwards=!0,le.immediateRender=!1!=le.immediateRender,new Y(ne,se,le)},Y.fromTo=function(ne,se,le,pe){return pe.startAt=le,pe.immediateRender=!1!=pe.immediateRender&&!1!=le.immediateRender,new Y(ne,se,pe)},Y.staggerTo=Y.allTo=function(ne,se,le,pe,ue,ge,fe){pe=pe||0;var he=0,ye=[],_e=function(){le.onComplete&&le.onComplete.apply(le.onCompleteScope||this,arguments),ue.apply(fe||le.callbackScope||this,ge||ee)},xe=le.cycle,ve=le.startAt&&le.startAt.cycle,Te,Ee,Se,Ae;for(K(ne)||("string"==typeof ne&&(ne=H.selector(ne)||ne),Q(ne)&&(ne=W(ne))),ne=ne||[],0>pe&&(ne=W(ne),ne.reverse(),pe*=-1),Te=ne.length-1,Se=0;Se<=Te;Se++){for(Ae in Ee={},le)Ee[Ae]=le[Ae];if(xe&&(X(Ee,ne,Se),null!=Ee.duration&&(se=Ee.duration,delete Ee.duration)),ve){for(Ae in ve=Ee.startAt={},le.startAt)ve[Ae]=le.startAt[Ae];X(Ee.startAt,ne,Se)}Ee.delay=he+(Ee.delay||0),Se===Te&&ue&&(Ee.onComplete=_e),ye[Se]=new Y(ne[Se],se,Ee),he+=pe}return ye},Y.staggerFrom=Y.allFrom=function(ne,se,le,pe,ue,ge,fe){return le.runBackwards=!0,le.immediateRender=!1!=le.immediateRender,Y.staggerTo(ne,se,le,pe,ue,ge,fe)},Y.staggerFromTo=Y.allFromTo=function(ne,se,le,pe,ue,ge,fe,he){return pe.startAt=le,pe.immediateRender=!1!=pe.immediateRender&&!1!=le.immediateRender,Y.staggerTo(ne,se,pe,ue,ge,fe,he)},Y.delayedCall=function(ne,se,le,pe,ue){return new Y(se,0,{delay:ne,onComplete:se,onCompleteParams:le,callbackScope:pe,onReverseComplete:se,onReverseCompleteParams:le,immediateRender:!1,useFrames:ue,overwrite:0})},Y.set=function(ne,se){return new Y(ne,0,se)},Y.isTweening=function(ne){return 0<H.getTweensOf(ne,!0).length};var re=function(ne,se){for(var le=[],pe=0,ue=ne._first;ue;)ue instanceof H?le[pe++]=ue:(se&&(le[pe++]=ue),le=le.concat(re(ue,se)),pe=le.length),ue=ue._next;return le},oe=Y.getAllTweens=function(ne){return re(O._rootTimeline,ne).concat(re(O._rootFramesTimeline,ne))};Y.killAll=function(ne,se,le,pe){null==se&&(se=!0),null==le&&(le=!0);var ue=oe(!1!=pe),ge=ue.length,fe=se&&le&&pe,he,ye,_e;for(_e=0;_e<ge;_e++)ye=ue[_e],(fe||ye instanceof G||(he=ye.target===ye.vars.onComplete)&&le||se&&!he)&&(ne?ye.totalTime(ye._reversed?0:ye.totalDuration()):ye._enabled(!1,!1))},Y.killChildTweensOf=function(ne,se){if(null!=ne){var le=J.tweenLookup,pe,ue,ge,fe,he;if("string"==typeof ne&&(ne=H.selector(ne)||ne),Q(ne)&&(ne=W(ne)),K(ne)){for(fe=ne.length;-1<--fe;)Y.killChildTweensOf(ne[fe],se);return}for(ge in pe=[],le)for(ue=le[ge].target.parentNode;ue;)ue===ne&&(pe=pe.concat(le[ge].tweens)),ue=ue.parentNode;for(he=pe.length,fe=0;fe<he;fe++)se&&pe[fe].totalTime(pe[fe].totalDuration()),pe[fe]._enabled(!1,!1)}};var ie=function(ne,se,le,pe){se=!1!==se,le=!1!==le,pe=!1!==pe;for(var ue=oe(pe),ge=se&&le&&pe,fe=ue.length,he,ye;-1<--fe;)ye=ue[fe],(ge||ye instanceof G||(he=ye.target===ye.vars.onComplete)&&le||se&&!he)&&ye.paused(ne)};return Y.pauseAll=function(ne,se,le){ie(!0,ne,se,le)},Y.resumeAll=function(ne,se,le){ie(!1,ne,se,le)},Y.globalTimeScale=function(ne){var se=O._rootTimeline,le=H.ticker.time;return arguments.length?(ne=ne||Z,se._startTime=le-(le-se._startTime)*se._timeScale/ne,se=O._rootFramesTimeline,le=H.ticker.frame,se._startTime=le-(le-se._startTime)*se._timeScale/ne,se._timeScale=O._rootTimeline._timeScale=ne,ne):se._timeScale},$.progress=function(ne,se){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!=(1&this._cycle)?1-ne:ne)+this._cycle*(this._duration+this._repeatDelay),se):this._time/this.duration()},$.totalProgress=function(ne,se){return arguments.length?this.totalTime(this.totalDuration()*ne,se):this._totalTime/this.totalDuration()},$.time=function(ne,se){return arguments.length?(this._dirty&&this.totalDuration(),ne>this._duration&&(ne=this._duration),this._yoyo&&0!=(1&this._cycle)?ne=this._duration-ne+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(ne+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(ne,se)):this._time},$.duration=function(ne){return arguments.length?O.prototype.duration.call(this,ne):this._duration},$.totalDuration=function(ne){return arguments.length?-1===this._repeat?this:this.duration((ne-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},$.repeat=function(ne){return arguments.length?(this._repeat=ne,this._uncache(!0)):this._repeat},$.repeatDelay=function(ne){return arguments.length?(this._repeatDelay=ne,this._uncache(!0)):this._repeatDelay},$.yoyo=function(ne){return arguments.length?(this._yoyo=ne,this):this._yoyo},Y},!0),U._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(O,G,H){var W=function(le){G.call(this,le),this._labels={},this.autoRemoveChildren=!0===this.vars.autoRemoveChildren,this.smoothChildTiming=!0===this.vars.smoothChildTiming,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var pe=this.vars,ue,ge;for(ge in pe)ue=pe[ge],Q(ue)&&-1!==ue.join("").indexOf("{self}")&&(pe[ge]=this._swapSelfInParams(ue));Q(pe.tweens)&&this.add(pe.tweens,0,pe.align,pe.stagger)},X=1e-10,Y=H._internals,Z=W._internals={},J=Y.isSelector,Q=Y.isArray,K=Y.lazyTweens,$=Y.lazyRender,ee=U._gsDefine.globals,re=function(le){var pe={},ue;for(ue in le)pe[ue]=le[ue];return pe},oe=function(le,pe,ue){var ge=le.cycle,fe,he;for(fe in ge)he=ge[fe],le[fe]="function"==typeof he?he(ue,pe[ue]):he[ue%he.length];delete le.cycle},ie=Z.pauseCallback=function(){},ne=function(le){var pe=[],ue=le.length,ge;for(ge=0;ge!==ue;pe.push(le[ge++]));return pe},se=W.prototype=new G;return W.version="1.20.4",se.constructor=W,se.kill()._gc=se._forcingPlayhead=se._hasPause=!1,se.to=function(le,pe,ue,ge){var fe=ue.repeat&&ee.TweenMax||H;return pe?this.add(new fe(le,pe,ue),ge):this.set(le,ue,ge)},se.from=function(le,pe,ue,ge){return this.add((ue.repeat&&ee.TweenMax||H).from(le,pe,ue),ge)},se.fromTo=function(le,pe,ue,ge,fe){var he=ge.repeat&&ee.TweenMax||H;return pe?this.add(he.fromTo(le,pe,ue,ge),fe):this.set(le,ge,fe)},se.staggerTo=function(le,pe,ue,ge,fe,he,ye,_e){var xe=new W({onComplete:he,onCompleteParams:ye,callbackScope:_e,smoothChildTiming:this.smoothChildTiming}),ve=ue.cycle,Te,Ee;for("string"==typeof le&&(le=H.selector(le)||le),le=le||[],J(le)&&(le=ne(le)),ge=ge||0,0>ge&&(le=ne(le),le.reverse(),ge*=-1),Ee=0;Ee<le.length;Ee++)Te=re(ue),Te.startAt&&(Te.startAt=re(Te.startAt),Te.startAt.cycle&&oe(Te.startAt,le,Ee)),ve&&(oe(Te,le,Ee),null!=Te.duration&&(pe=Te.duration,delete Te.duration)),xe.to(le[Ee],pe,Te,Ee*ge);return this.add(xe,fe)},se.staggerFrom=function(le,pe,ue,ge,fe,he,ye,_e){return ue.immediateRender=!1!=ue.immediateRender,ue.runBackwards=!0,this.staggerTo(le,pe,ue,ge,fe,he,ye,_e)},se.staggerFromTo=function(le,pe,ue,ge,fe,he,ye,_e,xe){return ge.startAt=ue,ge.immediateRender=!1!=ge.immediateRender&&!1!=ue.immediateRender,this.staggerTo(le,pe,ge,fe,he,ye,_e,xe)},se.call=function(le,pe,ue,ge){return this.add(H.delayedCall(0,le,pe,ue),ge)},se.set=function(le,pe,ue){return ue=this._parseTimeOrLabel(ue,0,!0),null==pe.immediateRender&&(pe.immediateRender=ue===this._time&&!this._paused),this.add(new H(le,0,pe),ue)},W.exportRoot=function(le,pe){le=le||{},null==le.smoothChildTiming&&(le.smoothChildTiming=!0);var ue=new W(le),ge=ue._timeline,fe,he,ye,_e;for(null==pe&&(pe=!0),ge._remove(ue,!0),ue._startTime=0,ue._rawPrevTime=ue._time=ue._totalTime=ge._time,ye=ge._first;ye;)_e=ye._next,pe&&ye instanceof H&&ye.target===ye.vars.onComplete||(he=ye._startTime-ye._delay,0>he&&(fe=1),ue.add(ye,he)),ye=_e;return ge.add(ue,0),fe&&ue.totalDuration(),ue},se.add=function(le,pe,ue,ge){var fe,he,ye,_e,xe,ve;if("number"!=typeof pe&&(pe=this._parseTimeOrLabel(pe,0,!0,le)),!(le instanceof O)){if(le instanceof Array||le&&le.push&&Q(le)){for(ue=ue||"normal",ge=ge||0,fe=pe,he=le.length,ye=0;ye<he;ye++)Q(_e=le[ye])&&(_e=new W({tweens:_e})),this.add(_e,fe),"string"!=typeof _e&&"function"!=typeof _e&&("sequence"===ue?fe=_e._startTime+_e.totalDuration()/_e._timeScale:"start"===ue&&(_e._startTime-=_e.delay())),fe+=ge;return this._uncache(!0)}if("string"==typeof le)return this.addLabel(le,pe);if("function"==typeof le)le=H.delayedCall(0,le);else throw"Cannot add "+le+" into the timeline; it is not a tween, timeline, function, or string."}if(G.prototype.add.call(this,le,pe),le._time&&le.render((this.rawTime()-le._startTime)*le._timeScale,!1,!1),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(xe=this,ve=xe.rawTime()>le._startTime;xe._timeline;)ve&&xe._timeline.smoothChildTiming?xe.totalTime(xe._totalTime,!0):xe._gc&&xe._enabled(!0,!1),xe=xe._timeline;return this},se.remove=function(le){if(le instanceof O){this._remove(le,!1);var pe=le._timeline=le.vars.useFrames?O._rootFramesTimeline:O._rootTimeline;return le._startTime=(le._paused?le._pauseTime:pe._time)-(le._reversed?le.totalDuration()-le._totalTime:le._totalTime)/le._timeScale,this}if(le instanceof Array||le&&le.push&&Q(le)){for(var ue=le.length;-1<--ue;)this.remove(le[ue]);return this}return"string"==typeof le?this.removeLabel(le):this.kill(null,le)},se._remove=function(le,pe){G.prototype._remove.call(this,le,pe);var ue=this._last;return ue?this._time>this.duration()&&(this._time=this._duration,this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},se.append=function(le,pe){return this.add(le,this._parseTimeOrLabel(null,pe,!0,le))},se.insert=se.insertMultiple=function(le,pe,ue,ge){return this.add(le,pe||0,ue,ge)},se.appendMultiple=function(le,pe,ue,ge){return this.add(le,this._parseTimeOrLabel(null,pe,!0,le),ue,ge)},se.addLabel=function(le,pe){return this._labels[le]=this._parseTimeOrLabel(pe),this},se.addPause=function(le,pe,ue,ge){var fe=H.delayedCall(0,ie,ue,ge||this);return fe.vars.onComplete=fe.vars.onReverseComplete=pe,fe.data="isPause",this._hasPause=!0,this.add(fe,le)},se.removeLabel=function(le){return delete this._labels[le],this},se.getLabelTime=function(le){return null==this._labels[le]?-1:this._labels[le]},se._parseTimeOrLabel=function(le,pe,ue,ge){var fe,he;if(ge instanceof O&&ge.timeline===this)this.remove(ge);else if(ge&&(ge instanceof Array||ge.push&&Q(ge)))for(he=ge.length;-1<--he;)ge[he]instanceof O&&ge[he].timeline===this&&this.remove(ge[he]);if(fe="number"!=typeof le||pe?99999999999<this.duration()?this.recent().endTime(!1):this._duration:0,"string"==typeof pe)return this._parseTimeOrLabel(pe,ue&&"number"==typeof le&&null==this._labels[pe]?le-fe:0,ue);if(pe=pe||0,"string"==typeof le&&(isNaN(le)||null!=this._labels[le])){if(he=le.indexOf("="),-1===he)return null==this._labels[le]?ue?this._labels[le]=fe+pe:pe:this._labels[le]+pe;pe=parseInt(le.charAt(he-1)+"1",10)*+le.substr(he+1),le=1<he?this._parseTimeOrLabel(le.substr(0,he-1),0,ue):fe}else null==le&&(le=fe);return+le+pe},se.seek=function(le,pe){return this.totalTime("number"==typeof le?le:this._parseTimeOrLabel(le),!1!==pe)},se.stop=function(){return this.paused(!0)},se.gotoAndPlay=function(le,pe){return this.play(le,pe)},se.gotoAndStop=function(le,pe){return this.pause(le,pe)},se.render=function(le,pe,ue){this._gc&&this._enabled(!0,!1);var ge=this._time,fe=this._dirty?this.totalDuration():this._totalDuration,he=this._startTime,ye=this._timeScale,_e=this._paused,xe,ve,Te,Ee,Se,Ae,we;if(ge!==this._time&&(le+=this._time-ge),le>=fe-1e-7&&0<=le)this._totalTime=this._time=fe,this._reversed||this._hasPausedChild()||(ve=!0,Ee="onComplete",Se=!!this._timeline.autoRemoveChildren,0===this._duration&&(0>=le&&-1e-7<=le||0>this._rawPrevTime||this._rawPrevTime===X)&&this._rawPrevTime!==le&&this._first&&(Se=!0,this._rawPrevTime>X&&(Ee="onReverseComplete"))),this._rawPrevTime=this._duration||!pe||le||this._rawPrevTime===le?le:X,le=fe+1e-4;else if(!(1e-7>le)){if(this._hasPause&&!this._forcingPlayhead&&!pe){if(le>=ge)for(xe=this._first;xe&&xe._startTime<=le&&!Ae;)xe._duration||"isPause"!==xe.data||xe.ratio||0===xe._startTime&&0===this._rawPrevTime||(Ae=xe),xe=xe._next;else for(xe=this._last;xe&&xe._startTime>=le&&!Ae;)!xe._duration&&"isPause"===xe.data&&0<xe._rawPrevTime&&(Ae=xe),xe=xe._prev;Ae&&(this._time=le=Ae._startTime,this._totalTime=le+this._cycle*(this._totalDuration+this._repeatDelay))}this._totalTime=this._time=this._rawPrevTime=le}else if(this._totalTime=this._time=0,(0!==ge||0===this._duration&&this._rawPrevTime!==X&&(0<this._rawPrevTime||0>le&&0<=this._rawPrevTime))&&(Ee="onReverseComplete",ve=this._reversed),0>le)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(Se=ve=!0,Ee="onReverseComplete"):0<=this._rawPrevTime&&this._first&&(Se=!0),this._rawPrevTime=le;else{if(this._rawPrevTime=this._duration||!pe||le||this._rawPrevTime===le?le:X,0===le&&ve)for(xe=this._first;xe&&0===xe._startTime;)xe._duration||(ve=!1),xe=xe._next;le=0,this._initted||(Se=!0)}if(this._time!==ge&&this._first||ue||Se||Ae){if(this._initted||(this._initted=!0),this._active||this._paused||this._time===ge||!(0<le)||(this._active=!0),0!==ge||!this.vars.onStart||0===this._time&&this._duration||pe||this._callback("onStart"),we=this._time,we>=ge)for(xe=this._first;xe&&(Te=xe._next,we===this._time&&(!this._paused||_e));)(xe._active||xe._startTime<=we&&!xe._paused&&!xe._gc)&&(Ae===xe&&this.pause(),xe._reversed?xe.render((xe._dirty?xe.totalDuration():xe._totalDuration)-(le-xe._startTime)*xe._timeScale,pe,ue):xe.render((le-xe._startTime)*xe._timeScale,pe,ue)),xe=Te;else for(xe=this._last;xe&&(Te=xe._prev,we===this._time&&(!this._paused||_e));){if(xe._active||xe._startTime<=ge&&!xe._paused&&!xe._gc){if(Ae===xe){for(Ae=xe._prev;Ae&&Ae.endTime()>this._time;)Ae.render(Ae._reversed?Ae.totalDuration()-(le-Ae._startTime)*Ae._timeScale:(le-Ae._startTime)*Ae._timeScale,pe,ue),Ae=Ae._prev;Ae=null,this.pause()}xe._reversed?xe.render((xe._dirty?xe.totalDuration():xe._totalDuration)-(le-xe._startTime)*xe._timeScale,pe,ue):xe.render((le-xe._startTime)*xe._timeScale,pe,ue)}xe=Te}this._onUpdate&&!pe&&(K.length&&$(),this._callback("onUpdate")),Ee&&!this._gc&&(he===this._startTime||ye!==this._timeScale)&&(0===this._time||fe>=this.totalDuration())&&(ve&&(K.length&&$(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!pe&&this.vars[Ee]&&this._callback(Ee))}},se._hasPausedChild=function(){for(var le=this._first;le;){if(le._paused||le instanceof W&&le._hasPausedChild())return!0;le=le._next}return!1},se.getChildren=function(le,pe,ue,ge){ge=ge||-9999999999;for(var fe=[],he=this._first,ye=0;he;)he._startTime<ge||(he instanceof H?!1!==pe&&(fe[ye++]=he):(!1!==ue&&(fe[ye++]=he),!1!==le&&(fe=fe.concat(he.getChildren(!0,pe,ue)),ye=fe.length))),he=he._next;return fe},se.getTweensOf=function(le,pe){var ue=this._gc,ge=[],fe=0,he,ye;for(ue&&this._enabled(!0,!0),he=H.getTweensOf(le),ye=he.length;-1<--ye;)(he[ye].timeline===this||pe&&this._contains(he[ye]))&&(ge[fe++]=he[ye]);return ue&&this._enabled(!1,!0),ge},se.recent=function(){return this._recent},se._contains=function(le){for(var pe=le.timeline;pe;){if(pe===this)return!0;pe=pe.timeline}return!1},se.shiftChildren=function(le,pe,ue){ue=ue||0;for(var ge=this._first,fe=this._labels,he;ge;)ge._startTime>=ue&&(ge._startTime+=le),ge=ge._next;if(pe)for(he in fe)fe[he]>=ue&&(fe[he]+=le);return this._uncache(!0)},se._kill=function(le,pe){if(!le&&!pe)return this._enabled(!1,!1);for(var ue=pe?this.getTweensOf(pe):this.getChildren(!0,!0,!1),ge=ue.length,fe=!1;-1<--ge;)ue[ge]._kill(le,pe)&&(fe=!0);return fe},se.clear=function(le){var pe=this.getChildren(!1,!0,!0),ue=pe.length;for(this._time=this._totalTime=0;-1<--ue;)pe[ue]._enabled(!1,!1);return!1!==le&&(this._labels={}),this._uncache(!0)},se.invalidate=function(){for(var le=this._first;le;)le.invalidate(),le=le._next;return O.prototype.invalidate.call(this)},se._enabled=function(le,pe){if(le===this._gc)for(var ue=this._first;ue;)ue._enabled(le,!0),ue=ue._next;return G.prototype._enabled.call(this,le,pe)},se.totalTime=function(){this._forcingPlayhead=!0;var ge=O.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,ge},se.duration=function(le){return arguments.length?(0!==this.duration()&&0!==le&&this.timeScale(this._duration/le),this):(this._dirty&&this.totalDuration(),this._duration)},se.totalDuration=function(le){if(!arguments.length){if(this._dirty){for(var pe=0,ue=this._last,ge=999999999999,fe,he;ue;)fe=ue._prev,ue._dirty&&ue.totalDuration(),ue._startTime>ge&&this._sortChildren&&!ue._paused&&!this._calculatingDuration?(this._calculatingDuration=1,this.add(ue,ue._startTime-ue._delay),this._calculatingDuration=0):ge=ue._startTime,0>ue._startTime&&!ue._paused&&(pe-=ue._startTime,this._timeline.smoothChildTiming&&(this._startTime+=ue._startTime/this._timeScale,this._time-=ue._startTime,this._totalTime-=ue._startTime,this._rawPrevTime-=ue._startTime),this.shiftChildren(-ue._startTime,!1,-9999999999),ge=0),he=ue._startTime+ue._totalDuration/ue._timeScale,he>pe&&(pe=he),ue=fe;this._duration=this._totalDuration=pe,this._dirty=!1}return this._totalDuration}return le&&this.totalDuration()?this.timeScale(this._totalDuration/le):this},se.paused=function(le){if(!le)for(var pe=this._first,ue=this._time;pe;)pe._startTime===ue&&"isPause"===pe.data&&(pe._rawPrevTime=0),pe=pe._next;return O.prototype.paused.apply(this,arguments)},se.usesFrames=function(){for(var le=this._timeline;le._timeline;)le=le._timeline;return le===O._rootFramesTimeline},se.rawTime=function(le){return le&&(this._paused||this._repeat&&0<this.time()&&1>this.totalProgress())?this._totalTime%(this._duration+this._repeatDelay):this._paused?this._totalTime:(this._timeline.rawTime(le)-this._startTime)*this._timeScale},W},!0),U._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(O,G,H){var W=function(ee){O.call(this,ee),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=!0===this.vars.yoyo,this._dirty=!0},X=1e-10,Y=G._internals,Z=Y.lazyTweens,J=Y.lazyRender,Q=U._gsDefine.globals,K=new H(null,null,1,0),$=W.prototype=new O;return $.constructor=W,$.kill()._gc=!1,W.version="1.20.4",$.invalidate=function(){return this._yoyo=!0===this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),O.prototype.invalidate.call(this)},$.addCallback=function(ee,re,oe,ie){return this.add(G.delayedCall(0,ee,oe,ie),re)},$.removeCallback=function(ee,re){if(ee)if(null==re)this._kill(null,ee);else for(var oe=this.getTweensOf(ee,!1),ie=oe.length,ne=this._parseTimeOrLabel(re);-1<--ie;)oe[ie]._startTime===ne&&oe[ie]._enabled(!1,!1);return this},$.removePause=function(ee){return this.removeCallback(O._internals.pauseCallback,ee)},$.tweenTo=function(ee,re){re=re||{};var oe={ease:K,useFrames:this.usesFrames(),immediateRender:!1,lazy:!1},ie=re.repeat&&Q.TweenMax||G,ne,se,le;for(se in re)oe[se]=re[se];return oe.time=this._parseTimeOrLabel(ee),ne=_Mathabs(+oe.time-this._time)/this._timeScale||1e-3,le=new ie(this,ne,oe),oe.onStart=function(){le.target.paused(!0),le.vars.time===le.target.time()||ne!==le.duration()||le.isFromTo||le.duration(_Mathabs(le.vars.time-le.target.time())/le.target._timeScale).render(le.time(),!0,!0),re.onStart&&re.onStart.apply(re.onStartScope||re.callbackScope||le,re.onStartParams||[])},le},$.tweenFromTo=function(ee,re,oe){oe=oe||{},ee=this._parseTimeOrLabel(ee),oe.startAt={onComplete:this.seek,onCompleteParams:[ee],callbackScope:this},oe.immediateRender=!1!==oe.immediateRender;var ie=this.tweenTo(re,oe);return ie.isFromTo=1,ie.duration(_Mathabs(ie.vars.time-ee)/this._timeScale||1e-3)},$.render=function(ee,re,oe){this._gc&&this._enabled(!0,!1);var ie=this._time,ne=this._dirty?this.totalDuration():this._totalDuration,se=this._duration,le=this._totalTime,pe=this._startTime,ue=this._timeScale,ge=this._rawPrevTime,fe=this._paused,he=this._cycle,ye,_e,xe,ve,Te,Ee,Se,Ae;if(ie!==this._time&&(ee+=this._time-ie),ee>=ne-1e-7&&0<=ee)this._locked||(this._totalTime=ne,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(_e=!0,ve="onComplete",Te=!!this._timeline.autoRemoveChildren,0===this._duration&&(0>=ee&&-1e-7<=ee||0>ge||ge===X)&&ge!==ee&&this._first&&(Te=!0,ge>X&&(ve="onReverseComplete"))),this._rawPrevTime=this._duration||!re||ee||this._rawPrevTime===ee?ee:X,this._yoyo&&0!=(1&this._cycle)?this._time=ee=0:(this._time=se,ee=se+1e-4);else if(1e-7>ee){if(this._locked||(this._totalTime=this._cycle=0),this._time=0,(0!==ie||0===se&&ge!==X&&(0<ge||0>ee&&0<=ge)&&!this._locked)&&(ve="onReverseComplete",_e=this._reversed),0>ee)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(Te=_e=!0,ve="onReverseComplete"):0<=ge&&this._first&&(Te=!0),this._rawPrevTime=ee;else{if(this._rawPrevTime=se||!re||ee||this._rawPrevTime===ee?ee:X,0===ee&&_e)for(ye=this._first;ye&&0===ye._startTime;)ye._duration||(_e=!1),ye=ye._next;ee=0,this._initted||(Te=!0)}}else if(0===se&&0>ge&&(Te=!0),this._time=this._rawPrevTime=ee,this._locked||(this._totalTime=ee,0!==this._repeat&&(Ee=se+this._repeatDelay,this._cycle=this._totalTime/Ee>>0,0!==this._cycle&&this._cycle===this._totalTime/Ee&&le<=ee&&this._cycle--,this._time=this._totalTime-this._cycle*Ee,this._yoyo&&0!=(1&this._cycle)&&(this._time=se-this._time),this._time>se?(this._time=se,ee=se+1e-4):0>this._time?this._time=ee=0:ee=this._time)),this._hasPause&&!this._forcingPlayhead&&!re){if(ee=this._time,ee>=ie||this._repeat&&he!==this._cycle)for(ye=this._first;ye&&ye._startTime<=ee&&!Se;)ye._duration||"isPause"!==ye.data||ye.ratio||0===ye._startTime&&0===this._rawPrevTime||(Se=ye),ye=ye._next;else for(ye=this._last;ye&&ye._startTime>=ee&&!Se;)!ye._duration&&"isPause"===ye.data&&0<ye._rawPrevTime&&(Se=ye),ye=ye._prev;Se&&Se._startTime<se&&(this._time=ee=Se._startTime,this._totalTime=ee+this._cycle*(this._totalDuration+this._repeatDelay))}if(this._cycle!==he&&!this._locked){var we=this._yoyo&&0!=(1&he),Me=we===(this._yoyo&&0!=(1&this._cycle)),Re=this._totalTime,Ce=this._cycle,Pe=this._rawPrevTime,Le=this._time;if(this._totalTime=he*se,this._cycle<he?we=!we:this._totalTime+=se,this._time=ie,this._rawPrevTime=0===se?ge-1e-4:ge,this._cycle=he,this._locked=!0,ie=we?0:se,this.render(ie,re,0===se),re||this._gc||!this.vars.onRepeat||(this._cycle=Ce,this._locked=!1,this._callback("onRepeat")),ie!==this._time)return;if(Me&&(this._cycle=he,this._locked=!0,ie=we?se+1e-4:-1e-4,this.render(ie,!0,!1)),this._locked=!1,this._paused&&!fe)return;this._time=Le,this._totalTime=Re,this._cycle=Ce,this._rawPrevTime=Pe}if((this._time===ie||!this._first)&&!oe&&!Te&&!Se)return void(le!==this._totalTime&&this._onUpdate&&!re&&this._callback("onUpdate"));if(this._initted||(this._initted=!0),this._active||this._paused||this._totalTime===le||!(0<ee)||(this._active=!0),0!==le||!this.vars.onStart||0===this._totalTime&&this._totalDuration||re||this._callback("onStart"),Ae=this._time,Ae>=ie)for(ye=this._first;ye&&(xe=ye._next,Ae===this._time&&(!this._paused||fe));)(ye._active||ye._startTime<=this._time&&!ye._paused&&!ye._gc)&&(Se===ye&&this.pause(),ye._reversed?ye.render((ye._dirty?ye.totalDuration():ye._totalDuration)-(ee-ye._startTime)*ye._timeScale,re,oe):ye.render((ee-ye._startTime)*ye._timeScale,re,oe)),ye=xe;else for(ye=this._last;ye&&(xe=ye._prev,Ae===this._time&&(!this._paused||fe));){if(ye._active||ye._startTime<=ie&&!ye._paused&&!ye._gc){if(Se===ye){for(Se=ye._prev;Se&&Se.endTime()>this._time;)Se.render(Se._reversed?Se.totalDuration()-(ee-Se._startTime)*Se._timeScale:(ee-Se._startTime)*Se._timeScale,re,oe),Se=Se._prev;Se=null,this.pause()}ye._reversed?ye.render((ye._dirty?ye.totalDuration():ye._totalDuration)-(ee-ye._startTime)*ye._timeScale,re,oe):ye.render((ee-ye._startTime)*ye._timeScale,re,oe)}ye=xe}this._onUpdate&&!re&&(Z.length&&J(),this._callback("onUpdate")),ve&&!this._locked&&!this._gc&&(pe===this._startTime||ue!==this._timeScale)&&(0===this._time||ne>=this.totalDuration())&&(_e&&(Z.length&&J(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!re&&this.vars[ve]&&this._callback(ve))},$.getActive=function(ee,re,oe){null==ee&&(ee=!0),null==re&&(re=!0),null==oe&&(oe=!1);var ie=[],ne=this.getChildren(ee,re,oe),se=0,le=ne.length,pe,ue;for(pe=0;pe<le;pe++)ue=ne[pe],ue.isActive()&&(ie[se++]=ue);return ie},$.getLabelAfter=function(ee){ee||0===ee||(ee=this._time);var re=this.getLabelsArray(),oe=re.length,ie;for(ie=0;ie<oe;ie++)if(re[ie].time>ee)return re[ie].name;return null},$.getLabelBefore=function(ee){null==ee&&(ee=this._time);for(var re=this.getLabelsArray(),oe=re.length;-1<--oe;)if(re[oe].time<ee)return re[oe].name;return null},$.getLabelsArray=function(){var ee=[],re=0,oe;for(oe in this._labels)ee[re++]={time:this._labels[oe],name:oe};return ee.sort(function(ie,ne){return ie.time-ne.time}),ee},$.invalidate=function(){return this._locked=!1,O.prototype.invalidate.call(this)},$.progress=function(ee,re){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!=(1&this._cycle)?1-ee:ee)+this._cycle*(this._duration+this._repeatDelay),re):this._time/this.duration()||0},$.totalProgress=function(ee,re){return arguments.length?this.totalTime(this.totalDuration()*ee,re):this._totalTime/this.totalDuration()||0},$.totalDuration=function(ee){return arguments.length?-1!==this._repeat&&ee?this.timeScale(this.totalDuration()/ee):this:(this._dirty&&(O.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},$.time=function(ee,re){return arguments.length?(this._dirty&&this.totalDuration(),ee>this._duration&&(ee=this._duration),this._yoyo&&0!=(1&this._cycle)?ee=this._duration-ee+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(ee+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(ee,re)):this._time},$.repeat=function(ee){return arguments.length?(this._repeat=ee,this._uncache(!0)):this._repeat},$.repeatDelay=function(ee){return arguments.length?(this._repeatDelay=ee,this._uncache(!0)):this._repeatDelay},$.yoyo=function(ee){return arguments.length?(this._yoyo=ee,this):this._yoyo},$.currentLabel=function(ee){return arguments.length?this.seek(ee,!0):this.getLabelBefore(this._time+1e-8)},W},!0),function(){var G=[],H=[],W=[],X={},Y=U._gsDefine.globals,Z=function(le,pe,ue,ge){ue===ge&&(ue=ge-(ge-pe)/1e6),le===pe&&(pe=le+(ue-le)/1e6),this.a=le,this.b=pe,this.c=ue,this.d=ge,this.da=ge-le,this.ca=ue-le,this.ba=pe-le},Q=function(le,pe,ue,ge){var fe={a:le},he={},ye={},_e={c:ge},xe=(le+pe)/2,ve=(pe+ue)/2,Te=(ue+ge)/2,Ee=(xe+ve)/2,Se=(ve+Te)/2,Ae=(Se-Ee)/8;return fe.b=xe+(le-xe)/4,he.b=Ee+Ae,fe.c=he.a=(fe.b+he.b)/2,he.c=ye.a=(Ee+Se)/2,ye.b=Se-Ae,_e.b=Te+(ge-Te)/4,ye.c=_e.a=(ye.b+_e.b)/2,[fe,he,ye,_e]},K=function(le,pe,ue,ge,fe){var he=le.length-1,ye=0,_e=le[0].a,xe,ve,Te,Ee,Se,Ae,we,Me,Re,Ce,Pe,Le,Ie;for(xe=0;xe<he;xe++)Se=le[ye],ve=Se.a,Te=Se.d,Ee=le[ye+1].d,fe?(Pe=G[xe],Le=H[xe],Ie=0.25*((Le+Pe)*pe)/(ge?0.5:W[xe]||0.5),Ae=Te-(Te-ve)*(ge?0.5*pe:0===Pe?0:Ie/Pe),we=Te+(Ee-Te)*(ge?0.5*pe:0===Le?0:Ie/Le),Me=Te-(Ae+((we-Ae)*(3*Pe/(Pe+Le)+0.5)/4||0))):(Ae=Te-0.5*((Te-ve)*pe),we=Te+0.5*((Ee-Te)*pe),Me=Te-(Ae+we)/2),Ae+=Me,we+=Me,Se.c=Re=Ae,Se.b=0===xe?_e=Se.a+0.6*(Se.c-Se.a):_e,Se.da=Te-ve,Se.ca=Re-ve,Se.ba=_e-ve,ue?(Ce=Q(ve,_e,Re,Te),le.splice(ye,1,Ce[0],Ce[1],Ce[2],Ce[3]),ye+=4):ye++,_e=we;Se=le[ye],Se.b=_e,Se.c=_e+0.4*(Se.d-_e),Se.da=Se.d-Se.a,Se.ca=Se.c-Se.a,Se.ba=_e-Se.a,ue&&(Ce=Q(Se.a,_e,Se.c,Se.d),le.splice(ye,1,Ce[0],Ce[1],Ce[2],Ce[3]))},$=function(le,pe,ue,ge){var fe=[],he,ye,_e,xe,ve,Te;if(ge)for(le=[ge].concat(le),ye=le.length;-1<--ye;)"string"==typeof(Te=le[ye][pe])&&"="===Te.charAt(1)&&(le[ye][pe]=ge[pe]+ +(Te.charAt(0)+Te.substr(2)));if(he=le.length-2,0>he)return fe[0]=new Z(le[0][pe],0,0,le[0][pe]),fe;for(ye=0;ye<he;ye++)_e=le[ye][pe],xe=le[ye+1][pe],fe[ye]=new Z(_e,0,0,xe),ue&&(ve=le[ye+2][pe],G[ye]=(G[ye]||0)+(xe-_e)*(xe-_e),H[ye]=(H[ye]||0)+(ve-xe)*(ve-xe));return fe[ye]=new Z(le[ye][pe],0,0,le[ye+1][pe]),fe},ee=function(le,pe,ue,ge,fe,he){var ye={},_e=[],xe=he||le[0],ve,Te,Ee,Se,Ae,we,Me,Re;for(Te in fe="string"==typeof fe?","+fe+",":",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",null==pe&&(pe=1),le[0])_e.push(Te);if(1<le.length){for(Re=le[le.length-1],Me=!0,ve=_e.length;-1<--ve;)if(Te=_e[ve],0.05<_Mathabs(xe[Te]-Re[Te])){Me=!1;break}Me&&(le=le.concat(),he&&le.unshift(he),le.push(le[1]),he=le[le.length-3])}for(G.length=H.length=W.length=0,ve=_e.length;-1<--ve;)Te=_e[ve],X[Te]=-1!==fe.indexOf(","+Te+","),ye[Te]=$(le,Te,X[Te],he);for(ve=G.length;-1<--ve;)G[ve]=_Mathsqrt(G[ve]),H[ve]=_Mathsqrt(H[ve]);if(!ge){for(ve=_e.length;-1<--ve;)if(X[Te])for(Ee=ye[_e[ve]],we=Ee.length-1,Se=0;Se<we;Se++)Ae=Ee[Se+1].da/H[Se]+Ee[Se].da/G[Se]||0,W[Se]=(W[Se]||0)+Ae*Ae;for(ve=W.length;-1<--ve;)W[ve]=_Mathsqrt(W[ve])}for(ve=_e.length,Se=ue?4:1;-1<--ve;)Te=_e[ve],Ee=ye[Te],K(Ee,pe,ue,ge,X[Te]),Me&&(Ee.splice(0,Se),Ee.splice(Ee.length-Se,Se));return ye},re=function(le,pe,ue){pe=pe||"soft";var ge={},fe="cubic"===pe?3:2,he="soft"===pe,ye=[],_e,xe,ve,Te,Ee,Se,Ae,we,Me,Re,Ce;if(he&&ue&&(le=[ue].concat(le)),null==le||le.length<fe+1)throw"invalid Bezier data";for(Me in le[0])ye.push(Me);for(Se=ye.length;-1<--Se;){for(Me=ye[Se],ge[Me]=Ee=[],Re=0,we=le.length,Ae=0;Ae<we;Ae++)_e=null==ue?le[Ae][Me]:"string"==typeof(Ce=le[Ae][Me])&&"="===Ce.charAt(1)?ue[Me]+ +(Ce.charAt(0)+Ce.substr(2)):+Ce,he&&1<Ae&&Ae<we-1&&(Ee[Re++]=(_e+Ee[Re-2])/2),Ee[Re++]=_e;for(we=Re-fe+1,Re=0,Ae=0;Ae<we;Ae+=fe)_e=Ee[Ae],xe=Ee[Ae+1],ve=Ee[Ae+2],Te=2==fe?0:Ee[Ae+3],Ee[Re++]=Ce=3==fe?new Z(_e,xe,ve,Te):new Z(_e,(2*xe+_e)/3,(2*xe+ve)/3,ve);Ee.length=Re}return ge},oe=function(le,pe,ue){for(var fe=le.length,he,ye,_e,xe,ve,Te,Ee,Se,Ae,we,Me;-1<--fe;)for(we=le[fe],_e=we.a,xe=we.d-_e,ve=we.c-_e,Te=we.b-_e,he=ye=0,Se=1;Se<=ue;Se++)Ee=1/ue*Se,Ae=1-Ee,he=ye-(ye=(Ee*Ee*xe+3*Ae*(Ee*ve+Ae*Te))*Ee),Me=fe*ue+Se-1,pe[Me]=(pe[Me]||0)+he*he},ie=function(le,pe){pe=pe>>0||6;var ue=[],ge=[],fe=0,he=0,ye=pe-1,_e=[],xe=[],ve,Te,Ee,Se;for(ve in le)oe(le[ve],ue,pe);for(Ee=ue.length,Te=0;Te<Ee;Te++)fe+=_Mathsqrt(ue[Te]),Se=Te%pe,xe[Se]=fe,Se===ye&&(he+=fe,Se=Te/pe>>0,_e[Se]=xe,ge[Se]=he,fe=0,xe=[]);return{length:he,lengths:ge,segments:_e}},ne=U._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.8",API:2,global:!0,init:function(le,pe,ue){this._target=le,pe instanceof Array&&(pe={values:pe}),this._func={},this._mod={},this._props=[],this._timeRes=null==pe.timeResolution?6:parseInt(pe.timeResolution,10);var ge=pe.values||[],fe={},he=ge[0],ye=pe.autoRotate||ue.vars.orientToBezier,_e,xe,ve,Te,Ee;for(_e in this._autoRotate=ye?ye instanceof Array?ye:[["x","y","rotation",!0===ye?0:+ye||0]]:null,he)this._props.push(_e);for(ve=this._props.length;-1<--ve;)_e=this._props[ve],this._overwriteProps.push(_e),xe=this._func[_e]="function"==typeof le[_e],fe[_e]=xe?le[_e.indexOf("set")||"function"!=typeof le["get"+_e.substr(3)]?_e:"get"+_e.substr(3)]():parseFloat(le[_e]),Ee||fe[_e]===ge[0][_e]||(Ee=fe);if(this._beziers="cubic"!==pe.type&&"quadratic"!==pe.type&&"soft"!==pe.type?ee(ge,isNaN(pe.curviness)?1:pe.curviness,!1,"thruBasic"===pe.type,pe.correlate,Ee):re(ge,pe.type,fe),this._segCount=this._beziers[_e].length,this._timeRes){var Se=ie(this._beziers,this._timeRes);this._length=Se.length,this._lengths=Se.lengths,this._segments=Se.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(ye=this._autoRotate)for(this._initialRotations=[],ye[0]instanceof Array||(this._autoRotate=ye=[ye]),ve=ye.length;-1<--ve;){for(Te=0;3>Te;Te++)_e=ye[ve][Te],this._func[_e]="function"==typeof le[_e]&&le[_e.indexOf("set")||"function"!=typeof le["get"+_e.substr(3)]?_e:"get"+_e.substr(3)];_e=ye[ve][2],this._initialRotations[ve]=(this._func[_e]?this._func[_e].call(this._target):this._target[_e])||0,this._overwriteProps.push(_e)}return this._startRatio=ue.vars.runBackwards?1:0,!0},set:function(le){var pe=this._segCount,ue=this._func,ge=this._target,fe=le!==this._startRatio,he,ye,_e,xe,ve,Te,Ee,Se,Ae,we;if(!this._timeRes)he=0>le?0:1<=le?pe-1:pe*le>>0,Te=(le-he*(1/pe))*pe;else{if(Ae=this._lengths,we=this._curSeg,le*=this._length,_e=this._li,le>this._l2&&_e<pe-1){for(Se=pe-1;_e<Se&&(this._l2=Ae[++_e])<=le;);this._l1=Ae[_e-1],this._li=_e,this._curSeg=we=this._segments[_e],this._s2=we[this._s1=this._si=0]}else if(le<this._l1&&0<_e){for(;0<_e&&(this._l1=Ae[--_e])>=le;);0===_e&&le<this._l1?this._l1=0:_e++,this._l2=Ae[_e],this._li=_e,this._curSeg=we=this._segments[_e],this._s1=we[(this._si=we.length-1)-1]||0,this._s2=we[this._si]}if(he=_e,le-=this._l1,_e=this._si,le>this._s2&&_e<we.length-1){for(Se=we.length-1;_e<Se&&(this._s2=we[++_e])<=le;);this._s1=we[_e-1],this._si=_e}else if(le<this._s1&&0<_e){for(;0<_e&&(this._s1=we[--_e])>=le;);0===_e&&le<this._s1?this._s1=0:_e++,this._s2=we[_e],this._si=_e}Te=(_e+(le-this._s1)/(this._s2-this._s1))*this._prec||0}for(ye=1-Te,_e=this._props.length;-1<--_e;)xe=this._props[_e],ve=this._beziers[xe][he],Ee=(Te*Te*ve.da+3*ye*(Te*ve.ca+ye*ve.ba))*Te+ve.a,this._mod[xe]&&(Ee=this._mod[xe](Ee,ge)),ue[xe]?ge[xe](Ee):ge[xe]=Ee;if(this._autoRotate){var Me=this._autoRotate,Re,Ce,Pe,Le,Ie,Be,Ne;for(_e=Me.length;-1<--_e;)xe=Me[_e][2],Be=Me[_e][3]||0,Ne=!0===Me[_e][4]?1:180/_MathPI,ve=this._beziers[Me[_e][0]],Re=this._beziers[Me[_e][1]],ve&&Re&&(ve=ve[he],Re=Re[he],Ce=ve.a+(ve.b-ve.a)*Te,Le=ve.b+(ve.c-ve.b)*Te,Ce+=(Le-Ce)*Te,Le+=(ve.c+(ve.d-ve.c)*Te-Le)*Te,Pe=Re.a+(Re.b-Re.a)*Te,Ie=Re.b+(Re.c-Re.b)*Te,Pe+=(Ie-Pe)*Te,Ie+=(Re.c+(Re.d-Re.c)*Te-Ie)*Te,Ee=fe?_Mathatan(Ie-Pe,Le-Ce)*Ne+Be:this._initialRotations[_e],this._mod[xe]&&(Ee=this._mod[xe](Ee,ge)),ue[xe]?ge[xe](Ee):ge[xe]=Ee)}}}),se=ne.prototype;ne.bezierThrough=ee,ne.cubicToQuadratic=Q,ne._autoCSS=!0,ne.quadraticToCubic=function(le,pe,ue){return new Z(le,(2*pe+le)/3,(2*pe+ue)/3,ue)},ne._cssRegister=function(){var le=Y.CSSPlugin;if(le){var pe=le._internals,ue=pe._parseToProxy,ge=pe._setPluginRatio,fe=pe.CSSPropTween;pe._registerComplexSpecialProp("bezier",{parser:function(he,ye,_e,xe,ve,Te){ye instanceof Array&&(ye={values:ye}),Te=new ne;var Ee=ye.values,Se=Ee.length-1,Ae=[],we={},Me,Re,Ce;if(0>Se)return ve;for(Me=0;Me<=Se;Me++)Ce=ue(he,Ee[Me],xe,ve,Te,Se!==Me),Ae[Me]=Ce.end;for(Re in ye)we[Re]=ye[Re];return we.values=Ae,ve=new fe(he,"bezier",0,0,Ce.pt,2),ve.data=Ce,ve.plugin=Te,ve.setRatio=ge,0===we.autoRotate&&(we.autoRotate=!0),we.autoRotate&&!(we.autoRotate instanceof Array)&&(Me=!0===we.autoRotate?0:+we.autoRotate,we.autoRotate=null==Ce.end.left?null!=Ce.end.x&&[["x","y","rotation",Me,!1]]:[["left","top","rotation",Me,!1]]),we.autoRotate&&(!xe._transform&&xe._enableTransforms(!1),Ce.autoRotate=xe._target._gsTransform,Ce.proxy.rotation=Ce.autoRotate.rotation||0,xe._overwriteProps.push("rotation")),Te._onInitTween(Ce.proxy,we,xe._tween),ve}})}},se._mod=function(le){for(var pe=this._overwriteProps,ue=pe.length,ge;-1<--ue;)ge=le[pe[ue]],ge&&"function"==typeof ge&&(this._mod[pe[ue]]=ge)},se._kill=function(le){var pe=this._props,ue,ge;for(ue in this._beziers)if(ue in le)for(delete this._beziers[ue],delete this._func[ue],ge=pe.length;-1<--ge;)pe[ge]===ue&&pe.splice(ge,1);if(pe=this._autoRotate,pe)for(ge=pe.length;-1<--ge;)le[pe[ge][2]]&&pe.splice(ge,1);return this._super._kill.call(this,le)}}(),U._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(O,G){var H=function(){O.call(this,"css"),this._overwriteProps.length=0,this.setRatio=H.prototype.setRatio},W=U._gsDefine.globals,Q={},K=H.prototype=new O("css"),X,Y,Z,J;K.constructor=H,H.version="1.20.4",H.API=2,H.defaultTransformPerspective=0,H.defaultSkewType="compensated",H.defaultSmoothOrigin=!0,K="px",H.suffixMap={top:K,right:K,bottom:K,left:K,width:K,height:K,fontSize:K,padding:K,margin:K,perspective:K,lineHeight:""};var $=/(?:\-|\.|\b)(\d|\.|e\-)+/g,ee=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,re=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,oe=/(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,ie=/(?:\d|\-|\+|=|#|\.)*/g,ne=/opacity *= *([^)]*)/i,se=/opacity:([^;]*)/i,le=/alpha\(opacity *=.+?\)/i,pe=/^(rgb|hsl)/,ue=/([A-Z])/g,ge=/-([a-z])/gi,fe=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,he=function(or,ir){return ir.toUpperCase()},ye=/(?:Left|Right|Width)/i,_e=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,xe=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,ve=/,(?=[^\)]*(?:\(|$))/gi,Te=/[\s,\(]/i,Ee=_MathPI/180,Se=180/_MathPI,Ae={},we={style:{}},Me=U.document||{createElement:function(){return we}},Re=function(or,ir){return Me.createElementNS?Me.createElementNS(ir||"http://www.w3.org/1999/xhtml",or):Me.createElement(or)},Ce=Re("div"),Pe=Re("img"),Le=H._internals={_specialProps:Q},Ie=(U.navigator||{}).userAgent||"",Oe=function(){var or=Ie.indexOf("Android"),ir=Re("a");return(ze=-1!==Ie.indexOf("Safari")&&-1===Ie.indexOf("Chrome")&&(-1===or||3<parseFloat(Ie.substr(or+8,2))),Fe=ze&&6>parseFloat(Ie.substr(Ie.indexOf("Version/")+8,2)),De=-1!==Ie.indexOf("Firefox"),(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(Ie)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(Ie))&&(Ue=parseFloat(RegExp.$1)),!!ir)&&(ir.style.cssText="top:1px;opacity:.55;",/^0.55/.test(ir.style.opacity))}(),ke=function(or){return ne.test("string"==typeof or?or:(or.currentStyle?or.currentStyle.filter:or.style.filter)||"")?parseFloat(RegExp.$1)/100:1},Ve=function(or){U.console&&console.log(or)},We="",je="",qe=function(or,ir){ir=ir||Ce;var sr=ir.style,lr,cr;if(void 0!==sr[or])return or;for(or=or.charAt(0).toUpperCase()+or.substr(1),lr=["O","Moz","ms","Ms","Webkit"],cr=5;-1<--cr&&void 0===sr[lr[cr]+or];);return 0<=cr?(je=3===cr?"ms":lr[cr],We="-"+je.toLowerCase()+"-",je+or):null},Xe=Me.defaultView?Me.defaultView.getComputedStyle:function(){},Ye=H.getStyle=function(or,ir,sr,lr,cr){var ur;return Oe||"opacity"!==ir?(!lr&&or.style[ir]?ur=or.style[ir]:(sr=sr||Xe(or))?ur=sr[ir]||sr.getPropertyValue(ir)||sr.getPropertyValue(ir.replace(ue,"-$1").toLowerCase()):or.currentStyle&&(ur=or.currentStyle[ir]),null==cr||ur&&"none"!==ur&&"auto"!==ur&&"auto auto"!==ur?ur:cr):ke(or)},Ze=Le.convertToPixels=function(or,ir,sr,lr,cr){if("px"===lr||!lr&&"lineHeight"!==ir)return sr;if("auto"===lr||!sr)return 0;var ur=ye.test(ir),mr=or,gr=Ce.style,fr=0>sr,hr=1===sr,yr,_r,xr;if(fr&&(sr=-sr),hr&&(sr*=100),"lineHeight"===ir&&!lr)_r=Xe(or).lineHeight,or.style.lineHeight=sr,yr=parseFloat(Xe(or).lineHeight),or.style.lineHeight=_r;else if("%"===lr&&-1!==ir.indexOf("border"))yr=sr/100*(ur?or.clientWidth:or.clientHeight);else{if(gr.cssText="border:0 solid red;position:"+Ye(or,"position")+";line-height:0;","%"===lr||!mr.appendChild||"v"===lr.charAt(0)||"rem"===lr){if(mr=or.parentNode||Me.body,-1!==Ye(mr,"display").indexOf("flex")&&(gr.position="absolute"),_r=mr._gsCache,xr=G.ticker.frame,_r&&ur&&_r.time===xr)return _r.width*sr/100;gr[ur?"width":"height"]=sr+lr}else gr[ur?"borderLeftWidth":"borderTopWidth"]=sr+lr;mr.appendChild(Ce),yr=parseFloat(Ce[ur?"offsetWidth":"offsetHeight"]),mr.removeChild(Ce),ur&&"%"===lr&&!1!==H.cacheWidths&&(_r=mr._gsCache=mr._gsCache||{},_r.time=xr,_r.width=100*(yr/sr)),0!==yr||cr||(yr=Ze(or,ir,sr,lr,!0))}return hr&&(yr/=100),fr?-yr:yr},Je=Le.calculateOffset=function(or,ir,sr){if("absolute"!==Ye(or,"position",sr))return 0;var lr="left"===ir?"Left":"Top",cr=Ye(or,"margin"+lr,sr);return or["offset"+lr]-(Ze(or,ir,parseFloat(cr),cr.replace(ie,""))||0)},Qe=function(or,ir){var sr={},lr,cr,ur;if(ir=ir||Xe(or,null)){if(lr=ir.length)for(;-1<--lr;)ur=ir[lr],(-1===ur.indexOf("-transform")||It===ur)&&(sr[ur.replace(ge,he)]=ir.getPropertyValue(ur));else for(lr in ir)(-1===lr.indexOf("Transform")||Lt===lr)&&(sr[lr]=ir[lr]);}else if(ir=or.currentStyle||or.style)for(lr in ir)"string"==typeof lr&&void 0===sr[lr]&&(sr[lr.replace(ge,he)]=ir[lr]);return Oe||(sr.opacity=ke(or)),cr=Xt(or,ir,!1),sr.rotation=cr.rotation,sr.skewX=cr.skewX,sr.scaleX=cr.scaleX,sr.scaleY=cr.scaleY,sr.x=cr.x,sr.y=cr.y,Nt&&(sr.z=cr.z,sr.rotationX=cr.rotationX,sr.rotationY=cr.rotationY,sr.scaleZ=cr.scaleZ),sr.filters&&delete sr.filters,sr},Ke=function(or,ir,sr,lr,cr){var ur={},mr=or.style,gr,fr,hr;for(fr in sr)"cssText"!==fr&&"length"!==fr&&isNaN(fr)&&(ir[fr]!==(gr=sr[fr])||cr&&cr[fr])&&-1===fr.indexOf("Origin")&&("number"==typeof gr||"string"==typeof gr)&&(ur[fr]="auto"===gr&&("left"===fr||"top"===fr)?Je(or,fr):(""===gr||"auto"===gr||"none"===gr)&&"string"==typeof ir[fr]&&""!==ir[fr].replace(oe,"")?0:gr,void 0!==mr[fr]&&(hr=new vt(mr,fr,mr[fr],hr)));if(lr)for(fr in lr)"className"!==fr&&(ur[fr]=lr[fr]);return{difs:ur,firstMPT:hr}},$e={width:["Left","Right"],height:["Top","Bottom"]},et=["marginLeft","marginRight","marginTop","marginBottom"],tt=function(or,ir,sr){if("svg"===(or.nodeName+"").toLowerCase())return(sr||Xe(or))[ir]||0;if(or.getCTM&&Wt(or))return or.getBBox()[ir]||0;var lr=parseFloat("width"===ir?or.offsetWidth:or.offsetHeight),cr=$e[ir],ur=cr.length;for(sr=sr||Xe(or,null);-1<--ur;)lr-=parseFloat(Ye(or,"padding"+cr[ur],sr,!0))||0,lr-=parseFloat(Ye(or,"border"+cr[ur]+"Width",sr,!0))||0;return lr},rt=function(or,ir){if("contain"===or||"auto"===or||"auto auto"===or)return or+" ";(null==or||""===or)&&(or="0 0");var sr=or.split(" "),lr=-1===or.indexOf("left")?-1===or.indexOf("right")?sr[0]:"100%":"0%",cr=-1===or.indexOf("top")?-1===or.indexOf("bottom")?sr[1]:"100%":"0%",ur;if(3<sr.length&&!ir){for(sr=or.split(", ").join(",").split(","),or=[],ur=0;ur<sr.length;ur++)or.push(rt(sr[ur]));return or.join(",")}return null==cr?cr="center"===lr?"50%":"0":"center"===cr&&(cr="50%"),("center"===lr||isNaN(parseFloat(lr))&&-1===(lr+"").indexOf("="))&&(lr="50%"),or=lr+" "+cr+(2<sr.length?" "+sr[2]:""),ir&&(ir.oxp=-1!==lr.indexOf("%"),ir.oyp=-1!==cr.indexOf("%"),ir.oxr="="===lr.charAt(1),ir.oyr="="===cr.charAt(1),ir.ox=parseFloat(lr.replace(oe,"")),ir.oy=parseFloat(cr.replace(oe,"")),ir.v=or),ir||or},ot=function(or,ir){return"function"==typeof or&&(or=or(He,Ge)),"string"==typeof or&&"="===or.charAt(1)?parseInt(or.charAt(0)+"1",10)*parseFloat(or.substr(2)):parseFloat(or)-parseFloat(ir)||0},it=function(or,ir){return"function"==typeof or&&(or=or(He,Ge)),null==or?ir:"string"==typeof or&&"="===or.charAt(1)?parseInt(or.charAt(0)+"1",10)*parseFloat(or.substr(2))+ir:parseFloat(or)||0},nt=function(or,ir,sr,lr){var cr=1e-6,ur,mr,gr,fr,hr;return"function"==typeof or&&(or=or(He,Ge)),null==or?fr=ir:"number"==typeof or?fr=or:(ur=360,mr=or.split("_"),hr="="===or.charAt(1),gr=(hr?parseInt(or.charAt(0)+"1",10)*parseFloat(mr[0].substr(2)):parseFloat(mr[0]))*(-1===or.indexOf("rad")?1:Se)-(hr?0:ir),mr.length&&(lr&&(lr[sr]=ir+gr),-1!==or.indexOf("short")&&(gr%=ur,gr!==gr%(ur/2)&&(gr=0>gr?gr+ur:gr-ur)),-1!==or.indexOf("_cw")&&0>gr?gr=(gr+9999999999*ur)%ur-(0|gr/ur)*ur:-1!==or.indexOf("ccw")&&0<gr&&(gr=(gr-9999999999*ur)%ur-(0|gr/ur)*ur)),fr=ir+gr),fr<cr&&fr>-cr&&(fr=0),fr},ct={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},ut=function(or,ir,sr){return or=0>or?or+1:1<or?or-1:or,0|255*(1>6*or?ir+6*((sr-ir)*or):0.5>or?sr:2>3*or?ir+6*((sr-ir)*(2/3-or)):ir)+0.5},mt=H.parseColor=function(or,ir){var sr,lr,cr,ur,mr,gr,fr,hr,yr,_r,xr;if(!or)sr=ct.black;else if("number"==typeof or)sr=[or>>16,255&or>>8,255&or];else{if(","===or.charAt(or.length-1)&&(or=or.substr(0,or.length-1)),ct[or])sr=ct[or];else if("#"===or.charAt(0))4===or.length&&(lr=or.charAt(1),cr=or.charAt(2),ur=or.charAt(3),or="#"+lr+lr+cr+cr+ur+ur),or=parseInt(or.substr(1),16),sr=[or>>16,255&or>>8,255&or];else if("hsl"!==or.substr(0,3))sr=or.match($)||ct.transparent;else if(sr=xr=or.match($),!ir)mr=+sr[0]%360/360,gr=+sr[1]/100,fr=+sr[2]/100,cr=0.5>=fr?fr*(gr+1):fr+gr-fr*gr,lr=2*fr-cr,3<sr.length&&(sr[3]=+sr[3]),sr[0]=ut(mr+1/3,lr,cr),sr[1]=ut(mr,lr,cr),sr[2]=ut(mr-1/3,lr,cr);else if(-1!==or.indexOf("="))return or.match(ee);sr[0]=+sr[0],sr[1]=+sr[1],sr[2]=+sr[2],3<sr.length&&(sr[3]=+sr[3])}return ir&&!xr&&(lr=sr[0]/255,cr=sr[1]/255,ur=sr[2]/255,hr=_Mathmax(lr,cr,ur),yr=_Mathmin(lr,cr,ur),fr=(hr+yr)/2,hr===yr?mr=gr=0:(_r=hr-yr,gr=0.5<fr?_r/(2-hr-yr):_r/(hr+yr),mr=hr===lr?(cr-ur)/_r+(cr<ur?6:0):hr===cr?(ur-lr)/_r+2:(lr-cr)/_r+4,mr*=60),sr[0]=0|mr+0.5,sr[1]=0|100*gr+0.5,sr[2]=0|100*fr+0.5),sr},ft=function(or,ir){var sr=or.match(ht)||[],lr=0,cr="",ur,mr,gr;if(!sr.length)return or;for(ur=0;ur<sr.length;ur++)mr=sr[ur],gr=or.substr(lr,or.indexOf(mr,lr)-lr),lr+=gr.length+mr.length,mr=mt(mr,ir),3===mr.length&&mr.push(1),cr+=gr+(ir?"hsla("+mr[0]+","+mr[1]+"%,"+mr[2]+"%,"+mr[3]:"rgba("+mr.join(","))+")";return cr+or.substr(lr)},ht="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b",Be,Ne,ze,De,Fe,Ue,Ge,He;for(K in ct)ht+="|"+K+"\\b";ht=new RegExp(ht+")","gi"),H.colorStringFilter=function(or){var ir=or[0]+" "+or[1],sr;ht.test(ir)&&(sr=-1!==ir.indexOf("hsl(")||-1!==ir.indexOf("hsla("),or[0]=ft(or[0],sr),or[1]=ft(or[1],sr)),ht.lastIndex=0},G.defaultStringFilter||(G.defaultStringFilter=H.colorStringFilter);var yt=function(or,ir,sr,lr){if(null==or)return function(xr){return xr};var cr=ir?(or.match(ht)||[""])[0]:"",ur=or.split(cr).join("").match(re)||[],mr=or.substr(0,or.indexOf(ur[0])),gr=")"===or.charAt(or.length-1)?")":"",fr=-1===or.indexOf(" ")?",":" ",hr=ur.length,yr=0<hr?ur[0].replace($,""):"",_r;return hr?ir?(_r=function(xr){var br,Tr,Er,Sr;if("number"==typeof xr)xr+=yr;else if(lr&&ve.test(xr)){for(Sr=xr.replace(ve,"|").split("|"),Er=0;Er<Sr.length;Er++)Sr[Er]=_r(Sr[Er]);return Sr.join(",")}if(br=(xr.match(ht)||[cr])[0],Tr=xr.split(br).join("").match(re)||[],Er=Tr.length,hr>Er--)for(;++Er<hr;)Tr[Er]=sr?Tr[0|(Er-1)/2]:ur[Er];return mr+Tr.join(fr)+fr+br+gr+(-1===xr.indexOf("inset")?"":" inset")},_r):(_r=function(xr){var br,Tr,Er;if("number"==typeof xr)xr+=yr;else if(lr&&ve.test(xr)){for(Tr=xr.replace(ve,"|").split("|"),Er=0;Er<Tr.length;Er++)Tr[Er]=_r(Tr[Er]);return Tr.join(",")}if(br=xr.match(re)||[],Er=br.length,hr>Er--)for(;++Er<hr;)br[Er]=sr?br[0|(Er-1)/2]:ur[Er];return mr+br.join(fr)+gr},_r):function(xr){return xr}},_t=function(or){return or=or.split(","),function(ir,sr,lr,cr,ur,mr,gr){var fr=(sr+"").split(" "),hr;for(gr={},hr=0;4>hr;hr++)gr[or[hr]]=fr[hr]=fr[hr]||fr[(hr-1)/2>>0];return cr.parse(ir,gr,ur,mr)}},xt=Le._setPluginRatio=function(or){this.plugin.setRatio(or);for(var ir=this.data,sr=ir.proxy,lr=ir.firstMPT,cr=1e-6,ur,mr,gr,fr,hr;lr;)ur=sr[lr.v],lr.r?ur=_Mathround(ur):ur<cr&&ur>-cr&&(ur=0),lr.t[lr.p]=ur,lr=lr._next;if(ir.autoRotate&&(ir.autoRotate.rotation=ir.mod?ir.mod(sr.rotation,this.t):sr.rotation),1===or||0===or)for(lr=ir.firstMPT,hr=1===or?"e":"b";lr;){if(mr=lr.t,!mr.type)mr[hr]=mr.s+mr.xs0;else if(1===mr.type){for(fr=mr.xs0+mr.s+mr.xs1,gr=1;gr<mr.l;gr++)fr+=mr["xn"+gr]+mr["xs"+(gr+1)];mr[hr]=fr}lr=lr._next}},vt=function(or,ir,sr,lr,cr){this.t=or,this.p=ir,this.v=sr,this.r=cr,lr&&(lr._prev=this,this._next=lr)},bt=Le._parseToProxy=function(or,ir,sr,lr,cr,ur){var mr=lr,gr={},fr={},hr=sr._transform,yr=Ae,_r,xr,br,Tr,Er;for(sr._transform=null,Ae=ir,lr=Er=sr.parse(or,ir,lr,cr),Ae=yr,ur&&(sr._transform=hr,mr&&(mr._prev=null,mr._prev&&(mr._prev._next=null)));lr&&lr!==mr;){if(1>=lr.type&&(xr=lr.p,fr[xr]=lr.s+lr.c,gr[xr]=lr.s,ur||(Tr=new vt(lr,"s",xr,Tr,lr.r),lr.c=0),1===lr.type))for(_r=lr.l;0<--_r;)br="xn"+_r,xr=lr.p+"_"+br,fr[xr]=lr.data[br],gr[xr]=lr[br],ur||(Tr=new vt(lr,br,xr,Tr,lr.rxp[br]));lr=lr._next}return{proxy:gr,end:fr,firstMPT:Tr,pt:Er}},Tt=Le.CSSPropTween=function(or,ir,sr,lr,cr,ur,mr,gr,fr,hr,yr){this.t=or,this.p=ir,this.s=sr,this.c=lr,this.n=mr||ir,or instanceof Tt||J.push(this.n),this.r=gr,this.type=ur||0,fr&&(this.pr=fr,X=!0),this.b=void 0===hr?sr:hr,this.e=void 0===yr?sr+lr:yr,cr&&(this._next=cr,cr._prev=this)},Et=function(or,ir,sr,lr,cr,ur){var mr=new Tt(or,ir,sr,lr-sr,cr,-1,ur);return mr.b=sr,mr.e=mr.xs0=lr,mr},St=H.parseComplex=function(or,ir,sr,lr,cr,ur,mr,gr,fr,hr){sr=sr||ur||"","function"==typeof lr&&(lr=lr(He,Ge)),mr=new Tt(or,ir,0,0,mr,hr?2:1,null,!1,gr,sr,lr),lr+="",cr&&ht.test(lr+sr)&&(lr=[sr,lr],H.colorStringFilter(lr),sr=lr[0],lr=lr[1]);var yr=sr.split(", ").join(",").split(" "),_r=lr.split(", ").join(",").split(" "),xr=yr.length,br=!1!==Be,Tr,Er,Sr,Ar,wr,Mr,Rr,Cr,Pr,Lr,Ir,Br,Nr;for((-1!==lr.indexOf(",")||-1!==sr.indexOf(","))&&(-1!==(lr+sr).indexOf("rgb")||-1!==(lr+sr).indexOf("hsl")?(yr=yr.join(" ").replace(ve,", ").split(" "),_r=_r.join(" ").replace(ve,", ").split(" ")):(yr=yr.join(" ").split(",").join(", ").split(" "),_r=_r.join(" ").split(",").join(", ").split(" ")),xr=yr.length),xr!==_r.length&&(yr=(ur||"").split(" "),xr=yr.length),mr.plugin=fr,mr.setRatio=hr,ht.lastIndex=0,Tr=0;Tr<xr;Tr++)if(Ar=yr[Tr],wr=_r[Tr],Cr=parseFloat(Ar),Cr||0===Cr)mr.appendXtra("",Cr,ot(wr,Cr),wr.replace(ee,""),br&&-1!==wr.indexOf("px"),!0);else if(cr&&ht.test(Ar))Br=wr.indexOf(")")+1,Br=")"+(Br?wr.substr(Br):""),Nr=-1!==wr.indexOf("hsl")&&Oe,Lr=wr,Ar=mt(Ar,Nr),wr=mt(wr,Nr),Pr=6<Ar.length+wr.length,Pr&&!Oe&&0===wr[3]?(mr["xs"+mr.l]+=mr.l?" transparent":"transparent",mr.e=mr.e.split(_r[Tr]).join("transparent")):(!Oe&&(Pr=!1),Nr?mr.appendXtra(Lr.substr(0,Lr.indexOf("hsl"))+(Pr?"hsla(":"hsl("),Ar[0],ot(wr[0],Ar[0]),",",!1,!0).appendXtra("",Ar[1],ot(wr[1],Ar[1]),"%,",!1).appendXtra("",Ar[2],ot(wr[2],Ar[2]),Pr?"%,":"%"+Br,!1):mr.appendXtra(Lr.substr(0,Lr.indexOf("rgb"))+(Pr?"rgba(":"rgb("),Ar[0],wr[0]-Ar[0],",",!0,!0).appendXtra("",Ar[1],wr[1]-Ar[1],",",!0).appendXtra("",Ar[2],wr[2]-Ar[2],Pr?",":Br,!0),Pr&&(Ar=4>Ar.length?1:Ar[3],mr.appendXtra("",Ar,(4>wr.length?1:wr[3])-Ar,Br,!1))),ht.lastIndex=0;else if(Mr=Ar.match($),!Mr)mr["xs"+mr.l]+=mr.l||mr["xs"+mr.l]?" "+wr:wr;else{if(Rr=wr.match(ee),!Rr||Rr.length!==Mr.length)return mr;for(Sr=0,Er=0;Er<Mr.length;Er++)Ir=Mr[Er],Lr=Ar.indexOf(Ir,Sr),mr.appendXtra(Ar.substr(Sr,Lr-Sr),+Ir,ot(Rr[Er],Ir),"",br&&"px"===Ar.substr(Lr+Ir.length,2),0===Er),Sr=Lr+Ir.length;mr["xs"+mr.l]+=Ar.substr(Sr)}if(-1!==lr.indexOf("=")&&mr.data){for(Br=mr.xs0+mr.data.s,Tr=1;Tr<mr.l;Tr++)Br+=mr["xs"+Tr]+mr.data["xn"+Tr];mr.e=Br+mr["xs"+Tr]}return mr.l||(mr.type=-1,mr.xs0=mr.e),mr.xfirst||mr},At=9;for(K=Tt.prototype,K.l=K.pr=0;0<--At;)K["xn"+At]=0,K["xs"+At]="";K.xs0="",K._next=K._prev=K.xfirst=K.data=K.plugin=K.setRatio=K.rxp=null,K.appendXtra=function(or,ir,sr,lr,cr,ur){var mr=this,gr=mr.l;return(mr["xs"+gr]+=ur&&(gr||mr["xs"+gr])?" "+or:or||"",!sr&&0!==gr&&!mr.plugin)?(mr["xs"+gr]+=ir+(lr||""),mr):(mr.l++,mr.type=mr.setRatio?2:1,mr["xs"+mr.l]=lr||"",0<gr)?(mr.data["xn"+gr]=ir+sr,mr.rxp["xn"+gr]=cr,mr["xn"+gr]=ir,mr.plugin||(mr.xfirst=new Tt(mr,"xn"+gr,ir,sr,mr.xfirst||mr,0,mr.n,cr,mr.pr),mr.xfirst.xs0=0),mr):(mr.data={s:ir+sr},mr.rxp={},mr.s=ir,mr.c=sr,mr.r=cr,mr)};var wt=function(or,ir){ir=ir||{},this.p=ir.prefix?qe(or)||or:or,Q[or]=Q[this.p]=this,this.format=ir.formatter||yt(ir.defaultValue,ir.color,ir.collapsible,ir.multi),ir.parser&&(this.parse=ir.parser),this.clrs=ir.color,this.multi=ir.multi,this.keyword=ir.keyword,this.dflt=ir.defaultValue,this.pr=ir.priority||0},Rt=Le._registerComplexSpecialProp=function(or,ir,sr){"object"!=typeof ir&&(ir={parser:sr});var lr=or.split(","),cr=ir.defaultValue,ur,mr;for(sr=sr||[cr],ur=0;ur<lr.length;ur++)ir.prefix=0===ur&&ir.prefix,ir.defaultValue=sr[ur]||cr,mr=new wt(lr[ur],ir)},Ct=Le._registerPluginProp=function(or){if(!Q[or]){var ir=or.charAt(0).toUpperCase()+or.substr(1)+"Plugin";Rt(or,{parser:function(sr,lr,cr,ur,mr,gr,fr){var hr=W.com.greensock.plugins[ir];return hr?(hr._cssRegister(),Q[cr].parse(sr,lr,cr,ur,mr,gr,fr)):(Ve("Error: "+ir+" js file not loaded."),mr)}})}};K=wt.prototype,K.parseComplex=function(or,ir,sr,lr,cr,ur){var mr=this.keyword,gr,fr,hr,yr,_r,xr;if(this.multi&&(ve.test(sr)||ve.test(ir)?(fr=ir.replace(ve,"|").split("|"),hr=sr.replace(ve,"|").split("|")):mr&&(fr=[ir],hr=[sr])),hr){for(yr=hr.length>fr.length?hr.length:fr.length,gr=0;gr<yr;gr++)ir=fr[gr]=fr[gr]||this.dflt,sr=hr[gr]=hr[gr]||this.dflt,mr&&(_r=ir.indexOf(mr),xr=sr.indexOf(mr),_r!==xr&&(-1===xr?fr[gr]=fr[gr].split(mr).join(""):-1===_r&&(fr[gr]+=" "+mr)));ir=fr.join(", "),sr=hr.join(", ")}return St(or,this.p,ir,sr,this.clrs,this.dflt,lr,this.pr,cr,ur)},K.parse=function(or,ir,sr,lr,cr,ur){return this.parseComplex(or.style,this.format(Ye(or,this.p,Z,!1,this.dflt)),this.format(ir),cr,ur)},H.registerSpecialProp=function(or,ir,sr){Rt(or,{parser:function(lr,cr,ur,mr,gr,fr){var yr=new Tt(lr,ur,0,0,gr,2,ur,!1,sr);return yr.plugin=fr,yr.setRatio=ir(lr,cr,mr._tween,ur),yr},priority:sr})},H.useSVGTransformAttr=!0;var Pt="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),Lt=qe("transform"),It=We+"transform",Bt=qe("transformOrigin"),Nt=null!==qe("perspective"),zt=Le.Transform=function(){this.perspective=parseFloat(H.defaultTransformPerspective)||0,this.force3D=!1!==H.defaultForce3D&&Nt&&(H.defaultForce3D||"auto")},Dt=U.SVGElement,Ut=function(or,ir,sr){var lr=Me.createElementNS("http://www.w3.org/2000/svg",or),cr=/([a-z])([A-Z])/g,ur;for(ur in sr)lr.setAttributeNS(null,ur.replace(cr,"$1-$2").toLowerCase(),sr[ur]);return ir.appendChild(lr),lr},Ot=Me.documentElement||{},kt=function(){var or=Ue||/Android/i.test(Ie)&&!U.chrome,ir,sr,lr;return Me.createElementNS&&!or&&(ir=Ut("svg",Ot),sr=Ut("rect",ir,{width:100,height:50,x:100}),lr=sr.getBoundingClientRect().width,sr.style[Bt]="50% 50%",sr.style[Lt]="scaleX(0.5)",or=lr===sr.getBoundingClientRect().width&&!(De&&Nt),Ot.removeChild(ir)),or}(),Vt=function(or,ir,sr,lr,cr,ur){var mr=or._gsTransform,gr=qt(or,!0),fr,hr,yr,_r,xr,br,Tr,Er,Sr,Ar,wr,Mr,Rr,Cr;mr&&(Rr=mr.xOrigin,Cr=mr.yOrigin),(!lr||2>(fr=lr.split(" ")).length)&&(Tr=or.getBBox(),0===Tr.x&&0===Tr.y&&0===Tr.width+Tr.height&&(Tr={x:parseFloat(or.hasAttribute("x")?or.getAttribute("x"):or.hasAttribute("cx")?or.getAttribute("cx"):0)||0,y:parseFloat(or.hasAttribute("y")?or.getAttribute("y"):or.hasAttribute("cy")?or.getAttribute("cy"):0)||0,width:0,height:0}),ir=rt(ir).split(" "),fr=[(-1===ir[0].indexOf("%")?parseFloat(ir[0]):parseFloat(ir[0])/100*Tr.width)+Tr.x,(-1===ir[1].indexOf("%")?parseFloat(ir[1]):parseFloat(ir[1])/100*Tr.height)+Tr.y]),sr.xOrigin=_r=parseFloat(fr[0]),sr.yOrigin=xr=parseFloat(fr[1]),lr&&gr!==jt&&(br=gr[0],Tr=gr[1],Er=gr[2],Sr=gr[3],Ar=gr[4],wr=gr[5],Mr=br*Sr-Tr*Er,Mr&&(hr=_r*(Sr/Mr)+xr*(-Er/Mr)+(Er*wr-Sr*Ar)/Mr,yr=_r*(-Tr/Mr)+xr*(br/Mr)-(br*wr-Tr*Ar)/Mr,_r=sr.xOrigin=fr[0]=hr,xr=sr.yOrigin=fr[1]=yr)),mr&&(ur&&(sr.xOffset=mr.xOffset,sr.yOffset=mr.yOffset,mr=sr),cr||!1!==cr&&!1!==H.defaultSmoothOrigin?(hr=_r-Rr,yr=xr-Cr,mr.xOffset+=hr*gr[0]+yr*gr[2]-hr,mr.yOffset+=hr*gr[1]+yr*gr[3]-yr):mr.xOffset=mr.yOffset=0),ur||or.setAttribute("data-svg-origin",fr.join(" "))},Gt=function(or){var ir=Re("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),sr=this.parentNode,lr=this.nextSibling,cr=this.style.cssText,ur;if(Ot.appendChild(ir),ir.appendChild(this),this.style.display="block",or)try{ur=this.getBBox(),this._originalGetBBox=this.getBBox,this.getBBox=Gt}catch(mr){}else this._originalGetBBox&&(ur=this._originalGetBBox());return lr?sr.insertBefore(this,lr):sr.appendChild(this),Ot.removeChild(ir),this.style.cssText=cr,ur},Ht=function(or){try{return or.getBBox()}catch(ir){return Gt.call(or,!0)}},Wt=function(or){return!!(Dt&&or.getCTM&&(!or.parentNode||or.ownerSVGElement)&&Ht(or))},jt=[1,0,0,1,0,0],qt=function(or,ir){var sr=or._gsTransform||new zt,lr=1e5,cr=or.style,ur,mr,gr,fr,hr,yr;if(Lt?mr=Ye(or,It,null,!0):or.currentStyle&&(mr=or.currentStyle.filter.match(_e),mr=mr&&4===mr.length?[mr[0].substr(4),+mr[2].substr(4),+mr[1].substr(4),mr[3].substr(4),sr.x||0,sr.y||0].join(","):""),ur=!mr||"none"===mr||"matrix(1, 0, 0, 1, 0, 0)"===mr,Lt&&((yr=!Xe(or)||"none"===Xe(or).display)||!or.parentNode)&&(yr&&(fr=cr.display,cr.display="block"),!or.parentNode&&(hr=1,Ot.appendChild(or)),mr=Ye(or,It,null,!0),ur=!mr||"none"===mr||"matrix(1, 0, 0, 1, 0, 0)"===mr,fr?cr.display=fr:yr&&Qt(cr,"display"),hr&&Ot.removeChild(or)),(sr.svg||or.getCTM&&Wt(or))&&(ur&&-1!==(cr[Lt]+"").indexOf("matrix")&&(mr=cr[Lt],ur=0),gr=or.getAttribute("transform"),ur&&gr&&(gr=or.transform.baseVal.consolidate().matrix,mr="matrix("+gr.a+","+gr.b+","+gr.c+","+gr.d+","+gr.e+","+gr.f+")",ur=0)),ur)return jt;for(gr=(mr||"").match($)||[],At=gr.length;-1<--At;)fr=+gr[At],gr[At]=(hr=fr-(fr|=0))?(0|hr*lr+(0>hr?-0.5:0.5))/lr+fr:fr;return ir&&6<gr.length?[gr[0],gr[1],gr[4],gr[5],gr[12],gr[13]]:gr},Xt=Le.getTransform=function(or,ir,sr,lr){if(or._gsTransform&&sr&&!lr)return or._gsTransform;var cr=sr?or._gsTransform||new zt:new zt,ur=0>cr.scaleX,mr=2e-5,gr=1e5,fr=Nt?parseFloat(Ye(or,Bt,ir,!1,"0 0 0").split(" ")[2])||cr.zOrigin||0:0,hr=parseFloat(H.defaultTransformPerspective)||0,yr,_r,xr,br,Tr,Er;if(cr.svg=!!(or.getCTM&&Wt(or)),cr.svg&&(Vt(or,Ye(or,Bt,ir,!1,"50% 50%")+"",cr,or.getAttribute("data-svg-origin")),Ft=H.useSVGTransformAttr||kt),yr=qt(or),yr!==jt){if(16===yr.length){var Sr=yr[0],Ar=yr[1],wr=yr[2],Mr=yr[3],Rr=yr[4],Cr=yr[5],Pr=yr[6],Lr=yr[7],Ir=yr[8],Br=yr[9],Nr=yr[10],zr=yr[12],Dr=yr[13],Fr=yr[14],Ur=yr[11],Or=_Mathatan(Pr,Nr),kr,Vr,Gr,Wr,jr;cr.zOrigin&&(Fr=-cr.zOrigin,zr=Ir*Fr-yr[12],Dr=Br*Fr-yr[13],Fr=Nr*Fr+cr.zOrigin-yr[14]),cr.rotationX=Or*Se,Or&&(Wr=_Mathcos(-Or),jr=_Mathsin(-Or),kr=Rr*Wr+Ir*jr,Vr=Cr*Wr+Br*jr,Gr=Pr*Wr+Nr*jr,Ir=Rr*-jr+Ir*Wr,Br=Cr*-jr+Br*Wr,Nr=Pr*-jr+Nr*Wr,Ur=Lr*-jr+Ur*Wr,Rr=kr,Cr=Vr,Pr=Gr),Or=_Mathatan(-wr,Nr),cr.rotationY=Or*Se,Or&&(Wr=_Mathcos(-Or),jr=_Mathsin(-Or),kr=Sr*Wr-Ir*jr,Vr=Ar*Wr-Br*jr,Gr=wr*Wr-Nr*jr,Br=Ar*jr+Br*Wr,Nr=wr*jr+Nr*Wr,Ur=Mr*jr+Ur*Wr,Sr=kr,Ar=Vr,wr=Gr),Or=_Mathatan(Ar,Sr),cr.rotation=Or*Se,Or&&(Wr=_Mathcos(Or),jr=_Mathsin(Or),kr=Sr*Wr+Ar*jr,Vr=Rr*Wr+Cr*jr,Gr=Ir*Wr+Br*jr,Ar=Ar*Wr-Sr*jr,Cr=Cr*Wr-Rr*jr,Br=Br*Wr-Ir*jr,Sr=kr,Rr=Vr,Ir=Gr),cr.rotationX&&359.9<_Mathabs(cr.rotationX)+_Mathabs(cr.rotation)&&(cr.rotationX=cr.rotation=0,cr.rotationY=180-cr.rotationY),Or=_Mathatan(Rr,Cr),cr.scaleX=(0|_Mathsqrt(Sr*Sr+Ar*Ar+wr*wr)*gr+0.5)/gr,cr.scaleY=(0|_Mathsqrt(Cr*Cr+Pr*Pr)*gr+0.5)/gr,cr.scaleZ=(0|_Mathsqrt(Ir*Ir+Br*Br+Nr*Nr)*gr+0.5)/gr,Sr/=cr.scaleX,Rr/=cr.scaleY,Ar/=cr.scaleX,Cr/=cr.scaleY,_Mathabs(Or)>mr?(cr.skewX=Or*Se,Rr=0,"simple"!==cr.skewType&&(cr.scaleY*=1/_Mathcos(Or))):cr.skewX=0,cr.perspective=Ur?1/(0>Ur?-Ur:Ur):0,cr.x=zr,cr.y=Dr,cr.z=Fr,cr.svg&&(cr.x-=cr.xOrigin-(cr.xOrigin*Sr-cr.yOrigin*Rr),cr.y-=cr.yOrigin-(cr.yOrigin*Ar-cr.xOrigin*Cr))}else if(!Nt||lr||!yr.length||cr.x!==yr[4]||cr.y!==yr[5]||!cr.rotationX&&!cr.rotationY){var qr=6<=yr.length,Xr=qr?yr[0]:1,Yr=yr[1]||0,Zr=yr[2]||0,Jr=qr?yr[3]:1;cr.x=yr[4]||0,cr.y=yr[5]||0,xr=_Mathsqrt(Xr*Xr+Yr*Yr),br=_Mathsqrt(Jr*Jr+Zr*Zr),Tr=Xr||Yr?_Mathatan(Yr,Xr)*Se:cr.rotation||0,Er=Zr||Jr?_Mathatan(Zr,Jr)*Se+Tr:cr.skewX||0,cr.scaleX=xr,cr.scaleY=br,cr.rotation=Tr,cr.skewX=Er,Nt&&(cr.rotationX=cr.rotationY=cr.z=0,cr.perspective=hr,cr.scaleZ=1),cr.svg&&(cr.x-=cr.xOrigin-(cr.xOrigin*Xr+cr.yOrigin*Zr),cr.y-=cr.yOrigin-(cr.xOrigin*Yr+cr.yOrigin*Jr))}for(_r in 90<_Mathabs(cr.skewX)&&270>_Mathabs(cr.skewX)&&(ur?(cr.scaleX*=-1,cr.skewX+=0>=cr.rotation?180:-180,cr.rotation+=0>=cr.rotation?180:-180):(cr.scaleY*=-1,cr.skewX+=0>=cr.skewX?180:-180)),cr.zOrigin=fr,cr)cr[_r]<mr&&cr[_r]>-mr&&(cr[_r]=0)}return sr&&(or._gsTransform=cr,cr.svg&&(Ft&&or.style[Lt]?G.delayedCall(1e-3,function(){Qt(or.style,Lt)}):!Ft&&or.getAttribute("transform")&&G.delayedCall(1e-3,function(){or.removeAttribute("transform")}))),cr},Yt=function(or){var ir=this.data,sr=-ir.rotation*Ee,lr=sr+ir.skewX*Ee,cr=1e5,ur=(0|_Mathcos(sr)*ir.scaleX*cr)/cr,mr=(0|_Mathsin(sr)*ir.scaleX*cr)/cr,gr=(0|_Mathsin(lr)*-ir.scaleY*cr)/cr,fr=(0|_Mathcos(lr)*ir.scaleY*cr)/cr,hr=this.t.style,yr=this.t.currentStyle,_r,xr;if(yr){xr=mr,mr=-gr,gr=-xr,_r=yr.filter,hr.filter="";var br=this.t.offsetWidth,Tr=this.t.offsetHeight,Er="absolute"!==yr.position,Sr="progid:DXImageTransform.Microsoft.Matrix(M11="+ur+", M12="+mr+", M21="+gr+", M22="+fr,Ar=ir.x+br*ir.xPercent/100,wr=ir.y+Tr*ir.yPercent/100,Mr,Rr;if(null!=ir.ox&&(Mr=(ir.oxp?0.01*(br*ir.ox):ir.ox)-br/2,Rr=(ir.oyp?0.01*(Tr*ir.oy):ir.oy)-Tr/2,Ar+=Mr-(Mr*ur+Rr*mr),wr+=Rr-(Mr*gr+Rr*fr)),Er?(Mr=br/2,Rr=Tr/2,Sr+=", Dx="+(Mr-(Mr*ur+Rr*mr)+Ar)+", Dy="+(Rr-(Mr*gr+Rr*fr)+wr)+")"):Sr+=", sizingMethod='auto expand')",hr.filter=-1===_r.indexOf("DXImageTransform.Microsoft.Matrix(")?Sr+" "+_r:_r.replace(xe,Sr),0!==or&&1!==or||1!=ur||0!=mr||0!=gr||1!=fr||Er&&-1===Sr.indexOf("Dx=0, Dy=0")||ne.test(_r)&&100!==parseFloat(RegExp.$1)||-1!==_r.indexOf(_r.indexOf("Alpha"))||hr.removeAttribute("filter"),!Er){var Cr=8>Ue?1:-1,Pr,Lr,Ir;for(Mr=ir.ieOffsetX||0,Rr=ir.ieOffsetY||0,ir.ieOffsetX=_Mathround((br-((0>ur?-ur:ur)*br+(0>mr?-mr:mr)*Tr))/2+Ar),ir.ieOffsetY=_Mathround((Tr-((0>fr?-fr:fr)*Tr+(0>gr?-gr:gr)*br))/2+wr),At=0;4>At;At++)Lr=et[At],Pr=yr[Lr],xr=-1===Pr.indexOf("px")?Ze(this.t,Lr,parseFloat(Pr),Pr.replace(ie,""))||0:parseFloat(Pr),Ir=xr===ir[Lr]?2>At?Mr-ir.ieOffsetX:Rr-ir.ieOffsetY:2>At?-ir.ieOffsetX:-ir.ieOffsetY,hr[Lr]=(ir[Lr]=_Mathround(xr-Ir*(0===At||2===At?1:Cr)))+"px"}}},Zt=Le.set3DTransformRatio=Le.setTransformRatio=function(or){var ir=this.data,sr=this.t.style,lr=ir.rotation,cr=ir.rotationX,ur=ir.rotationY,mr=ir.scaleX,gr=ir.scaleY,fr=ir.scaleZ,hr=ir.x,yr=ir.y,_r=ir.z,xr=ir.svg,br=ir.perspective,Tr=ir.force3D,Er=ir.skewY,Sr=ir.skewX,Ar,wr,Mr,Rr,Cr,Pr,Lr,Ir,Br,Nr,zr,Dr,Fr,Ur,Or,kr,Vr,Gr,Hr,Wr,jr,qr,Xr;if(Er&&(Sr+=Er,lr+=Er),((1===or||0===or)&&"auto"===Tr&&(this.tween._totalTime===this.tween._totalDuration||!this.tween._totalTime)||!Tr)&&!_r&&!br&&!ur&&!cr&&1===fr||Ft&&xr||!Nt)return void(lr||Sr||xr?(lr*=Ee,qr=Sr*Ee,Xr=1e5,wr=_Mathcos(lr)*mr,Cr=_Mathsin(lr)*mr,Mr=_Mathsin(lr-qr)*-gr,Pr=_Mathcos(lr-qr)*gr,qr&&"simple"===ir.skewType&&(Ar=_Mathtan(qr-Er*Ee),Ar=_Mathsqrt(1+Ar*Ar),Mr*=Ar,Pr*=Ar,Er&&(Ar=_Mathtan(Er*Ee),Ar=_Mathsqrt(1+Ar*Ar),wr*=Ar,Cr*=Ar)),xr&&(hr+=ir.xOrigin-(ir.xOrigin*wr+ir.yOrigin*Mr)+ir.xOffset,yr+=ir.yOrigin-(ir.xOrigin*Cr+ir.yOrigin*Pr)+ir.yOffset,Ft&&(ir.xPercent||ir.yPercent)&&(Or=this.t.getBBox(),hr+=0.01*ir.xPercent*Or.width,yr+=0.01*ir.yPercent*Or.height),Or=1e-6,hr<Or&&hr>-Or&&(hr=0),yr<Or&&yr>-Or&&(yr=0)),Hr=(0|wr*Xr)/Xr+","+(0|Cr*Xr)/Xr+","+(0|Mr*Xr)/Xr+","+(0|Pr*Xr)/Xr+","+hr+","+yr+")",xr&&Ft?this.t.setAttribute("transform","matrix("+Hr):sr[Lt]=(ir.xPercent||ir.yPercent?"translate("+ir.xPercent+"%,"+ir.yPercent+"%) matrix(":"matrix(")+Hr):sr[Lt]=(ir.xPercent||ir.yPercent?"translate("+ir.xPercent+"%,"+ir.yPercent+"%) matrix(":"matrix(")+mr+",0,0,"+gr+","+hr+","+yr+")");if(De&&(Or=1e-4,mr<Or&&mr>-Or&&(mr=fr=2e-5),gr<Or&&gr>-Or&&(gr=fr=2e-5),br&&!ir.z&&!ir.rotationX&&!ir.rotationY&&(br=0)),lr||Sr)lr*=Ee,kr=wr=_Mathcos(lr),Vr=Cr=_Mathsin(lr),Sr&&(lr-=Sr*Ee,kr=_Mathcos(lr),Vr=_Mathsin(lr),"simple"===ir.skewType&&(Ar=_Mathtan((Sr-Er)*Ee),Ar=_Mathsqrt(1+Ar*Ar),kr*=Ar,Vr*=Ar,ir.skewY&&(Ar=_Mathtan(Er*Ee),Ar=_Mathsqrt(1+Ar*Ar),wr*=Ar,Cr*=Ar))),Mr=-Vr,Pr=kr;else{if(!ur&&!cr&&1===fr&&!br&&!xr)return void(sr[Lt]=(ir.xPercent||ir.yPercent?"translate("+ir.xPercent+"%,"+ir.yPercent+"%) translate3d(":"translate3d(")+hr+"px,"+yr+"px,"+_r+"px)"+(1!==mr||1!==gr?" scale("+mr+","+gr+")":""));wr=Pr=1,Mr=Cr=0}Nr=1,Rr=Lr=Ir=Br=zr=Dr=0,Fr=br?-1/br:0,Ur=ir.zOrigin,Or=1e-6,Wr=",",jr="0",lr=ur*Ee,lr&&(kr=_Mathcos(lr),Vr=_Mathsin(lr),Ir=-Vr,zr=Fr*-Vr,Rr=wr*Vr,Lr=Cr*Vr,Nr=kr,Fr*=kr,wr*=kr,Cr*=kr),lr=cr*Ee,lr&&(kr=_Mathcos(lr),Vr=_Mathsin(lr),Ar=Mr*kr+Rr*Vr,Gr=Pr*kr+Lr*Vr,Br=Nr*Vr,Dr=Fr*Vr,Rr=Mr*-Vr+Rr*kr,Lr=Pr*-Vr+Lr*kr,Nr*=kr,Fr*=kr,Mr=Ar,Pr=Gr),1!==fr&&(Rr*=fr,Lr*=fr,Nr*=fr,Fr*=fr),1!==gr&&(Mr*=gr,Pr*=gr,Br*=gr,Dr*=gr),1!==mr&&(wr*=mr,Cr*=mr,Ir*=mr,zr*=mr),(Ur||xr)&&(Ur&&(hr+=Rr*-Ur,yr+=Lr*-Ur,_r+=Nr*-Ur+Ur),xr&&(hr+=ir.xOrigin-(ir.xOrigin*wr+ir.yOrigin*Mr)+ir.xOffset,yr+=ir.yOrigin-(ir.xOrigin*Cr+ir.yOrigin*Pr)+ir.yOffset),hr<Or&&hr>-Or&&(hr=jr),yr<Or&&yr>-Or&&(yr=jr),_r<Or&&_r>-Or&&(_r=0)),Hr=ir.xPercent||ir.yPercent?"translate("+ir.xPercent+"%,"+ir.yPercent+"%) matrix3d(":"matrix3d(",Hr+=(wr<Or&&wr>-Or?jr:wr)+Wr+(Cr<Or&&Cr>-Or?jr:Cr)+Wr+(Ir<Or&&Ir>-Or?jr:Ir),Hr+=Wr+(zr<Or&&zr>-Or?jr:zr)+Wr+(Mr<Or&&Mr>-Or?jr:Mr)+Wr+(Pr<Or&&Pr>-Or?jr:Pr),cr||ur||1!==fr?(Hr+=Wr+(Br<Or&&Br>-Or?jr:Br)+Wr+(Dr<Or&&Dr>-Or?jr:Dr)+Wr+(Rr<Or&&Rr>-Or?jr:Rr),Hr+=Wr+(Lr<Or&&Lr>-Or?jr:Lr)+Wr+(Nr<Or&&Nr>-Or?jr:Nr)+Wr+(Fr<Or&&Fr>-Or?jr:Fr)+Wr):Hr+=",0,0,0,0,1,0,",Hr+=hr+Wr+yr+Wr+_r+Wr+(br?1+-_r/br:1)+")",sr[Lt]=Hr},Ft;K=zt.prototype,K.x=K.y=K.z=K.skewX=K.skewY=K.rotation=K.rotationX=K.rotationY=K.zOrigin=K.xPercent=K.yPercent=K.xOffset=K.yOffset=0,K.scaleX=K.scaleY=K.scaleZ=1,Rt("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent,smoothOrigin",{parser:function(or,ir,sr,lr,cr,ur,mr){if(lr._lastParsedTransform===mr)return cr;lr._lastParsedTransform=mr;var gr=mr.scale&&"function"==typeof mr.scale?mr.scale:0,fr;"function"==typeof mr[sr]&&(fr=mr[sr],mr[sr]=ir),gr&&(mr.scale=gr(He,or));var hr=or._gsTransform,yr=or.style,_r=1e-6,xr=Pt.length,br=mr,Tr={},Er="transformOrigin",Sr=Xt(or,Z,!0,br.parseTransform),Ar=br.transform&&("function"==typeof br.transform?br.transform(He,Ge):br.transform),wr,Mr,Rr,Cr,Pr,Lr,Ir,Br,Nr;if(Sr.skewType=br.skewType||Sr.skewType||H.defaultSkewType,lr._transform=Sr,Ar&&"string"==typeof Ar&&Lt)Mr=Ce.style,Mr[Lt]=Ar,Mr.display="block",Mr.position="absolute",Me.body.appendChild(Ce),wr=Xt(Ce,null,!1),"simple"===Sr.skewType&&(wr.scaleY*=_Mathcos(wr.skewX*Ee)),Sr.svg&&(Lr=Sr.xOrigin,Ir=Sr.yOrigin,wr.x-=Sr.xOffset,wr.y-=Sr.yOffset,(br.transformOrigin||br.svgOrigin)&&(Ar={},Vt(or,rt(br.transformOrigin),Ar,br.svgOrigin,br.smoothOrigin,!0),Lr=Ar.xOrigin,Ir=Ar.yOrigin,wr.x-=Ar.xOffset-Sr.xOffset,wr.y-=Ar.yOffset-Sr.yOffset),(Lr||Ir)&&(Br=qt(Ce,!0),wr.x-=Lr-(Lr*Br[0]+Ir*Br[2]),wr.y-=Ir-(Lr*Br[1]+Ir*Br[3]))),Me.body.removeChild(Ce),wr.perspective||(wr.perspective=Sr.perspective),null!=br.xPercent&&(wr.xPercent=it(br.xPercent,Sr.xPercent)),null!=br.yPercent&&(wr.yPercent=it(br.yPercent,Sr.yPercent));else if("object"==typeof br){if(wr={scaleX:it(null==br.scaleX?br.scale:br.scaleX,Sr.scaleX),scaleY:it(null==br.scaleY?br.scale:br.scaleY,Sr.scaleY),scaleZ:it(br.scaleZ,Sr.scaleZ),x:it(br.x,Sr.x),y:it(br.y,Sr.y),z:it(br.z,Sr.z),xPercent:it(br.xPercent,Sr.xPercent),yPercent:it(br.yPercent,Sr.yPercent),perspective:it(br.transformPerspective,Sr.perspective)},Pr=br.directionalRotation,null!=Pr)if("object"==typeof Pr)for(Mr in Pr)br[Mr]=Pr[Mr];else br.rotation=Pr;"string"==typeof br.x&&-1!==br.x.indexOf("%")&&(wr.x=0,wr.xPercent=it(br.x,Sr.xPercent)),"string"==typeof br.y&&-1!==br.y.indexOf("%")&&(wr.y=0,wr.yPercent=it(br.y,Sr.yPercent)),wr.rotation=nt("rotation"in br?br.rotation:"shortRotation"in br?br.shortRotation+"_short":"rotationZ"in br?br.rotationZ:Sr.rotation,Sr.rotation,"rotation",Tr),Nt&&(wr.rotationX=nt("rotationX"in br?br.rotationX:"shortRotationX"in br?br.shortRotationX+"_short":Sr.rotationX||0,Sr.rotationX,"rotationX",Tr),wr.rotationY=nt("rotationY"in br?br.rotationY:"shortRotationY"in br?br.shortRotationY+"_short":Sr.rotationY||0,Sr.rotationY,"rotationY",Tr)),wr.skewX=nt(br.skewX,Sr.skewX),wr.skewY=nt(br.skewY,Sr.skewY)}for(Nt&&null!=br.force3D&&(Sr.force3D=br.force3D,Cr=!0),Rr=Sr.force3D||Sr.z||Sr.rotationX||Sr.rotationY||wr.z||wr.rotationX||wr.rotationY||wr.perspective,Rr||null==br.scale||(wr.scaleZ=1);-1<--xr;)Nr=Pt[xr],Ar=wr[Nr]-Sr[Nr],(Ar>_r||Ar<-_r||null!=br[Nr]||null!=Ae[Nr])&&(Cr=!0,cr=new Tt(Sr,Nr,Sr[Nr],Ar,cr),Nr in Tr&&(cr.e=Tr[Nr]),cr.xs0=0,cr.plugin=ur,lr._overwriteProps.push(cr.n));return Ar=br.transformOrigin,Sr.svg&&(Ar||br.svgOrigin)&&(Lr=Sr.xOffset,Ir=Sr.yOffset,Vt(or,rt(Ar),wr,br.svgOrigin,br.smoothOrigin),cr=Et(Sr,"xOrigin",(hr?Sr:wr).xOrigin,wr.xOrigin,cr,Er),cr=Et(Sr,"yOrigin",(hr?Sr:wr).yOrigin,wr.yOrigin,cr,Er),(Lr!==Sr.xOffset||Ir!==Sr.yOffset)&&(cr=Et(Sr,"xOffset",hr?Lr:Sr.xOffset,Sr.xOffset,cr,Er),cr=Et(Sr,"yOffset",hr?Ir:Sr.yOffset,Sr.yOffset,cr,Er)),Ar="0px 0px"),(Ar||Nt&&Rr&&Sr.zOrigin)&&(Lt?(Cr=!0,Nr=Bt,Ar=(Ar||Ye(or,Nr,Z,!1,"50% 50%"))+"",cr=new Tt(yr,Nr,0,0,cr,-1,Er),cr.b=yr[Nr],cr.plugin=ur,Nt?(Mr=Sr.zOrigin,Ar=Ar.split(" "),Sr.zOrigin=(2<Ar.length&&(0===Mr||"0px"!==Ar[2])?parseFloat(Ar[2]):Mr)||0,cr.xs0=cr.e=Ar[0]+" "+(Ar[1]||"50%")+" 0px",cr=new Tt(Sr,"zOrigin",0,0,cr,-1,cr.n),cr.b=Mr,cr.xs0=cr.e=Sr.zOrigin):cr.xs0=cr.e=Ar):rt(Ar+"",Sr)),Cr&&(lr._transformType=!(Sr.svg&&Ft)&&(Rr||3===this._transformType)?3:2),fr&&(mr[sr]=fr),gr&&(mr.scale=gr),cr},prefix:!0}),Rt("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),Rt("borderRadius",{defaultValue:"0px",parser:function(or,ir,sr,lr,cr){ir=this.format(ir);var mr=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],gr=or.style,fr,hr,yr,_r,xr,br,Tr,Er,Sr,Ar,wr,Mr,Rr,Cr,Pr,Lr;for(Sr=parseFloat(or.offsetWidth),Ar=parseFloat(or.offsetHeight),fr=ir.split(" "),hr=0;hr<mr.length;hr++)this.p.indexOf("border")&&(mr[hr]=qe(mr[hr])),xr=_r=Ye(or,mr[hr],Z,!1,"0px"),-1!==xr.indexOf(" ")&&(_r=xr.split(" "),xr=_r[0],_r=_r[1]),br=yr=fr[hr],Tr=parseFloat(xr),Mr=xr.substr((Tr+"").length),Rr="="===br.charAt(1),Rr?(Er=parseInt(br.charAt(0)+"1",10),br=br.substr(2),Er*=parseFloat(br),wr=br.substr((Er+"").length-(0>Er?1:0))||""):(Er=parseFloat(br),wr=br.substr((Er+"").length)),""===wr&&(wr=Y[sr]||Mr),wr!==Mr&&(Cr=Ze(or,"borderLeft",Tr,Mr),Pr=Ze(or,"borderTop",Tr,Mr),"%"===wr?(xr=100*(Cr/Sr)+"%",_r=100*(Pr/Ar)+"%"):"em"===wr?(Lr=Ze(or,"borderLeft",1,"em"),xr=Cr/Lr+"em",_r=Pr/Lr+"em"):(xr=Cr+"px",_r=Pr+"px"),Rr&&(br=parseFloat(xr)+Er+wr,yr=parseFloat(_r)+Er+wr)),cr=St(gr,mr[hr],xr+" "+_r,br+" "+yr,!1,"0px",cr);return cr},prefix:!0,formatter:yt("0px 0px 0px 0px",!1,!0)}),Rt("borderBottomLeftRadius,borderBottomRightRadius,borderTopLeftRadius,borderTopRightRadius",{defaultValue:"0px",parser:function(or,ir,sr,lr,cr){return St(or.style,sr,this.format(Ye(or,sr,Z,!1,"0px 0px")),this.format(ir),!1,"0px",cr)},prefix:!0,formatter:yt("0px 0px",!1,!0)}),Rt("backgroundPosition",{defaultValue:"0 0",parser:function(or,ir,sr,lr,cr,ur){var mr="background-position",gr=Z||Xe(or,null),fr=this.format((gr?Ue?gr.getPropertyValue(mr+"-x")+" "+gr.getPropertyValue(mr+"-y"):gr.getPropertyValue(mr):or.currentStyle.backgroundPositionX+" "+or.currentStyle.backgroundPositionY)||"0 0"),hr=this.format(ir),yr,_r,xr,br,Tr,Er;if(-1!==fr.indexOf("%")!=(-1!==hr.indexOf("%"))&&2>hr.split(",").length&&(Er=Ye(or,"backgroundImage").replace(fe,""),Er&&"none"!==Er)){for(yr=fr.split(" "),_r=hr.split(" "),Pe.setAttribute("src",Er),xr=2;-1<--xr;)fr=yr[xr],br=-1!==fr.indexOf("%"),br!==(-1!==_r[xr].indexOf("%"))&&(Tr=0===xr?or.offsetWidth-Pe.width:or.offsetHeight-Pe.height,yr[xr]=br?parseFloat(fr)/100*Tr+"px":100*(parseFloat(fr)/Tr)+"%");fr=yr.join(" ")}return this.parseComplex(or.style,fr,hr,cr,ur)},formatter:rt}),Rt("backgroundSize",{defaultValue:"0 0",formatter:function(or){return or+="",rt(-1===or.indexOf(" ")?or+" "+or:or)}}),Rt("perspective",{defaultValue:"0px",prefix:!0}),Rt("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),Rt("transformStyle",{prefix:!0}),Rt("backfaceVisibility",{prefix:!0}),Rt("userSelect",{prefix:!0}),Rt("margin",{parser:_t("marginTop,marginRight,marginBottom,marginLeft")}),Rt("padding",{parser:_t("paddingTop,paddingRight,paddingBottom,paddingLeft")}),Rt("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(or,ir,sr,lr,cr,ur){var mr,gr,fr;return 9>Ue?(gr=or.currentStyle,fr=8>Ue?" ":",",mr="rect("+gr.clipTop+fr+gr.clipRight+fr+gr.clipBottom+fr+gr.clipLeft+")",ir=this.format(ir).split(",").join(fr)):(mr=this.format(Ye(or,this.p,Z,!1,this.dflt)),ir=this.format(ir)),this.parseComplex(or.style,mr,ir,cr,ur)}}),Rt("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),Rt("autoRound,strictUnits",{parser:function(or,ir,sr,lr,cr){return cr}}),Rt("border",{defaultValue:"0px solid #000",parser:function(or,ir,sr,lr,cr,ur){var mr=Ye(or,"borderTopWidth",Z,!1,"0px"),gr=this.format(ir).split(" "),fr=gr[0].replace(ie,"");return"px"!==fr&&(mr=parseFloat(mr)/Ze(or,"borderTopWidth",1,fr)+fr),this.parseComplex(or.style,this.format(mr+" "+Ye(or,"borderTopStyle",Z,!1,"solid")+" "+Ye(or,"borderTopColor",Z,!1,"#000")),gr.join(" "),cr,ur)},color:!0,formatter:function(or){var ir=or.split(" ");return ir[0]+" "+(ir[1]||"solid")+" "+(or.match(ht)||["#000"])[0]}}),Rt("borderWidth",{parser:_t("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),Rt("float,cssFloat,styleFloat",{parser:function(or,ir,sr,lr,cr){var mr=or.style,gr="cssFloat"in mr?"cssFloat":"styleFloat";return new Tt(mr,gr,0,0,cr,-1,sr,!1,0,mr[gr],ir)}});var Jt=function(or){var ir=this.t,sr=ir.filter||Ye(this.data,"filter")||"",lr=0|this.s+this.c*or,cr;100==lr&&(-1===sr.indexOf("atrix(")&&-1===sr.indexOf("radient(")&&-1===sr.indexOf("oader(")?(ir.removeAttribute("filter"),cr=!Ye(this.data,"filter")):(ir.filter=sr.replace(le,""),cr=!0)),cr||(this.xn1&&(ir.filter=sr=sr||"alpha(opacity="+lr+")"),-1===sr.indexOf("pacity")?(0!=lr||!this.xn1)&&(ir.filter=sr+" alpha(opacity="+lr+")"):ir.filter=sr.replace(ne,"opacity="+lr))};Rt("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(or,ir,sr,lr,cr,ur){var mr=parseFloat(Ye(or,"opacity",Z,!1,"1")),gr=or.style,fr="autoAlpha"===sr;return"string"==typeof ir&&"="===ir.charAt(1)&&(ir=("-"===ir.charAt(0)?-1:1)*parseFloat(ir.substr(2))+mr),fr&&1===mr&&"hidden"===Ye(or,"visibility",Z)&&0!==ir&&(mr=0),Oe?cr=new Tt(gr,"opacity",mr,ir-mr,cr):(cr=new Tt(gr,"opacity",100*mr,100*(ir-mr),cr),cr.xn1=fr?1:0,gr.zoom=1,cr.type=2,cr.b="alpha(opacity="+cr.s+")",cr.e="alpha(opacity="+(cr.s+cr.c)+")",cr.data=or,cr.plugin=ur,cr.setRatio=Jt),fr&&(cr=new Tt(gr,"visibility",0,0,cr,-1,null,!1,0,0===mr?"hidden":"inherit",0===ir?"hidden":"inherit"),cr.xs0="inherit",lr._overwriteProps.push(cr.n),lr._overwriteProps.push(sr)),cr}});var Qt=function(or,ir){ir&&(or.removeProperty?(("ms"===ir.substr(0,2)||"webkit"===ir.substr(0,6))&&(ir="-"+ir),or.removeProperty(ir.replace(ue,"-$1").toLowerCase())):or.removeAttribute(ir))},Kt=function(or){if(this.t._gsClassPT=this,1===or||0===or){this.t.setAttribute("class",0===or?this.b:this.e);for(var ir=this.data,sr=this.t.style;ir;)ir.v?sr[ir.p]=ir.v:Qt(sr,ir.p),ir=ir._next;1===or&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)};Rt("className",{parser:function(or,ir,sr,lr,cr,ur,mr){var gr=or.getAttribute("class")||"",fr=or.style.cssText,hr,yr,_r,xr,br;if(cr=lr._classNamePT=new Tt(or,sr,0,0,cr,2),cr.setRatio=Kt,cr.pr=-11,X=!0,cr.b=gr,yr=Qe(or,Z),_r=or._gsClassPT,_r){for(xr={},br=_r.data;br;)xr[br.p]=1,br=br._next;_r.setRatio(1)}return or._gsClassPT=cr,cr.e="="===ir.charAt(1)?gr.replace(new RegExp("(?:\\s|^)"+ir.substr(2)+"(?![\\w-])"),"")+("+"===ir.charAt(0)?" "+ir.substr(2):""):ir,or.setAttribute("class",cr.e),hr=Ke(or,yr,Qe(or),mr,xr),or.setAttribute("class",gr),cr.data=hr.firstMPT,or.style.cssText=fr,cr=cr.xfirst=lr.parse(or,hr.difs,cr,ur),cr}});var $t=function(or){if((1===or||0===or)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var ir=this.t.style,sr=Q.transform.parse,lr,cr,ur,mr,gr;if("all"===this.e)ir.cssText="",mr=!0;else for(lr=this.e.split(" ").join("").split(","),ur=lr.length;-1<--ur;)cr=lr[ur],Q[cr]&&(Q[cr].parse===sr?mr=!0:cr="transformOrigin"===cr?Bt:Q[cr].p),Qt(ir,cr);mr&&(Qt(ir,Lt),gr=this.t._gsTransform,gr&&(gr.svg&&(this.t.removeAttribute("data-svg-origin"),this.t.removeAttribute("transform")),delete this.t._gsTransform))}};for(Rt("clearProps",{parser:function(or,ir,sr,lr,cr){return cr=new Tt(or,sr,0,0,cr,2),cr.setRatio=$t,cr.e=ir,cr.pr=-10,cr.data=lr._tween,X=!0,cr}}),K="bezier,throwProps,physicsProps,physics2D".split(","),At=K.length;At--;)Ct(K[At]);K=H.prototype,K._firstPT=K._lastParsedTransform=K._transform=null,K._onInitTween=function(or,ir,sr,lr){if(!or.nodeType)return!1;this._target=Ge=or,this._tween=sr,this._vars=ir,He=lr,Be=ir.autoRound,X=!1,Y=ir.suffixMap||H.suffixMap,Z=Xe(or,""),J=this._overwriteProps;var cr=or.style,ur,mr,gr,fr,hr,yr,_r,xr,br;if(Ne&&""===cr.zIndex&&(ur=Ye(or,"zIndex",Z),("auto"===ur||""===ur)&&this._addLazySet(cr,"zIndex",0)),"string"==typeof ir&&(fr=cr.cssText,ur=Qe(or,Z),cr.cssText=fr+";"+ir,ur=Ke(or,ur,Qe(or)).difs,!Oe&&se.test(ir)&&(ur.opacity=parseFloat(RegExp.$1)),ir=ur,cr.cssText=fr),this._firstPT=ir.className?mr=Q.className.parse(or,ir.className,"className",this,null,null,ir):mr=this.parse(or,ir,null),this._transformType){for(br=3===this._transformType,Lt?ze&&(Ne=!0,""===cr.zIndex&&(_r=Ye(or,"zIndex",Z),("auto"===_r||""===_r)&&this._addLazySet(cr,"zIndex",0)),Fe&&this._addLazySet(cr,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(br?"visible":"hidden"))):cr.zoom=1,gr=mr;gr&&gr._next;)gr=gr._next;xr=new Tt(or,"transform",0,0,null,2),this._linkCSSP(xr,null,gr),xr.setRatio=Lt?Zt:Yt,xr.data=this._transform||Xt(or,Z,!0),xr.tween=sr,xr.pr=-1,J.pop()}if(X){for(;mr;){for(yr=mr._next,gr=fr;gr&&gr.pr>mr.pr;)gr=gr._next;(mr._prev=gr?gr._prev:hr)?mr._prev._next=mr:fr=mr,(mr._next=gr)?gr._prev=mr:hr=mr,mr=yr}this._firstPT=fr}return!0},K.parse=function(or,ir,sr,lr){var cr=or.style,ur,mr,gr,fr,hr,yr,_r,xr,br,Tr;for(ur in ir){if(yr=ir[ur],"function"==typeof yr&&(yr=yr(He,Ge)),mr=Q[ur],mr)sr=mr.parse(or,yr,ur,this,sr,lr,ir);else if("--"===ur.substr(0,2)){this._tween._propLookup[ur]=this._addTween.call(this._tween,or.style,"setProperty",Xe(or).getPropertyValue(ur)+"",yr+"",ur,!1,ur);continue}else hr=Ye(or,ur,Z)+"",br="string"==typeof yr,"color"===ur||"fill"===ur||"stroke"===ur||-1!==ur.indexOf("Color")||br&&pe.test(yr)?(!br&&(yr=mt(yr),yr=(3<yr.length?"rgba(":"rgb(")+yr.join(",")+")"),sr=St(cr,ur,hr,yr,!0,"transparent",sr,0,lr)):br&&Te.test(yr)?sr=St(cr,ur,hr,yr,!0,null,sr,0,lr):(gr=parseFloat(hr),_r=gr||0===gr?hr.substr((gr+"").length):"",(""===hr||"auto"===hr)&&("width"===ur||"height"===ur?(gr=tt(or,ur,Z),_r="px"):"left"===ur||"top"===ur?(gr=Je(or,ur,Z),_r="px"):(gr="opacity"===ur?1:0,_r="")),Tr=br&&"="===yr.charAt(1),Tr?(fr=parseInt(yr.charAt(0)+"1",10),yr=yr.substr(2),fr*=parseFloat(yr),xr=yr.replace(ie,"")):(fr=parseFloat(yr),xr=br?yr.replace(ie,""):""),""===xr&&(xr=ur in Y?Y[ur]:_r),yr=fr||0===fr?(Tr?fr+gr:fr)+xr:ir[ur],_r!==xr&&(""!==xr||"lineHeight"===ur)&&(fr||0===fr)&&gr&&(gr=Ze(or,ur,gr,_r),"%"===xr?(gr/=Ze(or,ur,100,"%")/100,!0!==ir.strictUnits&&(hr=gr+"%")):"em"===xr||"rem"===xr||"vw"===xr||"vh"===xr?gr/=Ze(or,ur,1,xr):"px"!==xr&&(fr=Ze(or,ur,fr,xr),xr="px"),Tr&&(fr||0===fr)&&(yr=fr+gr+xr)),Tr&&(fr+=gr),(gr||0===gr)&&(fr||0===fr)?(sr=new Tt(cr,ur,gr,fr-gr,sr,0,ur,!1!==Be&&("px"===xr||"zIndex"==ur),0,hr,yr),sr.xs0=xr):void 0!==cr[ur]&&(yr||yr+"NaN"&&null!=yr)?(sr=new Tt(cr,ur,fr||gr||0,0,sr,-1,ur,!1,0,hr,yr),sr.xs0="none"===yr&&("display"===ur||-1!==ur.indexOf("Style"))?hr:yr):Ve("invalid "+ur+" tween value: "+ir[ur]));lr&&sr&&!sr.plugin&&(sr.plugin=lr)}return sr},K.setRatio=function(or){var ir=this._firstPT,sr=1e-6,lr,cr,ur;if(1===or&&(this._tween._time===this._tween._duration||0===this._tween._time))for(;ir;){if(2===ir.type)ir.setRatio(or);else if(!(ir.r&&-1!==ir.type))ir.t[ir.p]=ir.e;else if(lr=_Mathround(ir.s+ir.c),!ir.type)ir.t[ir.p]=lr+ir.xs0;else if(1===ir.type){for(ur=ir.l,cr=ir.xs0+lr+ir.xs1,ur=1;ur<ir.l;ur++)cr+=ir["xn"+ur]+ir["xs"+(ur+1)];ir.t[ir.p]=cr}ir=ir._next}else if(or||this._tween._time!==this._tween._duration&&0!==this._tween._time||-1e-6===this._tween._rawPrevTime)for(;ir;){if(lr=ir.c*or+ir.s,ir.r?lr=_Mathround(lr):lr<sr&&lr>-sr&&(lr=0),!ir.type)ir.t[ir.p]=lr+ir.xs0;else if(1!==ir.type)-1===ir.type?ir.t[ir.p]=ir.xs0:ir.setRatio&&ir.setRatio(or);else if(ur=ir.l,2===ur)ir.t[ir.p]=ir.xs0+lr+ir.xs1+ir.xn1+ir.xs2;else if(3===ur)ir.t[ir.p]=ir.xs0+lr+ir.xs1+ir.xn1+ir.xs2+ir.xn2+ir.xs3;else if(4===ur)ir.t[ir.p]=ir.xs0+lr+ir.xs1+ir.xn1+ir.xs2+ir.xn2+ir.xs3+ir.xn3+ir.xs4;else if(5===ur)ir.t[ir.p]=ir.xs0+lr+ir.xs1+ir.xn1+ir.xs2+ir.xn2+ir.xs3+ir.xn3+ir.xs4+ir.xn4+ir.xs5;else{for(cr=ir.xs0+lr+ir.xs1,ur=1;ur<ir.l;ur++)cr+=ir["xn"+ur]+ir["xs"+(ur+1)];ir.t[ir.p]=cr}ir=ir._next}else for(;ir;)2===ir.type?ir.setRatio(or):ir.t[ir.p]=ir.b,ir=ir._next},K._enableTransforms=function(or){this._transform=this._transform||Xt(this._target,Z,!0),this._transformType=!(this._transform.svg&&Ft)&&(or||3===this._transformType)?3:2};var er=function(){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)};K._addLazySet=function(or,ir,sr){var lr=this._firstPT=new Tt(or,ir,0,0,this._firstPT,2);lr.e=sr,lr.setRatio=er,lr.data=this},K._linkCSSP=function(or,ir,sr,lr){return or&&(ir&&(ir._prev=or),or._next&&(or._next._prev=or._prev),or._prev?or._prev._next=or._next:this._firstPT===or&&(this._firstPT=or._next,lr=!0),sr?sr._next=or:!lr&&null===this._firstPT&&(this._firstPT=or),or._next=ir,or._prev=sr),or},K._mod=function(or){for(var ir=this._firstPT;ir;)"function"==typeof or[ir.p]&&or[ir.p]===_Mathround&&(ir.r=1),ir=ir._next},K._kill=function(or){var ir=or,sr,lr,cr;if(or.autoAlpha||or.alpha){for(lr in ir={},or)ir[lr]=or[lr];ir.opacity=1,ir.autoAlpha&&(ir.visibility=1)}for(or.className&&(sr=this._classNamePT)&&(cr=sr.xfirst,cr&&cr._prev?this._linkCSSP(cr._prev,sr._next,cr._prev._prev):cr===this._firstPT&&(this._firstPT=sr._next),sr._next&&this._linkCSSP(sr._next,sr._next._next,cr._prev),this._classNamePT=null),sr=this._firstPT;sr;)sr.plugin&&sr.plugin!==lr&&sr.plugin._kill&&(sr.plugin._kill(or),lr=sr.plugin),sr=sr._next;return O.prototype._kill.call(this,ir)};var rr=function(or,ir,sr){var lr,cr,ur,mr;if(or.slice){for(cr=or.length;-1<--cr;)rr(or[cr],ir,sr);return}for(lr=or.childNodes,cr=lr.length;-1<--cr;)ur=lr[cr],mr=ur.type,ur.style&&(ir.push(Qe(ur)),sr&&sr.push(ur)),(1===mr||9===mr||11===mr)&&ur.childNodes.length&&rr(ur,ir,sr)};return H.cascadeTo=function(or,ir,sr){var lr=G.to(or,ir,sr),cr=[lr],ur=[],mr=[],gr=[],fr=G._internals.reservedProps,hr,yr,_r,xr;for(or=lr._targets||lr.target,rr(or,ur,gr),lr.render(ir,!0,!0),rr(or,mr),lr.render(0,!0,!0),lr._enabled(!0),hr=gr.length;-1<--hr;)if(yr=Ke(gr[hr],ur[hr],mr[hr]),yr.firstMPT){for(_r in yr=yr.difs,sr)fr[_r]&&(yr[_r]=sr[_r]);for(_r in xr={},yr)xr[_r]=ur[hr][_r];cr.push(G.fromTo(gr[hr],ir,xr,yr))}return cr},O.activate([H]),H},!0),function(){var O=U._gsDefine.plugin({propName:"roundProps",version:"1.6.0",priority:-1,API:2,init:function(W,X,Y){return this._tween=Y,!0}}),G=function(W){for(;W;)W.f||W.blob||(W.m=_Mathround),W=W._next},H=O.prototype;H._onInitAllProps=function(){for(var W=this._tween,X=W.vars.roundProps.join?W.vars.roundProps:W.vars.roundProps.split(","),Y=X.length,Z={},J=W._propLookup.roundProps,Q,K,$;-1<--Y;)Z[X[Y]]=_Mathround;for(Y=X.length;-1<--Y;)for(Q=X[Y],K=W._firstPT;K;)$=K._next,K.pg?K.t._mod(Z):K.n===Q&&(2===K.f&&K.t?G(K.t._firstPT):(this._add(K.t,Q,K.s,K.c),$&&($._prev=K._prev),K._prev?K._prev._next=$:W._firstPT===K&&(W._firstPT=$),K._next=K._prev=null,W._propLookup[Q]=J)),K=$;return!1},H._add=function(W,X,Y,Z){this._addTween(W,X,Y,Y+Z,X,Math.round),this._overwriteProps.push(X)}}(),function(){U._gsDefine.plugin({propName:"attr",API:2,version:"0.6.1",init:function(O,G,H,W){var X,Y;if("function"!=typeof O.setAttribute)return!1;for(X in G)Y=G[X],"function"==typeof Y&&(Y=Y(W,O)),this._addTween(O,"setAttribute",O.getAttribute(X)+"",Y+"",X,!1,X),this._overwriteProps.push(X);return!0}})}(),U._gsDefine.plugin({propName:"directionalRotation",version:"0.3.1",API:2,init:function(O,G,H,W){"object"!=typeof G&&(G={rotation:G}),this.finals={};var X=!0===G.useRadians?2*_MathPI:360,Y=1e-6,Z,J,Q,K,$,ee;for(Z in G)"useRadians"!==Z&&(K=G[Z],"function"==typeof K&&(K=K(W,O)),ee=(K+"").split("_"),J=ee[0],Q=parseFloat("function"==typeof O[Z]?O[Z.indexOf("set")||"function"!=typeof O["get"+Z.substr(3)]?Z:"get"+Z.substr(3)]():O[Z]),K=this.finals[Z]="string"==typeof J&&"="===J.charAt(1)?Q+parseInt(J.charAt(0)+"1",10)*+J.substr(2):+J||0,$=K-Q,ee.length&&(J=ee.join("_"),-1!==J.indexOf("short")&&($%=X,$!==$%(X/2)&&($=0>$?$+X:$-X)),-1!==J.indexOf("_cw")&&0>$?$=($+9999999999*X)%X-(0|$/X)*X:-1!==J.indexOf("ccw")&&0<$&&($=($-9999999999*X)%X-(0|$/X)*X)),($>Y||$<-Y)&&(this._addTween(O,Z,Q,Q+$,Z),this._overwriteProps.push(Z)));return!0},set:function(O){var G;if(1!==O)this._super.setRatio.call(this,O);else for(G=this._firstPT;G;)G.f?G.t[G.p](this.finals[G.p]):G.t[G.p]=this.finals[G.p],G=G._next}})._autoCSS=!0,U._gsDefine("easing.Back",["easing.Ease"],function(O){var G=U.GreenSockGlobals||U,H=G.com.greensock,W=2*_MathPI,X=_MathPI/2,Y=H._class,Z=function(pe,ue){var ge=Y("easing."+pe,function(){},!0),fe=ge.prototype=new O;return fe.constructor=ge,fe.getRatio=ue,ge},J=O.register||function(){},Q=function(pe,ue,ge,fe){var ye=Y("easing."+pe,{easeOut:new ue,easeIn:new ge,easeInOut:new fe},!0);return J(ye,pe),ye},K=function(pe,ue,ge){this.t=pe,this.v=ue,ge&&(this.next=ge,ge.prev=this,this.c=ge.v-ue,this.gap=ge.t-pe)},$=function(pe,ue){var ge=Y("easing."+pe,function(he){this._p1=he||0===he?he:1.70158,this._p2=1.525*this._p1},!0),fe=ge.prototype=new O;return fe.constructor=ge,fe.getRatio=ue,fe.config=function(he){return new ge(he)},ge},ee=Q("Back",$("BackOut",function(pe){return--pe*pe*((this._p1+1)*pe+this._p1)+1}),$("BackIn",function(pe){return pe*pe*((this._p1+1)*pe-this._p1)}),$("BackInOut",function(pe){return 1>(pe*=2)?0.5*pe*pe*((this._p2+1)*pe-this._p2):0.5*((pe-=2)*pe*((this._p2+1)*pe+this._p2)+2)})),re=Y("easing.SlowMo",function(pe,ue,ge){ue=ue||0===ue?ue:0.7,null==pe?pe=0.7:1<pe&&(pe=1),this._p=1===pe?0:ue,this._p1=(1-pe)/2,this._p2=pe,this._p3=this._p1+this._p2,this._calcEnd=!0===ge},!0),oe=re.prototype=new O,ie,ne,se,le;return oe.constructor=re,oe.getRatio=function(pe){var ue=pe+(0.5-pe)*this._p;return pe<this._p1?this._calcEnd?1-(pe=1-pe/this._p1)*pe:ue-(pe=1-pe/this._p1)*pe*pe*pe*ue:pe>this._p3?this._calcEnd?1===pe?0:1-(pe=(pe-this._p3)/this._p1)*pe:ue+(pe-ue)*(pe=(pe-this._p3)/this._p1)*pe*pe*pe:this._calcEnd?1:ue},re.ease=new re(0.7,0.7),oe.config=re.config=function(pe,ue,ge){return new re(pe,ue,ge)},ie=Y("easing.SteppedEase",function(pe,ue){pe=pe||1,this._p1=1/pe,this._p2=pe+(ue?0:1),this._p3=ue?1:0},!0),oe=ie.prototype=new O,oe.constructor=ie,oe.getRatio=function(pe){return 0>pe?pe=0:1<=pe&&(pe=0.999999999),((0|this._p2*pe)+this._p3)*this._p1},oe.config=ie.config=function(pe,ue){return new ie(pe,ue)},ne=Y("easing.ExpoScaleEase",function(pe,ue,ge){this._p1=_Mathlog(ue/pe),this._p2=ue-pe,this._p3=pe,this._ease=ge},!0),oe=ne.prototype=new O,oe.constructor=ne,oe.getRatio=function(pe){return this._ease&&(pe=this._ease.getRatio(pe)),(this._p3*Math.exp(this._p1*pe)-this._p3)/this._p2},oe.config=ne.config=function(pe,ue,ge){return new ne(pe,ue,ge)},se=Y("easing.RoughEase",function(pe){pe=pe||{};for(var ue=pe.taper||"none",ge=[],fe=0,he=0|(pe.points||20),ye=he,_e=!1!==pe.randomize,xe=!0===pe.clamp,ve=pe.template instanceof O?pe.template:null,Te="number"==typeof pe.strength?0.4*pe.strength:0.4,Ee,Se,Ae,we,Me,Re;-1<--ye;)Ee=_e?Math.random():1/he*ye,Se=ve?ve.getRatio(Ee):Ee,"none"===ue?Ae=Te:"out"===ue?(we=1-Ee,Ae=we*we*Te):"in"===ue?Ae=Ee*Ee*Te:0.5>Ee?(we=2*Ee,Ae=0.5*(we*we)*Te):(we=2*(1-Ee),Ae=0.5*(we*we)*Te),_e?Se+=Math.random()*Ae-0.5*Ae:ye%2?Se+=0.5*Ae:Se-=0.5*Ae,xe&&(1<Se?Se=1:0>Se&&(Se=0)),ge[fe++]={x:Ee,y:Se};for(ge.sort(function(Ce,Pe){return Ce.x-Pe.x}),Re=new K(1,1,null),ye=he;-1<--ye;)Me=ge[ye],Re=new K(Me.x,Me.y,Re);this._prev=new K(0,0,0===Re.t?Re.next:Re)},!0),oe=se.prototype=new O,oe.constructor=se,oe.getRatio=function(pe){var ue=this._prev;if(pe>ue.t){for(;ue.next&&pe>=ue.t;)ue=ue.next;ue=ue.prev}else for(;ue.prev&&pe<=ue.t;)ue=ue.prev;return this._prev=ue,ue.v+(pe-ue.t)/ue.gap*ue.c},oe.config=function(pe){return new se(pe)},se.ease=new se,Q("Bounce",Z("BounceOut",function(pe){return pe<1/2.75?7.5625*pe*pe:pe<2/2.75?7.5625*(pe-=1.5/2.75)*pe+0.75:pe<2.5/2.75?7.5625*(pe-=2.25/2.75)*pe+0.9375:7.5625*(pe-=2.625/2.75)*pe+0.984375}),Z("BounceIn",function(pe){return(pe=1-pe)<1/2.75?1-7.5625*pe*pe:pe<2/2.75?1-(7.5625*(pe-=1.5/2.75)*pe+0.75):pe<2.5/2.75?1-(7.5625*(pe-=2.25/2.75)*pe+0.9375):1-(7.5625*(pe-=2.625/2.75)*pe+0.984375)}),Z("BounceInOut",function(pe){var ue=0.5>pe;return pe=ue?1-2*pe:2*pe-1,pe=pe<1/2.75?7.5625*pe*pe:pe<2/2.75?7.5625*(pe-=1.5/2.75)*pe+0.75:pe<2.5/2.75?7.5625*(pe-=2.25/2.75)*pe+0.9375:7.5625*(pe-=2.625/2.75)*pe+0.984375,ue?0.5*(1-pe):0.5*pe+0.5})),Q("Circ",Z("CircOut",function(pe){return _Mathsqrt(1- --pe*pe)}),Z("CircIn",function(pe){return-(_Mathsqrt(1-pe*pe)-1)}),Z("CircInOut",function(pe){return 1>(pe*=2)?-0.5*(_Mathsqrt(1-pe*pe)-1):0.5*(_Mathsqrt(1-(pe-=2)*pe)+1)})),le=function(pe,ue,ge){var fe=Y("easing."+pe,function(ye,_e){this._p1=1<=ye?ye:1,this._p2=(_e||ge)/(1>ye?ye:1),this._p3=this._p2/W*(_Mathasin(1/this._p1)||0),this._p2=W/this._p2},!0),he=fe.prototype=new O;return he.constructor=fe,he.getRatio=ue,he.config=function(ye,_e){return new fe(ye,_e)},fe},Q("Elastic",le("ElasticOut",function(pe){return this._p1*_Mathpow(2,-10*pe)*_Mathsin((pe-this._p3)*this._p2)+1},0.3),le("ElasticIn",function(pe){return-(this._p1*_Mathpow(2,10*(pe-=1))*_Mathsin((pe-this._p3)*this._p2))},0.3),le("ElasticInOut",function(pe){return 1>(pe*=2)?-0.5*(this._p1*_Mathpow(2,10*(pe-=1))*_Mathsin((pe-this._p3)*this._p2)):0.5*(this._p1*_Mathpow(2,-10*(pe-=1))*_Mathsin((pe-this._p3)*this._p2))+1},0.45)),Q("Expo",Z("ExpoOut",function(pe){return 1-_Mathpow(2,-10*pe)}),Z("ExpoIn",function(pe){return _Mathpow(2,10*(pe-1))-1e-3}),Z("ExpoInOut",function(pe){return 1>(pe*=2)?0.5*_Mathpow(2,10*(pe-1)):0.5*(2-_Mathpow(2,-10*(pe-1)))})),Q("Sine",Z("SineOut",function(pe){return _Mathsin(pe*X)}),Z("SineIn",function(pe){return-_Mathcos(pe*X)+1}),Z("SineInOut",function(pe){return-0.5*(_Mathcos(_MathPI*pe)-1)})),Y("easing.EaseLookup",{find:function(pe){return O.map[pe]}},!0),J(G.SlowMo,"SlowMo","ease,"),J(se,"RoughEase","ease,"),J(ie,"SteppedEase","ease,"),ee},!0)}),U._gsDefine&&U._gsQueue.pop()(),function(O,G){"use strict";var H={},W=O.document,X=O.GreenSockGlobals=O.GreenSockGlobals||O;if(!X.TweenLite){var Y=function(Ke){var $e=Ke.split("."),et=X,tt;for(tt=0;tt<$e.length;tt++)et[$e[tt]]=et=et[$e[tt]]||{};return et},Z=Y("com.greensock"),J=1e-10,Q=function(Ke){var $e=[],et=Ke.length,tt;for(tt=0;tt!==et;$e.push(Ke[tt++]));return $e},K=function(){},$=function(){var Ke=Object.prototype.toString,$e=Ke.call([]);return function(et){return null!=et&&(et instanceof Array||"object"==typeof et&&!!et.push&&Ke.call(et)===$e)}}(),se={},le=function(Ke,$e,et,tt){this.sc=se[Ke]?se[Ke].sc:[],se[Ke]=this,this.gsClass=null,this.func=et;var rt=[];this.check=function(ot){for(var it=$e.length,nt=it,ct,ut,mt,ft;-1<--it;)(ct=se[$e[it]]||new le($e[it],[])).gsClass?(rt[it]=ct.gsClass,nt--):ot&&ct.sc.push(this);if(0===nt&&et){if(ut=("com.greensock."+Ke).split("."),mt=ut.pop(),ft=Y(ut.join("."))[mt]=this.gsClass=et.apply(et,rt),tt)if(X[mt]=H[mt]=ft,!("undefined"!=typeof E&&E.exports))D=[],F=function(){return ft}.apply(S,D),!(void 0!==F&&(E.exports=F));else if(Ke===G)for(it in E.exports=H[G]=ft,H)ft[it]=H[it];else H[G]&&(H[G][mt]=ft);for(it=0;it<this.sc.length;it++)this.sc[it].check()}},this.check(!0)},pe=O._gsDefine=function(Ke,$e,et,tt){return new le(Ke,$e,et,tt)},ue=Z._class=function(Ke,$e,et){return $e=$e||function(){},pe(Ke,[],function(){return $e},et),$e},ee,re,oe,ie,ne;pe.globals=X;var ge=[0,0,1,1],fe=ue("easing.Ease",function(Ke,$e,et,tt){this._func=Ke,this._type=et||0,this._power=tt||0,this._params=$e?ge.concat($e):ge},!0),he=fe.map={},ye=fe.register=function(Ke,$e,et,tt){for(var rt=$e.split(","),ot=rt.length,it=(et||"easeIn,easeOut,easeInOut").split(","),nt,ct,ut,mt;-1<--ot;)for(ct=rt[ot],nt=tt?ue("easing."+ct,null,!0):Z.easing[ct]||{},ut=it.length;-1<--ut;)mt=it[ut],he[ct+"."+mt]=he[mt+ct]=nt[mt]=Ke.getRatio?Ke:Ke[mt]||new Ke};for(oe=fe.prototype,oe._calcEnd=!1,oe.getRatio=function(Ke){if(this._func)return this._params[0]=Ke,this._func.apply(null,this._params);var $e=this._type,et=this._power,tt=1===$e?1-Ke:2===$e?Ke:0.5>Ke?2*Ke:2*(1-Ke);return 1===et?tt*=tt:2===et?tt*=tt*tt:3===et?tt*=tt*tt*tt:4===et&&(tt*=tt*tt*tt*tt),1===$e?1-tt:2===$e?tt:0.5>Ke?tt/2:1-tt/2},ee=["Linear","Quad","Cubic","Quart","Quint,Strong"],re=ee.length;-1<--re;)oe=ee[re]+",Power"+re,ye(new fe(null,null,1,re),oe,"easeOut",!0),ye(new fe(null,null,2,re),oe,"easeIn"+(0===re?",easeNone":"")),ye(new fe(null,null,3,re),oe,"easeInOut");he.linear=Z.easing.Linear.easeIn,he.swing=Z.easing.Quad.easeInOut;var _e=ue("events.EventDispatcher",function(Ke){this._listeners={},this._eventTarget=Ke||this});oe=_e.prototype,oe.addEventListener=function(Ke,$e,et,tt,rt){rt=rt||0;var ot=this._listeners[Ke],it=0,nt,ct;for(this!==ie||ne||ie.wake(),null==ot&&(this._listeners[Ke]=ot=[]),ct=ot.length;-1<--ct;)nt=ot[ct],nt.c===$e&&nt.s===et?ot.splice(ct,1):0==it&&nt.pr<rt&&(it=ct+1);ot.splice(it,0,{c:$e,s:et,up:tt,pr:rt})},oe.removeEventListener=function(Ke,$e){var et=this._listeners[Ke],tt;if(et)for(tt=et.length;-1<--tt;)if(et[tt].c===$e)return void et.splice(tt,1)},oe.dispatchEvent=function(Ke){var $e=this._listeners[Ke],et,tt,rt;if($e)for(et=$e.length,1<et&&($e=$e.slice(0)),tt=this._eventTarget;-1<--et;)rt=$e[et],rt&&(rt.up?rt.c.call(rt.s||tt,{type:Ke,target:tt}):rt.c.call(rt.s||tt))};var xe=O.requestAnimationFrame,ve=O.cancelAnimationFrame,Te=Date.now||function(){return new Date().getTime()},Ee=Te();for(ee=["ms","moz","webkit","o"],re=ee.length;-1<--re&&!xe;)xe=O[ee[re]+"RequestAnimationFrame"],ve=O[ee[re]+"CancelAnimationFrame"]||O[ee[re]+"CancelRequestAnimationFrame"];ue("Ticker",function(Ke,$e){var et=this,tt=Te(),rt=!1!==$e&&xe&&"auto",ot=500,it=33,yt=function(_t){var xt=Te()-Ee,vt,bt;xt>ot&&(tt+=xt-it),Ee+=xt,et.time=(Ee-tt)/1e3,vt=et.time-ht,(!ct||0<vt||!0===_t)&&(et.frame++,ht+=vt+(vt>=ft?4e-3:ft-vt),bt=!0),!0!==_t&&(mt=ut(yt)),bt&&et.dispatchEvent("tick")},ct,ut,mt,ft,ht;_e.call(et),et.time=et.frame=0,et.tick=function(){yt(!0)},et.lagSmoothing=function(_t,xt){return arguments.length?void(ot=_t||1/J,it=_Mathmin(xt,ot,0)):ot<1/J},et.sleep=function(){null==mt||(rt&&ve?ve(mt):clearTimeout(mt),ut=K,mt=null,et===ie&&(ne=!1))},et.wake=function(_t){null===mt?_t?tt+=-Ee+(Ee=Te()):10<et.frame&&(Ee=Te()-ot+5):et.sleep(),ut=0===ct?K:rt&&xe?xe:function(xt){return setTimeout(xt,0|1e3*(ht-et.time)+1)},et===ie&&(ne=!0),yt(2)},et.fps=function(_t){return arguments.length?void(ct=_t,ft=1/(ct||60),ht=this.time+ft,et.wake()):ct},et.useRAF=function(_t){return arguments.length?void(et.sleep(),rt=_t,et.fps(ct)):rt},et.fps(Ke),setTimeout(function(){"auto"===rt&&5>et.frame&&"hidden"!==(W||{}).visibilityState&&et.useRAF(!1)},1500)}),oe=Z.Ticker.prototype=new Z.events.EventDispatcher,oe.constructor=Z.Ticker;var Se=ue("core.Animation",function(Ke,$e){if(this.vars=$e=$e||{},this._duration=this._totalDuration=Ke||0,this._delay=+$e.delay||0,this._timeScale=1,this._active=!0===$e.immediateRender,this.data=$e.data,this._reversed=!0===$e.reversed,!!We){ne||ie.wake();var et=this.vars.useFrames?He:We;et.add(this,et._time),this.vars.paused&&this.paused(!0)}});ie=Se.ticker=new Z.Ticker,oe=Se.prototype,oe._dirty=oe._gc=oe._initted=oe._paused=!1,oe._totalTime=oe._time=0,oe._rawPrevTime=-1,oe._next=oe._last=oe._onUpdate=oe._timeline=oe.timeline=null,oe._paused=!1;var Ae=function(){ne&&2e3<Te()-Ee&&("hidden"!==(W||{}).visibilityState||!ie.lagSmoothing())&&ie.wake();var Ke=setTimeout(Ae,2e3);Ke.unref&&Ke.unref()};Ae(),oe.play=function(Ke,$e){return null!=Ke&&this.seek(Ke,$e),this.reversed(!1).paused(!1)},oe.pause=function(Ke,$e){return null!=Ke&&this.seek(Ke,$e),this.paused(!0)},oe.resume=function(Ke,$e){return null!=Ke&&this.seek(Ke,$e),this.paused(!1)},oe.seek=function(Ke,$e){return this.totalTime(+Ke,!1!==$e)},oe.restart=function(Ke,$e){return this.reversed(!1).paused(!1).totalTime(Ke?-this._delay:0,!1!==$e,!0)},oe.reverse=function(Ke,$e){return null!=Ke&&this.seek(Ke||this.totalDuration(),$e),this.reversed(!0).paused(!1)},oe.render=function(){},oe.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,(this._gc||!this.timeline)&&this._enabled(!0),this},oe.isActive=function(){var Ke=this._timeline,$e=this._startTime,et;return!Ke||!this._gc&&!this._paused&&Ke.isActive()&&(et=Ke.rawTime(!0))>=$e&&et<$e+this.totalDuration()/this._timeScale-1e-7},oe._enabled=function(Ke,$e){return ne||ie.wake(),this._gc=!Ke,this._active=this.isActive(),!0!==$e&&(Ke&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!Ke&&this.timeline&&this._timeline._remove(this,!0)),!1},oe._kill=function(){return this._enabled(!1,!1)},oe.kill=function(Ke,$e){return this._kill(Ke,$e),this},oe._uncache=function(Ke){for(var $e=Ke?this:this.timeline;$e;)$e._dirty=!0,$e=$e.timeline;return this},oe._swapSelfInParams=function(Ke){for(var $e=Ke.length,et=Ke.concat();-1<--$e;)"{self}"===Ke[$e]&&(et[$e]=this);return et},oe._callback=function(Ke){var $e=this.vars,et=$e[Ke],tt=$e[Ke+"Params"],rt=$e[Ke+"Scope"]||$e.callbackScope||this,ot=tt?tt.length:0;0===ot?et.call(rt):1===ot?et.call(rt,tt[0]):2===ot?et.call(rt,tt[0],tt[1]):et.apply(rt,tt)},oe.eventCallback=function(Ke,$e,et,tt){if("on"===(Ke||"").substr(0,2)){var rt=this.vars;if(1===arguments.length)return rt[Ke];null==$e?delete rt[Ke]:(rt[Ke]=$e,rt[Ke+"Params"]=$(et)&&-1!==et.join("").indexOf("{self}")?this._swapSelfInParams(et):et,rt[Ke+"Scope"]=tt),"onUpdate"===Ke&&(this._onUpdate=$e)}return this},oe.delay=function(Ke){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+Ke-this._delay),this._delay=Ke,this):this._delay},oe.duration=function(Ke){return arguments.length?(this._duration=this._totalDuration=Ke,this._uncache(!0),this._timeline.smoothChildTiming&&0<this._time&&this._time<this._duration&&0!==Ke&&this.totalTime(this._totalTime*(Ke/this._duration),!0),this):(this._dirty=!1,this._duration)},oe.totalDuration=function(Ke){return this._dirty=!1,arguments.length?this.duration(Ke):this._totalDuration},oe.time=function(Ke,$e){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(Ke>this._duration?this._duration:Ke,$e)):this._time},oe.totalTime=function(Ke,$e,et){if(ne||ie.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(0>Ke&&!et&&(Ke+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var tt=this._totalDuration,rt=this._timeline;if(Ke>tt&&!et&&(Ke=tt),this._startTime=(this._paused?this._pauseTime:rt._time)-(this._reversed?tt-Ke:Ke)/this._timeScale,rt._dirty||this._uncache(!1),rt._timeline)for(;rt._timeline;)rt._timeline._time!==(rt._startTime+rt._totalTime)/rt._timeScale&&rt.totalTime(rt._totalTime,!0),rt=rt._timeline}this._gc&&this._enabled(!0,!1),(this._totalTime!==Ke||0===this._duration)&&(Pe.length&&qe(),this.render(Ke,$e,!1),Pe.length&&qe())}return this},oe.progress=oe.totalProgress=function(Ke,$e){var et=this.duration();return arguments.length?this.totalTime(et*Ke,$e):et?this._time/et:this.ratio},oe.startTime=function(Ke){return arguments.length?(Ke!==this._startTime&&(this._startTime=Ke,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,Ke-this._delay)),this):this._startTime},oe.endTime=function(Ke){return this._startTime+(!1==Ke?this.duration():this.totalDuration())/this._timeScale},oe.timeScale=function(Ke){if(!arguments.length)return this._timeScale;var $e,et;for(Ke=Ke||J,this._timeline&&this._timeline.smoothChildTiming&&($e=this._pauseTime,et=$e||0===$e?$e:this._timeline.totalTime(),this._startTime=et-(et-this._startTime)*this._timeScale/Ke),this._timeScale=Ke,et=this.timeline;et&&et.timeline;)et._dirty=!0,et.totalDuration(),et=et.timeline;return this},oe.reversed=function(Ke){return arguments.length?(Ke!=this._reversed&&(this._reversed=Ke,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},oe.paused=function(Ke){if(!arguments.length)return this._paused;var $e=this._timeline,et,tt;return Ke!=this._paused&&$e&&(!ne&&!Ke&&ie.wake(),et=$e.rawTime(),tt=et-this._pauseTime,!Ke&&$e.smoothChildTiming&&(this._startTime+=tt,this._uncache(!1)),this._pauseTime=Ke?et:null,this._paused=Ke,this._active=this.isActive(),!Ke&&0!==tt&&this._initted&&this.duration()&&(et=$e.smoothChildTiming?this._totalTime:(et-this._startTime)/this._timeScale,this.render(et,et===this._totalTime,!0))),this._gc&&!Ke&&this._enabled(!0,!1),this};var we=ue("core.SimpleTimeline",function(Ke){Se.call(this,0,Ke),this.autoRemoveChildren=this.smoothChildTiming=!0});oe=we.prototype=new Se,oe.constructor=we,oe.kill()._gc=!1,oe._first=oe._last=oe._recent=null,oe._sortChildren=!1,oe.add=oe.insert=function(Ke,$e){var rt,ot;if(Ke._startTime=+($e||0)+Ke._delay,Ke._paused&&this!==Ke._timeline&&(Ke._pauseTime=Ke._startTime+(this.rawTime()-Ke._startTime)/Ke._timeScale),Ke.timeline&&Ke.timeline._remove(Ke,!0),Ke.timeline=Ke._timeline=this,Ke._gc&&Ke._enabled(!0,!0),rt=this._last,this._sortChildren)for(ot=Ke._startTime;rt&&rt._startTime>ot;)rt=rt._prev;return rt?(Ke._next=rt._next,rt._next=Ke):(Ke._next=this._first,this._first=Ke),Ke._next?Ke._next._prev=Ke:this._last=Ke,Ke._prev=rt,this._recent=Ke,this._timeline&&this._uncache(!0),this},oe._remove=function(Ke,$e){return Ke.timeline===this&&(!$e&&Ke._enabled(!1,!0),Ke._prev?Ke._prev._next=Ke._next:this._first===Ke&&(this._first=Ke._next),Ke._next?Ke._next._prev=Ke._prev:this._last===Ke&&(this._last=Ke._prev),Ke._next=Ke._prev=Ke.timeline=null,Ke===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},oe.render=function(Ke,$e,et){var tt=this._first,rt;for(this._totalTime=this._time=this._rawPrevTime=Ke;tt;)rt=tt._next,(tt._active||Ke>=tt._startTime&&!tt._paused&&!tt._gc)&&(tt._reversed?tt.render((tt._dirty?tt.totalDuration():tt._totalDuration)-(Ke-tt._startTime)*tt._timeScale,$e,et):tt.render((Ke-tt._startTime)*tt._timeScale,$e,et)),tt=rt},oe.rawTime=function(){return ne||ie.wake(),this._totalTime};var Me=ue("TweenLite",function(Ke,$e,et){if(Se.call(this,$e,et),this.render=Me.prototype.render,null==Ke)throw"Cannot tween a null target.";this.target=Ke="string"==typeof Ke?Me.selector(Ke)||Ke:Ke;var tt=Ke.jquery||Ke.length&&Ke!==O&&Ke[0]&&(Ke[0]===O||Ke[0].nodeType&&Ke[0].style&&!Ke.nodeType),rt=this.vars.overwrite,ot,it,nt;if(this._overwrite=rt=null==rt?Ge[Me.defaultOverwrite]:"number"==typeof rt?rt>>0:Ge[rt],(tt||Ke instanceof Array||Ke.push&&$(Ke))&&"number"!=typeof Ke[0])for(this._targets=nt=Q(Ke),this._propLookup=[],this._siblings=[],ot=0;ot<nt.length;ot++){if(it=nt[ot],!it){nt.splice(ot--,1);continue}else if("string"==typeof it){it=nt[ot--]=Me.selector(it),"string"==typeof it&&nt.splice(ot+1,1);continue}else if(it.length&&it!==O&&it[0]&&(it[0]===O||it[0].nodeType&&it[0].style&&!it.nodeType)){nt.splice(ot--,1),this._targets=nt=nt.concat(Q(it));continue}this._siblings[ot]=Xe(it,this,!1),1===rt&&1<this._siblings[ot].length&&Ze(it,this,null,1,this._siblings[ot])}else this._propLookup={},this._siblings=Xe(Ke,this,!1),1===rt&&1<this._siblings.length&&Ze(Ke,this,null,1,this._siblings);(this.vars.immediateRender||0===$e&&0===this._delay&&!1!==this.vars.immediateRender)&&(this._time=-J,this.render(_Mathmin(0,-this._delay)))},!0),Re=function(Ke){return Ke&&Ke.length&&Ke!==O&&Ke[0]&&(Ke[0]===O||Ke[0].nodeType&&Ke[0].style&&!Ke.nodeType)},Ce=function(Ke,$e){var et={},tt;for(tt in Ke)Ve[tt]||tt in $e&&"transform"!==tt&&"x"!==tt&&"y"!==tt&&"width"!==tt&&"height"!==tt&&"className"!==tt&&"border"!==tt||Ue[tt]&&(!Ue[tt]||!Ue[tt]._autoCSS)||(et[tt]=Ke[tt],delete Ke[tt]);Ke.css=et};oe=Me.prototype=new Se,oe.constructor=Me,oe.kill()._gc=!1,oe.ratio=0,oe._firstPT=oe._targets=oe._overwrittenProps=oe._startAt=null,oe._notifyPluginsOfEnabled=oe._lazy=!1,Me.version="1.20.4",Me.defaultEase=oe._ease=new fe(null,null,1,1),Me.defaultOverwrite="auto",Me.ticker=ie,Me.autoSleep=120,Me.lagSmoothing=function(Ke,$e){ie.lagSmoothing(Ke,$e)},Me.selector=O.$||O.jQuery||function(Ke){var $e=O.$||O.jQuery;return $e?(Me.selector=$e,$e(Ke)):"undefined"==typeof W?Ke:W.querySelectorAll?W.querySelectorAll(Ke):W.getElementById("#"===Ke.charAt(0)?Ke.substr(1):Ke)};var Pe=[],Le={},Ie=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/ig,Be=/[\+-]=-?[\.\d]/,Ne=function(Ke){for(var $e=this._firstPT,et=1e-6,tt;$e;)tt=$e.blob?1===Ke&&null!=this.end?this.end:Ke?this.join(""):this.start:$e.c*Ke+$e.s,$e.m?tt=$e.m(tt,this._target||$e.t):tt<et&&tt>-et&&!$e.blob&&(tt=0),$e.f?$e.fp?$e.t[$e.p]($e.fp,tt):$e.t[$e.p](tt):$e.t[$e.p]=tt,$e=$e._next},ze=function(Ke,$e,et,tt){var rt=[],ot=0,it="",nt=0,ct,ut,mt,ft,ht,yt,_t;for(rt.start=Ke,rt.end=$e,Ke=rt[0]=Ke+"",$e=rt[1]=$e+"",et&&(et(rt),Ke=rt[0],$e=rt[1]),rt.length=0,ct=Ke.match(Ie)||[],ut=$e.match(Ie)||[],tt&&(tt._next=null,tt.blob=1,rt._firstPT=rt._applyPT=tt),ht=ut.length,ft=0;ft<ht;ft++)_t=ut[ft],yt=$e.substr(ot,$e.indexOf(_t,ot)-ot),it+=yt||!ft?yt:",",ot+=yt.length,nt?nt=(nt+1)%5:"rgba("===yt.substr(-5)&&(nt=1),_t===ct[ft]||ct.length<=ft?it+=_t:(it&&(rt.push(it),it=""),mt=parseFloat(ct[ft]),rt.push(mt),rt._firstPT={_next:rt._firstPT,t:rt,p:rt.length-1,s:mt,c:("="===_t.charAt(1)?parseInt(_t.charAt(0)+"1",10)*parseFloat(_t.substr(2)):parseFloat(_t)-mt)||0,f:0,m:nt&&4>nt?_Mathround:0}),ot+=_t.length;return it+=$e.substr(ot),it&&rt.push(it),rt.setRatio=Ne,Be.test($e)&&(rt.end=null),rt},De=function(Ke,$e,et,tt,rt,ot,it,nt,ct){"function"==typeof tt&&(tt=tt(ct||0,Ke));var ut=typeof Ke[$e],mt="function"==ut?$e.indexOf("set")||"function"!=typeof Ke["get"+$e.substr(3)]?$e:"get"+$e.substr(3):"",ft="get"===et?mt?it?Ke[mt](it):Ke[mt]():Ke[$e]:et,ht="string"==typeof tt&&"="===tt.charAt(1),yt={t:Ke,p:$e,s:ft,f:"function"==ut,pg:0,n:rt||$e,m:ot?"function"==typeof ot?ot:_Mathround:0,pr:0,c:ht?parseInt(tt.charAt(0)+"1",10)*parseFloat(tt.substr(2)):parseFloat(tt)-ft||0},_t;if("number"==typeof ft&&("number"==typeof tt||ht)||(it||isNaN(ft)||!ht&&isNaN(tt)||"boolean"==typeof ft||"boolean"==typeof tt?(yt.fp=it,_t=ze(ft,ht?parseFloat(yt.s)+yt.c+(yt.s+"").replace(/[0-9\-\.]/g,""):tt,nt||Me.defaultStringFilter,yt),yt={t:_t,p:"setRatio",s:0,c:1,f:2,pg:0,n:rt||$e,pr:0,m:0}):(yt.s=parseFloat(ft),!ht&&(yt.c=parseFloat(tt)-yt.s||0))),yt.c)return(yt._next=this._firstPT)&&(yt._next._prev=yt),this._firstPT=yt,yt},Fe=Me._internals={isArray:$,isSelector:Re,lazyTweens:Pe,blobDif:ze},Ue=Me._plugins={},Oe=Fe.tweenLookup={},ke=0,Ve=Fe.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1,stringFilter:1,id:1,yoyoEase:1},Ge={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,true:1,false:0},He=Se._rootFramesTimeline=new we,We=Se._rootTimeline=new we,je=30,qe=Fe.lazyRender=function(){var Ke=Pe.length,$e;for(Le={};-1<--Ke;)$e=Pe[Ke],$e&&!1!==$e._lazy&&($e.render($e._lazy[0],$e._lazy[1],!0),$e._lazy=!1);Pe.length=0};We._startTime=ie.time,He._startTime=ie.frame,We._active=He._active=!0,setTimeout(qe,1),Se._updateRoot=Me.render=function(){var Ke,$e,et;if(Pe.length&&qe(),We.render((ie.time-We._startTime)*We._timeScale,!1,!1),He.render((ie.frame-He._startTime)*He._timeScale,!1,!1),Pe.length&&qe(),ie.frame>=je){for(et in je=ie.frame+(parseInt(Me.autoSleep,10)||120),Oe){for($e=Oe[et].tweens,Ke=$e.length;-1<--Ke;)$e[Ke]._gc&&$e.splice(Ke,1);0===$e.length&&delete Oe[et]}if(et=We._first,(!et||et._paused)&&Me.autoSleep&&!He._first&&1===ie._listeners.tick.length){for(;et&&et._paused;)et=et._next;et||ie.sleep()}}},ie.addEventListener("tick",Se._updateRoot);var Xe=function(Ke,$e,et){var tt=Ke._gsTweenID,rt,ot;if(Oe[tt||(Ke._gsTweenID=tt="t"+ke++)]||(Oe[tt]={target:Ke,tweens:[]}),$e&&(rt=Oe[tt].tweens,rt[ot=rt.length]=$e,et))for(;-1<--ot;)rt[ot]===$e&&rt.splice(ot,1);return Oe[tt].tweens},Ye=function(Ke,$e,et,tt){var rt=Ke.vars.onOverwrite,ot,it;return rt&&(ot=rt(Ke,$e,et,tt)),rt=Me.onOverwrite,rt&&(it=rt(Ke,$e,et,tt)),!1!==ot&&!1!==it},Ze=function(Ke,$e,et,tt,rt){var ot,it,nt,ct;if(1===tt||4<=tt){for(ct=rt.length,ot=0;ot<ct;ot++)if((nt=rt[ot])!==$e)!nt._gc&&nt._kill(null,Ke,$e)&&(it=!0);else if(5===tt)break;return it}var ut=$e._startTime+J,mt=[],ft=0,ht=0===$e._duration,yt;for(ot=rt.length;-1<--ot;)if((nt=rt[ot])===$e||nt._gc||nt._paused);else nt._timeline===$e._timeline?nt._startTime<=ut&&nt._startTime+nt.totalDuration()/nt._timeScale>ut&&((ht||!nt._initted)&&2e-10>=ut-nt._startTime||(mt[ft++]=nt)):(yt=yt||Je($e,0,ht),0===Je(nt,yt,ht)&&(mt[ft++]=nt));for(ot=ft;-1<--ot;)if(nt=mt[ot],2===tt&&nt._kill(et,Ke,$e)&&(it=!0),2!==tt||!nt._firstPT&&nt._initted){if(2!==tt&&!Ye(nt,$e))continue;nt._enabled(!1,!1)&&(it=!0)}return it},Je=function(Ke,$e,et){for(var tt=Ke._timeline,rt=tt._timeScale,ot=Ke._startTime;tt._timeline;){if(ot+=tt._startTime,rt*=tt._timeScale,tt._paused)return-100;tt=tt._timeline}return ot/=rt,ot>$e?ot-$e:et&&ot===$e||!Ke._initted&&ot-$e<2*J?J:(ot+=Ke.totalDuration()/Ke._timeScale/rt)>$e+J?0:ot-$e-J};oe._init=function(){var Ke=this.vars,$e=this._overwrittenProps,et=this._duration,tt=!!Ke.immediateRender,rt=Ke.ease,ot,it,nt,ct,ut,mt;if(Ke.startAt){for(ct in this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill()),ut={},Ke.startAt)ut[ct]=Ke.startAt[ct];if(ut.data="isStart",ut.overwrite=!1,ut.immediateRender=!0,ut.lazy=tt&&!1!==Ke.lazy,ut.startAt=ut.delay=null,ut.onUpdate=Ke.onUpdate,ut.onUpdateParams=Ke.onUpdateParams,ut.onUpdateScope=Ke.onUpdateScope||Ke.callbackScope||this,this._startAt=Me.to(this.target,0,ut),tt)if(0<this._time)this._startAt=null;else if(0!==et)return}else if(Ke.runBackwards&&0!==et)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{for(ct in 0!==this._time&&(tt=!1),nt={},Ke)Ve[ct]&&"autoCSS"!==ct||(nt[ct]=Ke[ct]);if(nt.overwrite=0,nt.data="isFromStart",nt.lazy=tt&&!1!==Ke.lazy,nt.immediateRender=tt,this._startAt=Me.to(this.target,0,nt),!tt)this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null);else if(0===this._time)return}if(this._ease=rt=rt?rt instanceof fe?rt:"function"==typeof rt?new fe(rt,Ke.easeParams):he[rt]||Me.defaultEase:Me.defaultEase,Ke.easeParams instanceof Array&&rt.config&&(this._ease=rt.config.apply(rt,Ke.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(mt=this._targets.length,ot=0;ot<mt;ot++)this._initProps(this._targets[ot],this._propLookup[ot]={},this._siblings[ot],$e?$e[ot]:null,ot)&&(it=!0);else it=this._initProps(this.target,this._propLookup,this._siblings,$e,0);if(it&&Me._onPluginEvent("_onInitAllProps",this),$e&&!this._firstPT&&"function"!=typeof this.target&&this._enabled(!1,!1),Ke.runBackwards)for(nt=this._firstPT;nt;)nt.s+=nt.c,nt.c=-nt.c,nt=nt._next;this._onUpdate=Ke.onUpdate,this._initted=!0},oe._initProps=function(Ke,$e,et,tt,rt){var ot,it,nt,ct,ut,mt;if(null==Ke)return!1;for(ot in Le[Ke._gsTweenID]&&qe(),!this.vars.css&&Ke.style&&Ke!==O&&Ke.nodeType&&Ue.css&&!1!==this.vars.autoCSS&&Ce(this.vars,Ke),this.vars)if(mt=this.vars[ot],Ve[ot])mt&&(mt instanceof Array||mt.push&&$(mt))&&-1!==mt.join("").indexOf("{self}")&&(this.vars[ot]=mt=this._swapSelfInParams(mt,this));else if(Ue[ot]&&(ct=new Ue[ot])._onInitTween(Ke,this.vars[ot],this,rt)){for(this._firstPT=ut={_next:this._firstPT,t:ct,p:"setRatio",s:0,c:1,f:1,n:ot,pg:1,pr:ct._priority,m:0},it=ct._overwriteProps.length;-1<--it;)$e[ct._overwriteProps[it]]=this._firstPT;(ct._priority||ct._onInitAllProps)&&(nt=!0),(ct._onDisable||ct._onEnable)&&(this._notifyPluginsOfEnabled=!0),ut._next&&(ut._next._prev=ut)}else $e[ot]=De.call(this,Ke,ot,"get",mt,ot,0,null,this.vars.stringFilter,rt);return tt&&this._kill(tt,Ke)?this._initProps(Ke,$e,et,tt,rt):1<this._overwrite&&this._firstPT&&1<et.length&&Ze(Ke,this,$e,this._overwrite,et)?(this._kill($e,Ke),this._initProps(Ke,$e,et,tt,rt)):(this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration)&&(Le[Ke._gsTweenID]=!0),nt)},oe.render=function(Ke,$e,et){var tt=this._time,rt=this._duration,ot=this._rawPrevTime,it,nt,ct,ut;if(Ke>=rt-1e-7&&0<=Ke)this._totalTime=this._time=rt,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(it=!0,nt="onComplete",et=et||this._timeline.autoRemoveChildren),0===rt&&(this._initted||!this.vars.lazy||et)&&(this._startTime===this._timeline._duration&&(Ke=0),(0>ot||0>=Ke&&-1e-7<=Ke||ot===J&&"isPause"!==this.data)&&ot!==Ke&&(et=!0,ot>J&&(nt="onReverseComplete")),this._rawPrevTime=ut=!$e||Ke||ot===Ke?Ke:J);else if(1e-7>Ke)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==tt||0===rt&&0<ot)&&(nt="onReverseComplete",it=this._reversed),0>Ke&&(this._active=!1,0===rt&&(this._initted||!this.vars.lazy||et)&&(0<=ot&&(ot!==J||"isPause"!==this.data)&&(et=!0),this._rawPrevTime=ut=!$e||Ke||ot===Ke?Ke:J)),(!this._initted||this._startAt&&this._startAt.progress())&&(et=!0);else if(this._totalTime=this._time=Ke,this._easeType){var mt=Ke/rt,ft=this._easeType,ht=this._easePower;(1===ft||3===ft&&0.5<=mt)&&(mt=1-mt),3===ft&&(mt*=2),1===ht?mt*=mt:2===ht?mt*=mt*mt:3===ht?mt*=mt*mt*mt:4===ht&&(mt*=mt*mt*mt*mt),this.ratio=1===ft?1-mt:2===ft?mt:0.5>Ke/rt?mt/2:1-mt/2}else this.ratio=this._ease.getRatio(Ke/rt);if(this._time!==tt||et){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!et&&this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=tt,this._rawPrevTime=ot,Pe.push(this),void(this._lazy=[Ke,$e]);this._time&&!it?this.ratio=this._ease.getRatio(this._time/rt):it&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(!1!==this._lazy&&(this._lazy=!1),this._active||this._paused||this._time===tt||!(0<=Ke)||(this._active=!0),0===tt&&(this._startAt&&(0<=Ke?this._startAt.render(Ke,!0,et):!nt&&(nt="_dummyGS")),this.vars.onStart&&(0!==this._time||0===rt)&&!$e&&this._callback("onStart")),ct=this._firstPT;ct;)ct.f?ct.t[ct.p](ct.c*this.ratio+ct.s):ct.t[ct.p]=ct.c*this.ratio+ct.s,ct=ct._next;this._onUpdate&&(0>Ke&&this._startAt&&-1e-4!==Ke&&this._startAt.render(Ke,!0,et),!$e&&(this._time!==tt||it||et)&&this._callback("onUpdate")),nt&&(!this._gc||et)&&(0>Ke&&this._startAt&&!this._onUpdate&&-1e-4!==Ke&&this._startAt.render(Ke,!0,et),it&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!$e&&this.vars[nt]&&this._callback(nt),0===rt&&this._rawPrevTime===J&&ut!==J&&(this._rawPrevTime=0))}},oe._kill=function(Ke,$e,et){if("all"===Ke&&(Ke=null),null==Ke&&(null==$e||$e===this.target))return this._lazy=!1,this._enabled(!1,!1);$e="string"==typeof $e?Me.selector($e)||$e:$e||this._targets||this.target;var tt=et&&this._time&&et._startTime===this._startTime&&this._timeline===et._timeline,rt,ot,it,nt,ct,ut,mt,ft,ht;if(($($e)||Re($e))&&"number"!=typeof $e[0])for(rt=$e.length;-1<--rt;)this._kill(Ke,$e[rt],et)&&(ut=!0);else{if(this._targets){for(rt=this._targets.length;-1<--rt;)if($e===this._targets[rt]){ct=this._propLookup[rt]||{},this._overwrittenProps=this._overwrittenProps||[],ot=this._overwrittenProps[rt]=Ke?this._overwrittenProps[rt]||{}:"all";break}}else{if($e!==this.target)return!1;ct=this._propLookup,ot=this._overwrittenProps=Ke?this._overwrittenProps||{}:"all"}if(ct){if(mt=Ke||ct,ft=Ke!==ot&&"all"!==ot&&Ke!==ct&&("object"!=typeof Ke||!Ke._tempKill),et&&(Me.onOverwrite||this.vars.onOverwrite)){for(it in mt)ct[it]&&(ht||(ht=[]),ht.push(it));if((ht||!Ke)&&!Ye(this,et,$e,ht))return!1}for(it in mt)(nt=ct[it])&&(tt&&(nt.f?nt.t[nt.p](nt.s):nt.t[nt.p]=nt.s,ut=!0),nt.pg&&nt.t._kill(mt)&&(ut=!0),(!nt.pg||0===nt.t._overwriteProps.length)&&(nt._prev?nt._prev._next=nt._next:nt===this._firstPT&&(this._firstPT=nt._next),nt._next&&(nt._next._prev=nt._prev),nt._next=nt._prev=null),delete ct[it]),ft&&(ot[it]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return ut},oe.invalidate=function(){return this._notifyPluginsOfEnabled&&Me._onPluginEvent("_onDisable",this),this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],Se.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-J,this.render(_Mathmin(0,-this._delay))),this},oe._enabled=function(Ke,$e){if(ne||ie.wake(),Ke&&this._gc){var et=this._targets,tt;if(et)for(tt=et.length;-1<--tt;)this._siblings[tt]=Xe(et[tt],this,!0);else this._siblings=Xe(this.target,this,!0)}return Se.prototype._enabled.call(this,Ke,$e),this._notifyPluginsOfEnabled&&this._firstPT&&Me._onPluginEvent(Ke?"_onEnable":"_onDisable",this)},Me.to=function(Ke,$e,et){return new Me(Ke,$e,et)},Me.from=function(Ke,$e,et){return et.runBackwards=!0,et.immediateRender=!1!=et.immediateRender,new Me(Ke,$e,et)},Me.fromTo=function(Ke,$e,et,tt){return tt.startAt=et,tt.immediateRender=!1!=tt.immediateRender&&!1!=et.immediateRender,new Me(Ke,$e,tt)},Me.delayedCall=function(Ke,$e,et,tt,rt){return new Me($e,0,{delay:Ke,onComplete:$e,onCompleteParams:et,callbackScope:tt,onReverseComplete:$e,onReverseCompleteParams:et,immediateRender:!1,lazy:!1,useFrames:rt,overwrite:0})},Me.set=function(Ke,$e){return new Me(Ke,0,$e)},Me.getTweensOf=function(Ke,$e){if(null==Ke)return[];Ke="string"==typeof Ke?Me.selector(Ke)||Ke:Ke;var et,tt,rt,ot;if(($(Ke)||Re(Ke))&&"number"!=typeof Ke[0]){for(et=Ke.length,tt=[];-1<--et;)tt=tt.concat(Me.getTweensOf(Ke[et],$e));for(et=tt.length;-1<--et;)for(ot=tt[et],rt=et;-1<--rt;)ot===tt[rt]&&tt.splice(et,1)}else if(Ke._gsTweenID)for(tt=Xe(Ke).concat(),et=tt.length;-1<--et;)(tt[et]._gc||$e&&!tt[et].isActive())&&tt.splice(et,1);return tt||[]},Me.killTweensOf=Me.killDelayedCallsTo=function(Ke,$e,et){"object"==typeof $e&&(et=$e,$e=!1);for(var tt=Me.getTweensOf(Ke,$e),rt=tt.length;-1<--rt;)tt[rt]._kill(et,Ke)};var Qe=ue("plugins.TweenPlugin",function(Ke,$e){this._overwriteProps=(Ke||"").split(","),this._propName=this._overwriteProps[0],this._priority=$e||0,this._super=Qe.prototype},!0);if(oe=Qe.prototype,Qe.version="1.19.0",Qe.API=2,oe._firstPT=null,oe._addTween=De,oe.setRatio=Ne,oe._kill=function(Ke){var $e=this._overwriteProps,et=this._firstPT,tt;if(null!=Ke[this._propName])this._overwriteProps=[];else for(tt=$e.length;-1<--tt;)null!=Ke[$e[tt]]&&$e.splice(tt,1);for(;et;)null!=Ke[et.n]&&(et._next&&(et._next._prev=et._prev),et._prev?(et._prev._next=et._next,et._prev=null):this._firstPT===et&&(this._firstPT=et._next)),et=et._next;return!1},oe._mod=oe._roundProps=function(Ke){for(var $e=this._firstPT,et;$e;)et=Ke[this._propName]||null!=$e.n&&Ke[$e.n.split(this._propName+"_").join("")],et&&"function"==typeof et&&(2===$e.f?$e.t._applyPT.m=et:$e.m=et),$e=$e._next},Me._onPluginEvent=function(Ke,$e){var et=$e._firstPT,tt,rt,ot,it,nt;if("_onInitAllProps"===Ke){for(;et;){for(nt=et._next,rt=ot;rt&&rt.pr>et.pr;)rt=rt._next;(et._prev=rt?rt._prev:it)?et._prev._next=et:ot=et,(et._next=rt)?rt._prev=et:it=et,et=nt}et=$e._firstPT=ot}for(;et;)et.pg&&"function"==typeof et.t[Ke]&&et.t[Ke]()&&(tt=!0),et=et._next;return tt},Qe.activate=function(Ke){for(var $e=Ke.length;-1<--$e;)Ke[$e].API===Qe.API&&(Ue[new Ke[$e]()._propName]=Ke[$e]);return!0},pe.plugin=function(Ke){if(!Ke||!Ke.propName||!Ke.init||!Ke.API)throw"illegal plugin definition.";var $e=Ke.propName,et=Ke.priority||0,tt=Ke.overwriteProps,rt={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_mod",mod:"_mod",initAll:"_onInitAllProps"},ot=ue("plugins."+$e.charAt(0).toUpperCase()+$e.substr(1)+"Plugin",function(){Qe.call(this,$e,et),this._overwriteProps=tt||[]},!0===Ke.global),it=ot.prototype=new Qe($e),nt;for(nt in it.constructor=ot,ot.API=Ke.API,rt)"function"==typeof Ke[nt]&&(it[rt[nt]]=Ke[nt]);return ot.version=Ke.version,Qe.activate([ot]),ot},ee=O._gsQueue,ee){for(re=0;re<ee.length;re++)ee[re]();for(oe in se)se[oe].func||O.console.log("GSAP encountered missing dependency: "+oe)}ne=!1}}("undefined"!=typeof E&&E.exports&&"undefined"!=typeof L?L:this||window,"TweenMax")}).call(S,A(5))},function(E,S,A){(function(L,D){var F;/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright JS Foundation and other contributors <https://js.foundation/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){function U(zo,Do,Fo){switch(Fo.length){case 0:return zo.call(Do);case 1:return zo.call(Do,Fo[0]);case 2:return zo.call(Do,Fo[0],Fo[1]);case 3:return zo.call(Do,Fo[0],Fo[1],Fo[2]);}return zo.apply(Do,Fo)}function O(zo,Do,Fo,Uo){for(var Oo=-1,ko=null==zo?0:zo.length,Vo;++Oo<ko;)Vo=zo[Oo],Do(Uo,Vo,Fo(Vo),zo);return Uo}function G(zo,Do){for(var Fo=-1,Uo=null==zo?0:zo.length;++Fo<Uo&&!(!1===Do(zo[Fo],Fo,zo)););return zo}function H(zo,Do){for(var Fo=null==zo?0:zo.length;Fo--&&!(!1===Do(zo[Fo],Fo,zo)););return zo}function W(zo,Do){for(var Fo=-1,Uo=null==zo?0:zo.length;++Fo<Uo;)if(!Do(zo[Fo],Fo,zo))return!1;return!0}function X(zo,Do){for(var Fo=-1,Uo=null==zo?0:zo.length,Oo=0,ko=[],Vo;++Fo<Uo;)Vo=zo[Fo],Do(Vo,Fo,zo)&&(ko[Oo++]=Vo);return ko}function Y(zo,Do){var Fo=null==zo?0:zo.length;return!!Fo&&-1<se(zo,Do,0)}function Z(zo,Do,Fo){for(var Uo=-1,Oo=null==zo?0:zo.length;++Uo<Oo;)if(Fo(Do,zo[Uo]))return!0;return!1}function J(zo,Do){for(var Fo=-1,Uo=null==zo?0:zo.length,Oo=Array(Uo);++Fo<Uo;)Oo[Fo]=Do(zo[Fo],Fo,zo);return Oo}function Q(zo,Do){for(var Fo=-1,Uo=Do.length,Oo=zo.length;++Fo<Uo;)zo[Oo+Fo]=Do[Fo];return zo}function K(zo,Do,Fo,Uo){var Oo=-1,ko=null==zo?0:zo.length;for(Uo&&ko&&(Fo=zo[++Oo]);++Oo<ko;)Fo=Do(Fo,zo[Oo],Oo,zo);return Fo}function $(zo,Do,Fo,Uo){var Oo=null==zo?0:zo.length;for(Uo&&Oo&&(Fo=zo[--Oo]);Oo--;)Fo=Do(Fo,zo[Oo],Oo,zo);return Fo}function ee(zo,Do){for(var Fo=-1,Uo=null==zo?0:zo.length;++Fo<Uo;)if(Do(zo[Fo],Fo,zo))return!0;return!1}function re(zo){return zo.split("")}function oe(zo){return zo.match(Hr)||[]}function ie(zo,Do,Fo){var Uo;return Fo(zo,function(Oo,ko,Vo){if(Do(Oo,ko,Vo))return Uo=ko,!1}),Uo}function ne(zo,Do,Fo,Uo){for(var Oo=zo.length,ko=Fo+(Uo?1:-1);Uo?ko--:++ko<Oo;)if(Do(zo[ko],ko,zo))return ko;return-1}function se(zo,Do,Fo){return Do===Do?Oe(zo,Do,Fo):ne(zo,pe,Fo)}function le(zo,Do,Fo,Uo){for(var Oo=Fo-1,ko=zo.length;++Oo<ko;)if(Uo(zo[Oo],Do))return Oo;return-1}function pe(zo){return zo!==zo}function ue(zo,Do){var Fo=null==zo?0:zo.length;return Fo?_e(zo,Do)/Fo:It}function ge(zo){return function(Do){return null==Do?qe:Do[zo]}}function fe(zo){return function(Do){return null==zo?qe:zo[Do]}}function he(zo,Do,Fo,Uo,Oo){return Oo(zo,function(ko,Vo,Go){Fo=Uo?(Uo=!1,ko):Do(Fo,ko,Vo,Go)}),Fo}function ye(zo,Do){var Fo=zo.length;for(zo.sort(Do);Fo--;)zo[Fo]=zo[Fo].value;return zo}function _e(zo,Do){for(var Uo=-1,Oo=zo.length,Fo,ko;++Uo<Oo;)ko=Do(zo[Uo]),ko!==qe&&(Fo=Fo==qe?ko:Fo+ko);return Fo}function xe(zo,Do){for(var Fo=-1,Uo=Array(zo);++Fo<zo;)Uo[Fo]=Do(Fo);return Uo}function ve(zo,Do){return J(Do,function(Fo){return[Fo,zo[Fo]]})}function Te(zo){return function(Do){return zo(Do)}}function Ee(zo,Do){return J(Do,function(Fo){return zo[Fo]})}function Se(zo,Do){return zo.has(Do)}function Ae(zo,Do){for(var Fo=-1,Uo=zo.length;++Fo<Uo&&-1<se(Do,zo[Fo],0););return Fo}function we(zo,Do){for(var Fo=zo.length;Fo--&&-1<se(Do,zo[Fo],0););return Fo}function Me(zo,Do){for(var Fo=zo.length,Uo=0;Fo--;)zo[Fo]===Do&&++Uo;return Uo}function Re(zo){return"\\"+co[zo]}function Ce(zo,Do){return null==zo?qe:zo[Do]}function Pe(zo){return eo.test(zo)}function Le(zo){return ro.test(zo)}function Ie(zo){for(var Fo=[],Do;!(Do=zo.next()).done;)Fo.push(Do.value);return Fo}function Be(zo){var Do=-1,Fo=Array(zo.size);return zo.forEach(function(Uo,Oo){Fo[++Do]=[Oo,Uo]}),Fo}function Ne(zo,Do){return function(Fo){return zo(Do(Fo))}}function ze(zo,Do){for(var Fo=-1,Uo=zo.length,Oo=0,ko=[],Vo;++Fo<Uo;)Vo=zo[Fo],(Vo===Do||Vo===$e)&&(zo[Fo]=$e,ko[Oo++]=Fo);return ko}function De(zo,Do){return"__proto__"==Do?qe:zo[Do]}function Fe(zo){var Do=-1,Fo=Array(zo.size);return zo.forEach(function(Uo){Fo[++Do]=Uo}),Fo}function Ue(zo){var Do=-1,Fo=Array(zo.size);return zo.forEach(function(Uo){Fo[++Do]=[Uo,Uo]}),Fo}function Oe(zo,Do,Fo){for(var Uo=Fo-1,Oo=zo.length;++Uo<Oo;)if(zo[Uo]===Do)return Uo;return-1}function ke(zo,Do,Fo){for(var Uo=Fo+1;Uo--;)if(zo[Uo]===Do)return Uo;return Uo}function Ve(zo){return Pe(zo)?He(zo):Co(zo)}function Ge(zo){return Pe(zo)?We(zo):re(zo)}function He(zo){for(var Do=Ka.lastIndex=0;Ka.test(zo);)++Do;return Do}function We(zo){return zo.match(Ka)||[]}function je(zo){return zo.match($a)||[]}var qe,Ye=200,Je="Expected a function",Qe="__lodash_hash_undefined__",$e="__lodash_placeholder__",et=1,tt=2,rt=4,ot=1,it=2,nt=1,ct=2,ut=4,mt=8,ft=16,ht=32,yt=64,_t=128,xt=256,vt=512,At=1,Ct=1/0,Pt=9007199254740991,It=0/0,Bt=4294967295,Dt=[["ary",_t],["bind",nt],["bindKey",ct],["curry",mt],["curryRight",ft],["flip",vt],["partial",ht],["partialRight",yt],["rearg",xt]],Ft="[object Arguments]",Ut="[object Array]",kt="[object Boolean]",Vt="[object Date]",Ht="[object Error]",Wt="[object Function]",jt="[object GeneratorFunction]",qt="[object Map]",Xt="[object Number]",Zt="[object Object]",Jt="[object Promise]",Kt="[object RegExp]",$t="[object Set]",er="[object String]",rr="[object Symbol]",ir="[object WeakMap]",lr="[object ArrayBuffer]",cr="[object DataView]",ur="[object Float32Array]",mr="[object Float64Array]",gr="[object Int8Array]",fr="[object Int16Array]",hr="[object Int32Array]",yr="[object Uint8Array]",_r="[object Uint8ClampedArray]",xr="[object Uint16Array]",br="[object Uint32Array]",Tr=/\b__p \+= '';/g,Er=/\b(__p \+=) '' \+/g,Sr=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ar=/&(?:amp|lt|gt|quot|#39);/g,wr=/[&<>"']/g,Mr=RegExp(Ar.source),Rr=RegExp(wr.source),Cr=/<%-([\s\S]+?)%>/g,Pr=/<%([\s\S]+?)%>/g,Lr=/<%=([\s\S]+?)%>/g,Ir=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Br=/^\w*$/,Nr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,zr=/[\\^$.*+?()[\]{}|]/g,Dr=RegExp(zr.source),Fr=/^\s+|\s+$/g,Ur=/^\s+/,Or=/\s+$/,kr=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Vr=/\{\n\/\* \[wrapped with (.+)\] \*/,Gr=/,? & /,Hr=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Wr=/\\(\\)?/g,jr=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,qr=/\w*$/,Xr=/^[-+]0x[0-9a-f]+$/i,Yr=/^0b[01]+$/i,Zr=/^\[object .+?Constructor\]$/,Jr=/^0o[0-7]+$/i,Qr=/^(?:0|[1-9]\d*)$/,Kr=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,$r=/($^)/,ra=/['\n\r\u2028\u2029\\]/g,aa="\\ud800-\\udfff",pa="\\u2700-\\u27bf",ua="a-z\\xdf-\\xf6\\xf8-\\xff",ya="A-Z\\xc0-\\xd6\\xd8-\\xde",xa="\\xac\\xb1\\xd7\\xf7"+"\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf"+"\\u2000-\\u206f"+" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ta="['\u2019]",Sa="["+xa+"]",Aa="["+("\\u0300-\\u036f"+"\\ufe20-\\ufe2f"+"\\u20d0-\\u20ff")+"]",wa="\\d+",Ra="["+ua+"]",Ca="[^"+aa+xa+wa+pa+ua+ya+"]",Pa="\\ud83c[\\udffb-\\udfff]",Ia="[^"+aa+"]",Ba="(?:\\ud83c[\\udde6-\\uddff]){2}",Na="[\\ud800-\\udbff][\\udc00-\\udfff]",za="["+ya+"]",Fa="(?:"+Ra+"|"+Ca+")",Oa="(?:"+Ta+"(?:d|ll|m|re|s|t|ve))?",ka="(?:"+Ta+"(?:D|LL|M|RE|S|T|VE))?",Va="(?:"+Aa+"|"+Pa+")"+"?",Ga="["+"\\ufe0e\\ufe0f"+"]?",Ha="(?:"+"\\u200d"+"(?:"+[Ia,Ba,Na].join("|")+")"+Ga+Va+")*",Xa=Ga+Va+Ha,Ya="(?:"+["["+pa+"]",Ba,Na].join("|")+")"+Xa,Za="(?:"+[Ia+Aa+"?",Aa,Ba,Na,"["+aa+"]"].join("|")+")",Ja=/[']/g,Qa=/[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]/g,Ka=RegExp(Pa+"(?="+Pa+")|"+Za+Xa,"g"),$a=RegExp([za+"?"+Ra+"+"+Oa+"(?="+[Sa,za,"$"].join("|")+")","(?:"+za+"|"+Ca+")"+"+"+ka+"(?="+[Sa,za+Fa,"$"].join("|")+")",za+"?"+Fa+"+"+Oa,za+"+"+ka,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",wa,Ya].join("|"),"g"),eo=/[\u200d\ud800-\udfff\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff\ufe0e\ufe0f]/,ro=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ao=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],oo=-1,io={};io[ur]=io[mr]=io[gr]=io[fr]=io[hr]=io[yr]=io[_r]=io[xr]=io[br]=!0,io[Ft]=io[Ut]=io[lr]=io[kt]=io[cr]=io[Vt]=io[Ht]=io[Wt]=io[qt]=io[Xt]=io[Zt]=io[Kt]=io[$t]=io[er]=io[ir]=!1;var no={};no[Ft]=no[Ut]=no[lr]=no[cr]=no[kt]=no[Vt]=no[ur]=no[mr]=no[gr]=no[fr]=no[hr]=no[qt]=no[Xt]=no[Zt]=no[Kt]=no[$t]=no[er]=no[rr]=no[yr]=no[_r]=no[xr]=no[br]=!0,no[Ht]=no[Wt]=no[ir]=!1;var co={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},uo=parseFloat,mo=parseInt,go="object"==typeof L&&L&&L.Object===Object&&L,fo="object"==typeof self&&self&&self.Object===Object&&self,yo=go||fo||Function("return this")(),_o="object"==typeof S&&S&&!S.nodeType&&S,xo=_o&&"object"==typeof D&&D&&!D.nodeType&&D,vo=xo&&xo.exports===_o,bo=vo&&go.process,To=function(){try{return bo&&bo.binding&&bo.binding("util")}catch(zo){}}(),Eo=To&&To.isArrayBuffer,So=To&&To.isDate,Ao=To&&To.isMap,wo=To&&To.isRegExp,Mo=To&&To.isSet,Ro=To&&To.isTypedArray,Co=ge("length"),Po=fe({:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"}),Lo=fe({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),Io=fe({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":"\"","&#39;":"'"}),No=function zo(Do){function Fo(Ay){if(Oc(Ay)&&!ch(Ay)&&!(Ay instanceof ko)){if(Ay instanceof Oo)return Ay;if(ig.call(Ay,"__wrapped__"))return vd(Ay)}return new Oo(Ay)}function Uo(){}function Oo(Ay,My){this.__wrapped__=Ay,this.__actions__=[],this.__chain__=!!My,this.__index__=0,this.__values__=qe}function ko(Ay){this.__wrapped__=Ay,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Bt,this.__views__=[]}function Wo(Ay){var My=-1,Ry=null==Ay?0:Ay.length;for(this.clear();++My<Ry;){var Cy=Ay[My];this.set(Cy[0],Cy[1])}}function Jo(Ay){var My=-1,Ry=null==Ay?0:Ay.length;for(this.clear();++My<Ry;){var Cy=Ay[My];this.set(Cy[0],Cy[1])}}function di(Ay){var My=-1,Ry=null==Ay?0:Ay.length;for(this.clear();++My<Ry;){var Cy=Ay[My];this.set(Cy[0],Cy[1])}}function _i(Ay){var My=-1,Ry=null==Ay?0:Ay.length;for(this.__data__=new di;++My<Ry;)this.add(Ay[My])}function Si(Ay){var My=this.__data__=new Jo(Ay);this.size=My.size}function Li(Ay,My){var Ry=ch(Ay),Cy=!Ry&&ph(Ay),Py=!Ry&&!Cy&&mh(Ay),Ly=!Ry&&!Cy&&!Py&&_h(Ay),Iy=Ry||Cy||Py||Ly,By=Iy?xe(Ay.length,Km):[],Ny=By.length;for(var zy in Ay)(My||ig.call(Ay,zy))&&!(Iy&&("length"==zy||Py&&("offset"==zy||"parent"==zy)||Ly&&("buffer"==zy||"byteLength"==zy||"byteOffset"==zy)||Zl(zy,Ny)))&&By.push(zy);return By}function Ii(Ay){var My=Ay.length;return My?Ay[Zn(0,My-1)]:qe}function Bi(Ay,My){return hd(Os(Ay),Wi(My,0,Ay.length))}function Ni(Ay){return hd(Os(Ay))}function Di(Ay,My,Ry){(Ry===qe||Sc(Ay[My],Ry))&&(Ry!==qe||My in Ay)||Gi(Ay,My,Ry)}function Fi(Ay,My,Ry){var Cy=Ay[My];ig.call(Ay,My)&&Sc(Cy,Ry)&&(Ry!==qe||My in Ay)||Gi(Ay,My,Ry)}function Ui(Ay,My){for(var Ry=Ay.length;Ry--;)if(Sc(Ay[Ry][0],My))return Ry;return-1}function Oi(Ay,My,Ry,Cy){return of(Ay,function(Py,Ly,Iy){My(Cy,Py,Ry(Py),Iy)}),Cy}function ki(Ay,My){return Ay&&ks(My,Su(My),Ay)}function Vi(Ay,My){return Ay&&ks(My,Au(My),Ay)}function Gi(Ay,My,Ry){"__proto__"==My&&Eg?Eg(Ay,My,{configurable:!0,enumerable:!0,value:Ry,writable:!0}):Ay[My]=Ry}function Hi(Ay,My){for(var Ry=-1,Cy=My.length,Py=Wm(Cy);++Ry<Cy;)Py[Ry]=null==Ay?qe:bu(Ay,My[Ry]);return Py}function Wi(Ay,My,Ry){return Ay===Ay&&(Ry!==qe&&(Ay=Ay<=Ry?Ay:Ry),My!==qe&&(Ay=Ay>=My?Ay:My)),Ay}function ji(Ay,My,Ry,Cy,Py,Ly){var By=My&et,Ny=My&tt,Iy;if(Ry&&(Iy=Py?Ry(Ay,Cy,Py,Ly):Ry(Ay)),Iy!==qe)return Iy;if(!Uc(Ay))return Ay;var Dy=ch(Ay);if(!Dy){var Fy=vf(Ay),Uy=Fy==Wt||Fy==jt;if(mh(Ay))return Rs(Ay,By);if(Fy!=Zt&&Fy!=Ft&&(!Uy||Py)){if(!no[Fy])return Py?Ay:{};Iy=ql(Ay,Fy,By)}else if(Iy=Ny||Uy?{}:Wl(Ay),!By)return Ny?Gs(Ay,Vi(Iy,Ay)):Vs(Ay,ki(Iy,Ay))}else if(Iy=Hl(Ay),!By)return Os(Ay,Iy);Ly||(Ly=new Si);var Oy=Ly.get(Ay);if(Oy)return Oy;if(Ly.set(Ay,Iy),yh(Ay))return Ay.forEach(function(Gy){Iy.add(ji(Gy,My,Ry,Gy,Ay,Ly))}),Iy;if(fh(Ay))return Ay.forEach(function(Gy,Hy){Iy.set(Hy,ji(Gy,My,Ry,Hy,Ay,Ly))}),Iy;var ky=My&rt?Ny?Ll:Pl:Ny?Au:Su,Vy=Dy?qe:ky(Ay);return G(Vy||Ay,function(Gy,Hy){Vy&&(Hy=Gy,Gy=Ay[Hy]),Fi(Iy,Hy,ji(Gy,My,Ry,Hy,Ay,Ly))}),Iy}function Xi(Ay){var My=Su(Ay);return function(Ry){return Yi(Ry,Ay,My)}}function Yi(Ay,My,Ry){var Cy=Ry.length;if(null==Ay)return!Cy;for(Ay=Jm(Ay);Cy--;){var Py=Ry[Cy],Ly=My[Py],Iy=Ay[Py];if(Iy===qe&&!(Py in Ay)||!Ly(Iy))return!1}return!0}function Zi(Ay,My,Ry){if("function"!=typeof Ay)throw new $m(Je);return Sf(function(){Ay.apply(qe,Ry)},My)}function Ji(Ay,My,Ry,Cy){var Py=-1,Ly=Y,Iy=!0,By=Ay.length,Ny=[],zy=My.length;if(!By)return Ny;Ry&&(My=J(My,Te(Ry))),Cy?(Ly=Z,Iy=!1):My.length>=Ye&&(Ly=Se,Iy=!1,My=new _i(My));outer:for(;++Py<By;){var Dy=Ay[Py],Fy=null==Ry?Dy:Ry(Dy);if(Dy=Cy||0!==Dy?Dy:0,Iy&&Fy===Fy){for(var Uy=zy;Uy--;)if(My[Uy]===Fy)continue outer;Ny.push(Dy)}else Ly(My,Fy,Cy)||Ny.push(Dy)}return Ny}function Qi(Ay,My){var Ry=!0;return of(Ay,function(Cy,Py,Ly){return Ry=!!My(Cy,Py,Ly),Ry}),Ry}function Ki(Ay,My,Ry){for(var Cy=-1,Py=Ay.length;++Cy<Py;){var Ly=Ay[Cy],Iy=My(Ly);if(null!=Iy&&(By===qe?Iy===Iy&&!Jc(Iy):Ry(Iy,By)))var By=Iy,Ny=Ly}return Ny}function $i(Ay,My,Ry,Cy){var Py=Ay.length;for(Ry=ru(Ry),0>Ry&&(Ry=-Ry>Py?0:Py+Ry),Cy=Cy===qe||Cy>Py?Py:ru(Cy),0>Cy&&(Cy+=Py),Cy=Ry>Cy?0:au(Cy);Ry<Cy;)Ay[Ry++]=My;return Ay}function tn(Ay,My){var Ry=[];return of(Ay,function(Cy,Py,Ly){My(Cy,Py,Ly)&&Ry.push(Cy)}),Ry}function rn(Ay,My,Ry,Cy,Py){var Ly=-1,Iy=Ay.length;for(Ry||(Ry=Yl),Py||(Py=[]);++Ly<Iy;){var By=Ay[Ly];0<My&&Ry(By)?1<My?rn(By,My-1,Ry,Cy,Py):Q(Py,By):!Cy&&(Py[Py.length]=By)}return Py}function on(Ay,My){return Ay&&lf(Ay,My,Su)}function nn(Ay,My){return Ay&&pf(Ay,My,Su)}function sn(Ay,My){return X(My,function(Ry){return zc(Ay[Ry])})}function ln(Ay,My){My=ws(My,Ay);for(var Ry=0,Cy=My.length;null!=Ay&&Ry<Cy;)Ay=Ay[yd(My[Ry++])];return Ry&&Ry==Cy?Ay:qe}function dn(Ay,My,Ry){var Cy=My(Ay);return ch(Ay)?Cy:Q(Cy,Ry(Ay))}function pn(Ay){return null==Ay?Ay===qe?"[object Undefined]":"[object Null]":Tg&&Tg in Jm(Ay)?Ul(Ay):pd(Ay)}function cn(Ay,My){return Ay>My}function un(Ay,My){return null!=Ay&&ig.call(Ay,My)}function mn(Ay,My){return null!=Ay&&My in Jm(Ay)}function gn(Ay,My,Ry){return Ay>=zg(My,Ry)&&Ay<Ng(My,Ry)}function yn(Ay,My,Ry){for(var Cy=Ry?Z:Y,Py=Ay[0].length,Ly=Ay.length,Iy=Ly,By=Wm(Ly),Ny=Infinity,zy=[],Dy;Iy--;)Dy=Ay[Iy],Iy&&My&&(Dy=J(Dy,Te(My))),Ny=zg(Dy.length,Ny),By[Iy]=!Ry&&(My||120<=Py&&120<=Dy.length)?new _i(Iy&&Dy):qe;Dy=Ay[0];var Fy=-1,Uy=By[0];outer:for(;++Fy<Py&&zy.length<Ny;){var Oy=Dy[Fy],ky=My?My(Oy):Oy;if(Oy=Ry||0!==Oy?Oy:0,Uy?!Se(Uy,ky):!Cy(zy,ky,Ry)){for(Iy=Ly;--Iy;){var Vy=By[Iy];if(Vy?!Se(Vy,ky):!Cy(Ay[Iy],ky,Ry))continue outer}Uy&&Uy.push(ky),zy.push(Oy)}}return zy}function _n(Ay,My,Ry,Cy){return on(Ay,function(Py,Ly,Iy){My(Cy,Ry(Py),Ly,Iy)}),Cy}function xn(Ay,My,Ry){My=ws(My,Ay),Ay=ud(Ay,My);var Cy=null==Ay?Ay:Ay[yd(kd(My))];return null==Cy?qe:U(Cy,Ay,Ry)}function Tn(Ay){return Oc(Ay)&&pn(Ay)==Ft}function An(Ay,My,Ry,Cy,Py){return Ay===My||(null!=Ay&&null!=My&&(Oc(Ay)||Oc(My))?wn(Ay,My,Ry,Cy,An,Py):Ay!==Ay&&My!==My)}function wn(Ay,My,Ry,Cy,Py,Ly){var Iy=ch(Ay),By=ch(My),Ny=Iy?Ut:vf(Ay),zy=By?Ut:vf(My);Ny=Ny==Ft?Zt:Ny,zy=zy==Ft?Zt:zy;var Dy=Ny==Zt,Fy=zy==Zt,Uy=Ny==zy;if(Uy&&mh(Ay)){if(!mh(My))return!1;Iy=!0,Dy=!1}if(Uy&&!Dy)return Ly||(Ly=new Si),Iy||_h(Ay)?wl(Ay,My,Ry,Cy,Py,Ly):Ml(Ay,My,Ny,Ry,Cy,Py,Ly);if(!(Ry&ot)){var Oy=Dy&&ig.call(Ay,"__wrapped__"),ky=Fy&&ig.call(My,"__wrapped__");if(Oy||ky){var Vy=Oy?Ay.value():Ay,Gy=ky?My.value():My;return Ly||(Ly=new Si),Py(Vy,Gy,Ry,Cy,Ly)}}return!!Uy&&(Ly||(Ly=new Si),Rl(Ay,My,Ry,Cy,Py,Ly))}function Rn(Ay,My,Ry,Cy){var Py=Ry.length,Ly=Py,Iy=!Cy;if(null==Ay)return!Ly;for(Ay=Jm(Ay);Py--;){var By=Ry[Py];if(Iy&&By[2]?By[1]!==Ay[By[0]]:!(By[0]in Ay))return!1}for(;++Py<Ly;){By=Ry[Py];var Ny=By[0],zy=Ay[Ny],Dy=By[1];if(!(Iy&&By[2])){var Fy=new Si;if(Cy)var Uy=Cy(zy,Dy,Ny,Ay,My,Fy);if(Uy===qe?!An(Dy,zy,ot|it,Cy,Fy):!Uy)return!1}else if(zy===qe&&!(Ny in Ay))return!1}return!0}function Cn(Ay){if(!Uc(Ay)||ed(Ay))return!1;var My=zc(Ay)?cg:Zr;return My.test(_d(Ay))}function Bn(Ay){return"function"==typeof Ay?Ay:null==Ay?_m:"object"==typeof Ay?ch(Ay)?On(Ay[0],Ay[1]):Un(Ay):wm(Ay)}function Nn(Ay){if(!td(Ay))return Bg(Ay);var My=[];for(var Ry in Jm(Ay))ig.call(Ay,Ry)&&"constructor"!=Ry&&My.push(Ry);return My}function zn(Ay){if(!Uc(Ay))return dd(Ay);var My=td(Ay),Ry=[];for(var Cy in Ay)("constructor"!=Cy||!My&&ig.call(Ay,Cy))&&Ry.push(Cy);return Ry}function Dn(Ay,My){return Ay<My}function Fn(Ay,My){var Ry=-1,Cy=Ac(Ay)?Wm(Ay.length):[];return of(Ay,function(Py,Ly,Iy){Cy[++Ry]=My(Py,Ly,Iy)}),Cy}function Un(Ay){var My=Dl(Ay);return 1==My.length&&My[0][2]?od(My[0][0],My[0][1]):function(Ry){return Ry===Ay||Rn(Ry,Ay,My)}}function On(Ay,My){return Ql(Ay)&&rd(My)?od(yd(Ay),My):function(Ry){var Cy=bu(Ry,Ay);return Cy===qe&&Cy===My?Eu(Ry,Ay):An(My,Cy,ot|it)}}function kn(Ay,My,Ry,Cy,Py){Ay===My||lf(My,function(Ly,Iy){if(Uc(Ly))Py||(Py=new Si),Vn(Ay,My,Iy,Ry,kn,Cy,Py);else{var By=Cy?Cy(De(Ay,Iy),Ly,Iy+"",Ay,My,Py):qe;By===qe&&(By=Ly),Di(Ay,Iy,By)}},Au)}function Vn(Ay,My,Ry,Cy,Py,Ly,Iy){var By=De(Ay,Ry),Ny=De(My,Ry),zy=Iy.get(Ny);if(zy)return void Di(Ay,Ry,zy);var Dy=Ly?Ly(By,Ny,Ry+"",Ay,My,Iy):qe,Fy=Dy===qe;if(Fy){var Uy=ch(Ny),Oy=!Uy&&mh(Ny),ky=!Uy&&!Oy&&_h(Ny);Dy=Ny,Uy||Oy||ky?ch(By)?Dy=By:Mc(By)?Dy=Os(By):Oy?(Fy=!1,Dy=Rs(Ny,!0)):ky?(Fy=!1,Dy=Ns(Ny,!0)):Dy=[]:Xc(Ny)||ph(Ny)?(Dy=By,ph(By)?Dy=iu(By):(!Uc(By)||Cy&&zc(By))&&(Dy=Wl(Ny))):Fy=!1}Fy&&(Iy.set(Ny,Dy),Py(Dy,Ny,Cy,Ly,Iy),Iy["delete"](Ny)),Di(Ay,Ry,Dy)}function Gn(Ay,My){var Ry=Ay.length;if(Ry)return My+=0>My?Ry:0,Zl(My,Ry)?Ay[My]:qe}function Hn(Ay,My,Ry){var Cy=-1;My=J(My.length?My:[_m],Te(Nl()));var Py=Fn(Ay,function(Ly){var Ny=J(My,function(zy){return zy(Ly)});return{criteria:Ny,index:++Cy,value:Ly}});return ye(Py,function(Ly,Iy){return Ds(Ly,Iy,Ry)})}function Wn(Ay,My){return jn(Ay,My,function(Ry,Cy){return Eu(Ay,Cy)})}function jn(Ay,My,Ry){for(var Cy=-1,Py=My.length,Ly={};++Cy<Py;){var Iy=My[Cy],By=ln(Ay,Iy);Ry(By,Iy)&&as(Ly,ws(Iy,Ay),By)}return Ly}function qn(Ay){return function(My){return ln(My,Ay)}}function Xn(Ay,My,Ry,Cy){var Py=Cy?le:se,Ly=-1,Iy=My.length,By=Ay;for(Ay===My&&(My=Os(My)),Ry&&(By=J(Ay,Te(Ry)));++Ly<Iy;)for(var Ny=0,zy=My[Ly],Dy=Ry?Ry(zy):zy;-1<(Ny=Py(By,Dy,Ny,Cy));)By!==Ay&&xg.call(By,Ny,1),xg.call(Ay,Ny,1);return Ay}function Yn(Ay,My){for(var Ry=Ay?My.length:0,Cy=Ry-1,Py;Ry--;)if(Py=My[Ry],Ry==Cy||Py!==Ly){var Ly=Py;Zl(Py)?xg.call(Ay,Py,1):hs(Ay,Py)}return Ay}function Zn(Ay,My){return Ay+Rg(Ug()*(My-Ay+1))}function Jn(Ay,My,Ry,Cy){for(var Py=-1,Ly=Ng(Mg((My-Ay)/(Ry||1)),0),Iy=Wm(Ly);Ly--;)Iy[Cy?Ly:++Py]=Ay,Ay+=Ry;return Iy}function Qn(Ay,My){var Ry="";if(!Ay||1>My||My>Pt)return Ry;do My%2&&(Ry+=Ay),My=Rg(My/2),My&&(Ay+=Ay);while(My);return Ry}function Kn(Ay,My){return Af(cd(Ay,My,_m),Ay+"")}function $n(Ay){return Ii(Fu(Ay))}function rs(Ay,My){var Ry=Fu(Ay);return hd(Ry,Wi(My,0,Ry.length))}function as(Ay,My,Ry,Cy){if(!Uc(Ay))return Ay;My=ws(My,Ay);for(var Py=-1,Ly=My.length,By=Ay;null!=By&&++Py<Ly;){var Ny=yd(My[Py]),zy=Ry;if(Py!=Ly-1){var Dy=By[Ny];zy=Cy?Cy(Dy,Ny,By):qe,zy===qe&&(zy=Uc(Dy)?Dy:Zl(My[Py+1])?[]:{})}Fi(By,Ny,zy),By=By[Ny]}return Ay}function os(Ay){return hd(Fu(Ay))}function is(Ay,My,Ry){var Cy=-1,Py=Ay.length;0>My&&(My=-My>Py?0:Py+My),Ry=Ry>Py?Py:Ry,0>Ry&&(Ry+=Py),Py=My>Ry?0:Ry-My>>>0,My>>>=0;for(var Ly=Wm(Py);++Cy<Py;)Ly[Cy]=Ay[Cy+My];return Ly}function ss(Ay,My){var Ry;return of(Ay,function(Cy,Py,Ly){return Ry=My(Cy,Py,Ly),!Ry}),!!Ry}function ls(Ay,My,Ry){var Cy=0,Py=null==Ay?Cy:Ay.length;if("number"==typeof My&&My===My&&Py<=Bt>>>1){for(;Cy<Py;){var Ly=Cy+Py>>>1,Iy=Ay[Ly];null!==Iy&&!Jc(Iy)&&(Ry?Iy<=My:Iy<My)?Cy=Ly+1:Py=Ly}return Py}return ds(Ay,My,_m,Ry)}function ds(Ay,My,Ry,Cy){My=Ry(My);for(var Py=0,Ly=null==Ay?0:Ay.length,Iy=My!==My,By=null===My,Ny=Jc(My),zy=My===qe;Py<Ly;){var Dy=Rg((Py+Ly)/2),Fy=Ry(Ay[Dy]),Uy=Fy!==qe,Oy=null===Fy,ky=Fy===Fy,Vy=Jc(Fy);if(Iy)var Gy=Cy||ky;else Gy=zy?ky&&(Cy||Uy):By?ky&&Uy&&(Cy||!Oy):Ny?ky&&Uy&&!Oy&&(Cy||!Vy):Oy||Vy?!1:Cy?Fy<=My:Fy<My;Gy?Py=Dy+1:Ly=Dy}return zg(Ly,Bt-1)}function ps(Ay,My){for(var Ry=-1,Cy=Ay.length,Py=0,Ly=[];++Ry<Cy;){var Iy=Ay[Ry],By=My?My(Iy):Iy;if(!Ry||!Sc(By,Ny)){var Ny=By;Ly[Py++]=0===Iy?0:Iy}}return Ly}function us(Ay){return"number"==typeof Ay?Ay:Jc(Ay)?It:+Ay}function ms(Ay){if("string"==typeof Ay)return Ay;if(ch(Ay))return J(Ay,ms)+"";if(Jc(Ay))return tf?tf.call(Ay):"";var My=Ay+"";return"0"==My&&1/Ay==-Ct?"-0":My}function fs(Ay,My,Ry){var Cy=-1,Py=Y,Ly=Ay.length,Iy=!0,By=[],Ny=By;if(Ry)Iy=!1,Py=Z;else if(Ly>=Ye){var zy=My?null:hf(Ay);if(zy)return Fe(zy);Iy=!1,Py=Se,Ny=new _i}else Ny=My?[]:By;outer:for(;++Cy<Ly;){var Dy=Ay[Cy],Fy=My?My(Dy):Dy;if(Dy=Ry||0!==Dy?Dy:0,Iy&&Fy===Fy){for(var Uy=Ny.length;Uy--;)if(Ny[Uy]===Fy)continue outer;My&&Ny.push(Fy),By.push(Dy)}else Py(Ny,Fy,Ry)||(Ny!==By&&Ny.push(Fy),By.push(Dy))}return By}function hs(Ay,My){return My=ws(My,Ay),Ay=ud(Ay,My),null==Ay||delete Ay[yd(kd(My))]}function ys(Ay,My,Ry,Cy){return as(Ay,My,Ry(ln(Ay,My)),Cy)}function _s(Ay,My,Ry,Cy){for(var Py=Ay.length,Ly=Cy?Py:-1;(Cy?Ly--:++Ly<Py)&&My(Ay[Ly],Ly,Ay););return Ry?is(Ay,Cy?0:Ly,Cy?Ly+1:Py):is(Ay,Cy?Ly+1:0,Cy?Py:Ly)}function xs(Ay,My){var Ry=Ay;return Ry instanceof ko&&(Ry=Ry.value()),K(My,function(Cy,Py){return Py.func.apply(Py.thisArg,Q([Cy],Py.args))},Ry)}function Ts(Ay,My,Ry){var Cy=Ay.length;if(2>Cy)return Cy?fs(Ay[0]):[];for(var Py=-1,Ly=Wm(Cy);++Py<Cy;)for(var Iy=Ay[Py],By=-1;++By<Cy;)By!=Py&&(Ly[Py]=Ji(Ly[Py]||Iy,Ay[By],My,Ry));return fs(rn(Ly,1),My,Ry)}function Es(Ay,My,Ry){for(var Cy=-1,Py=Ay.length,Ly=My.length,Iy={},By;++Cy<Py;)By=Cy<Ly?My[Cy]:qe,Ry(Iy,Ay[Cy],By);return Iy}function Ss(Ay){return Mc(Ay)?Ay:[]}function As(Ay){return"function"==typeof Ay?Ay:_m}function ws(Ay,My){return ch(Ay)?Ay:Ql(Ay,My)?[Ay]:wf(lu(Ay))}function Ms(Ay,My,Ry){var Cy=Ay.length;return Ry=Ry===qe?Cy:Ry,!My&&Ry>=Cy?Ay:is(Ay,My,Ry)}function Rs(Ay,My){if(My)return Ay.slice();var Ry=Ay.length,Cy=fg?fg(Ry):new Ay.constructor(Ry);return Ay.copy(Cy),Cy}function Cs(Ay){var My=new Ay.constructor(Ay.byteLength);return new gg(My).set(new gg(Ay)),My}function Ps(Ay,My){var Ry=My?Cs(Ay.buffer):Ay.buffer;return new Ay.constructor(Ry,Ay.byteOffset,Ay.byteLength)}function Ls(Ay){var My=new Ay.constructor(Ay.source,qr.exec(Ay));return My.lastIndex=Ay.lastIndex,My}function Is(Ay){return ef?Jm(ef.call(Ay)):{}}function Ns(Ay,My){var Ry=My?Cs(Ay.buffer):Ay.buffer;return new Ay.constructor(Ry,Ay.byteOffset,Ay.length)}function zs(Ay,My){if(Ay!==My){var Ry=Ay!==qe,Cy=null===Ay,Py=Ay===Ay,Ly=Jc(Ay),Iy=My!==qe,By=null===My,Ny=My===My,zy=Jc(My);if(!By&&!zy&&!Ly&&Ay>My||Ly&&Iy&&Ny&&!By&&!zy||Cy&&Iy&&Ny||!Ry&&Ny||!Py)return 1;if(!Cy&&!Ly&&!zy&&Ay<My||zy&&Ry&&Py&&!Cy&&!Ly||By&&Ry&&Py||!Iy&&Py||!Ny)return-1}return 0}function Ds(Ay,My,Ry){for(var Cy=-1,Py=Ay.criteria,Ly=My.criteria,Iy=Py.length,By=Ry.length,Ny;++Cy<Iy;)if(Ny=zs(Py[Cy],Ly[Cy]),Ny){if(Cy>=By)return Ny;var zy=Ry[Cy];return Ny*("desc"==zy?-1:1)}return Ay.index-My.index}function Fs(Ay,My,Ry,Cy){for(var Py=-1,Ly=Ay.length,Iy=Ry.length,By=-1,Ny=My.length,zy=Ng(Ly-Iy,0),Dy=Wm(Ny+zy),Fy=!Cy;++By<Ny;)Dy[By]=My[By];for(;++Py<Iy;)(Fy||Py<Ly)&&(Dy[Ry[Py]]=Ay[Py]);for(;zy--;)Dy[By++]=Ay[Py++];return Dy}function Us(Ay,My,Ry,Cy){for(var Py=-1,Ly=Ay.length,Iy=-1,By=Ry.length,Ny=-1,zy=My.length,Dy=Ng(Ly-By,0),Fy=Wm(Dy+zy),Uy=!Cy;++Py<Dy;)Fy[Py]=Ay[Py];for(var Oy=Py;++Ny<zy;)Fy[Oy+Ny]=My[Ny];for(;++Iy<By;)(Uy||Py<Ly)&&(Fy[Oy+Ry[Iy]]=Ay[Py++]);return Fy}function Os(Ay,My){var Ry=-1,Cy=Ay.length;for(My||(My=Wm(Cy));++Ry<Cy;)My[Ry]=Ay[Ry];return My}function ks(Ay,My,Ry,Cy){var Py=!Ry;Ry||(Ry={});for(var Ly=-1,Iy=My.length;++Ly<Iy;){var By=My[Ly],Ny=Cy?Cy(Ry[By],Ay[By],By,Ry,Ay):qe;Ny===qe&&(Ny=Ay[By]),Py?Gi(Ry,By,Ny):Fi(Ry,By,Ny)}return Ry}function Vs(Ay,My){return ks(Ay,_f(Ay),My)}function Gs(Ay,My){return ks(Ay,xf(Ay),My)}function Hs(Ay,My){return function(Ry,Cy){var Py=ch(Ry)?O:Oi,Ly=My?My():{};return Py(Ry,Ay,Nl(Cy,2),Ly)}}function Ws(Ay){return Kn(function(My,Ry){var Cy=-1,Py=Ry.length,Ly=1<Py?Ry[Py-1]:qe,Iy=2<Py?Ry[2]:qe;for(Ly=3<Ay.length&&"function"==typeof Ly?(Py--,Ly):qe,Iy&&Jl(Ry[0],Ry[1],Iy)&&(Ly=3>Py?qe:Ly,Py=1),My=Jm(My);++Cy<Py;){var By=Ry[Cy];By&&Ay(My,By,Cy,Ly)}return My})}function js(Ay,My){return function(Ry,Cy){if(null==Ry)return Ry;if(!Ac(Ry))return Ay(Ry,Cy);for(var Py=Ry.length,Ly=My?Py:-1,Iy=Jm(Ry);(My?Ly--:++Ly<Py)&&!1!==Cy(Iy[Ly],Ly,Iy););return Ry}}function qs(Ay){return function(My,Ry,Cy){for(var Py=-1,Ly=Jm(My),Iy=Cy(My),By=Iy.length,Ny;By--&&(Ny=Iy[Ay?By:++Py],!1!==Ry(Ly[Ny],Ny,Ly)););return My}}function Xs(Ay,My,Ry){function Cy(){var Iy=this&&this!==yo&&this instanceof Cy?Ly:Ay;return Iy.apply(Py?Ry:this,arguments)}var Py=My&nt,Ly=Js(Ay);return Cy}function Ys(Ay){return function(My){My=lu(My);var Ry=Pe(My)?Ge(My):qe,Cy=Ry?Ry[0]:My.charAt(0),Py=Ry?Ms(Ry,1).join(""):My.slice(1);return Cy[Ay]()+Py}}function Zs(Ay){return function(My){return K(um(Hu(My).replace(Ja,"")),Ay,"")}}function Js(Ay){return function(){var My=arguments;switch(My.length){case 0:return new Ay;case 1:return new Ay(My[0]);case 2:return new Ay(My[0],My[1]);case 3:return new Ay(My[0],My[1],My[2]);case 4:return new Ay(My[0],My[1],My[2],My[3]);case 5:return new Ay(My[0],My[1],My[2],My[3],My[4]);case 6:return new Ay(My[0],My[1],My[2],My[3],My[4],My[5]);case 7:return new Ay(My[0],My[1],My[2],My[3],My[4],My[5],My[6]);}var Ry=rf(Ay.prototype),Cy=Ay.apply(Ry,My);return Uc(Cy)?Cy:Ry}}function Qs(Ay,My,Ry){function Cy(){for(var Ly=arguments.length,Iy=Wm(Ly),By=Ly,Ny=Bl(Cy);By--;)Iy[By]=arguments[By];var zy=3>Ly&&Iy[0]!==Ny&&Iy[Ly-1]!==Ny?[]:ze(Iy,Ny);if(Ly-=zy.length,Ly<Ry)return _l(Ay,My,el,Cy.placeholder,qe,Iy,zy,qe,qe,Ry-Ly);var Dy=this&&this!==yo&&this instanceof Cy?Py:Ay;return U(Dy,this,Iy)}var Py=Js(Ay);return Cy}function Ks(Ay){return function(My,Ry,Cy){var Py=Jm(My);if(!Ac(My)){var Ly=Nl(Ry,3);My=Su(My),Ry=function(By){return Ly(Py[By],By,Py)}}var Iy=Ay(My,Ry,Cy);return-1<Iy?Py[Ly?My[Iy]:Iy]:qe}}function $s(Ay){return Cl(function(My){var Ry=My.length,Cy=Ry,Py=Oo.prototype.thru;for(Ay&&My.reverse();Cy--;){var Ly=My[Cy];if("function"!=typeof Ly)throw new $m(Je);if(Py&&!Iy&&"wrapper"==Il(Ly))var Iy=new Oo([],!0)}for(Cy=Iy?Cy:Ry;++Cy<Ry;){Ly=My[Cy];var By=Il(Ly),Ny="wrapper"==By?yf(Ly):qe;Iy=Ny&&$l(Ny[0])&&Ny[1]==(_t|mt|ht|xt)&&!Ny[4].length&&1==Ny[9]?Iy[Il(Ny[0])].apply(Iy,Ny[3]):1==Ly.length&&$l(Ly)?Iy[By]():Iy.thru(Ly)}return function(){var zy=arguments,Dy=zy[0];if(Iy&&1==zy.length&&ch(Dy))return Iy.plant(Dy).value();for(var Fy=0,Uy=Ry?My[Fy].apply(this,zy):Dy;++Fy<Ry;)Uy=My[Fy].call(this,Uy);return Uy}})}function el(Ay,My,Ry,Cy,Py,Ly,Iy,By,Ny,zy){function Dy(){for(var Hy=arguments.length,Wy=Wm(Hy),jy=Hy;jy--;)Wy[jy]=arguments[jy];if(ky)var Xy=Bl(Dy),Yy=Me(Wy,Xy);if(Cy&&(Wy=Fs(Wy,Cy,Py,ky)),Ly&&(Wy=Us(Wy,Ly,Iy,ky)),Hy-=Yy,ky&&Hy<zy){var Zy=ze(Wy,Xy);return _l(Ay,My,el,Dy.placeholder,Ry,Wy,Zy,By,Ny,zy-Hy)}var Jy=Uy?Ry:this,Qy=Oy?Jy[Ay]:Ay;return Hy=Wy.length,By?Wy=md(Wy,By):Vy&&1<Hy&&Wy.reverse(),Fy&&Ny<Hy&&(Wy.length=Ny),this&&this!==yo&&this instanceof Dy&&(Qy=Gy||Js(Qy)),Qy.apply(Jy,Wy)}var Fy=My&_t,Uy=My&nt,Oy=My&ct,ky=My&(mt|ft),Vy=My&vt,Gy=Oy?qe:Js(Ay);return Dy}function rl(Ay,My){return function(Ry,Cy){return _n(Ry,Ay,My(Cy),{})}}function al(Ay,My){return function(Ry,Cy){var Py;if(Ry===qe&&Cy===qe)return My;if(Ry!==qe&&(Py=Ry),Cy!==qe){if(Py===qe)return Cy;"string"==typeof Ry||"string"==typeof Cy?(Ry=ms(Ry),Cy=ms(Cy)):(Ry=us(Ry),Cy=us(Cy)),Py=Ay(Ry,Cy)}return Py}}function nl(Ay){return Cl(function(My){return My=J(My,Te(Nl())),Kn(function(Ry){var Cy=this;return Ay(My,function(Py){return U(Py,Cy,Ry)})})})}function ll(Ay,My){My=My===qe?" ":ms(My);var Ry=My.length;if(2>Ry)return Ry?Qn(My,Ay):My;var Cy=Qn(My,Mg(Ay/Ve(My)));return Pe(My)?Ms(Ge(Cy),0,Ay).join(""):Cy.slice(0,Ay)}function dl(Ay,My,Ry,Cy){function Py(){for(var By=-1,Ny=arguments.length,zy=-1,Dy=Cy.length,Fy=Wm(Dy+Ny),Uy=this&&this!==yo&&this instanceof Py?Iy:Ay;++zy<Dy;)Fy[zy]=Cy[zy];for(;Ny--;)Fy[zy++]=arguments[++By];return U(Uy,Ly?Ry:this,Fy)}var Ly=My&nt,Iy=Js(Ay);return Py}function ul(Ay){return function(My,Ry,Cy){return Cy&&"number"!=typeof Cy&&Jl(My,Ry,Cy)&&(Ry=Cy=qe),My=tu(My),Ry===qe?(Ry=My,My=0):Ry=tu(Ry),Cy=Cy===qe?My<Ry?1:-1:tu(Cy),Jn(My,Ry,Cy,Ay)}}function yl(Ay){return function(My,Ry){return"string"==typeof My&&"string"==typeof Ry||(My=ou(My),Ry=ou(Ry)),Ay(My,Ry)}}function _l(Ay,My,Ry,Cy,Py,Ly,Iy,By,Ny,zy){var Dy=My&mt,Fy=Dy?Iy:qe,Uy=Dy?qe:Iy,Oy=Dy?Ly:qe,ky=Dy?qe:Ly;My|=Dy?ht:yt,My&=~(Dy?yt:ht),My&ut||(My&=~(nt|ct));var Vy=[Ay,My,Py,Oy,Fy,ky,Uy,By,Ny,zy],Gy=Ry.apply(qe,Vy);return $l(Ay)&&Ef(Gy,Vy),Gy.placeholder=Cy,gd(Gy,Ay,My)}function xl(Ay){var My=Zm[Ay];return function(Ry,Cy){if(Ry=ou(Ry),Cy=null==Cy?0:zg(ru(Cy),292),Cy){var Py=(lu(Ry)+"e").split("e"),Ly=My(Py[0]+"e"+(+Py[1]+Cy));return Py=(lu(Ly)+"e").split("e"),+(Py[0]+"e"+(+Py[1]-Cy))}return My(Ry)}}function bl(Ay){return function(My){var Ry=vf(My);return Ry==qt?Be(My):Ry==$t?Ue(My):ve(My,Ay(My))}}function Tl(Ay,My,Ry,Cy,Py,Ly,Iy,By){var Ny=My&ct;if(!Ny&&"function"!=typeof Ay)throw new $m(Je);var zy=Cy?Cy.length:0;if(zy||(My&=~(ht|yt),Cy=Py=qe),Iy=Iy===qe?Iy:Ng(ru(Iy),0),By=By===qe?By:ru(By),zy-=Py?Py.length:0,My&yt){var Dy=Cy,Fy=Py;Cy=Py=qe}var Uy=Ny?qe:yf(Ay),Oy=[Ay,My,Ry,Cy,Py,Dy,Fy,Ly,Iy,By];if(Uy&&sd(Oy,Uy),Ay=Oy[0],My=Oy[1],Ry=Oy[2],Cy=Oy[3],Py=Oy[4],By=Oy[9]=Oy[9]===qe?Ny?0:Ay.length:Ng(Oy[9]-zy,0),!By&&My&(mt|ft)&&(My&=~(mt|ft)),!My||My==nt)var ky=Xs(Ay,My,Ry);else ky=My==mt||My==ft?Qs(Ay,My,By):My!=ht&&My!=(nt|ht)||Py.length?el.apply(qe,Oy):dl(Ay,My,Ry,Cy);var Vy=Uy?uf:Ef;return gd(Vy(ky,Oy),Ay,My)}function El(Ay,My,Ry,Cy){return Ay===qe||Sc(Ay,rg[Ry])&&!ig.call(Cy,Ry)?My:Ay}function Sl(Ay,My,Ry,Cy,Py,Ly){return Uc(Ay)&&Uc(My)&&(Ly.set(My,Ay),kn(Ay,My,qe,Sl,Ly),Ly["delete"](My)),Ay}function Al(Ay){return Xc(Ay)?qe:Ay}function wl(Ay,My,Ry,Cy,Py,Ly){var Iy=Ry&ot,By=Ay.length,Ny=My.length;if(By!=Ny&&!(Iy&&Ny>By))return!1;var zy=Ly.get(Ay);if(zy&&Ly.get(My))return zy==My;var Dy=-1,Fy=!0,Uy=Ry&it?new _i:qe;for(Ly.set(Ay,My),Ly.set(My,Ay);++Dy<By;){var Oy=Ay[Dy],ky=My[Dy];if(Cy)var Vy=Iy?Cy(ky,Oy,Dy,My,Ay,Ly):Cy(Oy,ky,Dy,Ay,My,Ly);if(Vy!==qe){if(Vy)continue;Fy=!1;break}if(Uy){if(!ee(My,function(Gy,Hy){if(!Se(Uy,Hy)&&(Oy===Gy||Py(Oy,Gy,Ry,Cy,Ly)))return Uy.push(Hy)})){Fy=!1;break}}else if(!(Oy===ky||Py(Oy,ky,Ry,Cy,Ly))){Fy=!1;break}}return Ly["delete"](Ay),Ly["delete"](My),Fy}function Ml(Ay,My,Ry,Cy,Py,Ly,Iy){switch(Ry){case cr:if(Ay.byteLength!=My.byteLength||Ay.byteOffset!=My.byteOffset)return!1;Ay=Ay.buffer,My=My.buffer;case lr:return Ay.byteLength==My.byteLength&&Ly(new gg(Ay),new gg(My));case kt:case Vt:case Xt:return Sc(+Ay,+My);case Ht:return Ay.name==My.name&&Ay.message==My.message;case Kt:case er:return Ay==My+"";case qt:var By=Be;case $t:var Ny=Cy&ot;if(By||(By=Fe),Ay.size!=My.size&&!Ny)return!1;var zy=Iy.get(Ay);if(zy)return zy==My;Cy|=it,Iy.set(Ay,My);var Dy=wl(By(Ay),By(My),Cy,Py,Ly,Iy);return Iy["delete"](Ay),Dy;case rr:if(ef)return ef.call(Ay)==ef.call(My);}return!1}function Rl(Ay,My,Ry,Cy,Py,Ly){var Iy=Ry&ot,By=Pl(Ay),Ny=By.length,zy=Pl(My),Dy=zy.length;if(Ny!=Dy&&!Iy)return!1;for(var Fy=Ny,Uy;Fy--;)if(Uy=By[Fy],Iy?!(Uy in My):!ig.call(My,Uy))return!1;var Oy=Ly.get(Ay);if(Oy&&Ly.get(My))return Oy==My;var ky=!0;Ly.set(Ay,My),Ly.set(My,Ay);for(var Vy=Iy;++Fy<Ny;){Uy=By[Fy];var Gy=Ay[Uy],Hy=My[Uy];if(Cy)var Wy=Iy?Cy(Hy,Gy,Uy,My,Ay,Ly):Cy(Gy,Hy,Uy,Ay,My,Ly);if(Wy===qe?!(Gy===Hy||Py(Gy,Hy,Ry,Cy,Ly)):!Wy){ky=!1;break}Vy||(Vy="constructor"==Uy)}if(ky&&!Vy){var jy=Ay.constructor,Xy=My.constructor;jy!=Xy&&"constructor"in Ay&&"constructor"in My&&!("function"==typeof jy&&jy instanceof jy&&"function"==typeof Xy&&Xy instanceof Xy)&&(ky=!1)}return Ly["delete"](Ay),Ly["delete"](My),ky}function Cl(Ay){return Af(cd(Ay,qe,Id),Ay+"")}function Pl(Ay){return dn(Ay,Su,_f)}function Ll(Ay){return dn(Ay,Au,xf)}function Il(Ay){for(var My=Ay.name+"",Ry=Xg[My],Cy=ig.call(Xg,My)?Ry.length:0;Cy--;){var Py=Ry[Cy],Ly=Py.func;if(null==Ly||Ly==Ay)return Py.name}return My}function Bl(Ay){var My=ig.call(Fo,"placeholder")?Fo:Ay;return My.placeholder}function Nl(){var Ay=Fo.iteratee||xm;return Ay=Ay===xm?Bn:Ay,arguments.length?Ay(arguments[0],arguments[1]):Ay}function zl(Ay,My){var Ry=Ay.__data__;return Kl(My)?Ry["string"==typeof My?"string":"hash"]:Ry.map}function Dl(Ay){for(var My=Su(Ay),Ry=My.length;Ry--;){var Cy=My[Ry],Py=Ay[Cy];My[Ry]=[Cy,Py,rd(Py)]}return My}function Fl(Ay,My){var Ry=Ce(Ay,My);return Cn(Ry)?Ry:qe}function Ul(Ay){var My=ig.call(Ay,Tg),Ry=Ay[Tg];try{Ay[Tg]=qe}catch(Ly){}var Py=lg.call(Ay);return My?Ay[Tg]=Ry:delete Ay[Tg],Py}function Ol(Ay,My,Ry){for(var Cy=-1,Py=Ry.length;++Cy<Py;){var Ly=Ry[Cy],Iy=Ly.size;switch(Ly.type){case"drop":Ay+=Iy;break;case"dropRight":My-=Iy;break;case"take":My=zg(My,Ay+Iy);break;case"takeRight":Ay=Ng(Ay,My-Iy);}}return{start:Ay,end:My}}function Vl(Ay){var My=Ay.match(Vr);return My?My[1].split(Gr):[]}function Gl(Ay,My,Ry){My=ws(My,Ay);for(var Cy=-1,Py=My.length,Ly=!1,Iy;++Cy<Py&&(Iy=yd(My[Cy]),!!(Ly=null!=Ay&&Ry(Ay,Iy)));)Ay=Ay[Iy];return Ly||++Cy!=Py?Ly:(Py=null==Ay?0:Ay.length,!!Py&&Fc(Py)&&Zl(Iy,Py)&&(ch(Ay)||ph(Ay)))}function Hl(Ay){var My=Ay.length,Ry=new Ay.constructor(My);return My&&"string"==typeof Ay[0]&&ig.call(Ay,"index")&&(Ry.index=Ay.index,Ry.input=Ay.input),Ry}function Wl(Ay){return"function"!=typeof Ay.constructor||td(Ay)?{}:rf(hg(Ay))}function ql(Ay,My,Ry){var Cy=Ay.constructor;return My===lr?Cs(Ay):My===kt||My===Vt?new Cy(+Ay):My===cr?Ps(Ay,Ry):My===ur||My===mr||My===gr||My===fr||My===hr||My===yr||My===_r||My===xr||My===br?Ns(Ay,Ry):My===qt?new Cy:My===Xt||My===er?new Cy(Ay):My===Kt?Ls(Ay):My===$t?new Cy:My===rr?Is(Ay):void 0}function Xl(Ay,My){var Ry=My.length;if(!Ry)return Ay;var Cy=Ry-1;return My[Cy]=(1<Ry?"& ":"")+My[Cy],My=My.join(2<Ry?", ":" "),Ay.replace(kr,"{\n/* [wrapped with "+My+"] */\n")}function Yl(Ay){return ch(Ay)||ph(Ay)||!!(vg&&Ay&&Ay[vg])}function Zl(Ay,My){var Ry=typeof Ay;return My=null==My?Pt:My,!!My&&("number"==Ry||"symbol"!=Ry&&Qr.test(Ay))&&-1<Ay&&0==Ay%1&&Ay<My}function Jl(Ay,My,Ry){if(!Uc(Ry))return!1;var Cy=typeof My;return("number"==Cy?!!(Ac(Ry)&&Zl(My,Ry.length)):!!("string"==Cy&&My in Ry))&&Sc(Ry[My],Ay)}function Ql(Ay,My){if(ch(Ay))return!1;var Ry=typeof Ay;return"number"==Ry||"symbol"==Ry||"boolean"==Ry||null==Ay||Jc(Ay)||Br.test(Ay)||!Ir.test(Ay)||null!=My&&Ay in Jm(My)}function Kl(Ay){var My=typeof Ay;return"string"==My||"number"==My||"symbol"==My||"boolean"==My?"__proto__"!==Ay:null===Ay}function $l(Ay){var My=Il(Ay),Ry=Fo[My];if("function"!=typeof Ry||!(My in ko.prototype))return!1;if(Ay===Ry)return!0;var Cy=yf(Ry);return!!Cy&&Ay===Cy[0]}function ed(Ay){return!!sg&&sg in Ay}function td(Ay){var My=Ay&&Ay.constructor,Ry="function"==typeof My&&My.prototype||rg;return Ay===Ry}function rd(Ay){return Ay===Ay&&!Uc(Ay)}function od(Ay,My){return function(Ry){return null!=Ry&&Ry[Ay]===My&&(My!==qe||Ay in Jm(Ry))}}function sd(Ay,My){var Ry=Ay[1],Cy=My[1],Py=Ry|Cy,Ly=Py<(nt|ct|_t),Iy=Cy==_t&&Ry==mt||Cy==_t&&Ry==xt&&Ay[7].length<=My[8]||Cy==(_t|xt)&&My[7].length<=My[8]&&Ry==mt;if(!(Ly||Iy))return Ay;Cy&nt&&(Ay[2]=My[2],Py|=Ry&nt?0:ut);var By=My[3];if(By){var Ny=Ay[3];Ay[3]=Ny?Fs(Ny,By,My[4]):By,Ay[4]=Ny?ze(Ay[3],$e):My[4]}return By=My[5],By&&(Ny=Ay[5],Ay[5]=Ny?Us(Ny,By,My[6]):By,Ay[6]=Ny?ze(Ay[5],$e):My[6]),By=My[7],By&&(Ay[7]=By),Cy&_t&&(Ay[8]=null==Ay[8]?My[8]:zg(Ay[8],My[8])),null==Ay[9]&&(Ay[9]=My[9]),Ay[0]=My[0],Ay[1]=Py,Ay}function dd(Ay){var My=[];if(null!=Ay)for(var Ry in Jm(Ay))My.push(Ry);return My}function pd(Ay){return lg.call(Ay)}function cd(Ay,My,Ry){return My=Ng(My===qe?Ay.length-1:My,0),function(){for(var Cy=arguments,Py=-1,Ly=Ng(Cy.length-My,0),Iy=Wm(Ly);++Py<Ly;)Iy[Py]=Cy[My+Py];Py=-1;for(var By=Wm(My+1);++Py<My;)By[Py]=Cy[Py];return By[My]=Ry(Iy),U(Ay,this,By)}}function ud(Ay,My){return 2>My.length?Ay:ln(Ay,is(My,0,-1))}function md(Ay,My){for(var Ry=Ay.length,Cy=zg(My.length,Ry),Py=Os(Ay),Ly;Cy--;)Ly=My[Cy],Ay[Cy]=Zl(Ly,Ry)?Py[Ly]:qe;return Ay}function gd(Ay,My,Ry){var Cy=My+"";return Af(Ay,Xl(Cy,xd(Vl(Cy),Ry)))}function fd(Ay){var My=0,Ry=0;return function(){var Cy=Dg(),Py=16-(Cy-Ry);if(Ry=Cy,!(0<Py))My=0;else if(++My>=800)return arguments[0];return Ay.apply(qe,arguments)}}function hd(Ay,My){var Ry=-1,Cy=Ay.length;for(My=My===qe?Cy:My;++Ry<My;){var Ly=Zn(Ry,Cy-1),Iy=Ay[Ly];Ay[Ly]=Ay[Ry],Ay[Ry]=Iy}return Ay.length=My,Ay}function yd(Ay){if("string"==typeof Ay||Jc(Ay))return Ay;var My=Ay+"";return"0"==My&&1/Ay==-Ct?"-0":My}function _d(Ay){if(null!=Ay){try{return og.call(Ay)}catch(My){}try{return Ay+""}catch(My){}}return""}function xd(Ay,My){return G(Dt,function(Ry){var Cy="_."+Ry[0];My&Ry[1]&&!Y(Ay,Cy)&&Ay.push(Cy)}),Ay.sort()}function vd(Ay){if(Ay instanceof ko)return Ay.clone();var My=new Oo(Ay.__wrapped__,Ay.__chain__);return My.__actions__=Os(Ay.__actions__),My.__index__=Ay.__index__,My.__values__=Ay.__values__,My}function Pd(Ay,My,Ry){var Cy=null==Ay?0:Ay.length;if(!Cy)return-1;var Py=null==Ry?0:ru(Ry);return 0>Py&&(Py=Ng(Cy+Py,0)),ne(Ay,Nl(My,3),Py)}function Ld(Ay,My,Ry){var Cy=null==Ay?0:Ay.length;if(!Cy)return-1;var Py=Cy-1;return Ry!==qe&&(Py=ru(Ry),Py=0>Ry?Ng(Cy+Py,0):zg(Py,Cy-1)),ne(Ay,Nl(My,3),Py,!0)}function Id(Ay){var My=null==Ay?0:Ay.length;return My?rn(Ay,1):[]}function Dd(Ay){return Ay&&Ay.length?Ay[0]:qe}function kd(Ay){var My=null==Ay?0:Ay.length;return My?Ay[My-1]:qe}function Hd(Ay,My){return Ay&&Ay.length&&My&&My.length?Xn(Ay,My):Ay}function Xd(Ay){return null==Ay?Ay:Og.call(Ay)}function yp(Ay){if(!(Ay&&Ay.length))return[];var My=0;return Ay=X(Ay,function(Ry){if(Mc(Ry))return My=Ng(Ry.length,My),!0}),xe(My,function(Ry){return J(Ay,ge(Ry))})}function _p(Ay,My){if(!(Ay&&Ay.length))return[];var Ry=yp(Ay);return null==My?Ry:J(Ry,function(Cy){return U(My,qe,Cy)})}function Ep(Ay){var My=Fo(Ay);return My.__chain__=!0,My}function Ap(Ay,My){return My(Ay)}function Up(Ay,My){var Ry=ch(Ay)?G:of;return Ry(Ay,Nl(My,3))}function Op(Ay,My){var Ry=ch(Ay)?H:nf;return Ry(Ay,Nl(My,3))}function Gp(Ay,My){var Ry=ch(Ay)?J:Fn;return Ry(Ay,Nl(My,3))}function $p(Ay,My,Ry){return My=Ry?qe:My,My=Ay&&null==My?Ay.length:My,Tl(Ay,_t,qe,qe,qe,qe,My)}function ec(Ay,My){var Ry;if("function"!=typeof My)throw new $m(Je);return Ay=ru(Ay),function(){return 0<--Ay&&(Ry=My.apply(this,arguments)),1>=Ay&&(My=qe),Ry}}function tc(Ay,My,Ry){My=Ry?qe:My;var Cy=Tl(Ay,mt,qe,qe,qe,qe,qe,My);return Cy.placeholder=tc.placeholder,Cy}function rc(Ay,My,Ry){My=Ry?qe:My;var Cy=Tl(Ay,ft,qe,qe,qe,qe,qe,My);return Cy.placeholder=rc.placeholder,Cy}function oc(Ay,My,Ry){function Cy(Zy){var Jy=Uy,Qy=Oy;return Uy=Oy=qe,Wy=Zy,Vy=Ay.apply(Qy,Jy),Vy}function Py(Zy){return Wy=Zy,Gy=Sf(By,My),jy?Cy(Zy):Vy}function Ly(Zy){var Jy=Zy-Hy,Qy=Zy-Wy,Ky=My-Jy;return Xy?zg(Ky,ky-Qy):Ky}function Iy(Zy){var Jy=Zy-Hy,Qy=Zy-Wy;return Hy==qe||Jy>=My||0>Jy||Xy&&Qy>=ky}function By(){var Zy=$f();return Iy(Zy)?Ny(Zy):void(Gy=Sf(By,Ly(Zy)))}function Ny(Zy){return(Gy=qe,Yy&&Uy)?Cy(Zy):(Uy=Oy=qe,Vy)}function Fy(){var Zy=$f(),Jy=Iy(Zy);if(Uy=arguments,Oy=this,Hy=Zy,Jy){if(Gy===qe)return Py(Hy);if(Xy)return Gy=Sf(By,My),Cy(Hy)}return Gy===qe&&(Gy=Sf(By,My)),Vy}var Wy=0,jy=!1,Xy=!1,Yy=!0,Uy,Oy,ky,Vy,Gy,Hy;if("function"!=typeof Ay)throw new $m(Je);return My=ou(My)||0,Uc(Ry)&&(jy=!!Ry.leading,Xy="maxWait"in Ry,ky=Xy?Ng(ou(Ry.maxWait)||0,My):ky,Yy="trailing"in Ry?!!Ry.trailing:Yy),Fy.cancel=function(){Gy!==qe&&ff(Gy),Wy=0,Uy=Hy=Oy=Gy=qe},Fy.flush=function(){return Gy===qe?Vy:Ny($f())},Fy}function sc(Ay,My){if("function"!=typeof Ay||null!=My&&"function"!=typeof My)throw new $m(Je);var Ry=function(){var Cy=arguments,Py=My?My.apply(this,Cy):Cy[0],Ly=Ry.cache;if(Ly.has(Py))return Ly.get(Py);var Iy=Ay.apply(this,Cy);return Ry.cache=Ly.set(Py,Iy)||Ly,Iy};return Ry.cache=new(sc.Cache||di),Ry}function lc(Ay){if("function"!=typeof Ay)throw new $m(Je);return function(){var My=arguments;switch(My.length){case 0:return!Ay.call(this);case 1:return!Ay.call(this,My[0]);case 2:return!Ay.call(this,My[0],My[1]);case 3:return!Ay.call(this,My[0],My[1],My[2]);}return!Ay.apply(this,My)}}function Sc(Ay,My){return Ay===My||Ay!==Ay&&My!==My}function Ac(Ay){return null!=Ay&&Fc(Ay.length)&&!zc(Ay)}function Mc(Ay){return Oc(Ay)&&Ac(Ay)}function Bc(Ay){if(!Oc(Ay))return!1;var My=pn(Ay);return My==Ht||My=="[object DOMException]"||"string"==typeof Ay.message&&"string"==typeof Ay.name&&!Xc(Ay)}function zc(Ay){if(!Uc(Ay))return!1;var My=pn(Ay);return My==Wt||My==jt||My=="[object AsyncFunction]"||My=="[object Proxy]"}function Dc(Ay){return"number"==typeof Ay&&Ay==ru(Ay)}function Fc(Ay){return"number"==typeof Ay&&-1<Ay&&0==Ay%1&&Ay<=Pt}function Uc(Ay){var My=typeof Ay;return null!=Ay&&("object"==My||"function"==My)}function Oc(Ay){return null!=Ay&&"object"==typeof Ay}function qc(Ay){return"number"==typeof Ay||Oc(Ay)&&pn(Ay)==Xt}function Xc(Ay){if(!Oc(Ay)||pn(Ay)!=Zt)return!1;var My=hg(Ay);if(null===My)return!0;var Ry=ig.call(My,"constructor")&&My.constructor;return"function"==typeof Ry&&Ry instanceof Ry&&og.call(Ry)==dg}function Zc(Ay){return"string"==typeof Ay||!ch(Ay)&&Oc(Ay)&&pn(Ay)==er}function Jc(Ay){return"symbol"==typeof Ay||Oc(Ay)&&pn(Ay)==rr}function eu(Ay){if(!Ay)return[];if(Ac(Ay))return Zc(Ay)?Ge(Ay):Os(Ay);if(bg&&Ay[bg])return Ie(Ay[bg]());var My=vf(Ay),Ry=My==qt?Be:My==$t?Fe:Fu;return Ry(Ay)}function tu(Ay){if(!Ay)return 0===Ay?Ay:0;if(Ay=ou(Ay),Ay===Ct||Ay===-Ct){var My=0>Ay?-1:1;return My*1.7976931348623157e308}return Ay===Ay?Ay:0}function ru(Ay){var My=tu(Ay),Ry=My%1;return My===My?Ry?My-Ry:My:0}function au(Ay){return Ay?Wi(ru(Ay),0,Bt):0}function ou(Ay){if("number"==typeof Ay)return Ay;if(Jc(Ay))return It;if(Uc(Ay)){var My="function"==typeof Ay.valueOf?Ay.valueOf():Ay;Ay=Uc(My)?My+"":My}if("string"!=typeof Ay)return 0===Ay?Ay:+Ay;Ay=Ay.replace(Fr,"");var Ry=Yr.test(Ay);return Ry||Jr.test(Ay)?mo(Ay.slice(2),Ry?2:8):Xr.test(Ay)?It:+Ay}function iu(Ay){return ks(Ay,Au(Ay))}function lu(Ay){return null==Ay?"":ms(Ay)}function bu(Ay,My,Ry){var Cy=null==Ay?qe:ln(Ay,My);return Cy===qe?Ry:Cy}function Eu(Ay,My){return null!=Ay&&Gl(Ay,My,mn)}function Su(Ay){return Ac(Ay)?Li(Ay):Nn(Ay)}function Au(Ay){return Ac(Ay)?Li(Ay,!0):zn(Ay)}function Cu(Ay,My){if(null==Ay)return{};var Ry=J(Ll(Ay),function(Cy){return[Cy]});return My=Nl(My),jn(Ay,Ry,function(Cy,Py){return My(Cy,Py[0])})}function Fu(Ay){return null==Ay?[]:Ee(Ay,Su(Ay))}function Gu(Ay){return Wh(lu(Ay).toLowerCase())}function Hu(Ay){return Ay=lu(Ay),Ay&&Ay.replace(Kr,Po).replace(Qa,"")}function um(Ay,My,Ry){return Ay=lu(Ay),My=Ry?qe:My,My===qe?Le(Ay)?je(Ay):oe(Ay):Ay.match(My)||[]}function hm(Ay){return function(){return Ay}}function _m(Ay){return Ay}function xm(Ay){return Bn("function"==typeof Ay?Ay:ji(Ay,et))}function Tm(Ay,My,Ry){var Cy=Su(My),Py=sn(My,Cy);null!=Ry||Uc(My)&&(Py.length||!Cy.length)||(Ry=My,My=Ay,Ay=this,Py=sn(My,Su(My)));var Ly=!(Uc(Ry)&&"chain"in Ry)||!!Ry.chain,Iy=zc(Ay);return G(Py,function(By){var Ny=My[By];Ay[By]=Ny,Iy&&(Ay.prototype[By]=function(){var zy=this.__chain__;if(Ly||zy){var Dy=Ay(this.__wrapped__),Fy=Dy.__actions__=Os(this.__actions__);return Fy.push({func:Ny,args:arguments,thisArg:Ay}),Dy.__chain__=zy,Dy}return Ny.apply(Ay,Q([this.value()],arguments))})}),Ay}function Sm(){}function wm(Ay){return Ql(Ay)?ge(yd(Ay)):qn(Ay)}function Rm(){return[]}function Cm(){return!1}Do=null==Do?yo:No.defaults(yo.Object(),Do,No.pick(yo,ao));var Wm=Do.Array,jm=Do.Date,Xm=Do.Error,Ym=Do.Function,Zm=Do.Math,Jm=Do.Object,Qm=Do.RegExp,Km=Do.String,$m=Do.TypeError,eg=Wm.prototype,tg=Ym.prototype,rg=Jm.prototype,ag=Do["__core-js_shared__"],og=tg.toString,ig=rg.hasOwnProperty,ng=0,sg=function(){var Ay=/[^.]+$/.exec(ag&&ag.keys&&ag.keys.IE_PROTO||"");return Ay?"Symbol(src)_1."+Ay:""}(),lg=rg.toString,dg=og.call(Jm),pg=yo._,cg=Qm("^"+og.call(ig).replace(zr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ug=vo?Do.Buffer:qe,mg=Do.Symbol,gg=Do.Uint8Array,fg=ug?ug.allocUnsafe:qe,hg=Ne(Jm.getPrototypeOf,Jm),yg=Jm.create,_g=rg.propertyIsEnumerable,xg=eg.splice,vg=mg?mg.isConcatSpreadable:qe,bg=mg?mg.iterator:qe,Tg=mg?mg.toStringTag:qe,Eg=function(){try{var Ay=Fl(Jm,"defineProperty");return Ay({},"",{}),Ay}catch(My){}}(),Sg=Do.clearTimeout!==yo.clearTimeout&&Do.clearTimeout,Ag=jm&&jm.now!==yo.Date.now&&jm.now,wg=Do.setTimeout!==yo.setTimeout&&Do.setTimeout,Mg=Zm.ceil,Rg=Zm.floor,Cg=Jm.getOwnPropertySymbols,Pg=ug?ug.isBuffer:qe,Lg=Do.isFinite,Ig=eg.join,Bg=Ne(Jm.keys,Jm),Ng=Zm.max,zg=Zm.min,Dg=jm.now,Fg=Do.parseInt,Ug=Zm.random,Og=eg.reverse,kg=Fl(Do,"DataView"),Vg=Fl(Do,"Map"),Gg=Fl(Do,"Promise"),Hg=Fl(Do,"Set"),Wg=Fl(Do,"WeakMap"),jg=Fl(Jm,"create"),qg=Wg&&new Wg,Xg={},Yg=_d(kg),Zg=_d(Vg),Jg=_d(Gg),Qg=_d(Hg),Kg=_d(Wg),$g=mg?mg.prototype:qe,ef=$g?$g.valueOf:qe,tf=$g?$g.toString:qe,rf=function(){function Ay(){}return function(My){if(!Uc(My))return{};if(yg)return yg(My);Ay.prototype=My;var Ry=new Ay;return Ay.prototype=qe,Ry}}();Fo.templateSettings={escape:Cr,evaluate:Pr,interpolate:Lr,variable:"",imports:{_:Fo}},Fo.prototype=Uo.prototype,Fo.prototype.constructor=Fo,Oo.prototype=rf(Uo.prototype),Oo.prototype.constructor=Oo,ko.prototype=rf(Uo.prototype),ko.prototype.constructor=ko,Wo.prototype.clear=function(){this.__data__=jg?jg(null):{},this.size=0},Wo.prototype["delete"]=function(Ay){var My=this.has(Ay)&&delete this.__data__[Ay];return this.size-=My?1:0,My},Wo.prototype.get=function(Ay){var My=this.__data__;if(jg){var Ry=My[Ay];return Ry===Qe?qe:Ry}return ig.call(My,Ay)?My[Ay]:qe},Wo.prototype.has=function(Ay){var My=this.__data__;return jg?My[Ay]!==qe:ig.call(My,Ay)},Wo.prototype.set=function(Ay,My){var Ry=this.__data__;return this.size+=this.has(Ay)?0:1,Ry[Ay]=jg&&My===qe?Qe:My,this},Jo.prototype.clear=function(){this.__data__=[],this.size=0},Jo.prototype["delete"]=function(Ay){var My=this.__data__,Ry=Ui(My,Ay);if(0>Ry)return!1;var Cy=My.length-1;return Ry==Cy?My.pop():xg.call(My,Ry,1),--this.size,!0},Jo.prototype.get=function(Ay){var My=this.__data__,Ry=Ui(My,Ay);return 0>Ry?qe:My[Ry][1]},Jo.prototype.has=function(Ay){return-1<Ui(this.__data__,Ay)},Jo.prototype.set=function(Ay,My){var Ry=this.__data__,Cy=Ui(Ry,Ay);return 0>Cy?(++this.size,Ry.push([Ay,My])):Ry[Cy][1]=My,this},di.prototype.clear=function(){this.size=0,this.__data__={hash:new Wo,map:new(Vg||Jo),string:new Wo}},di.prototype["delete"]=function(Ay){var My=zl(this,Ay)["delete"](Ay);return this.size-=My?1:0,My},di.prototype.get=function(Ay){return zl(this,Ay).get(Ay)},di.prototype.has=function(Ay){return zl(this,Ay).has(Ay)},di.prototype.set=function(Ay,My){var Ry=zl(this,Ay),Cy=Ry.size;return Ry.set(Ay,My),this.size+=Ry.size==Cy?0:1,this},_i.prototype.add=_i.prototype.push=function(Ay){return this.__data__.set(Ay,Qe),this},_i.prototype.has=function(Ay){return this.__data__.has(Ay)},Si.prototype.clear=function(){this.__data__=new Jo,this.size=0},Si.prototype["delete"]=function(Ay){var My=this.__data__,Ry=My["delete"](Ay);return this.size=My.size,Ry},Si.prototype.get=function(Ay){return this.__data__.get(Ay)},Si.prototype.has=function(Ay){return this.__data__.has(Ay)},Si.prototype.set=function(Ay,My){var Ry=this.__data__;if(Ry instanceof Jo){var Cy=Ry.__data__;if(!Vg||Cy.length<Ye-1)return Cy.push([Ay,My]),this.size=++Ry.size,this;Ry=this.__data__=new di(Cy)}return Ry.set(Ay,My),this.size=Ry.size,this};var of=js(on),nf=js(nn,!0),lf=qs(),pf=qs(!0),uf=qg?function(Ay,My){return qg.set(Ay,My),Ay}:_m,mf=Eg?function(Ay,My){return Eg(Ay,"toString",{configurable:!0,enumerable:!1,value:hm(My),writable:!0})}:_m,ff=Sg||function(Ay){return yo.clearTimeout(Ay)},hf=Hg&&1/Fe(new Hg([,-0]))[1]==Ct?function(Ay){return new Hg(Ay)}:Sm,yf=qg?function(Ay){return qg.get(Ay)}:Sm,_f=Cg?function(Ay){return null==Ay?[]:(Ay=Jm(Ay),X(Cg(Ay),function(My){return _g.call(Ay,My)}))}:Rm,xf=Cg?function(Ay){for(var My=[];Ay;)Q(My,_f(Ay)),Ay=hg(Ay);return My}:Rm,vf=pn;(kg&&vf(new kg(new ArrayBuffer(1)))!=cr||Vg&&vf(new Vg)!=qt||Gg&&vf(Gg.resolve())!=Jt||Hg&&vf(new Hg)!=$t||Wg&&vf(new Wg)!=ir)&&(vf=function(Ay){var My=pn(Ay),Ry=My==Zt?Ay.constructor:qe,Cy=Ry?_d(Ry):"";if(Cy)switch(Cy){case Yg:return cr;case Zg:return qt;case Jg:return Jt;case Qg:return $t;case Kg:return ir;}return My});var Tf=ag?zc:Cm,Ef=fd(uf),Sf=wg||function(Ay,My){return yo.setTimeout(Ay,My)},Af=fd(mf),wf=function(Ay){var My=sc(Ay,function(Cy){return Ry.size===500&&Ry.clear(),Cy}),Ry=My.cache;return My}(function(Ay){var My=[];return 46===Ay.charCodeAt(0)&&My.push(""),Ay.replace(Nr,function(Ry,Cy,Py,Ly){My.push(Py?Ly.replace(Wr,"$1"):Cy||Ry)}),My}),Mf=Kn(function(Ay,My){return Mc(Ay)?Ji(Ay,rn(My,1,Mc,!0)):[]}),Rf=Kn(function(Ay,My){var Ry=kd(My);return Mc(Ry)&&(Ry=qe),Mc(Ay)?Ji(Ay,rn(My,1,Mc,!0),Nl(Ry,2)):[]}),Cf=Kn(function(Ay,My){var Ry=kd(My);return Mc(Ry)&&(Ry=qe),Mc(Ay)?Ji(Ay,rn(My,1,Mc,!0),qe,Ry):[]}),Pf=Kn(function(Ay){var My=J(Ay,Ss);return My.length&&My[0]===Ay[0]?yn(My):[]}),Lf=Kn(function(Ay){var My=kd(Ay),Ry=J(Ay,Ss);return My===kd(Ry)?My=qe:Ry.pop(),Ry.length&&Ry[0]===Ay[0]?yn(Ry,Nl(My,2)):[]}),If=Kn(function(Ay){var My=kd(Ay),Ry=J(Ay,Ss);return My="function"==typeof My?My:qe,My&&Ry.pop(),Ry.length&&Ry[0]===Ay[0]?yn(Ry,qe,My):[]}),Bf=Kn(Hd),Nf=Cl(function(Ay,My){var Ry=null==Ay?0:Ay.length,Cy=Hi(Ay,My);return Yn(Ay,J(My,function(Py){return Zl(Py,Ry)?+Py:Py}).sort(zs)),Cy}),zf=Kn(function(Ay){return fs(rn(Ay,1,Mc,!0))}),Df=Kn(function(Ay){var My=kd(Ay);return Mc(My)&&(My=qe),fs(rn(Ay,1,Mc,!0),Nl(My,2))}),Ff=Kn(function(Ay){var My=kd(Ay);return My="function"==typeof My?My:qe,fs(rn(Ay,1,Mc,!0),qe,My)}),Uf=Kn(function(Ay,My){return Mc(Ay)?Ji(Ay,My):[]}),Of=Kn(function(Ay){return Ts(X(Ay,Mc))}),kf=Kn(function(Ay){var My=kd(Ay);return Mc(My)&&(My=qe),Ts(X(Ay,Mc),Nl(My,2))}),Vf=Kn(function(Ay){var My=kd(Ay);return My="function"==typeof My?My:qe,Ts(X(Ay,Mc),qe,My)}),Gf=Kn(yp),Hf=Kn(function(Ay){var My=Ay.length,Ry=1<My?Ay[My-1]:qe;return Ry="function"==typeof Ry?(Ay.pop(),Ry):qe,_p(Ay,Ry)}),Wf=Cl(function(Ay){var My=Ay.length,Ry=My?Ay[0]:0,Cy=this.__wrapped__,Py=function(Ly){return Hi(Ly,Ay)};return 1<My||this.__actions__.length||!(Cy instanceof ko)||!Zl(Ry)?this.thru(Py):(Cy=Cy.slice(Ry,+Ry+(My?1:0)),Cy.__actions__.push({func:Ap,args:[Py],thisArg:qe}),new Oo(Cy,this.__chain__).thru(function(Ly){return My&&!Ly.length&&Ly.push(qe),Ly}))}),jf=Hs(function(Ay,My,Ry){ig.call(Ay,Ry)?++Ay[Ry]:Gi(Ay,Ry,1)}),qf=Ks(Pd),Xf=Ks(Ld),Yf=Hs(function(Ay,My,Ry){ig.call(Ay,Ry)?Ay[Ry].push(My):Gi(Ay,Ry,[My])}),Zf=Kn(function(Ay,My,Ry){var Cy=-1,Ly=Ac(Ay)?Wm(Ay.length):[];return of(Ay,function(Iy){Ly[++Cy]="function"==typeof My?U(My,Iy,Ry):xn(Iy,My,Ry)}),Ly}),Jf=Hs(function(Ay,My,Ry){Gi(Ay,Ry,My)}),Qf=Hs(function(Ay,My,Ry){Ay[Ry?0:1].push(My)},function(){return[[],[]]}),Kf=Kn(function(Ay,My){if(null==Ay)return[];var Ry=My.length;return 1<Ry&&Jl(Ay,My[0],My[1])?My=[]:2<Ry&&Jl(My[0],My[1],My[2])&&(My=[My[0]]),Hn(Ay,rn(My,1),[])}),$f=Ag||function(){return yo.Date.now()},eh=Kn(function(Ay,My,Ry){var Cy=nt;if(Ry.length){var Py=ze(Ry,Bl(eh));Cy|=ht}return Tl(Ay,Cy,My,Ry,Py)}),th=Kn(function(Ay,My,Ry){var Cy=nt|ct;if(Ry.length){var Py=ze(Ry,Bl(th));Cy|=ht}return Tl(My,Cy,Ay,Ry,Py)}),rh=Kn(function(Ay,My){return Zi(Ay,1,My)}),ah=Kn(function(Ay,My,Ry){return Zi(Ay,ou(My)||0,Ry)});sc.Cache=di;var oh=Kn(function(Ay,My){My=1==My.length&&ch(My[0])?J(My[0],Te(Nl())):J(rn(My,1),Te(Nl()));var Ry=My.length;return Kn(function(Cy){for(var Py=-1,Ly=zg(Cy.length,Ry);++Py<Ly;)Cy[Py]=My[Py].call(this,Cy[Py]);return U(Ay,this,Cy)})}),ih=Kn(function(Ay,My){var Ry=ze(My,Bl(ih));return Tl(Ay,ht,qe,My,Ry)}),nh=Kn(function(Ay,My){var Ry=ze(My,Bl(nh));return Tl(Ay,yt,qe,My,Ry)}),sh=Cl(function(Ay,My){return Tl(Ay,xt,qe,qe,qe,My)}),lh=yl(cn),dh=yl(function(Ay,My){return Ay>=My}),ph=Tn(function(){return arguments}())?Tn:function(Ay){return Oc(Ay)&&ig.call(Ay,"callee")&&!_g.call(Ay,"callee")},ch=Wm.isArray,uh=Eo?Te(Eo):function(Ay){return Oc(Ay)&&pn(Ay)==lr},mh=Pg||Cm,gh=So?Te(So):function(Ay){return Oc(Ay)&&pn(Ay)==Vt},fh=Ao?Te(Ao):function(Ay){return Oc(Ay)&&vf(Ay)==qt},hh=wo?Te(wo):function(Ay){return Oc(Ay)&&pn(Ay)==Kt},yh=Mo?Te(Mo):function(Ay){return Oc(Ay)&&vf(Ay)==$t},_h=Ro?Te(Ro):function(Ay){return Oc(Ay)&&Fc(Ay.length)&&!!io[pn(Ay)]},xh=yl(Dn),vh=yl(function(Ay,My){return Ay<=My}),bh=Ws(function(Ay,My){if(td(My)||Ac(My))return void ks(My,Su(My),Ay);for(var Ry in My)ig.call(My,Ry)&&Fi(Ay,Ry,My[Ry])}),Th=Ws(function(Ay,My){ks(My,Au(My),Ay)}),Eh=Ws(function(Ay,My,Ry,Cy){ks(My,Au(My),Ay,Cy)}),Sh=Ws(function(Ay,My,Ry,Cy){ks(My,Su(My),Ay,Cy)}),Ah=Cl(Hi),wh=Kn(function(Ay,My){Ay=Jm(Ay);var Ry=-1,Cy=My.length,Py=2<Cy?My[2]:qe;for(Py&&Jl(My[0],My[1],Py)&&(Cy=1);++Ry<Cy;)for(var Ly=My[Ry],Iy=Au(Ly),By=-1,Ny=Iy.length;++By<Ny;){var zy=Iy[By],Dy=Ay[zy];(Dy===qe||Sc(Dy,rg[zy])&&!ig.call(Ay,zy))&&(Ay[zy]=Ly[zy])}return Ay}),Mh=Kn(function(Ay){return Ay.push(qe,Sl),U(Ih,qe,Ay)}),Rh=rl(function(Ay,My,Ry){null!=My&&"function"!=typeof My.toString&&(My=lg.call(My)),Ay[My]=Ry},hm(_m)),Ch=rl(function(Ay,My,Ry){null!=My&&"function"!=typeof My.toString&&(My=lg.call(My)),ig.call(Ay,My)?Ay[My].push(Ry):Ay[My]=[Ry]},Nl),Ph=Kn(xn),Lh=Ws(function(Ay,My,Ry){kn(Ay,My,Ry)}),Ih=Ws(function(Ay,My,Ry,Cy){kn(Ay,My,Ry,Cy)}),Bh=Cl(function(Ay,My){var Ry={};if(null==Ay)return Ry;var Cy=!1;My=J(My,function(Ly){return Ly=ws(Ly,Ay),Cy||(Cy=1<Ly.length),Ly}),ks(Ay,Ll(Ay),Ry),Cy&&(Ry=ji(Ry,et|tt|rt,Al));for(var Py=My.length;Py--;)hs(Ry,My[Py]);return Ry}),Nh=Cl(function(Ay,My){return null==Ay?{}:Wn(Ay,My)}),zh=bl(Su),Dh=bl(Au),Fh=Zs(function(Ay,My,Ry){return My=My.toLowerCase(),Ay+(Ry?Gu(My):My)}),Uh=Zs(function(Ay,My,Ry){return Ay+(Ry?"-":"")+My.toLowerCase()}),Oh=Zs(function(Ay,My,Ry){return Ay+(Ry?" ":"")+My.toLowerCase()}),kh=Ys("toLowerCase"),Vh=Zs(function(Ay,My,Ry){return Ay+(Ry?"_":"")+My.toLowerCase()}),Gh=Zs(function(Ay,My,Ry){return Ay+(Ry?" ":"")+Wh(My)}),Hh=Zs(function(Ay,My,Ry){return Ay+(Ry?" ":"")+My.toUpperCase()}),Wh=Ys("toUpperCase"),jh=Kn(function(Ay,My){try{return U(Ay,qe,My)}catch(Ry){return Bc(Ry)?Ry:new Xm(Ry)}}),qh=Cl(function(Ay,My){return G(My,function(Ry){Ry=yd(Ry),Gi(Ay,Ry,eh(Ay[Ry],Ay))}),Ay}),Xh=$s(),Yh=$s(!0),Zh=Kn(function(Ay,My){return function(Ry){return xn(Ry,Ay,My)}}),Jh=Kn(function(Ay,My){return function(Ry){return xn(Ay,Ry,My)}}),Qh=nl(J),Kh=nl(W),$h=nl(ee),ey=ul(),ry=ul(!0),ly=al(function(Ay,My){return Ay+My},0),uy=xl("ceil"),fy=al(function(Ay,My){return Ay/My},1),_y=xl("floor"),Ty=al(function(Ay,My){return Ay*My},1),Ey=xl("round"),Sy=al(function(Ay,My){return Ay-My},0);return Fo.after=function(Ay,My){if("function"!=typeof My)throw new $m(Je);return Ay=ru(Ay),function(){if(1>--Ay)return My.apply(this,arguments)}},Fo.ary=$p,Fo.assign=bh,Fo.assignIn=Th,Fo.assignInWith=Eh,Fo.assignWith=Sh,Fo.at=Ah,Fo.before=ec,Fo.bind=eh,Fo.bindAll=qh,Fo.bindKey=th,Fo.castArray=function(){if(!arguments.length)return[];var Ay=arguments[0];return ch(Ay)?Ay:[Ay]},Fo.chain=Ep,Fo.chunk=function(Ay,My,Ry){My=(Ry?Jl(Ay,My,Ry):My===qe)?1:Ng(ru(My),0);var Cy=null==Ay?0:Ay.length;if(!Cy||1>My)return[];for(var Py=0,Ly=0,Iy=Wm(Mg(Cy/My));Py<Cy;)Iy[Ly++]=is(Ay,Py,Py+=My);return Iy},Fo.compact=function(Ay){for(var My=-1,Ry=null==Ay?0:Ay.length,Cy=0,Py=[],Ly;++My<Ry;)Ly=Ay[My],Ly&&(Py[Cy++]=Ly);return Py},Fo.concat=function(){var Ay=arguments.length;if(!Ay)return[];for(var My=Wm(Ay-1),Ry=arguments[0],Cy=Ay;Cy--;)My[Cy-1]=arguments[Cy];return Q(ch(Ry)?Os(Ry):[Ry],rn(My,1))},Fo.cond=function(Ay){var My=null==Ay?0:Ay.length,Ry=Nl();return Ay=My?J(Ay,function(Cy){if("function"!=typeof Cy[1])throw new $m(Je);return[Ry(Cy[0]),Cy[1]]}):[],Kn(function(Cy){for(var Py=-1,Ly;++Py<My;)if(Ly=Ay[Py],U(Ly[0],this,Cy))return U(Ly[1],this,Cy)})},Fo.conforms=function(Ay){return Xi(ji(Ay,et))},Fo.constant=hm,Fo.countBy=jf,Fo.create=function(Ay,My){var Ry=rf(Ay);return null==My?Ry:ki(Ry,My)},Fo.curry=tc,Fo.curryRight=rc,Fo.debounce=oc,Fo.defaults=wh,Fo.defaultsDeep=Mh,Fo.defer=rh,Fo.delay=ah,Fo.difference=Mf,Fo.differenceBy=Rf,Fo.differenceWith=Cf,Fo.drop=function(Ay,My,Ry){var Cy=null==Ay?0:Ay.length;return Cy?(My=Ry||My===qe?1:ru(My),is(Ay,0>My?0:My,Cy)):[]},Fo.dropRight=function(Ay,My,Ry){var Cy=null==Ay?0:Ay.length;return Cy?(My=Ry||My===qe?1:ru(My),My=Cy-My,is(Ay,0,0>My?0:My)):[]},Fo.dropRightWhile=function(Ay,My){return Ay&&Ay.length?_s(Ay,Nl(My,3),!0,!0):[]},Fo.dropWhile=function(Ay,My){return Ay&&Ay.length?_s(Ay,Nl(My,3),!0):[]},Fo.fill=function(Ay,My,Ry,Cy){var Py=null==Ay?0:Ay.length;return Py?(Ry&&"number"!=typeof Ry&&Jl(Ay,My,Ry)&&(Ry=0,Cy=Py),$i(Ay,My,Ry,Cy)):[]},Fo.filter=function(Ay,My){var Ry=ch(Ay)?X:tn;return Ry(Ay,Nl(My,3))},Fo.flatMap=function(Ay,My){return rn(Gp(Ay,My),1)},Fo.flatMapDeep=function(Ay,My){return rn(Gp(Ay,My),Ct)},Fo.flatMapDepth=function(Ay,My,Ry){return Ry=Ry===qe?1:ru(Ry),rn(Gp(Ay,My),Ry)},Fo.flatten=Id,Fo.flattenDeep=function(Ay){var My=null==Ay?0:Ay.length;return My?rn(Ay,Ct):[]},Fo.flattenDepth=function(Ay,My){var Ry=null==Ay?0:Ay.length;return Ry?(My=My===qe?1:ru(My),rn(Ay,My)):[]},Fo.flip=function(Ay){return Tl(Ay,vt)},Fo.flow=Xh,Fo.flowRight=Yh,Fo.fromPairs=function(Ay){for(var My=-1,Ry=null==Ay?0:Ay.length,Cy={},Py;++My<Ry;)Py=Ay[My],Cy[Py[0]]=Py[1];return Cy},Fo.functions=function(Ay){return null==Ay?[]:sn(Ay,Su(Ay))},Fo.functionsIn=function(Ay){return null==Ay?[]:sn(Ay,Au(Ay))},Fo.groupBy=Yf,Fo.initial=function(Ay){var My=null==Ay?0:Ay.length;return My?is(Ay,0,-1):[]},Fo.intersection=Pf,Fo.intersectionBy=Lf,Fo.intersectionWith=If,Fo.invert=Rh,Fo.invertBy=Ch,Fo.invokeMap=Zf,Fo.iteratee=xm,Fo.keyBy=Jf,Fo.keys=Su,Fo.keysIn=Au,Fo.map=Gp,Fo.mapKeys=function(Ay,My){var Ry={};return My=Nl(My,3),on(Ay,function(Cy,Py,Ly){Gi(Ry,My(Cy,Py,Ly),Cy)}),Ry},Fo.mapValues=function(Ay,My){var Ry={};return My=Nl(My,3),on(Ay,function(Cy,Py,Ly){Gi(Ry,Py,My(Cy,Py,Ly))}),Ry},Fo.matches=function(Ay){return Un(ji(Ay,et))},Fo.matchesProperty=function(Ay,My){return On(Ay,ji(My,et))},Fo.memoize=sc,Fo.merge=Lh,Fo.mergeWith=Ih,Fo.method=Zh,Fo.methodOf=Jh,Fo.mixin=Tm,Fo.negate=lc,Fo.nthArg=function(Ay){return Ay=ru(Ay),Kn(function(My){return Gn(My,Ay)})},Fo.omit=Bh,Fo.omitBy=function(Ay,My){return Cu(Ay,lc(Nl(My)))},Fo.once=function(Ay){return ec(2,Ay)},Fo.orderBy=function(Ay,My,Ry,Cy){return null==Ay?[]:(ch(My)||(My=null==My?[]:[My]),Ry=Cy?qe:Ry,ch(Ry)||(Ry=null==Ry?[]:[Ry]),Hn(Ay,My,Ry))},Fo.over=Qh,Fo.overArgs=oh,Fo.overEvery=Kh,Fo.overSome=$h,Fo.partial=ih,Fo.partialRight=nh,Fo.partition=Qf,Fo.pick=Nh,Fo.pickBy=Cu,Fo.property=wm,Fo.propertyOf=function(Ay){return function(My){return null==Ay?qe:ln(Ay,My)}},Fo.pull=Bf,Fo.pullAll=Hd,Fo.pullAllBy=function(Ay,My,Ry){return Ay&&Ay.length&&My&&My.length?Xn(Ay,My,Nl(Ry,2)):Ay},Fo.pullAllWith=function(Ay,My,Ry){return Ay&&Ay.length&&My&&My.length?Xn(Ay,My,qe,Ry):Ay},Fo.pullAt=Nf,Fo.range=ey,Fo.rangeRight=ry,Fo.rearg=sh,Fo.reject=function(Ay,My){var Ry=ch(Ay)?X:tn;return Ry(Ay,lc(Nl(My,3)))},Fo.remove=function(Ay,My){var Ry=[];if(!(Ay&&Ay.length))return Ry;var Cy=-1,Py=[],Ly=Ay.length;for(My=Nl(My,3);++Cy<Ly;){var Iy=Ay[Cy];My(Iy,Cy,Ay)&&(Ry.push(Iy),Py.push(Cy))}return Yn(Ay,Py),Ry},Fo.rest=function(Ay,My){if("function"!=typeof Ay)throw new $m(Je);return My=My===qe?My:ru(My),Kn(Ay,My)},Fo.reverse=Xd,Fo.sampleSize=function(Ay,My,Ry){My=(Ry?Jl(Ay,My,Ry):My===qe)?1:ru(My);var Cy=ch(Ay)?Bi:rs;return Cy(Ay,My)},Fo.set=function(Ay,My,Ry){return null==Ay?Ay:as(Ay,My,Ry)},Fo.setWith=function(Ay,My,Ry,Cy){return Cy="function"==typeof Cy?Cy:qe,null==Ay?Ay:as(Ay,My,Ry,Cy)},Fo.shuffle=function(Ay){var My=ch(Ay)?Ni:os;return My(Ay)},Fo.slice=function(Ay,My,Ry){var Cy=null==Ay?0:Ay.length;return Cy?(Ry&&"number"!=typeof Ry&&Jl(Ay,My,Ry)?(My=0,Ry=Cy):(My=null==My?0:ru(My),Ry=Ry===qe?Cy:ru(Ry)),is(Ay,My,Ry)):[]},Fo.sortBy=Kf,Fo.sortedUniq=function(Ay){return Ay&&Ay.length?ps(Ay):[]},Fo.sortedUniqBy=function(Ay,My){return Ay&&Ay.length?ps(Ay,Nl(My,2)):[]},Fo.split=function(Ay,My,Ry){return(Ry&&"number"!=typeof Ry&&Jl(Ay,My,Ry)&&(My=Ry=qe),Ry=Ry===qe?Bt:Ry>>>0,!Ry)?[]:(Ay=lu(Ay),Ay&&("string"==typeof My||null!=My&&!hh(My))&&(My=ms(My),!My&&Pe(Ay))?Ms(Ge(Ay),0,Ry):Ay.split(My,Ry))},Fo.spread=function(Ay,My){if("function"!=typeof Ay)throw new $m(Je);return My=null==My?0:Ng(ru(My),0),Kn(function(Ry){var Cy=Ry[My],Py=Ms(Ry,0,My);return Cy&&Q(Py,Cy),U(Ay,this,Py)})},Fo.tail=function(Ay){var My=null==Ay?0:Ay.length;return My?is(Ay,1,My):[]},Fo.take=function(Ay,My,Ry){return Ay&&Ay.length?(My=Ry||My===qe?1:ru(My),is(Ay,0,0>My?0:My)):[]},Fo.takeRight=function(Ay,My,Ry){var Cy=null==Ay?0:Ay.length;return Cy?(My=Ry||My===qe?1:ru(My),My=Cy-My,is(Ay,0>My?0:My,Cy)):[]},Fo.takeRightWhile=function(Ay,My){return Ay&&Ay.length?_s(Ay,Nl(My,3),!1,!0):[]},Fo.takeWhile=function(Ay,My){return Ay&&Ay.length?_s(Ay,Nl(My,3)):[]},Fo.tap=function(Ay,My){return My(Ay),Ay},Fo.throttle=function(Ay,My,Ry){var Cy=!0,Py=!0;if("function"!=typeof Ay)throw new $m(Je);return Uc(Ry)&&(Cy="leading"in Ry?!!Ry.leading:Cy,Py="trailing"in Ry?!!Ry.trailing:Py),oc(Ay,My,{leading:Cy,maxWait:My,trailing:Py})},Fo.thru=Ap,Fo.toArray=eu,Fo.toPairs=zh,Fo.toPairsIn=Dh,Fo.toPath=function(Ay){return ch(Ay)?J(Ay,yd):Jc(Ay)?[Ay]:Os(wf(lu(Ay)))},Fo.toPlainObject=iu,Fo.transform=function(Ay,My,Ry){var Cy=ch(Ay),Py=Cy||mh(Ay)||_h(Ay);if(My=Nl(My,4),null==Ry){var Ly=Ay&&Ay.constructor;Ry=Py?Cy?new Ly:[]:Uc(Ay)?zc(Ly)?rf(hg(Ay)):{}:{}}return(Py?G:on)(Ay,function(Iy,By,Ny){return My(Ry,Iy,By,Ny)}),Ry},Fo.unary=function(Ay){return $p(Ay,1)},Fo.union=zf,Fo.unionBy=Df,Fo.unionWith=Ff,Fo.uniq=function(Ay){return Ay&&Ay.length?fs(Ay):[]},Fo.uniqBy=function(Ay,My){return Ay&&Ay.length?fs(Ay,Nl(My,2)):[]},Fo.uniqWith=function(Ay,My){return My="function"==typeof My?My:qe,Ay&&Ay.length?fs(Ay,qe,My):[]},Fo.unset=function(Ay,My){return null==Ay||hs(Ay,My)},Fo.unzip=yp,Fo.unzipWith=_p,Fo.update=function(Ay,My,Ry){return null==Ay?Ay:ys(Ay,My,As(Ry))},Fo.updateWith=function(Ay,My,Ry,Cy){return Cy="function"==typeof Cy?Cy:qe,null==Ay?Ay:ys(Ay,My,As(Ry),Cy)},Fo.values=Fu,Fo.valuesIn=function(Ay){return null==Ay?[]:Ee(Ay,Au(Ay))},Fo.without=Uf,Fo.words=um,Fo.wrap=function(Ay,My){return ih(As(My),Ay)},Fo.xor=Of,Fo.xorBy=kf,Fo.xorWith=Vf,Fo.zip=Gf,Fo.zipObject=function(Ay,My){return Es(Ay||[],My||[],Fi)},Fo.zipObjectDeep=function(Ay,My){return Es(Ay||[],My||[],as)},Fo.zipWith=Hf,Fo.entries=zh,Fo.entriesIn=Dh,Fo.extend=Th,Fo.extendWith=Eh,Tm(Fo,Fo),Fo.add=ly,Fo.attempt=jh,Fo.camelCase=Fh,Fo.capitalize=Gu,Fo.ceil=uy,Fo.clamp=function(Ay,My,Ry){return Ry===qe&&(Ry=My,My=qe),Ry!==qe&&(Ry=ou(Ry),Ry=Ry===Ry?Ry:0),My!==qe&&(My=ou(My),My=My===My?My:0),Wi(ou(Ay),My,Ry)},Fo.clone=function(Ay){return ji(Ay,rt)},Fo.cloneDeep=function(Ay){return ji(Ay,et|rt)},Fo.cloneDeepWith=function(Ay,My){return My="function"==typeof My?My:qe,ji(Ay,et|rt,My)},Fo.cloneWith=function(Ay,My){return My="function"==typeof My?My:qe,ji(Ay,rt,My)},Fo.conformsTo=function(Ay,My){return null==My||Yi(Ay,My,Su(My))},Fo.deburr=Hu,Fo.defaultTo=function(Ay,My){return null==Ay||Ay!==Ay?My:Ay},Fo.divide=fy,Fo.endsWith=function(Ay,My,Ry){Ay=lu(Ay),My=ms(My);var Cy=Ay.length;Ry=Ry===qe?Cy:Wi(ru(Ry),0,Cy);var Py=Ry;return Ry-=My.length,0<=Ry&&Ay.slice(Ry,Py)==My},Fo.eq=Sc,Fo.escape=function(Ay){return Ay=lu(Ay),Ay&&Rr.test(Ay)?Ay.replace(wr,Lo):Ay},Fo.escapeRegExp=function(Ay){return Ay=lu(Ay),Ay&&Dr.test(Ay)?Ay.replace(zr,"\\$&"):Ay},Fo.every=function(Ay,My,Ry){var Cy=ch(Ay)?W:Qi;return Ry&&Jl(Ay,My,Ry)&&(My=qe),Cy(Ay,Nl(My,3))},Fo.find=qf,Fo.findIndex=Pd,Fo.findKey=function(Ay,My){return ie(Ay,Nl(My,3),on)},Fo.findLast=Xf,Fo.findLastIndex=Ld,Fo.findLastKey=function(Ay,My){return ie(Ay,Nl(My,3),nn)},Fo.floor=_y,Fo.forEach=Up,Fo.forEachRight=Op,Fo.forIn=function(Ay,My){return null==Ay?Ay:lf(Ay,Nl(My,3),Au)},Fo.forInRight=function(Ay,My){return null==Ay?Ay:pf(Ay,Nl(My,3),Au)},Fo.forOwn=function(Ay,My){return Ay&&on(Ay,Nl(My,3))},Fo.forOwnRight=function(Ay,My){return Ay&&nn(Ay,Nl(My,3))},Fo.get=bu,Fo.gt=lh,Fo.gte=dh,Fo.has=function(Ay,My){return null!=Ay&&Gl(Ay,My,un)},Fo.hasIn=Eu,Fo.head=Dd,Fo.identity=_m,Fo.includes=function(Ay,My,Ry,Cy){Ay=Ac(Ay)?Ay:Fu(Ay),Ry=Ry&&!Cy?ru(Ry):0;var Py=Ay.length;return 0>Ry&&(Ry=Ng(Py+Ry,0)),Zc(Ay)?Ry<=Py&&-1<Ay.indexOf(My,Ry):!!Py&&-1<se(Ay,My,Ry)},Fo.indexOf=function(Ay,My,Ry){var Cy=null==Ay?0:Ay.length;if(!Cy)return-1;var Py=null==Ry?0:ru(Ry);return 0>Py&&(Py=Ng(Cy+Py,0)),se(Ay,My,Py)},Fo.inRange=function(Ay,My,Ry){return My=tu(My),Ry===qe?(Ry=My,My=0):Ry=tu(Ry),Ay=ou(Ay),gn(Ay,My,Ry)},Fo.invoke=Ph,Fo.isArguments=ph,Fo.isArray=ch,Fo.isArrayBuffer=uh,Fo.isArrayLike=Ac,Fo.isArrayLikeObject=Mc,Fo.isBoolean=function(Ay){return!0===Ay||!1===Ay||Oc(Ay)&&pn(Ay)==kt},Fo.isBuffer=mh,Fo.isDate=gh,Fo.isElement=function(Ay){return Oc(Ay)&&1===Ay.nodeType&&!Xc(Ay)},Fo.isEmpty=function(Ay){if(null==Ay)return!0;if(Ac(Ay)&&(ch(Ay)||"string"==typeof Ay||"function"==typeof Ay.splice||mh(Ay)||_h(Ay)||ph(Ay)))return!Ay.length;var My=vf(Ay);if(My==qt||My==$t)return!Ay.size;if(td(Ay))return!Nn(Ay).length;for(var Ry in Ay)if(ig.call(Ay,Ry))return!1;return!0},Fo.isEqual=function(Ay,My){return An(Ay,My)},Fo.isEqualWith=function(Ay,My,Ry){Ry="function"==typeof Ry?Ry:qe;var Cy=Ry?Ry(Ay,My):qe;return Cy===qe?An(Ay,My,qe,Ry):!!Cy},Fo.isError=Bc,Fo.isFinite=function(Ay){return"number"==typeof Ay&&Lg(Ay)},Fo.isFunction=zc,Fo.isInteger=Dc,Fo.isLength=Fc,Fo.isMap=fh,Fo.isMatch=function(Ay,My){return Ay===My||Rn(Ay,My,Dl(My))},Fo.isMatchWith=function(Ay,My,Ry){return Ry="function"==typeof Ry?Ry:qe,Rn(Ay,My,Dl(My),Ry)},Fo.isNaN=function(Ay){return qc(Ay)&&Ay!=+Ay},Fo.isNative=function(Ay){if(Tf(Ay))throw new Xm("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Cn(Ay)},Fo.isNil=function(Ay){return null==Ay},Fo.isNull=function(Ay){return null===Ay},Fo.isNumber=qc,Fo.isObject=Uc,Fo.isObjectLike=Oc,Fo.isPlainObject=Xc,Fo.isRegExp=hh,Fo.isSafeInteger=function(Ay){return Dc(Ay)&&Ay>=-Pt&&Ay<=Pt},Fo.isSet=yh,Fo.isString=Zc,Fo.isSymbol=Jc,Fo.isTypedArray=_h,Fo.isUndefined=function(Ay){return Ay===qe},Fo.isWeakMap=function(Ay){return Oc(Ay)&&vf(Ay)==ir},Fo.isWeakSet=function(Ay){return Oc(Ay)&&pn(Ay)=="[object WeakSet]"},Fo.join=function(Ay,My){return null==Ay?"":Ig.call(Ay,My)},Fo.kebabCase=Uh,Fo.last=kd,Fo.lastIndexOf=function(Ay,My,Ry){var Cy=null==Ay?0:Ay.length;if(!Cy)return-1;var Py=Cy;return Ry!==qe&&(Py=ru(Ry),Py=0>Py?Ng(Cy+Py,0):zg(Py,Cy-1)),My===My?ke(Ay,My,Py):ne(Ay,pe,Py,!0)},Fo.lowerCase=Oh,Fo.lowerFirst=kh,Fo.lt=xh,Fo.lte=vh,Fo.max=function(Ay){return Ay&&Ay.length?Ki(Ay,_m,cn):qe},Fo.maxBy=function(Ay,My){return Ay&&Ay.length?Ki(Ay,Nl(My,2),cn):qe},Fo.mean=function(Ay){return ue(Ay,_m)},Fo.meanBy=function(Ay,My){return ue(Ay,Nl(My,2))},Fo.min=function(Ay){return Ay&&Ay.length?Ki(Ay,_m,Dn):qe},Fo.minBy=function(Ay,My){return Ay&&Ay.length?Ki(Ay,Nl(My,2),Dn):qe},Fo.stubArray=Rm,Fo.stubFalse=Cm,Fo.stubObject=function(){return{}},Fo.stubString=function(){return""},Fo.stubTrue=function(){return!0},Fo.multiply=Ty,Fo.nth=function(Ay,My){return Ay&&Ay.length?Gn(Ay,ru(My)):qe},Fo.noConflict=function(){return yo._===this&&(yo._=pg),this},Fo.noop=Sm,Fo.now=$f,Fo.pad=function(Ay,My,Ry){Ay=lu(Ay),My=ru(My);var Cy=My?Ve(Ay):0;if(!My||Cy>=My)return Ay;var Py=(My-Cy)/2;return ll(Rg(Py),Ry)+Ay+ll(Mg(Py),Ry)},Fo.padEnd=function(Ay,My,Ry){Ay=lu(Ay),My=ru(My);var Cy=My?Ve(Ay):0;return My&&Cy<My?Ay+ll(My-Cy,Ry):Ay},Fo.padStart=function(Ay,My,Ry){Ay=lu(Ay),My=ru(My);var Cy=My?Ve(Ay):0;return My&&Cy<My?ll(My-Cy,Ry)+Ay:Ay},Fo.parseInt=function(Ay,My,Ry){return Ry||null==My?My=0:My&&(My=+My),Fg(lu(Ay).replace(Ur,""),My||0)},Fo.random=function(Ay,My,Ry){if(Ry&&"boolean"!=typeof Ry&&Jl(Ay,My,Ry)&&(My=Ry=qe),Ry===qe&&("boolean"==typeof My?(Ry=My,My=qe):"boolean"==typeof Ay&&(Ry=Ay,Ay=qe)),Ay===qe&&My===qe?(Ay=0,My=1):(Ay=tu(Ay),My===qe?(My=Ay,Ay=0):My=tu(My)),Ay>My){var Cy=Ay;Ay=My,My=Cy}if(Ry||Ay%1||My%1){var Py=Ug();return zg(Ay+Py*(My-Ay+uo("1e-"+((Py+"").length-1))),My)}return Zn(Ay,My)},Fo.reduce=function(Ay,My,Ry){var Cy=ch(Ay)?K:he,Py=3>arguments.length;return Cy(Ay,Nl(My,4),Ry,Py,of)},Fo.reduceRight=function(Ay,My,Ry){var Cy=ch(Ay)?$:he,Py=3>arguments.length;return Cy(Ay,Nl(My,4),Ry,Py,nf)},Fo.repeat=function(Ay,My,Ry){return My=(Ry?Jl(Ay,My,Ry):My===qe)?1:ru(My),Qn(lu(Ay),My)},Fo.replace=function(){var Ay=arguments,My=lu(Ay[0]);return 3>Ay.length?My:My.replace(Ay[1],Ay[2])},Fo.result=function(Ay,My,Ry){My=ws(My,Ay);var Cy=-1,Py=My.length;for(Py||(Py=1,Ay=qe);++Cy<Py;){var Ly=null==Ay?qe:Ay[yd(My[Cy])];Ly===qe&&(Cy=Py,Ly=Ry),Ay=zc(Ly)?Ly.call(Ay):Ly}return Ay},Fo.round=Ey,Fo.runInContext=zo,Fo.sample=function(Ay){var My=ch(Ay)?Ii:$n;return My(Ay)},Fo.size=function(Ay){if(null==Ay)return 0;if(Ac(Ay))return Zc(Ay)?Ve(Ay):Ay.length;var My=vf(Ay);return My==qt||My==$t?Ay.size:Nn(Ay).length},Fo.snakeCase=Vh,Fo.some=function(Ay,My,Ry){var Cy=ch(Ay)?ee:ss;return Ry&&Jl(Ay,My,Ry)&&(My=qe),Cy(Ay,Nl(My,3))},Fo.sortedIndex=function(Ay,My){return ls(Ay,My)},Fo.sortedIndexBy=function(Ay,My,Ry){return ds(Ay,My,Nl(Ry,2))},Fo.sortedIndexOf=function(Ay,My){var Ry=null==Ay?0:Ay.length;if(Ry){var Cy=ls(Ay,My);if(Cy<Ry&&Sc(Ay[Cy],My))return Cy}return-1},Fo.sortedLastIndex=function(Ay,My){return ls(Ay,My,!0)},Fo.sortedLastIndexBy=function(Ay,My,Ry){return ds(Ay,My,Nl(Ry,2),!0)},Fo.sortedLastIndexOf=function(Ay,My){var Ry=null==Ay?0:Ay.length;if(Ry){var Cy=ls(Ay,My,!0)-1;if(Sc(Ay[Cy],My))return Cy}return-1},Fo.startCase=Gh,Fo.startsWith=function(Ay,My,Ry){return Ay=lu(Ay),Ry=null==Ry?0:Wi(ru(Ry),0,Ay.length),My=ms(My),Ay.slice(Ry,Ry+My.length)==My},Fo.subtract=Sy,Fo.sum=function(Ay){return Ay&&Ay.length?_e(Ay,_m):0},Fo.sumBy=function(Ay,My){return Ay&&Ay.length?_e(Ay,Nl(My,2)):0},Fo.template=function(Ay,My,Ry){var Cy=Fo.templateSettings;Ry&&Jl(Ay,My,Ry)&&(My=qe),Ay=lu(Ay),My=Eh({},My,Cy,El);var Py=Eh({},My.imports,Cy.imports,El),Ly=Su(Py),Iy=Ee(Py,Ly),zy=0,Dy=My.interpolate||$r,Fy="__p += '",Uy=Qm((My.escape||$r).source+"|"+Dy.source+"|"+(Dy===Lr?jr:$r).source+"|"+(My.evaluate||$r).source+"|$","g"),Oy="//# sourceURL="+("sourceURL"in My?My.sourceURL:"lodash.templateSources["+ ++oo+"]")+"\n",By,Ny;Ay.replace(Uy,function(Gy,Hy,Wy,jy,Xy,Yy){return Wy||(Wy=jy),Fy+=Ay.slice(zy,Yy).replace(ra,Re),Hy&&(By=!0,Fy+="' +\n__e("+Hy+") +\n'"),Xy&&(Ny=!0,Fy+="';\n"+Xy+";\n__p += '"),Wy&&(Fy+="' +\n((__t = ("+Wy+")) == null ? '' : __t) +\n'"),zy=Yy+Gy.length,Gy}),Fy+="';\n";var ky=My.variable;ky||(Fy="with (obj) {\n"+Fy+"\n}\n"),Fy=(Ny?Fy.replace(Tr,""):Fy).replace(Er,"$1").replace(Sr,"$1;"),Fy="function("+(ky||"obj")+") {\n"+(ky?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(By?", __e = _.escape":"")+(Ny?", __j = Array.prototype.join;\\nfunction print() { __p += __j.call(arguments, \\'\\') }\\n":";\n")+Fy+"return __p\n}";var Vy=jh(function(){return Ym(Ly,Oy+"return "+Fy).apply(qe,Iy)});if(Vy.source=Fy,Bc(Vy))throw Vy;return Vy},Fo.times=function(Ay,My){if(Ay=ru(Ay),1>Ay||Ay>Pt)return[];var Ry=Bt,Cy=zg(Ay,Bt);My=Nl(My),Ay-=Bt;for(var Py=xe(Cy,My);++Ry<Ay;)My(Ry);return Py},Fo.toFinite=tu,Fo.toInteger=ru,Fo.toLength=au,Fo.toLower=function(Ay){return lu(Ay).toLowerCase()},Fo.toNumber=ou,Fo.toSafeInteger=function(Ay){return Ay?Wi(ru(Ay),-Pt,Pt):0===Ay?Ay:0},Fo.toString=lu,Fo.toUpper=function(Ay){return lu(Ay).toUpperCase()},Fo.trim=function(Ay,My,Ry){if(Ay=lu(Ay),Ay&&(Ry||My===qe))return Ay.replace(Fr,"");if(!Ay||!(My=ms(My)))return Ay;var Cy=Ge(Ay),Py=Ge(My),Ly=Ae(Cy,Py),Iy=we(Cy,Py)+1;return Ms(Cy,Ly,Iy).join("")},Fo.trimEnd=function(Ay,My,Ry){if(Ay=lu(Ay),Ay&&(Ry||My===qe))return Ay.replace(Or,"");if(!Ay||!(My=ms(My)))return Ay;var Cy=Ge(Ay),Py=we(Cy,Ge(My))+1;return Ms(Cy,0,Py).join("")},Fo.trimStart=function(Ay,My,Ry){if(Ay=lu(Ay),Ay&&(Ry||My===qe))return Ay.replace(Ur,"");if(!Ay||!(My=ms(My)))return Ay;var Cy=Ge(Ay),Py=Ae(Cy,Ge(My));return Ms(Cy,Py).join("")},Fo.truncate=function(Ay,My){var Ry=30,Cy="...";if(Uc(My)){var Py="separator"in My?My.separator:Py;Ry="length"in My?ru(My.length):Ry,Cy="omission"in My?ms(My.omission):Cy}Ay=lu(Ay);var Ly=Ay.length;if(Pe(Ay)){var Iy=Ge(Ay);Ly=Iy.length}if(Ry>=Ly)return Ay;var By=Ry-Ve(Cy);if(1>By)return Cy;var Ny=Iy?Ms(Iy,0,By).join(""):Ay.slice(0,By);if(Py===qe)return Ny+Cy;if(Iy&&(By+=Ny.length-By),hh(Py)){if(Ay.slice(By).search(Py)){var Dy=Ny,zy;for(Py.global||(Py=Qm(Py.source,lu(qr.exec(Py))+"g")),Py.lastIndex=0;zy=Py.exec(Dy);)var Fy=zy.index;Ny=Ny.slice(0,Fy===qe?By:Fy)}}else if(Ay.indexOf(ms(Py),By)!=By){var Uy=Ny.lastIndexOf(Py);-1<Uy&&(Ny=Ny.slice(0,Uy))}return Ny+Cy},Fo.unescape=function(Ay){return Ay=lu(Ay),Ay&&Mr.test(Ay)?Ay.replace(Ar,Io):Ay},Fo.uniqueId=function(Ay){var My=++ng;return lu(Ay)+My},Fo.upperCase=Hh,Fo.upperFirst=Wh,Fo.each=Up,Fo.eachRight=Op,Fo.first=Dd,Tm(Fo,function(){var Ay={};return on(Fo,function(My,Ry){ig.call(Fo.prototype,Ry)||(Ay[Ry]=My)}),Ay}(),{chain:!1}),Fo.VERSION="4.17.5",G(["bind","bindKey","curry","curryRight","partial","partialRight"],function(Ay){Fo[Ay].placeholder=Fo}),G(["drop","take"],function(Ay,My){ko.prototype[Ay]=function(Ry){Ry=Ry===qe?1:Ng(ru(Ry),0);var Cy=this.__filtered__&&!My?new ko(this):this.clone();return Cy.__filtered__?Cy.__takeCount__=zg(Ry,Cy.__takeCount__):Cy.__views__.push({size:zg(Ry,Bt),type:Ay+(0>Cy.__dir__?"Right":"")}),Cy},ko.prototype[Ay+"Right"]=function(Ry){return this.reverse()[Ay](Ry).reverse()}}),G(["filter","map","takeWhile"],function(Ay,My){var Ry=My+1;ko.prototype[Ay]=function(Py){var Ly=this.clone();return Ly.__iteratees__.push({iteratee:Nl(Py,3),type:Ry}),Ly.__filtered__=Ly.__filtered__||Ry==At||Ry==3,Ly}}),G(["head","last"],function(Ay,My){var Ry="take"+(My?"Right":"");ko.prototype[Ay]=function(){return this[Ry](1).value()[0]}}),G(["initial","tail"],function(Ay,My){var Ry="drop"+(My?"":"Right");ko.prototype[Ay]=function(){return this.__filtered__?new ko(this):this[Ry](1)}}),ko.prototype.compact=function(){return this.filter(_m)},ko.prototype.find=function(Ay){return this.filter(Ay).head()},ko.prototype.findLast=function(Ay){return this.reverse().find(Ay)},ko.prototype.invokeMap=Kn(function(Ay,My){return"function"==typeof Ay?new ko(this):this.map(function(Ry){return xn(Ry,Ay,My)})}),ko.prototype.reject=function(Ay){return this.filter(lc(Nl(Ay)))},ko.prototype.slice=function(Ay,My){Ay=ru(Ay);var Ry=this;return Ry.__filtered__&&(0<Ay||0>My)?new ko(Ry):(0>Ay?Ry=Ry.takeRight(-Ay):Ay&&(Ry=Ry.drop(Ay)),My!==qe&&(My=ru(My),Ry=0>My?Ry.dropRight(-My):Ry.take(My-Ay)),Ry)},ko.prototype.takeRightWhile=function(Ay){return this.reverse().takeWhile(Ay).reverse()},ko.prototype.toArray=function(){return this.take(Bt)},on(ko.prototype,function(Ay,My){var Ry=/^(?:filter|find|map|reject)|While$/.test(My),Cy=/^(?:head|last)$/.test(My),Py=Fo[Cy?"take"+("last"==My?"Right":""):My],Ly=Cy||/^find/.test(My);Py&&(Fo.prototype[My]=function(){var Iy=this.__wrapped__,By=Cy?[1]:arguments,Ny=Iy instanceof ko,zy=By[0],Dy=Ny||ch(Iy),Fy=function(Hy){var Wy=Py.apply(Fo,Q([Hy],By));return Cy&&Uy?Wy[0]:Wy};Dy&&Ry&&"function"==typeof zy&&1!=zy.length&&(Ny=Dy=!1);var Uy=this.__chain__,Oy=!!this.__actions__.length,ky=Ly&&!Uy,Vy=Ny&&!Oy;if(!Ly&&Dy){Iy=Vy?Iy:new ko(this);var Gy=Ay.apply(Iy,By);return Gy.__actions__.push({func:Ap,args:[Fy],thisArg:qe}),new Oo(Gy,Uy)}return ky&&Vy?Ay.apply(this,By):(Gy=this.thru(Fy),ky?Cy?Gy.value()[0]:Gy.value():Gy)})}),G(["pop","push","shift","sort","splice","unshift"],function(Ay){var My=eg[Ay],Ry=/^(?:push|sort|unshift)$/.test(Ay)?"tap":"thru",Cy=/^(?:pop|shift)$/.test(Ay);Fo.prototype[Ay]=function(){var Py=arguments;if(Cy&&!this.__chain__){var Ly=this.value();return My.apply(ch(Ly)?Ly:[],Py)}return this[Ry](function(Iy){return My.apply(ch(Iy)?Iy:[],Py)})}}),on(ko.prototype,function(Ay,My){var Ry=Fo[My];if(Ry){var Cy=Ry.name+"",Py=Xg[Cy]||(Xg[Cy]=[]);Py.push({name:My,func:Ry})}}),Xg[el(qe,ct).name]=[{name:"wrapper",func:qe}],ko.prototype.clone=function(){var Ay=new ko(this.__wrapped__);return Ay.__actions__=Os(this.__actions__),Ay.__dir__=this.__dir__,Ay.__filtered__=this.__filtered__,Ay.__iteratees__=Os(this.__iteratees__),Ay.__takeCount__=this.__takeCount__,Ay.__views__=Os(this.__views__),Ay},ko.prototype.reverse=function(){if(this.__filtered__){var Ay=new ko(this);Ay.__dir__=-1,Ay.__filtered__=!0}else Ay=this.clone(),Ay.__dir__*=-1;return Ay},ko.prototype.value=function(){var Ay=this.__wrapped__.value(),My=this.__dir__,Ry=ch(Ay),Cy=0>My,Py=Ry?Ay.length:0,Ly=Ol(0,Py,this.__views__),Iy=Ly.start,By=Ly.end,Ny=By-Iy,zy=Cy?By:Iy-1,Dy=this.__iteratees__,Fy=Dy.length,Uy=0,Oy=zg(Ny,this.__takeCount__);if(!Ry||!Cy&&Py==Ny&&Oy==Ny)return xs(Ay,this.__actions__);var ky=[];outer:for(;Ny--&&Uy<Oy;){zy+=My;for(var Vy=-1,Gy=Ay[zy];++Vy<Fy;){var Hy=Dy[Vy],Wy=Hy.iteratee,jy=Hy.type,Xy=Wy(Gy);if(jy==2)Gy=Xy;else if(!Xy)if(jy==At)continue outer;else break outer}ky[Uy++]=Gy}return ky},Fo.prototype.at=Wf,Fo.prototype.chain=function(){return Ep(this)},Fo.prototype.commit=function(){return new Oo(this.value(),this.__chain__)},Fo.prototype.next=function(){this.__values__===qe&&(this.__values__=eu(this.value()));var Ay=this.__index__>=this.__values__.length,My=Ay?qe:this.__values__[this.__index__++];return{done:Ay,value:My}},Fo.prototype.plant=function(Ay){for(var Ry=this,My,Cy;Ry instanceof Uo;){Cy=vd(Ry),Cy.__index__=0,Cy.__values__=qe,My?Py.__wrapped__=Cy:My=Cy;var Py=Cy;Ry=Ry.__wrapped__}return Py.__wrapped__=Ay,My},Fo.prototype.reverse=function(){var Ay=this.__wrapped__;if(Ay instanceof ko){var My=Ay;return this.__actions__.length&&(My=new ko(this)),My=My.reverse(),My.__actions__.push({func:Ap,args:[Xd],thisArg:qe}),new Oo(My,this.__chain__)}return this.thru(Xd)},Fo.prototype.toJSON=Fo.prototype.valueOf=Fo.prototype.value=function(){return xs(this.__wrapped__,this.__actions__)},Fo.prototype.first=Fo.prototype.head,bg&&(Fo.prototype[bg]=function(){return this}),Fo}();yo._=No,F=function(){return No}.call(S,A,S,D),!(F!==qe&&(D.exports=F))}).call(this)}).call(S,A(5),A(23)(E))},function(E){var A=function(){return this}();try{A=A||Function("return this")()||(1,eval)("this")}catch(L){"object"==typeof window&&(A=window)}E.exports=A},function(E){var L,L;!function(D){E.exports=D()}(function(){return function O(G,H,W){function X(J,Q){if(!H[J]){if(!G[J]){if(!Q&&"function"==typeof L&&L)return L(J,!0);if(Y)return Y(J,!0);throw new Error("Cannot find module '"+J+"'")}var $=H[J]={exports:{}};G[J][0].call($.exports,function(ee){var re=G[J][1][ee];return X(re?re:ee)},$,$.exports,O,G,H,W)}return H[J].exports}for(var Y="function"==typeof L&&L,Z=0;Z<W.length;Z++)X(W[Z]);return X}({1:[function(O,G){G.exports={name:"cannon",version:"0.6.2",description:"A lightweight 3D physics engine written in JavaScript.",homepage:"https://github.com/schteppe/cannon.js",author:"Stefan Hedman <schteppe@gmail.com> (http://steffe.se)",keywords:["cannon.js","cannon","physics","engine","3d"],main:"./build/cannon.js",engines:{node:"*"},repository:{type:"git",url:"https://github.com/schteppe/cannon.js.git"},bugs:{url:"https://github.com/schteppe/cannon.js/issues"},licenses:[{type:"MIT"}],devDependencies:{jshint:"latest","uglify-js":"latest",nodeunit:"^0.9.0",grunt:"~0.4.0","grunt-contrib-jshint":"~0.1.1","grunt-contrib-nodeunit":"^0.4.1","grunt-contrib-concat":"~0.1.3","grunt-contrib-uglify":"^0.5.1","grunt-browserify":"^2.1.4","grunt-contrib-yuidoc":"^0.5.2",browserify:"*"},dependencies:{}}},{}],2:[function(O,G){G.exports={version:O("../package.json").version,AABB:O("./collision/AABB"),ArrayCollisionMatrix:O("./collision/ArrayCollisionMatrix"),Body:O("./objects/Body"),Box:O("./shapes/Box"),Broadphase:O("./collision/Broadphase"),Constraint:O("./constraints/Constraint"),ContactEquation:O("./equations/ContactEquation"),Narrowphase:O("./world/Narrowphase"),ConeTwistConstraint:O("./constraints/ConeTwistConstraint"),ContactMaterial:O("./material/ContactMaterial"),ConvexPolyhedron:O("./shapes/ConvexPolyhedron"),Cylinder:O("./shapes/Cylinder"),DistanceConstraint:O("./constraints/DistanceConstraint"),Equation:O("./equations/Equation"),EventTarget:O("./utils/EventTarget"),FrictionEquation:O("./equations/FrictionEquation"),GSSolver:O("./solver/GSSolver"),GridBroadphase:O("./collision/GridBroadphase"),Heightfield:O("./shapes/Heightfield"),HingeConstraint:O("./constraints/HingeConstraint"),LockConstraint:O("./constraints/LockConstraint"),Mat3:O("./math/Mat3"),Material:O("./material/Material"),NaiveBroadphase:O("./collision/NaiveBroadphase"),ObjectCollisionMatrix:O("./collision/ObjectCollisionMatrix"),Pool:O("./utils/Pool"),Particle:O("./shapes/Particle"),Plane:O("./shapes/Plane"),PointToPointConstraint:O("./constraints/PointToPointConstraint"),Quaternion:O("./math/Quaternion"),Ray:O("./collision/Ray"),RaycastVehicle:O("./objects/RaycastVehicle"),RaycastResult:O("./collision/RaycastResult"),RigidVehicle:O("./objects/RigidVehicle"),RotationalEquation:O("./equations/RotationalEquation"),RotationalMotorEquation:O("./equations/RotationalMotorEquation"),SAPBroadphase:O("./collision/SAPBroadphase"),SPHSystem:O("./objects/SPHSystem"),Shape:O("./shapes/Shape"),Solver:O("./solver/Solver"),Sphere:O("./shapes/Sphere"),SplitSolver:O("./solver/SplitSolver"),Spring:O("./objects/Spring"),Trimesh:O("./shapes/Trimesh"),Vec3:O("./math/Vec3"),Vec3Pool:O("./utils/Vec3Pool"),World:O("./world/World")}},{"../package.json":1,"./collision/AABB":3,"./collision/ArrayCollisionMatrix":4,"./collision/Broadphase":5,"./collision/GridBroadphase":6,"./collision/NaiveBroadphase":7,"./collision/ObjectCollisionMatrix":8,"./collision/Ray":9,"./collision/RaycastResult":10,"./collision/SAPBroadphase":11,"./constraints/ConeTwistConstraint":12,"./constraints/Constraint":13,"./constraints/DistanceConstraint":14,"./constraints/HingeConstraint":15,"./constraints/LockConstraint":16,"./constraints/PointToPointConstraint":17,"./equations/ContactEquation":19,"./equations/Equation":20,"./equations/FrictionEquation":21,"./equations/RotationalEquation":22,"./equations/RotationalMotorEquation":23,"./material/ContactMaterial":24,"./material/Material":25,"./math/Mat3":27,"./math/Quaternion":28,"./math/Vec3":30,"./objects/Body":31,"./objects/RaycastVehicle":32,"./objects/RigidVehicle":33,"./objects/SPHSystem":34,"./objects/Spring":35,"./shapes/Box":37,"./shapes/ConvexPolyhedron":38,"./shapes/Cylinder":39,"./shapes/Heightfield":40,"./shapes/Particle":41,"./shapes/Plane":42,"./shapes/Shape":43,"./shapes/Sphere":44,"./shapes/Trimesh":45,"./solver/GSSolver":46,"./solver/Solver":47,"./solver/SplitSolver":48,"./utils/EventTarget":49,"./utils/Pool":51,"./utils/Vec3Pool":54,"./world/Narrowphase":55,"./world/World":56}],3:[function(O,G){function W(Q){Q=Q||{},this.lowerBound=new X,Q.lowerBound&&this.lowerBound.copy(Q.lowerBound),this.upperBound=new X,Q.upperBound&&this.upperBound.copy(Q.upperBound)}var X=O("../math/Vec3"),Y=O("../utils/Utils");G.exports=W;var Z=new X;W.prototype.setFromPoints=function(Q,K,$,ee){var re=this.lowerBound,oe=this.upperBound,ie=$;re.copy(Q[0]),ie&&ie.vmult(re,re),oe.copy(re);for(var ne=1,se;ne<Q.length;ne++)se=Q[ne],ie&&(ie.vmult(se,Z),se=Z),se.x>oe.x&&(oe.x=se.x),se.x<re.x&&(re.x=se.x),se.y>oe.y&&(oe.y=se.y),se.y<re.y&&(re.y=se.y),se.z>oe.z&&(oe.z=se.z),se.z<re.z&&(re.z=se.z);return K&&(K.vadd(re,re),K.vadd(oe,oe)),ee&&(re.x-=ee,re.y-=ee,re.z-=ee,oe.x+=ee,oe.y+=ee,oe.z+=ee),this},W.prototype.copy=function(Q){return this.lowerBound.copy(Q.lowerBound),this.upperBound.copy(Q.upperBound),this},W.prototype.clone=function(){return new W().copy(this)},W.prototype.extend=function(Q){var K=Q.lowerBound.x;this.lowerBound.x>K&&(this.lowerBound.x=K);var $=Q.upperBound.x;this.upperBound.x<$&&(this.upperBound.x=$);var K=Q.lowerBound.y;this.lowerBound.y>K&&(this.lowerBound.y=K);var $=Q.upperBound.y;this.upperBound.y<$&&(this.upperBound.y=$);var K=Q.lowerBound.z;this.lowerBound.z>K&&(this.lowerBound.z=K);var $=Q.upperBound.z;this.upperBound.z<$&&(this.upperBound.z=$)},W.prototype.overlaps=function(Q){var K=this.lowerBound,$=this.upperBound,ee=Q.lowerBound,re=Q.upperBound;return(ee.x<=$.x&&$.x<=re.x||K.x<=re.x&&re.x<=$.x)&&(ee.y<=$.y&&$.y<=re.y||K.y<=re.y&&re.y<=$.y)&&(ee.z<=$.z&&$.z<=re.z||K.z<=re.z&&re.z<=$.z)},W.prototype.contains=function(Q){var K=this.lowerBound,$=this.upperBound,ee=Q.lowerBound,re=Q.upperBound;return K.x<=ee.x&&$.x>=re.x&&K.y<=ee.y&&$.y>=re.y&&K.z<=ee.z&&$.z>=re.z},W.prototype.getCorners=function(Q,K,$,ee,re,oe,ie,ne){var se=this.lowerBound,le=this.upperBound;Q.copy(se),K.set(le.x,se.y,se.z),$.set(le.x,le.y,se.z),ee.set(se.x,le.y,le.z),re.set(le.x,se.y,se.z),oe.set(se.x,le.y,se.z),ie.set(se.x,se.y,le.z),ne.copy(le)};var J=[new X,new X,new X,new X,new X,new X,new X,new X];W.prototype.toLocalFrame=function(Q,K){var $=J,ee=$[0],re=$[1],oe=$[2],ie=$[3],ne=$[4],se=$[5],le=$[6],pe=$[7];this.getCorners(ee,re,oe,ie,ne,se,le,pe);for(var ue=0,ge;8!==ue;ue++)ge=$[ue],Q.pointToLocal(ge,ge);return K.setFromPoints($)},W.prototype.toWorldFrame=function(Q,K){var $=J,ee=$[0],re=$[1],oe=$[2],ie=$[3],ne=$[4],se=$[5],le=$[6],pe=$[7];this.getCorners(ee,re,oe,ie,ne,se,le,pe);for(var ue=0,ge;8!==ue;ue++)ge=$[ue],Q.pointToWorld(ge,ge);return K.setFromPoints($)}},{"../math/Vec3":30,"../utils/Utils":53}],4:[function(O,G){function W(){this.matrix=[]}G.exports=W,W.prototype.get=function(X,Y){if(X=X.index,Y=Y.index,Y>X){var Z=Y;Y=X,X=Z}return this.matrix[(X*(X+1)>>1)+Y-1]},W.prototype.set=function(X,Y,Z){if(X=X.index,Y=Y.index,Y>X){var J=Y;Y=X,X=J}this.matrix[(X*(X+1)>>1)+Y-1]=Z?1:0},W.prototype.reset=function(){for(var X=0,Y=this.matrix.length;X!==Y;X++)this.matrix[X]=0},W.prototype.setNumObjects=function(X){this.matrix.length=X*(X-1)>>1}},{}],5:[function(O,G){function W(){this.world=null,this.useBoundingBoxes=!1,this.dirty=!0}var X=O("../objects/Body"),Y=O("../math/Vec3"),Z=O("../math/Quaternion"),J=O("../shapes/Shape"),Q=O("../shapes/Plane");G.exports=W,W.prototype.collisionPairs=function(){throw new Error("collisionPairs not implemented for this BroadPhase class!")};var K=X.STATIC|X.KINEMATIC;W.prototype.needBroadphaseCollision=function(pe,ue){return 0==(pe.collisionFilterGroup&ue.collisionFilterMask)||0==(ue.collisionFilterGroup&pe.collisionFilterMask)?!1:(0!=(pe.type&K)||pe.sleepState===X.SLEEPING)&&(0!=(ue.type&K)||ue.sleepState===X.SLEEPING)?!1:!0},W.prototype.intersectionTest=function(pe,ue,ge,fe){this.useBoundingBoxes?this.doBoundingBoxBroadphase(pe,ue,ge,fe):this.doBoundingSphereBroadphase(pe,ue,ge,fe)};var $=new Y,ee=new Y,re=new Z,oe=new Y;W.prototype.doBoundingSphereBroadphase=function(pe,ue,ge,fe){var he=$;ue.position.vsub(pe.position,he);var ye=_Mathpow(pe.boundingRadius+ue.boundingRadius,2),_e=he.norm2();_e<ye&&(ge.push(pe),fe.push(ue))},W.prototype.doBoundingBoxBroadphase=function(pe,ue,ge,fe){pe.aabbNeedsUpdate&&pe.computeAABB(),ue.aabbNeedsUpdate&&ue.computeAABB(),pe.aabb.overlaps(ue.aabb)&&(ge.push(pe),fe.push(ue))};var ie={keys:[]},ne=[],se=[];W.prototype.makePairsUnique=function(pe,ue){for(var ge=ie,fe=ne,he=se,ye=pe.length,_e=0;_e!==ye;_e++)fe[_e]=pe[_e],he[_e]=ue[_e];pe.length=0,ue.length=0;for(var _e=0;_e!==ye;_e++){var xe=fe[_e].id,ve=he[_e].id,Te=xe<ve?xe+","+ve:ve+","+xe;ge[Te]=_e,ge.keys.push(Te)}for(var _e=0;_e!==ge.keys.length;_e++){var Te=ge.keys.pop(),Ee=ge[Te];pe.push(fe[Ee]),ue.push(he[Ee]),delete ge[Te]}},W.prototype.setWorld=function(){};var le=new Y;W.boundingSphereCheck=function(pe,ue){var ge=le;return pe.position.vsub(ue.position,ge),_Mathpow(pe.shape.boundingSphereRadius+ue.shape.boundingSphereRadius,2)>ge.norm2()},W.prototype.aabbQuery=function(){return console.warn(".aabbQuery is not implemented in this Broadphase subclass."),[]}},{"../math/Quaternion":28,"../math/Vec3":30,"../objects/Body":31,"../shapes/Plane":42,"../shapes/Shape":43}],6:[function(O,G){function W(K,$,ee,re,oe){X.apply(this),this.nx=ee||10,this.ny=re||10,this.nz=oe||10,this.aabbMin=K||new Y(100,100,100),this.aabbMax=$||new Y(-100,-100,-100);var ie=this.nx*this.ny*this.nz;if(0>=ie)throw"GridBroadphase: Each dimension's n must be >0";this.bins=[],this.binLengths=[],this.bins.length=ie,this.binLengths.length=ie;for(var ne=0;ne<ie;ne++)this.bins[ne]=[],this.binLengths[ne]=0}G.exports=W;var X=O("./Broadphase"),Y=O("../math/Vec3"),Z=O("../shapes/Shape");W.prototype=new X,W.prototype.constructor=W;var J=new Y,Q=new Y;W.prototype.collisionPairs=function(K,$,ee){function re(ft,ht,yt,_t,xt,vt,bt){var Tt=0|(ft-ve)*Se,Et=0|(ht-Te)*Ae,St=0|(yt-Ee)*we,At=Ve((_t-ve)*Se),wt=Ve((xt-Te)*Ae),Rt=Ve((vt-Ee)*we);0>Tt?Tt=0:Tt>=le&&(Tt=le-1),0>Et?Et=0:Et>=pe&&(Et=pe-1),0>St?St=0:St>=ue&&(St=ue-1),0>At?At=0:At>=le&&(At=le-1),0>wt?wt=0:wt>=pe&&(wt=pe-1),0>Rt?Rt=0:Rt>=ue&&(Rt=ue-1),Tt*=ge,Et*=fe,St*=he,At*=ge,wt*=fe,Rt*=he;for(var Ct=Tt;Ct<=At;Ct+=ge)for(var Pt=Et;Pt<=wt;Pt+=fe)for(var Lt=St,It;Lt<=Rt;Lt+=he)It=Ct+Pt+Lt,Fe[It][Ue[It]++]=bt}for(var oe=K.numObjects(),ie=K.bodies,ne=this.aabbMax,se=this.aabbMin,le=this.nx,pe=this.ny,ue=this.nz,ge=pe*ue,fe=ue,he=1,ye=ne.x,_e=ne.y,xe=ne.z,ve=se.x,Te=se.y,Ee=se.z,Se=le/(ye-ve),Ae=pe/(_e-Te),we=ue/(xe-Ee),Me=(ye-ve)/le,Re=(_e-Te)/pe,Ce=(xe-Ee)/ue,Pe=0.5*_Mathsqrt(Me*Me+Re*Re+Ce*Ce),Le=Z.types,Ie=Le.SPHERE,Be=Le.PLANE,Ne=Le.BOX,ze=Le.COMPOUND,De=Le.CONVEXPOLYHEDRON,Fe=this.bins,Ue=this.binLengths,Oe=this.bins.length,ke=0;ke!==Oe;ke++)Ue[ke]=0;for(var Ve=_Mathceil,se=_Mathmin,ne=_Mathmax,ke=0;ke!==oe;ke++){var Ge=ie[ke],He=Ge.shape;switch(He.type){case Ie:var We=Ge.position.x,je=Ge.position.y,qe=Ge.position.z,Xe=He.radius;re(We-Xe,je-Xe,qe-Xe,We+Xe,je+Xe,qe+Xe,Ge);break;case Be:He.worldNormalNeedsUpdate&&He.computeWorldNormal(Ge.quaternion);var Ye=He.worldNormal,Ze=ve+0.5*Me-Ge.position.x,Je=Te+0.5*Re-Ge.position.y,Qe=Ee+0.5*Ce-Ge.position.z,Ke=J;Ke.set(Ze,Je,Qe);for(var $e=0,et=0;$e!==le;$e++,et+=ge,Ke.y=Je,Ke.x+=Me)for(var tt=0,rt=0;tt!==pe;tt++,rt+=fe,Ke.z=Qe,Ke.y+=Re)for(var ot=0,it=0;ot!==ue;ot++,it+=he,Ke.z+=Ce)if(Ke.dot(Ye)<Pe){var nt=et+rt+it;Fe[nt][Ue[nt]++]=Ge}break;default:Ge.aabbNeedsUpdate&&Ge.computeAABB(),re(Ge.aabb.lowerBound.x,Ge.aabb.lowerBound.y,Ge.aabb.lowerBound.z,Ge.aabb.upperBound.x,Ge.aabb.upperBound.y,Ge.aabb.upperBound.z,Ge);}}for(var ke=0,ct;ke!==Oe;ke++)if(ct=Ue[ke],1<ct)for(var ut=Fe[ke],$e=0,Ge;$e!==ct;$e++){Ge=ut[$e];for(var tt=0,mt;tt!==$e;tt++)mt=ut[tt],this.needBroadphaseCollision(Ge,mt)&&this.intersectionTest(Ge,mt,$,ee)}this.makePairsUnique($,ee)}},{"../math/Vec3":30,"../shapes/Shape":43,"./Broadphase":5}],7:[function(O,G){function W(){X.apply(this)}G.exports=W;var X=O("./Broadphase"),Y=O("./AABB");W.prototype=new X,W.prototype.constructor=W,W.prototype.collisionPairs=function(J,Q,K){var $=J.bodies,ee=$.length,re,oe,ie,ne;for(re=0;re!==ee;re++)for(oe=0;oe!==re;oe++)(ie=$[re],ne=$[oe],!!this.needBroadphaseCollision(ie,ne))&&this.intersectionTest(ie,ne,Q,K)};new Y;W.prototype.aabbQuery=function(J,Q,K){K=K||[];for(var $=0,ee;$<J.bodies.length;$++)ee=J.bodies[$],ee.aabbNeedsUpdate&&ee.computeAABB(),ee.aabb.overlaps(Q)&&K.push(ee);return K}},{"./AABB":3,"./Broadphase":5}],8:[function(O,G){function W(){this.matrix={}}G.exports=W,W.prototype.get=function(X,Y){if(X=X.id,Y=Y.id,Y>X){var Z=Y;Y=X,X=Z}return X+"-"+Y in this.matrix},W.prototype.set=function(X,Y,Z){if(X=X.id,Y=Y.id,Y>X){var J=Y;Y=X,X=J}Z?this.matrix[X+"-"+Y]=!0:delete this.matrix[X+"-"+Y]},W.prototype.reset=function(){this.matrix={}},W.prototype.setNumObjects=function(){}},{}],9:[function(O,G){function W(Ve,Ge){this.from=Ve?Ve.clone():new Z,this.to=Ge?Ge.clone():new Z,this._direction=new Z,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=W.ANY,this.result=new ee,this.hasHit=!1,this.callback=function(){}}function X(Ve,Ge,He,We){We.vsub(Ge,Oe),He.vsub(Ge,se),Ve.vsub(Ge,le);var je=Oe.dot(Oe),qe=Oe.dot(se),Xe=Oe.dot(le),Ye=se.dot(se),Ze=se.dot(le),Je,Qe;return 0<=(Je=Ye*Xe-qe*Ze)&&0<=(Qe=je*Ze-qe*Xe)&&Je+Qe<je*Ye-qe*qe}function Y(Ve,Ge,He){He.vsub(Ve,Oe);var We=Oe.dot(Ge);Ge.mult(We,ke),ke.vadd(Ve,ke);var je=He.distanceTo(ke);return je}G.exports=W;var Z=O("../math/Vec3"),J=O("../math/Quaternion"),Q=O("../math/Transform"),K=O("../shapes/ConvexPolyhedron"),$=O("../shapes/Box"),ee=O("../collision/RaycastResult"),re=O("../shapes/Shape"),oe=O("../collision/AABB");W.prototype.constructor=W,W.CLOSEST=1,W.ANY=2,W.ALL=4;var ie=new oe,ne=[];W.prototype.intersectWorld=function(Ve,Ge){return this.mode=Ge.mode||W.ANY,this.result=Ge.result||new ee,this.skipBackfaces=!!Ge.skipBackfaces,this.collisionFilterMask="undefined"==typeof Ge.collisionFilterMask?-1:Ge.collisionFilterMask,this.collisionFilterGroup="undefined"==typeof Ge.collisionFilterGroup?-1:Ge.collisionFilterGroup,Ge.from&&this.from.copy(Ge.from),Ge.to&&this.to.copy(Ge.to),this.callback=Ge.callback||function(){},this.hasHit=!1,this.result.reset(),this._updateDirection(),this.getAABB(ie),ne.length=0,Ve.broadphase.aabbQuery(Ve,ie,ne),this.intersectBodies(ne),this.hasHit};var se=new Z,le=new Z;W.pointInTriangle=X;var pe=new Z,ue=new J;W.prototype.intersectBody=function(Ve,Ge){Ge&&(this.result=Ge,this._updateDirection());var He=this.checkCollisionResponse;if((!He||Ve.collisionResponse)&&0!=(this.collisionFilterGroup&Ve.collisionFilterMask)&&0!=(Ve.collisionFilterGroup&this.collisionFilterMask))for(var We=pe,je=ue,qe=0,Xe=Ve.shapes.length,Ye;qe<Xe&&!((Ye=Ve.shapes[qe],!He||Ye.collisionResponse)&&(Ve.quaternion.mult(Ve.shapeOrientations[qe],je),Ve.quaternion.vmult(Ve.shapeOffsets[qe],We),We.vadd(Ve.position,We),this.intersectShape(Ye,je,We,Ve),this.result._shouldStop));qe++);},W.prototype.intersectBodies=function(Ve,Ge){Ge&&(this.result=Ge,this._updateDirection());for(var He=0,We=Ve.length;!this.result._shouldStop&&He<We;He++)this.intersectBody(Ve[He])},W.prototype._updateDirection=function(){this.to.vsub(this.from,this._direction),this._direction.normalize()},W.prototype.intersectShape=function(Ve,Ge,He,We){var je=this.from,qe=Y(je,this._direction,He);if(!(qe>Ve.boundingSphereRadius)){var Xe=this[Ve.type];Xe&&Xe.call(this,Ve,Ge,He,We)}};var ge=new Z,fe=new Z,he=new Z,ye=new Z,_e=new Z,xe=new Z,ve=new Z,Te=new ee;W.prototype.intersectBox=function(Ve,Ge,He,We){return this.intersectConvex(Ve.convexPolyhedronRepresentation,Ge,He,We)},W.prototype[re.types.BOX]=W.prototype.intersectBox,W.prototype.intersectPlane=function(Ve,Ge,He,We){var je=this.from,qe=this.to,Xe=this._direction,Ye=new Z(0,0,1);Ge.vmult(Ye,Ye);var Ze=new Z;je.vsub(He,Ze);var Je=Ze.dot(Ye);qe.vsub(He,Ze);var Qe=Ze.dot(Ye);if(!(0<Je*Qe)&&!(je.distanceTo(qe)<Je)){var Ke=Ye.dot(Xe);if(!(_Mathabs(Ke)<this.precision)){var $e=new Z,et=new Z,tt=new Z;je.vsub(He,$e);var rt=-Ye.dot($e)/Ke;Xe.scale(rt,et),je.vadd(et,tt),this.reportIntersection(Ye,tt,Ve,We,-1)}}},W.prototype[re.types.PLANE]=W.prototype.intersectPlane,W.prototype.getAABB=function(Ve){var Ge=this.to,He=this.from;Ve.lowerBound.x=_Mathmin(Ge.x,He.x),Ve.lowerBound.y=_Mathmin(Ge.y,He.y),Ve.lowerBound.z=_Mathmin(Ge.z,He.z),Ve.upperBound.x=_Mathmax(Ge.x,He.x),Ve.upperBound.y=_Mathmax(Ge.y,He.y),Ve.upperBound.z=_Mathmax(Ge.z,He.z)};var Ee={faceList:[0]};W.prototype.intersectHeightfield=function(Ve,Ge,He,We){var je=Ve.data,qe=Ve.elementSize,Xe=new Z,Ye=new W(this.from,this.to);Q.pointToLocalFrame(He,Ge,Ye.from,Ye.from),Q.pointToLocalFrame(He,Ge,Ye.to,Ye.to);var Ze=[],Je=null,Qe=null,Ke=null,$e=null,et=Ve.getIndexOfPosition(Ye.from.x,Ye.from.y,Ze,!1);if(et&&(Je=Ze[0],Qe=Ze[1],Ke=Ze[0],$e=Ze[1]),et=Ve.getIndexOfPosition(Ye.to.x,Ye.to.y,Ze,!1),et&&((null===Je||Ze[0]<Je)&&(Je=Ze[0]),(null===Ke||Ze[0]>Ke)&&(Ke=Ze[0]),(null===Qe||Ze[1]<Qe)&&(Qe=Ze[1]),(null===$e||Ze[1]>$e)&&($e=Ze[1])),null!==Je){var tt=[];Ve.getRectMinMax(Je,Qe,Ke,$e,tt);for(var rt=tt[0],ot=tt[1],it=Je;it<=Ke;it++)for(var nt=Qe;nt<=$e;nt++){if(this.result._shouldStop)return;if(Ve.getConvexTrianglePillar(it,nt,!1),Q.pointToWorldFrame(He,Ge,Ve.pillarOffset,Xe),this.intersectConvex(Ve.pillarConvex,Ge,Xe,We,Ee),this.result._shouldStop)return;Ve.getConvexTrianglePillar(it,nt,!0),Q.pointToWorldFrame(He,Ge,Ve.pillarOffset,Xe),this.intersectConvex(Ve.pillarConvex,Ge,Xe,We,Ee)}}},W.prototype[re.types.HEIGHTFIELD]=W.prototype.intersectHeightfield;var Se=new Z,Ae=new Z;W.prototype.intersectSphere=function(Ve,Ge,He,We){var je=this.from,qe=this.to,Xe=Ve.radius,Ye=_Mathpow(qe.x-je.x,2)+_Mathpow(qe.y-je.y,2)+_Mathpow(qe.z-je.z,2),Ze=2*((qe.x-je.x)*(je.x-He.x)+(qe.y-je.y)*(je.y-He.y)+(qe.z-je.z)*(je.z-He.z)),Je=_Mathpow(je.x-He.x,2)+_Mathpow(je.y-He.y,2)+_Mathpow(je.z-He.z,2)-_Mathpow(Xe,2),Qe=_Mathpow(Ze,2)-4*Ye*Je,Ke=Se,$e=Ae;if(!(0>Qe))if(0==Qe)je.lerp(qe,Qe,Ke),Ke.vsub(He,$e),$e.normalize(),this.reportIntersection($e,Ke,Ve,We,-1);else{var et=(-Ze-_Mathsqrt(Qe))/(2*Ye),tt=(-Ze+_Mathsqrt(Qe))/(2*Ye);if(0<=et&&1>=et&&(je.lerp(qe,et,Ke),Ke.vsub(He,$e),$e.normalize(),this.reportIntersection($e,Ke,Ve,We,-1)),this.result._shouldStop)return;0<=tt&&1>=tt&&(je.lerp(qe,tt,Ke),Ke.vsub(He,$e),$e.normalize(),this.reportIntersection($e,Ke,Ve,We,-1))}},W.prototype[re.types.SPHERE]=W.prototype.intersectSphere;var we=new Z,Me=new Z,Re=new Z,Ce=new Z;W.prototype.intersectConvex=function(Ge,He,We,je,qe){for(var Ye=we,Ze=Ce,Qe=qe&&qe.faceList||null,Ke=Ge.faces,$e=Ge.vertices,et=Ge.faceNormals,tt=this._direction,rt=this.from,ot=this.to,it=rt.distanceTo(ot),ct=Qe?Qe.length:Ke.length,ut=this.result,mt=0;!ut._shouldStop&&mt<ct;mt++){var ft=Qe?Qe[mt]:mt,ht=Ke[ft],yt=et[ft],_t=He,xt=We;Ze.copy($e[ht[0]]),_t.vmult(Ze,Ze),Ze.vadd(xt,Ze),Ze.vsub(rt,Ze),_t.vmult(yt,Ye);var vt=tt.dot(Ye);if(!(_Mathabs(vt)<this.precision)){var bt=Ye.dot(Ze)/vt;if(!(0>bt)){tt.mult(bt,he),he.vadd(rt,he),ye.copy($e[ht[0]]),_t.vmult(ye,ye),xt.vadd(ye,ye);for(var Tt=1;!ut._shouldStop&&Tt<ht.length-1;Tt++){_e.copy($e[ht[Tt]]),xe.copy($e[ht[Tt+1]]),_t.vmult(_e,_e),_t.vmult(xe,xe),xt.vadd(_e,_e),xt.vadd(xe,xe);var Et=he.distanceTo(rt);(X(he,ye,_e,xe)||X(he,_e,ye,xe))&&!(Et>it)&&this.reportIntersection(Ye,he,Ge,je,ft)}}}}},W.prototype[re.types.CONVEXPOLYHEDRON]=W.prototype.intersectConvex;var Pe=new Z,Le=new Z,Ie=new Z,Be=new Z,Ne=new Z,ze=new Z,De=new oe,Fe=[],Ue=new Q;W.prototype.intersectTrimesh=function(Ge,He,We,je,qe){var Xe=Pe,Ye=Fe,Ze=Ue,Qe=Ce,et=Le,tt=Ie,rt=Be,ot=ze,it=Ne,nt=qe&&qe.faceList||null,ct=Ge.indices,ut=Ge.vertices,mt=Ge.faceNormals,ft=this.from,ht=this.to,yt=this._direction;Ze.position.copy(We),Ze.quaternion.copy(He),Q.vectorToLocalFrame(We,He,yt,et),Q.pointToLocalFrame(We,He,ft,tt),Q.pointToLocalFrame(We,He,ht,rt);var xt=tt.distanceSquared(rt);Ge.tree.rayQuery(this,Ze,Ye);for(var vt=0,bt=Ye.length,Tt;!this.result._shouldStop&&vt!==bt;vt++){Tt=Ye[vt],Ge.getNormal(Tt,Xe),Ge.getVertex(ct[3*Tt],ye),ye.vsub(tt,Qe);var Et=et.dot(Xe),St=Xe.dot(Qe)/Et;if(!(0>St)){et.scale(St,he),he.vadd(tt,he),Ge.getVertex(ct[3*Tt+1],_e),Ge.getVertex(ct[3*Tt+2],xe);var At=he.distanceSquared(tt);(X(he,_e,ye,xe)||X(he,ye,_e,xe))&&!(At>xt)&&(Q.vectorToWorldFrame(He,Xe,it),Q.pointToWorldFrame(We,He,he,ot),this.reportIntersection(it,ot,Ge,je,Tt))}}Ye.length=0},W.prototype[re.types.TRIMESH]=W.prototype.intersectTrimesh,W.prototype.reportIntersection=function(Ve,Ge,He,We,je){var qe=this.from,Xe=this.to,Ye=qe.distanceTo(Ge),Ze=this.result;if(!(this.skipBackfaces&&0<Ve.dot(this._direction)))switch(Ze.hitFaceIndex="undefined"==typeof je?-1:je,this.mode){case W.ALL:this.hasHit=!0,Ze.set(qe,Xe,Ve,Ge,He,We,Ye),Ze.hasHit=!0,this.callback(Ze);break;case W.CLOSEST:(Ye<Ze.distance||!Ze.hasHit)&&(this.hasHit=!0,Ze.hasHit=!0,Ze.set(qe,Xe,Ve,Ge,He,We,Ye));break;case W.ANY:this.hasHit=!0,Ze.hasHit=!0,Ze.set(qe,Xe,Ve,Ge,He,We,Ye),Ze._shouldStop=!0;}};var Oe=new Z,ke=new Z},{"../collision/AABB":3,"../collision/RaycastResult":10,"../math/Quaternion":28,"../math/Transform":29,"../math/Vec3":30,"../shapes/Box":37,"../shapes/ConvexPolyhedron":38,"../shapes/Shape":43}],10:[function(O,G){function W(){this.rayFromWorld=new X,this.rayToWorld=new X,this.hitNormalWorld=new X,this.hitPointWorld=new X,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this._shouldStop=!1}var X=O("../math/Vec3");G.exports=W,W.prototype.reset=function(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this._shouldStop=!1},W.prototype.abort=function(){this._shouldStop=!0},W.prototype.set=function(Y,Z,J,Q,K,$,ee){this.rayFromWorld.copy(Y),this.rayToWorld.copy(Z),this.hitNormalWorld.copy(J),this.hitPointWorld.copy(Q),this.shape=K,this.body=$,this.distance=ee}},{"../math/Vec3":30}],11:[function(O,G){function W(Z){Y.apply(this),this.axisList=[],this.world=null,this.axisIndex=0;var J=this.axisList;this._addBodyHandler=function(Q){J.push(Q.body)},this._removeBodyHandler=function(Q){var K=J.indexOf(Q.body);-1!==K&&J.splice(K,1)},Z&&this.setWorld(Z)}var X=O("../shapes/Shape"),Y=O("../collision/Broadphase");G.exports=W,W.prototype=new Y,W.prototype.setWorld=function(Z){this.axisList.length=0;for(var J=0;J<Z.bodies.length;J++)this.axisList.push(Z.bodies[J]);Z.removeEventListener("addBody",this._addBodyHandler),Z.removeEventListener("removeBody",this._removeBodyHandler),Z.addEventListener("addBody",this._addBodyHandler),Z.addEventListener("removeBody",this._removeBodyHandler),this.world=Z,this.dirty=!0},W.insertionSortX=function(Z){for(var J=1,Q=Z.length,K;J<Q;J++){K=Z[J];for(var $=J-1;0<=$&&!(Z[$].aabb.lowerBound.x<=K.aabb.lowerBound.x);$--)Z[$+1]=Z[$];Z[$+1]=K}return Z},W.insertionSortY=function(Z){for(var J=1,Q=Z.length,K;J<Q;J++){K=Z[J];for(var $=J-1;0<=$&&!(Z[$].aabb.lowerBound.y<=K.aabb.lowerBound.y);$--)Z[$+1]=Z[$];Z[$+1]=K}return Z},W.insertionSortZ=function(Z){for(var J=1,Q=Z.length,K;J<Q;J++){K=Z[J];for(var $=J-1;0<=$&&!(Z[$].aabb.lowerBound.z<=K.aabb.lowerBound.z);$--)Z[$+1]=Z[$];Z[$+1]=K}return Z},W.prototype.collisionPairs=function(Z,J,Q){var K=this.axisList,$=K.length,ee=this.axisIndex,re,oe;for(this.dirty&&(this.sortList(),this.dirty=!1),re=0;re!==$;re++){var ie=K[re];for(oe=re+1;oe<$;oe++){var ne=K[oe];if(this.needBroadphaseCollision(ie,ne)){if(!W.checkBounds(ie,ne,ee))break;this.intersectionTest(ie,ne,J,Q)}}}},W.prototype.sortList=function(){for(var Z=this.axisList,J=this.axisIndex,Q=Z.length,K=0,$;K!==Q;K++)$=Z[K],$.aabbNeedsUpdate&&$.computeAABB();0===J?W.insertionSortX(Z):1===J?W.insertionSortY(Z):2===J&&W.insertionSortZ(Z)},W.checkBounds=function(Z,J,Q){var K,$;0===Q?(K=Z.position.x,$=J.position.x):1===Q?(K=Z.position.y,$=J.position.y):2===Q&&(K=Z.position.z,$=J.position.z);var ee=Z.boundingRadius,re=J.boundingRadius,ie=K+ee,ne=$-re;return ne<ie},W.prototype.autoDetectAxis=function(){for(var Z=0,J=0,Q=0,K=0,$=0,ee=0,re=this.axisList,oe=re.length,ie=1/oe,ne=0;ne!==oe;ne++){var se=re[ne],le=se.position.x;Z+=le,J+=le*le;var pe=se.position.y;Q+=pe,K+=pe*pe;var ue=se.position.z;$+=ue,ee+=ue*ue}var ge=J-Z*Z*ie,fe=K-Q*Q*ie,he=ee-$*$*ie;this.axisIndex=ge>fe?ge>he?0:2:fe>he?1:2},W.prototype.aabbQuery=function(Z,J,Q){Q=Q||[],this.dirty&&(this.sortList(),this.dirty=!1);var K=this.axisIndex,$="x";1===K&&($="y"),2===K&&($="z");for(var ee=this.axisList,re=J.lowerBound[$],oe=J.upperBound[$],ie=0,ne;ie<ee.length;ie++)ne=ee[ie],ne.aabbNeedsUpdate&&ne.computeAABB(),ne.aabb.overlaps(J)&&Q.push(ne);return Q}},{"../collision/Broadphase":5,"../shapes/Shape":43}],12:[function(O,G){function W(re,oe,ie){ie=ie||{};var ne="undefined"==typeof ie.maxForce?1e6:ie.maxForce,se=ie.pivotA?ie.pivotA.clone():new K,le=ie.pivotB?ie.pivotB.clone():new K;this.axisA=ie.axisA?ie.axisA.clone():new K,this.axisB=ie.axisB?ie.axisB.clone():new K,Y.call(this,re,se,oe,le,ne),this.collideConnected=!!ie.collideConnected,this.angle="undefined"==typeof ie.angle?0:ie.angle;var pe=this.coneEquation=new Z(re,oe,ie),ue=this.twistEquation=new J(re,oe,ie);this.twistAngle="undefined"==typeof ie.twistAngle?0:ie.twistAngle,pe.maxForce=0,pe.minForce=-ne,ue.maxForce=0,ue.minForce=-ne,this.equations.push(pe,ue)}G.exports=W;var X=O("./Constraint"),Y=O("./PointToPointConstraint"),Z=O("../equations/ConeEquation"),J=O("../equations/RotationalEquation"),Q=O("../equations/ContactEquation"),K=O("../math/Vec3");W.prototype=new Y,W.constructor=W;var $=new K,ee=new K;W.prototype.update=function(){var re=this.bodyA,oe=this.bodyB,ie=this.coneEquation,ne=this.twistEquation;Y.prototype.update.call(this),re.vectorToWorldFrame(this.axisA,ie.axisA),oe.vectorToWorldFrame(this.axisB,ie.axisB),this.axisA.tangents(ne.axisA,ne.axisA),re.vectorToWorldFrame(ne.axisA,ne.axisA),this.axisB.tangents(ne.axisB,ne.axisB),oe.vectorToWorldFrame(ne.axisB,ne.axisB),ie.angle=this.angle,ne.maxAngle=this.twistAngle}},{"../equations/ConeEquation":18,"../equations/ContactEquation":19,"../equations/RotationalEquation":22,"../math/Vec3":30,"./Constraint":13,"./PointToPointConstraint":17}],13:[function(O,G){function W(Y,Z,J){J=X.defaults(J,{collideConnected:!0,wakeUpBodies:!0}),this.equations=[],this.bodyA=Y,this.bodyB=Z,this.id=W.idCounter++,this.collideConnected=J.collideConnected,J.wakeUpBodies&&(Y&&Y.wakeUp(),Z&&Z.wakeUp())}G.exports=W;var X=O("../utils/Utils");W.prototype.update=function(){throw new Error("method update() not implmemented in this Constraint subclass!")},W.prototype.enable=function(){for(var Y=this.equations,Z=0;Z<Y.length;Z++)Y[Z].enabled=!0},W.prototype.disable=function(){for(var Y=this.equations,Z=0;Z<Y.length;Z++)Y[Z].enabled=!1},W.idCounter=0},{"../utils/Utils":53}],14:[function(O,G){function W(Z,J,Q,K){X.call(this,Z,J),"undefined"==typeof Q&&(Q=Z.position.distanceTo(J.position)),"undefined"==typeof K&&(K=1e6),this.distance=Q;var $=this.distanceEquation=new Y(Z,J);this.equations.push($),$.minForce=-K,$.maxForce=K}G.exports=W;var X=O("./Constraint"),Y=O("../equations/ContactEquation");W.prototype=new X,W.prototype.update=function(){var Z=this.bodyA,J=this.bodyB,Q=this.distanceEquation,K=0.5*this.distance,$=Q.ni;J.position.vsub(Z.position,$),$.normalize(),$.mult(K,Q.ri),$.mult(-K,Q.rj)}},{"../equations/ContactEquation":19,"./Constraint":13}],15:[function(O,G){function W(re,oe,ie){ie=ie||{};var ne="undefined"==typeof ie.maxForce?1e6:ie.maxForce,se=ie.pivotA?ie.pivotA.clone():new K,le=ie.pivotB?ie.pivotB.clone():new K;Y.call(this,re,se,oe,le,ne);var pe=this.axisA=ie.axisA?ie.axisA.clone():new K(1,0,0);pe.normalize();var ue=this.axisB=ie.axisB?ie.axisB.clone():new K(1,0,0);ue.normalize();var ge=this.rotationalEquation1=new Z(re,oe,ie),fe=this.rotationalEquation2=new Z(re,oe,ie),he=this.motorEquation=new J(re,oe,ne);he.enabled=!1,this.equations.push(ge,fe,he)}G.exports=W;var X=O("./Constraint"),Y=O("./PointToPointConstraint"),Z=O("../equations/RotationalEquation"),J=O("../equations/RotationalMotorEquation"),Q=O("../equations/ContactEquation"),K=O("../math/Vec3");W.prototype=new Y,W.constructor=W,W.prototype.enableMotor=function(){this.motorEquation.enabled=!0},W.prototype.disableMotor=function(){this.motorEquation.enabled=!1},W.prototype.setMotorSpeed=function(re){this.motorEquation.targetVelocity=re},W.prototype.setMotorMaxForce=function(re){this.motorEquation.maxForce=re,this.motorEquation.minForce=-re};var $=new K,ee=new K;W.prototype.update=function(){var re=this.bodyA,oe=this.bodyB,ie=this.motorEquation,ne=this.rotationalEquation1,se=this.rotationalEquation2,le=$,pe=ee,ue=this.axisA,ge=this.axisB;Y.prototype.update.call(this),re.quaternion.vmult(ue,le),oe.quaternion.vmult(ge,pe),le.tangents(ne.axisA,se.axisA),ne.axisB.copy(pe),se.axisB.copy(pe),this.motorEquation.enabled&&(re.quaternion.vmult(this.axisA,ie.axisA),oe.quaternion.vmult(this.axisB,ie.axisB))}},{"../equations/ContactEquation":19,"../equations/RotationalEquation":22,"../equations/RotationalMotorEquation":23,"../math/Vec3":30,"./Constraint":13,"./PointToPointConstraint":17}],16:[function(O,G){function W(re,oe,ie){ie=ie||{};var ne="undefined"==typeof ie.maxForce?1e6:ie.maxForce,se=new K,le=new K,pe=new K;re.position.vadd(oe.position,pe),pe.scale(0.5,pe),oe.pointToLocalFrame(pe,le),re.pointToLocalFrame(pe,se),Y.call(this,re,se,oe,le,ne);var ue=this.rotationalEquation1=new Z(re,oe,ie),ge=this.rotationalEquation2=new Z(re,oe,ie),fe=this.rotationalEquation3=new Z(re,oe,ie);this.equations.push(ue,ge,fe)}G.exports=W;var X=O("./Constraint"),Y=O("./PointToPointConstraint"),Z=O("../equations/RotationalEquation"),J=O("../equations/RotationalMotorEquation"),Q=O("../equations/ContactEquation"),K=O("../math/Vec3");W.prototype=new Y,W.constructor=W;var $=new K,ee=new K;W.prototype.update=function(){var re=this.bodyA,oe=this.bodyB,ie=this.motorEquation,ne=this.rotationalEquation1,se=this.rotationalEquation2,le=this.rotationalEquation3;Y.prototype.update.call(this),re.vectorToWorldFrame(K.UNIT_X,ne.axisA),oe.vectorToWorldFrame(K.UNIT_Y,ne.axisB),re.vectorToWorldFrame(K.UNIT_Y,se.axisA),oe.vectorToWorldFrame(K.UNIT_Z,se.axisB),re.vectorToWorldFrame(K.UNIT_Z,le.axisA),oe.vectorToWorldFrame(K.UNIT_X,le.axisB)}},{"../equations/ContactEquation":19,"../equations/RotationalEquation":22,"../equations/RotationalMotorEquation":23,"../math/Vec3":30,"./Constraint":13,"./PointToPointConstraint":17}],17:[function(O,G){function W(J,Q,K,$,ee){X.call(this,J,K),ee="undefined"==typeof ee?1e6:ee,this.pivotA=Q?Q.clone():new Z,this.pivotB=$?$.clone():new Z;var re=this.equationX=new Y(J,K),oe=this.equationY=new Y(J,K),ie=this.equationZ=new Y(J,K);this.equations.push(re,oe,ie),re.minForce=oe.minForce=ie.minForce=-ee,re.maxForce=oe.maxForce=ie.maxForce=ee,re.ni.set(1,0,0),oe.ni.set(0,1,0),ie.ni.set(0,0,1)}G.exports=W;var X=O("./Constraint"),Y=O("../equations/ContactEquation"),Z=O("../math/Vec3");W.prototype=new X,W.prototype.update=function(){var J=this.bodyA,Q=this.bodyB,K=this.equationX,$=this.equationY,ee=this.equationZ;J.quaternion.vmult(this.pivotA,K.ri),Q.quaternion.vmult(this.pivotB,K.rj),$.ri.copy(K.ri),$.rj.copy(K.rj),ee.ri.copy(K.ri),ee.rj.copy(K.rj)}},{"../equations/ContactEquation":19,"../math/Vec3":30,"./Constraint":13}],18:[function(O,G){function W(K,$,ee){ee=ee||{};var re="undefined"==typeof ee.maxForce?1e6:ee.maxForce;Z.call(this,K,$,-re,re),this.axisA=ee.axisA?ee.axisA.clone():new X(1,0,0),this.axisB=ee.axisB?ee.axisB.clone():new X(0,1,0),this.angle="undefined"==typeof ee.angle?0:ee.angle}G.exports=W;var X=O("../math/Vec3"),Y=O("../math/Mat3"),Z=O("./Equation");W.prototype=new Z,W.prototype.constructor=W;var J=new X,Q=new X;W.prototype.computeB=function(K){var $=this.a,ee=this.b,re=this.axisA,oe=this.axisB,ie=J,ne=Q,se=this.jacobianElementA,le=this.jacobianElementB;re.cross(oe,ie),oe.cross(re,ne),se.rotational.copy(ne),le.rotational.copy(ie);var pe=_Mathcos(this.angle)-re.dot(oe),ue=this.computeGW(),ge=this.computeGiMf();return-pe*$-ue*ee-K*ge}},{"../math/Mat3":27,"../math/Vec3":30,"./Equation":20}],19:[function(O,G){function W(ne,se,le){le="undefined"==typeof le?1e6:le,X.call(this,ne,se,0,le),this.restitution=0,this.ri=new Y,this.rj=new Y,this.ni=new Y}G.exports=W;var X=O("./Equation"),Y=O("../math/Vec3"),Z=O("../math/Mat3");W.prototype=new X,W.prototype.constructor=W;var J=new Y,Q=new Y,K=new Y;W.prototype.computeB=function(ne){var se=this.a,le=this.b,pe=this.bi,ue=this.bj,ge=this.ri,fe=this.rj,he=J,ye=Q,_e=pe.velocity,xe=pe.angularVelocity,ve=pe.force,Te=pe.torque,Ee=ue.velocity,Se=ue.angularVelocity,Ae=ue.force,we=ue.torque,Me=K,Re=this.jacobianElementA,Ce=this.jacobianElementB,Pe=this.ni;ge.cross(Pe,he),fe.cross(Pe,ye),Pe.negate(Re.spatial),he.negate(Re.rotational),Ce.spatial.copy(Pe),Ce.rotational.copy(ye),Me.copy(ue.position),Me.vadd(fe,Me),Me.vsub(pe.position,Me),Me.vsub(ge,Me);var Le=Pe.dot(Me),Ie=this.restitution+1,Be=Ie*Ee.dot(Pe)-Ie*_e.dot(Pe)+Se.dot(ye)-xe.dot(he),Ne=this.computeGiMf();return-Le*se-Be*le-ne*Ne};var $=new Y,ee=new Y,re=new Y,oe=new Y,ie=new Y;W.prototype.getImpactVelocityAlongNormal=function(){var ne=$,se=ee,le=re,pe=oe,ue=ie;return this.bi.position.vadd(this.ri,le),this.bj.position.vadd(this.rj,pe),this.bi.getVelocityAtWorldPoint(le,ne),this.bj.getVelocityAtWorldPoint(pe,se),ne.vsub(se,ue),this.ni.dot(ue)}},{"../math/Mat3":27,"../math/Vec3":30,"./Equation":20}],20:[function(O,G){function W(pe,ue,ge,fe){this.id=W.id++,this.minForce="undefined"==typeof ge?-1e6:ge,this.maxForce="undefined"==typeof fe?1e6:fe,this.bi=pe,this.bj=ue,this.a=0,this.b=0,this.eps=0,this.jacobianElementA=new X,this.jacobianElementB=new X,this.enabled=!0,this.setSpookParams(1e7,4,1/60)}G.exports=W;var X=O("../math/JacobianElement"),Y=O("../math/Vec3");W.prototype.constructor=W,W.id=0,W.prototype.setSpookParams=function(pe,ue,ge){var fe=ue,ye=ge;this.a=4/(ye*(1+4*fe)),this.b=4*fe/(1+4*fe),this.eps=4/(ye*ye*pe*(1+4*fe))},W.prototype.computeB=function(pe,ue,ge){var fe=this.computeGW(),he=this.computeGq(),ye=this.computeGiMf();return-he*pe-fe*ue-ye*ge},W.prototype.computeGq=function(){var pe=this.jacobianElementA,ue=this.jacobianElementB,ge=this.bi,fe=this.bj,he=ge.position,ye=fe.position;return pe.spatial.dot(he)+ue.spatial.dot(ye)};var Z=new Y;W.prototype.computeGW=function(){var pe=this.jacobianElementA,ue=this.jacobianElementB,ge=this.bi,fe=this.bj,he=ge.velocity,ye=fe.velocity,_e=ge.angularVelocity||Z,xe=fe.angularVelocity||Z;return pe.multiplyVectors(he,_e)+ue.multiplyVectors(ye,xe)},W.prototype.computeGWlambda=function(){var pe=this.jacobianElementA,ue=this.jacobianElementB,ge=this.bi,fe=this.bj,he=ge.vlambda,ye=fe.vlambda,_e=ge.wlambda||Z,xe=fe.wlambda||Z;return pe.multiplyVectors(he,_e)+ue.multiplyVectors(ye,xe)};var J=new Y,Q=new Y,K=new Y,$=new Y;W.prototype.computeGiMf=function(){var pe=this.jacobianElementA,ue=this.jacobianElementB,ge=this.bi,fe=this.bj,he=ge.force,ye=ge.torque,_e=fe.force,xe=fe.torque,ve=ge.invMassSolve,Te=fe.invMassSolve;return ge.invInertiaWorldSolve?ge.invInertiaWorldSolve.vmult(ye,K):K.set(0,0,0),fe.invInertiaWorldSolve?fe.invInertiaWorldSolve.vmult(xe,$):$.set(0,0,0),he.mult(ve,J),_e.mult(Te,Q),pe.multiplyVectors(J,K)+ue.multiplyVectors(Q,$)};var ee=new Y;W.prototype.computeGiMGt=function(){var pe=this.jacobianElementA,ue=this.jacobianElementB,ge=this.bi,fe=this.bj,he=ge.invMassSolve,ye=fe.invMassSolve,_e=ge.invInertiaWorldSolve,xe=fe.invInertiaWorldSolve,ve=he+ye;return _e&&(_e.vmult(pe.rotational,ee),ve+=ee.dot(pe.rotational)),xe&&(xe.vmult(ue.rotational,ee),ve+=ee.dot(ue.rotational)),ve};var re=new Y,oe=new Y,ie=new Y,ne=new Y,se=new Y,le=new Y;W.prototype.addToWlambda=function(pe){var ue=this.jacobianElementA,ge=this.jacobianElementB,fe=this.bi,he=this.bj,ye=re;ue.spatial.mult(fe.invMassSolve*pe,ye),fe.vlambda.vadd(ye,fe.vlambda),ge.spatial.mult(he.invMassSolve*pe,ye),he.vlambda.vadd(ye,he.vlambda),fe.invInertiaWorldSolve&&(fe.invInertiaWorldSolve.vmult(ue.rotational,ye),ye.mult(pe,ye),fe.wlambda.vadd(ye,fe.wlambda)),he.invInertiaWorldSolve&&(he.invInertiaWorldSolve.vmult(ge.rotational,ye),ye.mult(pe,ye),he.wlambda.vadd(ye,he.wlambda))},W.prototype.computeC=function(){return this.computeGiMGt()+this.eps}},{"../math/JacobianElement":26,"../math/Vec3":30}],21:[function(O,G){function W(K,$,ee){X.call(this,K,$,-ee,ee),this.ri=new Y,this.rj=new Y,this.t=new Y}G.exports=W;var X=O("./Equation"),Y=O("../math/Vec3"),Z=O("../math/Mat3");W.prototype=new X,W.prototype.constructor=W;var J=new Y,Q=new Y;W.prototype.computeB=function(K){var $=this.a,ee=this.b,re=this.bi,oe=this.bj,ie=this.ri,ne=this.rj,se=J,le=Q,pe=this.t;ie.cross(pe,se),ne.cross(pe,le);var ue=this.jacobianElementA,ge=this.jacobianElementB;pe.negate(ue.spatial),se.negate(ue.rotational),ge.spatial.copy(pe),ge.rotational.copy(le);var fe=this.computeGW(),he=this.computeGiMf();return-fe*ee-K*he}},{"../math/Mat3":27,"../math/Vec3":30,"./Equation":20}],22:[function(O,G){function W(K,$,ee){ee=ee||{};var re="undefined"==typeof ee.maxForce?1e6:ee.maxForce;Z.call(this,K,$,-re,re),this.axisA=ee.axisA?ee.axisA.clone():new X(1,0,0),this.axisB=ee.axisB?ee.axisB.clone():new X(0,1,0),this.maxAngle=_MathPI/2}G.exports=W;var X=O("../math/Vec3"),Y=O("../math/Mat3"),Z=O("./Equation");W.prototype=new Z,W.prototype.constructor=W;var J=new X,Q=new X;W.prototype.computeB=function(K){var $=this.a,ee=this.b,re=this.axisA,oe=this.axisB,ie=J,ne=Q,se=this.jacobianElementA,le=this.jacobianElementB;re.cross(oe,ie),oe.cross(re,ne),se.rotational.copy(ne),le.rotational.copy(ie);var pe=_Mathcos(this.maxAngle)-re.dot(oe),ue=this.computeGW(),ge=this.computeGiMf();return-pe*$-ue*ee-K*ge}},{"../math/Mat3":27,"../math/Vec3":30,"./Equation":20}],23:[function(O,G){function W(J,Q,K){K="undefined"==typeof K?1e6:K,Z.call(this,J,Q,-K,K),this.axisA=new X,this.axisB=new X,this.targetVelocity=0}G.exports=W;var X=O("../math/Vec3"),Y=O("../math/Mat3"),Z=O("./Equation");W.prototype=new Z,W.prototype.constructor=W,W.prototype.computeB=function(J){var Q=this.a,K=this.b,$=this.bi,ee=this.bj,re=this.axisA,oe=this.axisB,ie=this.jacobianElementA,ne=this.jacobianElementB;ie.rotational.copy(re),oe.negate(ne.rotational);var se=this.computeGW()-this.targetVelocity,le=this.computeGiMf();return-se*K-J*le}},{"../math/Mat3":27,"../math/Vec3":30,"./Equation":20}],24:[function(O,G){function W(Y,Z,J){J=X.defaults(J,{friction:0.3,restitution:0.3,contactEquationStiffness:1e7,contactEquationRelaxation:3,frictionEquationStiffness:1e7,frictionEquationRelaxation:3}),this.id=W.idCounter++,this.materials=[Y,Z],this.friction=J.friction,this.restitution=J.restitution,this.contactEquationStiffness=J.contactEquationStiffness,this.contactEquationRelaxation=J.contactEquationRelaxation,this.frictionEquationStiffness=J.frictionEquationStiffness,this.frictionEquationRelaxation=J.frictionEquationRelaxation}var X=O("../utils/Utils");G.exports=W,W.idCounter=0},{"../utils/Utils":53}],25:[function(O,G){function W(X){var Y="";X=X||{},"string"==typeof X?(Y=X,X={}):"object"==typeof X&&(Y=""),this.name=Y,this.id=W.idCounter++,this.friction="undefined"==typeof X.friction?-1:X.friction,this.restitution="undefined"==typeof X.restitution?-1:X.restitution}G.exports=W,W.idCounter=0},{}],26:[function(O,G){function W(){this.spatial=new X,this.rotational=new X}G.exports=W;var X=O("./Vec3");W.prototype.multiplyElement=function(Y){return Y.spatial.dot(this.spatial)+Y.rotational.dot(this.rotational)},W.prototype.multiplyVectors=function(Y,Z){return Y.dot(this.spatial)+Z.dot(this.rotational)}},{"./Vec3":30}],27:[function(O,G){function W(Y){this.elements=Y?Y:[0,0,0,0,0,0,0,0,0]}G.exports=W;var X=O("./Vec3");W.prototype.identity=function(){var Y=this.elements;Y[0]=1,Y[1]=0,Y[2]=0,Y[3]=0,Y[4]=1,Y[5]=0,Y[6]=0,Y[7]=0,Y[8]=1},W.prototype.setZero=function(){var Y=this.elements;Y[0]=0,Y[1]=0,Y[2]=0,Y[3]=0,Y[4]=0,Y[5]=0,Y[6]=0,Y[7]=0,Y[8]=0},W.prototype.setTrace=function(Y){var Z=this.elements;Z[0]=Y.x,Z[4]=Y.y,Z[8]=Y.z},W.prototype.getTrace=function(Y){var Y=Y||new X,Z=this.elements;Y.x=Z[0],Y.y=Z[4],Y.z=Z[8]},W.prototype.vmult=function(Y,Z){Z=Z||new X;var J=this.elements,Q=Y.x,K=Y.y,$=Y.z;return Z.x=J[0]*Q+J[1]*K+J[2]*$,Z.y=J[3]*Q+J[4]*K+J[5]*$,Z.z=J[6]*Q+J[7]*K+J[8]*$,Z},W.prototype.smult=function(Y){for(var Z=0;Z<this.elements.length;Z++)this.elements[Z]*=Y},W.prototype.mmult=function(Y,Z){for(var J=Z||new W,Q=0;3>Q;Q++)for(var K=0,$;3>K;K++){$=0;for(var ee=0;3>ee;ee++)$+=Y.elements[Q+3*ee]*this.elements[ee+3*K];J.elements[Q+3*K]=$}return J},W.prototype.scale=function(Y,Z){Z=Z||new W;for(var J=this.elements,Q=Z.elements,K=0;3!==K;K++)Q[3*K+0]=Y.x*J[3*K+0],Q[3*K+1]=Y.y*J[3*K+1],Q[3*K+2]=Y.z*J[3*K+2];return Z},W.prototype.solve=function(Y,Z){Z=Z||new X;for(var Q=4,K=[],$=0;$<3*Q;$++)K.push(0);var $,ee;for($=0;3>$;$++)for(ee=0;3>ee;ee++)K[$+Q*ee]=this.elements[$+3*ee];K[3]=Y.x,K[7]=Y.y,K[11]=Y.z;var re=3,oe=re,ne=4,ie,se;do{if($=oe-re,0===K[$+Q*$])for(ee=$+1;ee<oe;ee++)if(0!==K[$+Q*ee]){ie=ne;do se=ne-ie,K[se+Q*$]+=K[se+Q*ee];while(--ie);break}if(0!==K[$+Q*$])for(ee=$+1;ee<oe;ee++){var pe=K[$+Q*ee]/K[$+Q*$];ie=ne;do se=ne-ie,K[se+Q*ee]=se<=$?0:K[se+Q*ee]-K[se+Q*$]*pe;while(--ie)}}while(--re);if(Z.z=K[2*Q+3]/K[2*Q+2],Z.y=(K[1*Q+3]-K[1*Q+2]*Z.z)/K[1*Q+1],Z.x=(K[0*Q+3]-K[0*Q+2]*Z.z-K[0*Q+1]*Z.y)/K[0*Q+0],isNaN(Z.x)||isNaN(Z.y)||isNaN(Z.z)||Z.x===Infinity||Z.y===Infinity||Z.z===Infinity)throw"Could not solve equation! Got x=["+Z.toString()+"], b=["+Y.toString()+"], A=["+this.toString()+"]";return Z},W.prototype.e=function(Y,Z,J){return void 0===J?this.elements[Z+3*Y]:void(this.elements[Z+3*Y]=J)},W.prototype.copy=function(Y){for(var Z=0;Z<Y.elements.length;Z++)this.elements[Z]=Y.elements[Z];return this},W.prototype.toString=function(){for(var Y="",J=0;9>J;J++)Y+=this.elements[J]+",";return Y},W.prototype.reverse=function(Y){Y=Y||new W;for(var Z=3,J=6,Q=[],K=0;K<Z*J;K++)Q.push(0);var K,$;for(K=0;3>K;K++)for($=0;3>$;$++)Q[K+J*$]=this.elements[K+3*$];Q[3]=1,Q[9]=0,Q[15]=0,Q[4]=0,Q[10]=1,Q[16]=0,Q[5]=0,Q[11]=0,Q[17]=1;var ee=3,re=ee,oe,ie=J,ne;do{if(K=re-ee,0===Q[K+J*K])for($=K+1;$<re;$++)if(0!==Q[K+J*$]){oe=ie;do ne=ie-oe,Q[ne+J*K]+=Q[ne+J*$];while(--oe);break}if(0!==Q[K+J*K])for($=K+1;$<re;$++){var se=Q[K+J*$]/Q[K+J*K];oe=ie;do ne=ie-oe,Q[ne+J*$]=ne<=K?0:Q[ne+J*$]-Q[ne+J*K]*se;while(--oe)}}while(--ee);K=2;do{$=K-1;do{var se=Q[K+J*$]/Q[K+J*K];oe=J;do ne=J-oe,Q[ne+J*$]=Q[ne+J*$]-Q[ne+J*K]*se;while(--oe)}while($--)}while(--K);K=2;do{var se=1/Q[K+J*K];oe=J;do ne=J-oe,Q[ne+J*K]=Q[ne+J*K]*se;while(--oe)}while(K--);K=2;do{$=2;do{if(ne=Q[Z+$+J*K],isNaN(ne)||ne===Infinity)throw"Could not reverse! A=["+this.toString()+"]";Y.e(K,$,ne)}while($--)}while(K--);return Y},W.prototype.setRotationFromQuaternion=function(Y){var Z=Y.x,J=Y.y,Q=Y.z,K=Y.w,$=Z+Z,ee=J+J,re=Q+Q,oe=Z*$,ie=Z*ee,ne=Z*re,se=J*ee,le=J*re,pe=Q*re,ue=K*$,ge=K*ee,fe=K*re,he=this.elements;return he[0]=1-(se+pe),he[1]=ie-fe,he[2]=ne+ge,he[3]=ie+fe,he[4]=1-(oe+pe),he[5]=le-ue,he[6]=ne-ge,he[7]=le+ue,he[8]=1-(oe+se),this},W.prototype.transpose=function(Y){Y=Y||new W;for(var Z=Y.elements,J=this.elements,Q=0;3!==Q;Q++)for(var K=0;3!==K;K++)Z[3*Q+K]=J[3*K+Q];return Y}},{"./Vec3":30}],28:[function(O,G){function W($,ee,re,oe){this.x=$===void 0?0:$,this.y=ee===void 0?0:ee,this.z=re===void 0?0:re,this.w=oe===void 0?1:oe}G.exports=W;var X=O("./Vec3");W.prototype.set=function($,ee,re,oe){this.x=$,this.y=ee,this.z=re,this.w=oe},W.prototype.toString=function(){return this.x+","+this.y+","+this.z+","+this.w},W.prototype.toArray=function(){return[this.x,this.y,this.z,this.w]},W.prototype.setFromAxisAngle=function($,ee){var re=_Mathsin(0.5*ee);this.x=$.x*re,this.y=$.y*re,this.z=$.z*re,this.w=_Mathcos(0.5*ee)},W.prototype.toAxisAngle=function($){$=$||new X,this.normalize();var ee=2*_Mathacos(this.w),re=_Mathsqrt(1-this.w*this.w);return 1e-3>re?($.x=this.x,$.y=this.y,$.z=this.z):($.x=this.x/re,$.y=this.y/re,$.z=this.z/re),[$,ee]};var Y=new X,Z=new X;W.prototype.setFromVectors=function($,ee){if($.isAntiparallelTo(ee)){var re=Y;$.tangents(re,Z),this.setFromAxisAngle(re,Math.PI)}else{var ie=$.cross(ee);this.x=ie.x,this.y=ie.y,this.z=ie.z,this.w=_Mathsqrt(_Mathpow($.norm(),2)*_Mathpow(ee.norm(),2))+$.dot(ee),this.normalize()}};var J=new X,Q=new X,K=new X;W.prototype.mult=function($,ee){ee=ee||new W;var re=this.w,oe=J,ie=Q,ne=K;return oe.set(this.x,this.y,this.z),ie.set($.x,$.y,$.z),ee.w=re*$.w-oe.dot(ie),oe.cross(ie,ne),ee.x=re*ie.x+$.w*oe.x+ne.x,ee.y=re*ie.y+$.w*oe.y+ne.y,ee.z=re*ie.z+$.w*oe.z+ne.z,ee},W.prototype.inverse=function($){var ee=this.x,re=this.y,oe=this.z,ie=this.w;$=$||new W,this.conjugate($);var ne=1/(ee*ee+re*re+oe*oe+ie*ie);return $.x*=ne,$.y*=ne,$.z*=ne,$.w*=ne,$},W.prototype.conjugate=function($){return $=$||new W,$.x=-this.x,$.y=-this.y,$.z=-this.z,$.w=this.w,$},W.prototype.normalize=function(){var $=_Mathsqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);0===$?(this.x=0,this.y=0,this.z=0,this.w=0):($=1/$,this.x*=$,this.y*=$,this.z*=$,this.w*=$)},W.prototype.normalizeFast=function(){var $=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;0==$?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=$,this.y*=$,this.z*=$,this.w*=$)},W.prototype.vmult=function($,ee){ee=ee||new X;var re=$.x,oe=$.y,ie=$.z,ne=this.x,se=this.y,le=this.z,pe=this.w,ue=pe*re+se*ie-le*oe,ge=pe*oe+le*re-ne*ie,fe=pe*ie+ne*oe-se*re,he=-ne*re-se*oe-le*ie;return ee.x=ue*pe+he*-ne+ge*-le-fe*-se,ee.y=ge*pe+he*-se+fe*-ne-ue*-le,ee.z=fe*pe+he*-le+ue*-se-ge*-ne,ee},W.prototype.copy=function($){return this.x=$.x,this.y=$.y,this.z=$.z,this.w=$.w,this},W.prototype.toEuler=function($,ee){ee=ee||"YZX";var re,oe,ie,ne=this.x,se=this.y,le=this.z,pe=this.w;switch(ee){case"YZX":var ue=ne*se+le*pe;if(0.499<ue&&(re=2*_Mathatan(ne,pe),oe=_MathPI/2,ie=0),-0.499>ue&&(re=-2*_Mathatan(ne,pe),oe=-_MathPI/2,ie=0),isNaN(re)){var he=le*le;re=_Mathatan(2*se*pe-2*ne*le,1-2*(se*se)-2*he),oe=_Mathasin(2*ue),ie=_Mathatan(2*ne*pe-2*se*le,1-2*(ne*ne)-2*he)}break;default:throw new Error("Euler order "+ee+" not supported yet.");}$.y=re,$.z=oe,$.x=ie},W.prototype.setFromEuler=function($,ee,re,oe){oe=oe||"XYZ";var ie=_Mathcos($/2),ne=_Mathcos(ee/2),se=_Mathcos(re/2),le=_Mathsin($/2),pe=_Mathsin(ee/2),ue=_Mathsin(re/2);return"XYZ"===oe?(this.x=le*ne*se+ie*pe*ue,this.y=ie*pe*se-le*ne*ue,this.z=ie*ne*ue+le*pe*se,this.w=ie*ne*se-le*pe*ue):"YXZ"===oe?(this.x=le*ne*se+ie*pe*ue,this.y=ie*pe*se-le*ne*ue,this.z=ie*ne*ue-le*pe*se,this.w=ie*ne*se+le*pe*ue):"ZXY"===oe?(this.x=le*ne*se-ie*pe*ue,this.y=ie*pe*se+le*ne*ue,this.z=ie*ne*ue+le*pe*se,this.w=ie*ne*se-le*pe*ue):"ZYX"===oe?(this.x=le*ne*se-ie*pe*ue,this.y=ie*pe*se+le*ne*ue,this.z=ie*ne*ue-le*pe*se,this.w=ie*ne*se+le*pe*ue):"YZX"===oe?(this.x=le*ne*se+ie*pe*ue,this.y=ie*pe*se+le*ne*ue,this.z=ie*ne*ue-le*pe*se,this.w=ie*ne*se-le*pe*ue):"XZY"===oe&&(this.x=le*ne*se-ie*pe*ue,this.y=ie*pe*se-le*ne*ue,this.z=ie*ne*ue+le*pe*se,this.w=ie*ne*se+le*pe*ue),this},W.prototype.clone=function(){return new W(this.x,this.y,this.z,this.w)}},{"./Vec3":30}],29:[function(O,G){function W(J){J=J||{},this.position=new X,J.position&&this.position.copy(J.position),this.quaternion=new Y,J.quaternion&&this.quaternion.copy(J.quaternion)}var X=O("./Vec3"),Y=O("./Quaternion");G.exports=W;var Z=new Y;W.pointToLocalFrame=function(J,Q,K,$){var $=$||new X;return K.vsub(J,$),Q.conjugate(Z),Z.vmult($,$),$},W.prototype.pointToLocal=function(J,Q){return W.pointToLocalFrame(this.position,this.quaternion,J,Q)},W.pointToWorldFrame=function(J,Q,K,$){var $=$||new X;return Q.vmult(K,$),$.vadd(J,$),$},W.prototype.pointToWorld=function(J,Q){return W.pointToWorldFrame(this.position,this.quaternion,J,Q)},W.prototype.vectorToWorldFrame=function(J,Q){var Q=Q||new X;return this.quaternion.vmult(J,Q),Q},W.vectorToWorldFrame=function(J,Q,K){return J.vmult(Q,K),K},W.vectorToLocalFrame=function(J,Q,K,$){var $=$||new X;return Q.w*=-1,Q.vmult(K,$),Q.w*=-1,$}},{"./Quaternion":28,"./Vec3":30}],30:[function(O,G){function W(Q,K,$){this.x=Q||0,this.y=K||0,this.z=$||0}G.exports=W;var X=O("./Mat3");W.ZERO=new W(0,0,0),W.UNIT_X=new W(1,0,0),W.UNIT_Y=new W(0,1,0),W.UNIT_Z=new W(0,0,1),W.prototype.cross=function(Q,K){var $=Q.x,ee=Q.y,re=Q.z,oe=this.x,ie=this.y,ne=this.z;return K=K||new W,K.x=ie*re-ne*ee,K.y=ne*$-oe*re,K.z=oe*ee-ie*$,K},W.prototype.set=function(Q,K,$){return this.x=Q,this.y=K,this.z=$,this},W.prototype.setZero=function(){this.x=this.y=this.z=0},W.prototype.vadd=function(Q,K){return K?void(K.x=Q.x+this.x,K.y=Q.y+this.y,K.z=Q.z+this.z):new W(this.x+Q.x,this.y+Q.y,this.z+Q.z)},W.prototype.vsub=function(Q,K){return K?void(K.x=this.x-Q.x,K.y=this.y-Q.y,K.z=this.z-Q.z):new W(this.x-Q.x,this.y-Q.y,this.z-Q.z)},W.prototype.crossmat=function(){return new X([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])},W.prototype.normalize=function(){var Q=this.x,K=this.y,$=this.z,ee=_Mathsqrt(Q*Q+K*K+$*$);if(0<ee){var re=1/ee;this.x*=re,this.y*=re,this.z*=re}else this.x=0,this.y=0,this.z=0;return ee},W.prototype.unit=function(Q){Q=Q||new W;var K=this.x,$=this.y,ee=this.z,re=_Mathsqrt(K*K+$*$+ee*ee);return 0<re?(re=1/re,Q.x=K*re,Q.y=$*re,Q.z=ee*re):(Q.x=1,Q.y=0,Q.z=0),Q},W.prototype.norm=function(){var Q=this.x,K=this.y,$=this.z;return _Mathsqrt(Q*Q+K*K+$*$)},W.prototype.length=W.prototype.norm,W.prototype.norm2=function(){return this.dot(this)},W.prototype.lengthSquared=W.prototype.norm2,W.prototype.distanceTo=function(Q){var K=this.x,$=this.y,ee=this.z,re=Q.x,oe=Q.y,ie=Q.z;return _Mathsqrt((re-K)*(re-K)+(oe-$)*(oe-$)+(ie-ee)*(ie-ee))},W.prototype.distanceSquared=function(Q){var K=this.x,$=this.y,ee=this.z,re=Q.x,oe=Q.y,ie=Q.z;return(re-K)*(re-K)+(oe-$)*(oe-$)+(ie-ee)*(ie-ee)},W.prototype.mult=function(Q,K){K=K||new W;var $=this.x,ee=this.y,re=this.z;return K.x=Q*$,K.y=Q*ee,K.z=Q*re,K},W.prototype.scale=W.prototype.mult,W.prototype.dot=function(Q){return this.x*Q.x+this.y*Q.y+this.z*Q.z},W.prototype.isZero=function(){return 0===this.x&&0===this.y&&0===this.z},W.prototype.negate=function(Q){return Q=Q||new W,Q.x=-this.x,Q.y=-this.y,Q.z=-this.z,Q};var Y=new W,Z=new W;W.prototype.tangents=function(Q,K){var $=this.norm();if(0<$){var ee=Y,re=1/$;ee.set(this.x*re,this.y*re,this.z*re);var oe=Z;0.9>_Mathabs(ee.x)?(oe.set(1,0,0),ee.cross(oe,Q)):(oe.set(0,1,0),ee.cross(oe,Q)),ee.cross(Q,K)}else Q.set(1,0,0),K.set(0,1,0)},W.prototype.toString=function(){return this.x+","+this.y+","+this.z},W.prototype.toArray=function(){return[this.x,this.y,this.z]},W.prototype.copy=function(Q){return this.x=Q.x,this.y=Q.y,this.z=Q.z,this},W.prototype.lerp=function(Q,K,$){var ee=this.x,re=this.y,oe=this.z;$.x=ee+(Q.x-ee)*K,$.y=re+(Q.y-re)*K,$.z=oe+(Q.z-oe)*K},W.prototype.almostEquals=function(Q,K){return void 0===K&&(K=1e-6),_Mathabs(this.x-Q.x)>K||_Mathabs(this.y-Q.y)>K||_Mathabs(this.z-Q.z)>K?!1:!0},W.prototype.almostZero=function(Q){return void 0===Q&&(Q=1e-6),_Mathabs(this.x)>Q||_Mathabs(this.y)>Q||_Mathabs(this.z)>Q?!1:!0};var J=new W;W.prototype.isAntiparallelTo=function(Q,K){return this.negate(J),J.almostEquals(Q,K)},W.prototype.clone=function(){return new W(this.x,this.y,this.z)}},{"./Mat3":27}],31:[function(O,G){function W(Ee){Ee=Ee||{},X.apply(this),this.id=W.idCounter++,this.world=null,this.preStep=null,this.postStep=null,this.vlambda=new Z,this.collisionFilterGroup="number"==typeof Ee.collisionFilterGroup?Ee.collisionFilterGroup:1,this.collisionFilterMask="number"==typeof Ee.collisionFilterMask?Ee.collisionFilterMask:1,this.collisionResponse=!0,this.position=new Z,Ee.position&&this.position.copy(Ee.position),this.previousPosition=new Z,this.initPosition=new Z,this.velocity=new Z,Ee.velocity&&this.velocity.copy(Ee.velocity),this.initVelocity=new Z,this.force=new Z;var Se="number"==typeof Ee.mass?Ee.mass:0;this.mass=Se,this.invMass=0<Se?1/Se:0,this.material=Ee.material||null,this.linearDamping="number"==typeof Ee.linearDamping?Ee.linearDamping:0.01,this.type=0>=Se?W.STATIC:W.DYNAMIC,typeof Ee.type==typeof W.STATIC&&(this.type=Ee.type),this.allowSleep=!("undefined"!=typeof Ee.allowSleep)||Ee.allowSleep,this.sleepState=0,this.sleepSpeedLimit="undefined"==typeof Ee.sleepSpeedLimit?0.1:Ee.sleepSpeedLimit,this.sleepTimeLimit="undefined"==typeof Ee.sleepTimeLimit?1:Ee.sleepTimeLimit,this.timeLastSleepy=0,this._wakeUpAfterNarrowphase=!1,this.torque=new Z,this.quaternion=new Q,Ee.quaternion&&this.quaternion.copy(Ee.quaternion),this.initQuaternion=new Q,this.angularVelocity=new Z,Ee.angularVelocity&&this.angularVelocity.copy(Ee.angularVelocity),this.initAngularVelocity=new Z,this.interpolatedPosition=new Z,this.interpolatedQuaternion=new Q,this.shapes=[],this.shapeOffsets=[],this.shapeOrientations=[],this.inertia=new Z,this.invInertia=new Z,this.invInertiaWorld=new J,this.invMassSolve=0,this.invInertiaSolve=new Z,this.invInertiaWorldSolve=new J,this.fixedRotation="undefined"!=typeof Ee.fixedRotation&&Ee.fixedRotation,this.angularDamping="undefined"==typeof Ee.angularDamping?0.01:Ee.angularDamping,this.aabb=new $,this.aabbNeedsUpdate=!0,this.wlambda=new Z,Ee.shape&&this.addShape(Ee.shape),this.updateMassProperties()}G.exports=W;var X=O("../utils/EventTarget"),Y=O("../shapes/Shape"),Z=O("../math/Vec3"),J=O("../math/Mat3"),Q=O("../math/Quaternion"),K=O("../material/Material"),$=O("../collision/AABB"),ee=O("../shapes/Box");W.prototype=new X,W.prototype.constructor=W,W.DYNAMIC=1,W.STATIC=2,W.KINEMATIC=4,W.AWAKE=0,W.SLEEPY=1,W.SLEEPING=2,W.idCounter=0,W.prototype.wakeUp=function(){var Ee=this.sleepState;this.sleepState=0,Ee===W.SLEEPING&&this.dispatchEvent({type:"wakeup"})},W.prototype.sleep=function(){this.sleepState=W.SLEEPING,this.velocity.set(0,0,0),this.angularVelocity.set(0,0,0)},W.sleepyEvent={type:"sleepy"},W.sleepEvent={type:"sleep"},W.prototype.sleepTick=function(Ee){if(this.allowSleep){var Se=this.sleepState,Ae=this.velocity.norm2()+this.angularVelocity.norm2(),we=_Mathpow(this.sleepSpeedLimit,2);Se===W.AWAKE&&Ae<we?(this.sleepState=W.SLEEPY,this.timeLastSleepy=Ee,this.dispatchEvent(W.sleepyEvent)):Se===W.SLEEPY&&Ae>we?this.wakeUp():Se===W.SLEEPY&&Ee-this.timeLastSleepy>this.sleepTimeLimit&&(this.sleep(),this.dispatchEvent(W.sleepEvent))}},W.prototype.updateSolveMassProperties=function(){this.sleepState===W.SLEEPING||this.type===W.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve.setZero(),this.invInertiaWorldSolve.setZero()):(this.invMassSolve=this.invMass,this.invInertiaSolve.copy(this.invInertia),this.invInertiaWorldSolve.copy(this.invInertiaWorld))},W.prototype.pointToLocalFrame=function(Ee,Se){var Se=Se||new Z;return Ee.vsub(this.position,Se),this.quaternion.conjugate().vmult(Se,Se),Se},W.prototype.vectorToLocalFrame=function(Ee,Se){var Se=Se||new Z;return this.quaternion.conjugate().vmult(Ee,Se),Se},W.prototype.pointToWorldFrame=function(Ee,Se){var Se=Se||new Z;return this.quaternion.vmult(Ee,Se),Se.vadd(this.position,Se),Se},W.prototype.vectorToWorldFrame=function(Ee,Se){var Se=Se||new Z;return this.quaternion.vmult(Ee,Se),Se};var re=new Z,oe=new Q;W.prototype.addShape=function(Ee,Se,Ae){var we=new Z,Me=new Q;return Se&&we.copy(Se),Ae&&Me.copy(Ae),this.shapes.push(Ee),this.shapeOffsets.push(we),this.shapeOrientations.push(Me),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,this},W.prototype.updateBoundingRadius=function(){for(var Ee=this.shapes,Se=this.shapeOffsets,Ae=Ee.length,we=0,Me=0,Re;Me!==Ae;Me++){Re=Ee[Me],Re.updateBoundingSphereRadius();var Ce=Se[Me].norm(),Pe=Re.boundingSphereRadius;Ce+Pe>we&&(we=Ce+Pe)}this.boundingRadius=we};var ie=new $;W.prototype.computeAABB=function(){for(var Ee=this.shapes,Se=this.shapeOffsets,Ae=this.shapeOrientations,we=Ee.length,Me=re,Re=oe,Ce=this.quaternion,Pe=this.aabb,Le=ie,Ie=0,Be;Ie!==we;Ie++)Be=Ee[Ie],Ae[Ie].mult(Ce,Re),Re.vmult(Se[Ie],Me),Me.vadd(this.position,Me),Be.calculateWorldAABB(Me,Re,Le.lowerBound,Le.upperBound),0===Ie?Pe.copy(Le):Pe.extend(Le);this.aabbNeedsUpdate=!1};var ne=new J,se=new J,le=new J;W.prototype.updateInertiaWorld=function(Ee){var Se=this.invInertia;if(Se.x===Se.y&&Se.y===Se.z&&!Ee);else{var Ae=ne,we=se;Ae.setRotationFromQuaternion(this.quaternion),Ae.transpose(we),Ae.scale(Se,Ae),Ae.mmult(we,this.invInertiaWorld)}};var pe=new Z,ue=new Z;W.prototype.applyForce=function(Ee,Se){if(this.type===W.DYNAMIC){var Ae=pe;Se.vsub(this.position,Ae);var we=ue;Ae.cross(Ee,we),this.force.vadd(Ee,this.force),this.torque.vadd(we,this.torque)}};var ge=new Z,fe=new Z;W.prototype.applyLocalForce=function(Ee,Se){if(this.type===W.DYNAMIC){var Ae=ge,we=fe;this.vectorToWorldFrame(Ee,Ae),this.pointToWorldFrame(Se,we),this.applyForce(Ae,we)}};var he=new Z,ye=new Z,_e=new Z;W.prototype.applyImpulse=function(Ee,Se){if(this.type===W.DYNAMIC){var Ae=he;Se.vsub(this.position,Ae);var we=ye;we.copy(Ee),we.mult(this.invMass,we),this.velocity.vadd(we,this.velocity);var Me=_e;Ae.cross(Ee,Me),this.invInertiaWorld.vmult(Me,Me),this.angularVelocity.vadd(Me,this.angularVelocity)}};var xe=new Z,ve=new Z;W.prototype.applyLocalImpulse=function(Ee,Se){if(this.type===W.DYNAMIC){var Ae=xe,we=ve;this.vectorToWorldFrame(Ee,Ae),this.pointToWorldFrame(Se,we),this.applyImpulse(Ae,we)}};var Te=new Z;W.prototype.updateMassProperties=function(){var Ee=Te;this.invMass=0<this.mass?1/this.mass:0;var Se=this.inertia,Ae=this.fixedRotation;this.computeAABB(),Ee.set((this.aabb.upperBound.x-this.aabb.lowerBound.x)/2,(this.aabb.upperBound.y-this.aabb.lowerBound.y)/2,(this.aabb.upperBound.z-this.aabb.lowerBound.z)/2),ee.calculateInertia(Ee,this.mass,Se),this.invInertia.set(0<Se.x&&!Ae?1/Se.x:0,0<Se.y&&!Ae?1/Se.y:0,0<Se.z&&!Ae?1/Se.z:0),this.updateInertiaWorld(!0)},W.prototype.getVelocityAtWorldPoint=function(Ee,Se){var Ae=new Z;return Ee.vsub(this.position,Ae),this.angularVelocity.cross(Ae,Se),this.velocity.vadd(Se,Se),Se}},{"../collision/AABB":3,"../material/Material":25,"../math/Mat3":27,"../math/Quaternion":28,"../math/Vec3":30,"../shapes/Box":37,"../shapes/Shape":43,"../utils/EventTarget":49}],32:[function(O,G){function W(Be){this.chassisBody=Be.chassisBody,this.wheelInfos=[],this.sliding=!1,this.world=null,this.indexRightAxis="undefined"==typeof Be.indexRightAxis?1:Be.indexRightAxis,this.indexForwardAxis="undefined"==typeof Be.indexForwardAxis?0:Be.indexForwardAxis,this.indexUpAxis="undefined"==typeof Be.indexUpAxis?2:Be.indexUpAxis}function X(Be,Ne,ze,De,Fe){var Ue=0,Oe=ze,ke=Ee,Ve=Se,Ge=Ae;Be.getVelocityAtWorldPoint(Oe,ke),Ne.getVelocityAtWorldPoint(Oe,Ve),ke.vsub(Ve,Ge);var He=De.dot(Ge),We=Y(Be,ze,De),je=Y(Ne,ze,De);return Ue=-He*(1/(We+je)),Fe<Ue&&(Ue=Fe),Ue<-Fe&&(Ue=-Fe),Ue}function Y(Be,Ne,ze){var De=we,Fe=Me,Ue=Re,Oe=Ce;return Ne.vsub(Be.position,De),De.cross(ze,Fe),Be.invInertiaWorld.vmult(Fe,Oe),Oe.cross(De,Ue),Be.invMass+ze.dot(Ue)}function Z(Be,Ne,ze,De,Fe,Ue){var Oe=Fe.norm2();if(1.1<Oe)return 0;var ke=Pe,Ve=Le,Ge=Ie;Be.getVelocityAtWorldPoint(Ne,ke),ze.getVelocityAtWorldPoint(De,Ve),ke.vsub(Ve,Ge);var He=Fe.dot(Ge),je=1/(Be.invMass+ze.invMass);return-0.2*He*je}var J=O("./Body"),Q=O("../math/Vec3"),K=O("../math/Quaternion"),$=O("../collision/RaycastResult"),ee=O("../collision/Ray"),re=O("../objects/WheelInfo");G.exports=W;var oe=new Q,ie=new Q,ne=new Q,se=new Q,le=new Q,pe=new Q,ue=new ee;W.prototype.addWheel=function(Be){Be=Be||{};var Ne=new re(Be),ze=this.wheelInfos.length;return this.wheelInfos.push(Ne),ze},W.prototype.setSteeringValue=function(Be,Ne){var ze=this.wheelInfos[Ne];ze.steering=Be};new Q;W.prototype.applyEngineForce=function(Be,Ne){this.wheelInfos[Ne].engineForce=Be},W.prototype.setBrake=function(Be,Ne){this.wheelInfos[Ne].brake=Be},W.prototype.addToWorld=function(Be){this.constraints;Be.add(this.chassisBody);var ze=this;this.preStepCallback=function(){ze.updateVehicle(Be.dt)},Be.addEventListener("preStep",this.preStepCallback),this.world=Be},W.prototype.getVehicleAxisWorld=function(Be,Ne){Ne.set(0===Be?1:0,1===Be?1:0,2===Be?1:0),this.chassisBody.vectorToWorldFrame(Ne,Ne)},W.prototype.updateVehicle=function(Be){for(var Ne=this.wheelInfos,ze=Ne.length,De=this.chassisBody,Fe=0;Fe<ze;Fe++)this.updateWheelTransform(Fe);this.currentVehicleSpeedKmHour=3.6*De.velocity.norm();var Ue=new Q;this.getVehicleAxisWorld(this.indexForwardAxis,Ue),0>Ue.dot(De.velocity)&&(this.currentVehicleSpeedKmHour*=-1);for(var Fe=0;Fe<ze;Fe++)this.castRay(Ne[Fe]);this.updateSuspension(Be);for(var Oe=new Q,ke=new Q,Fe=0;Fe<ze;Fe++){var Ve=Ne[Fe],Ge=Ve.suspensionForce;Ge>Ve.maxSuspensionForce&&(Ge=Ve.maxSuspensionForce),Ve.raycastResult.hitNormalWorld.scale(Ge*Be,Oe),Ve.raycastResult.hitPointWorld.vsub(De.position,ke),De.applyImpulse(Oe,Ve.raycastResult.hitPointWorld)}this.updateFriction(Be);var He=new Q,We=new Q,je=new Q;for(Fe=0;Fe<ze;Fe++){var Ve=Ne[Fe];De.getVelocityAtWorldPoint(Ve.chassisConnectionPointWorld,je);var qe=1;switch(this.indexUpAxis){case 1:qe=-1;}if(Ve.isInContact){this.getVehicleAxisWorld(this.indexForwardAxis,We);var Xe=We.dot(Ve.raycastResult.hitNormalWorld);Ve.raycastResult.hitNormalWorld.scale(Xe,He),We.vsub(He,We);var Ye=We.dot(je);Ve.deltaRotation=qe*Ye*Be/Ve.radius}(Ve.sliding||!Ve.isInContact)&&0!==Ve.engineForce&&Ve.useCustomSlidingRotationalSpeed&&(Ve.deltaRotation=(0<Ve.engineForce?1:-1)*Ve.customSlidingRotationalSpeed*Be),_Mathabs(Ve.brake)>_Mathabs(Ve.engineForce)&&(Ve.deltaRotation=0),Ve.rotation+=Ve.deltaRotation,Ve.deltaRotation*=0.99}},W.prototype.updateSuspension=function(){for(var Ne=this.chassisBody,ze=Ne.mass,De=this.wheelInfos,Fe=De.length,Ue=0,Oe;Ue<Fe;Ue++)if(Oe=De[Ue],Oe.isInContact){var Ve=Oe.suspensionRestLength,Ge=Oe.suspensionLength,ke;ke=Oe.suspensionStiffness*(Ve-Ge)*Oe.clippedInvContactDotSuspension;var We=Oe.suspensionRelativeVelocity,je;je=0>We?Oe.dampingCompression:Oe.dampingRelaxation,ke-=je*We,Oe.suspensionForce=ke*ze,0>Oe.suspensionForce&&(Oe.suspensionForce=0)}else Oe.suspensionForce=0},W.prototype.removeFromWorld=function(Be){this.constraints;Be.remove(this.chassisBody),Be.removeEventListener("preStep",this.preStepCallback),this.world=null};var fe=new Q,he=new Q;W.prototype.castRay=function(Be){var Ne=fe,ze=he;this.updateWheelTransformWorld(Be);var De=this.chassisBody,Fe=-1,Ue=Be.suspensionRestLength+Be.radius;Be.directionWorld.scale(Ue,Ne);var Oe=Be.chassisConnectionPointWorld;Oe.vadd(Ne,ze);var ke=Be.raycastResult;ke.reset();var Ge=De.collisionResponse;De.collisionResponse=!1,this.world.rayTest(Oe,ze,ke),De.collisionResponse=Ge;var He=ke.body;if(Be.raycastResult.groundObject=0,He){Fe=ke.distance,Be.raycastResult.hitNormalWorld=ke.hitNormalWorld,Be.isInContact=!0;var We=ke.distance;Be.suspensionLength=We-Be.radius;var je=Be.suspensionRestLength-Be.maxSuspensionTravel,qe=Be.suspensionRestLength+Be.maxSuspensionTravel;Be.suspensionLength<je&&(Be.suspensionLength=je),Be.suspensionLength>qe&&(Be.suspensionLength=qe,Be.raycastResult.reset());var Xe=Be.raycastResult.hitNormalWorld.dot(Be.directionWorld),Ye=new Q;De.getVelocityAtWorldPoint(Be.raycastResult.hitPointWorld,Ye);var Ze=Be.raycastResult.hitNormalWorld.dot(Ye);if(-0.1<=Xe)Be.suspensionRelativeVelocity=0,Be.clippedInvContactDotSuspension=10;else{var Je=-1/Xe;Be.suspensionRelativeVelocity=Ze*Je,Be.clippedInvContactDotSuspension=Je}}else Be.suspensionLength=Be.suspensionRestLength+0*Be.maxSuspensionTravel,Be.suspensionRelativeVelocity=0,Be.directionWorld.scale(-1,Be.raycastResult.hitNormalWorld),Be.clippedInvContactDotSuspension=1;return Fe},W.prototype.updateWheelTransformWorld=function(Be){Be.isInContact=!1;var Ne=this.chassisBody;Ne.pointToWorldFrame(Be.chassisConnectionPointLocal,Be.chassisConnectionPointWorld),Ne.vectorToWorldFrame(Be.directionLocal,Be.directionWorld),Ne.vectorToWorldFrame(Be.axleLocal,Be.axleWorld)},W.prototype.updateWheelTransform=function(Be){var Ne=se,ze=le,De=pe,Fe=this.wheelInfos[Be];this.updateWheelTransformWorld(Fe),Fe.directionLocal.scale(-1,Ne),ze.copy(Fe.axleLocal),Ne.cross(ze,De),De.normalize(),ze.normalize();var Ue=Fe.steering,Oe=new K;Oe.setFromAxisAngle(Ne,Ue);var ke=new K;ke.setFromAxisAngle(ze,Fe.rotation);var Ve=Fe.worldTransform.quaternion;this.chassisBody.quaternion.mult(Oe,Ve),Ve.mult(ke,Ve),Ve.normalize();var Ge=Fe.worldTransform.position;Ge.copy(Fe.directionWorld),Ge.scale(Fe.suspensionLength,Ge),Ge.vadd(Fe.chassisConnectionPointWorld,Ge)};var ye=[new Q(1,0,0),new Q(0,1,0),new Q(0,0,1)];W.prototype.getWheelTransformWorld=function(Be){return this.wheelInfos[Be].worldTransform};var _e=new Q,xe=[],ve=[];W.prototype.updateFriction=function(Be){for(var Ne=_e,ze=this.wheelInfos,De=ze.length,Fe=this.chassisBody,Ue=ve,Oe=xe,ke=0,Ve=0;Ve<De;Ve++){var Ge=ze[Ve],He=Ge.raycastResult.body;He&&ke++,Ge.sideImpulse=0,Ge.forwardImpulse=0,Ue[Ve]||(Ue[Ve]=new Q),Oe[Ve]||(Oe[Ve]=new Q)}for(var Ve=0;Ve<De;Ve++){var Ge=ze[Ve],He=Ge.raycastResult.body;if(He){var We=Oe[Ve],je=this.getWheelTransformWorld(Ve);je.vectorToWorldFrame(ye[this.indexRightAxis],We);var qe=Ge.raycastResult.hitNormalWorld,Xe=We.dot(qe);qe.scale(Xe,Ne),We.vsub(Ne,We),We.normalize(),qe.cross(We,Ue[Ve]),Ue[Ve].normalize(),Ge.sideImpulse=Z(Fe,Ge.raycastResult.hitPointWorld,He,Ge.raycastResult.hitPointWorld,We),Ge.sideImpulse*=1}}this.sliding=!1;for(var Ve=0;Ve<De;Ve++){var Ge=ze[Ve],He=Ge.raycastResult.body,Je=0;if(Ge.slipInfo=1,He){var Ke=Ge.brake?Ge.brake:0;Je=X(Fe,He,Ge.raycastResult.hitPointWorld,Ue[Ve],Ke),Je+=Ge.engineForce*Be;var $e=Ke/Je;Ge.slipInfo*=$e}if(Ge.forwardImpulse=0,Ge.skidInfo=1,He){Ge.skidInfo=1;var et=Ge.suspensionForce*Be*Ge.frictionSlip;Ge.forwardImpulse=Je;var ot=Ge.forwardImpulse*0.5,it=Ge.sideImpulse*1,nt=ot*ot+it*it;if(Ge.sliding=!1,nt>et*et){this.sliding=!0,Ge.sliding=!0;var $e=et/_Mathsqrt(nt);Ge.skidInfo*=$e}}}if(this.sliding)for(var Ve=0,Ge;Ve<De;Ve++)Ge=ze[Ve],0!==Ge.sideImpulse&&1>Ge.skidInfo&&(Ge.forwardImpulse*=Ge.skidInfo,Ge.sideImpulse*=Ge.skidInfo);for(var Ve=0;Ve<De;Ve++){var Ge=ze[Ve],ct=new Q;if(ct.copy(Ge.raycastResult.hitPointWorld),0!==Ge.forwardImpulse){var ut=new Q;Ue[Ve].scale(Ge.forwardImpulse,ut),Fe.applyImpulse(ut,ct)}if(0!==Ge.sideImpulse){var He=Ge.raycastResult.body,mt=new Q;mt.copy(Ge.raycastResult.hitPointWorld);var ft=new Q;Oe[Ve].scale(Ge.sideImpulse,ft),Fe.pointToLocalFrame(ct,ct),ct["xyz"[this.indexUpAxis]]*=Ge.rollInfluence,Fe.pointToWorldFrame(ct,ct),Fe.applyImpulse(ft,ct),ft.scale(-1,ft),He.applyImpulse(ft,mt)}}};var Ee=new Q,Se=new Q,Ae=new Q,we=new Q,Me=new Q,Re=new Q,Ce=new Q,Pe=new Q,Le=new Q,Ie=new Q},{"../collision/Ray":9,"../collision/RaycastResult":10,"../math/Quaternion":28,"../math/Vec3":30,"../objects/WheelInfo":36,"./Body":31}],33:[function(O,G){function W(ee){if(this.wheelBodies=[],this.coordinateSystem="undefined"==typeof ee.coordinateSystem?new J(1,2,3):ee.coordinateSystem.clone(),this.chassisBody=ee.chassisBody,!this.chassisBody){var re=new Z(new J(5,2,0.5));this.chassisBody=new X(1,re)}this.constraints=[],this.wheelAxes=[],this.wheelForces=[]}var X=O("./Body"),Y=O("../shapes/Sphere"),Z=O("../shapes/Box"),J=O("../math/Vec3"),Q=O("../constraints/HingeConstraint");G.exports=W,W.prototype.addWheel=function(ee){ee=ee||{};var re=ee.body;re||(re=new X(1,new Y(1.2))),this.wheelBodies.push(re),this.wheelForces.push(0);var oe=new J,ie="undefined"==typeof ee.position?new J:ee.position.clone(),ne=new J;this.chassisBody.pointToWorldFrame(ie,ne),re.position.set(ne.x,ne.y,ne.z);var se="undefined"==typeof ee.axis?new J(0,1,0):ee.axis.clone();this.wheelAxes.push(se);var le=new Q(this.chassisBody,re,{pivotA:ie,axisA:se,pivotB:J.ZERO,axisB:se,collideConnected:!1});return this.constraints.push(le),this.wheelBodies.length-1},W.prototype.setSteeringValue=function(ee,re){var oe=this.wheelAxes[re],ie=_Mathcos(ee),ne=_Mathsin(ee),se=oe.x,le=oe.y;this.constraints[re].axisA.set(ie*se-ne*le,ne*se+ie*le,0)},W.prototype.setMotorSpeed=function(ee,re){var oe=this.constraints[re];oe.enableMotor(),oe.motorTargetVelocity=ee},W.prototype.disableMotor=function(ee){var re=this.constraints[ee];re.disableMotor()};var K=new J;W.prototype.setWheelForce=function(ee,re){this.wheelForces[re]=ee},W.prototype.applyWheelForce=function(ee,re){var oe=this.wheelAxes[re],ie=this.wheelBodies[re],ne=ie.torque;oe.scale(ee,K),ie.vectorToWorldFrame(K,K),ne.vadd(K,ne)},W.prototype.addToWorld=function(ee){for(var re=this.constraints,oe=this.wheelBodies.concat([this.chassisBody]),ie=0;ie<oe.length;ie++)ee.add(oe[ie]);for(var ie=0;ie<re.length;ie++)ee.addConstraint(re[ie]);ee.addEventListener("preStep",this._update.bind(this))},W.prototype._update=function(){for(var ee=this.wheelForces,re=0;re<ee.length;re++)this.applyWheelForce(ee[re],re)},W.prototype.removeFromWorld=function(ee){for(var re=this.constraints,oe=this.wheelBodies.concat([this.chassisBody]),ie=0;ie<oe.length;ie++)ee.remove(oe[ie]);for(var ie=0;ie<re.length;ie++)ee.removeConstraint(re[ie])};var $=new J;W.prototype.getWheelSpeed=function(ee){var re=this.wheelAxes[ee],oe=this.wheelBodies[ee],ie=oe.angularVelocity;return this.chassisBody.vectorToWorldFrame(re,$),ie.dot($)}},{"../constraints/HingeConstraint":15,"../math/Vec3":30,"../shapes/Box":37,"../shapes/Sphere":44,"./Body":31}],34:[function(O,G){function W(){this.particles=[],this.density=1,this.smoothingRadius=1,this.speedOfSound=1,this.viscosity=0.01,this.eps=1e-6,this.pressures=[],this.densities=[],this.neighbors=[]}G.exports=W;var X=O("../shapes/Shape"),Y=O("../math/Vec3"),Z=O("../math/Quaternion"),J=O("../shapes/Particle"),Q=O("../objects/Body"),K=O("../material/Material");W.prototype.add=function(le){this.particles.push(le),this.neighbors.length<this.particles.length&&this.neighbors.push([])},W.prototype.remove=function(le){var pe=this.particles.indexOf(le);-1!==pe&&(this.particles.splice(pe,1),this.neighbors.length>this.particles.length&&this.neighbors.pop())};var $=new Y;W.prototype.getNeighbors=function(le,pe){for(var ue=this.particles.length,ge=le.id,fe=this.smoothingRadius*this.smoothingRadius,he=$,ye=0,_e;ye!==ue;ye++)_e=this.particles[ye],_e.position.vsub(le.position,he),ge!==_e.id&&he.norm2()<fe&&pe.push(_e)};var ee=new Y,re=new Y,oe=new Y,ie=new Y,ne=new Y,se=new Y;W.prototype.update=function(){for(var le=this.particles.length,pe=ee,ue=this.speedOfSound,ge=this.eps,fe=0;fe!==le;fe++){var he=this.particles[fe],ye=this.neighbors[fe];ye.length=0,this.getNeighbors(he,ye),ye.push(this.particles[fe]);for(var _e=ye.length,xe=0,ve=0;ve!==_e;ve++){he.position.vsub(ye[ve].position,pe);var Te=pe.norm(),Ee=this.w(Te);xe+=ye[ve].mass*Ee}this.densities[fe]=xe,this.pressures[fe]=ue*ue*(this.densities[fe]-this.density)}for(var Se=re,Ae=oe,we=ie,Me=ne,Re=se,fe=0,Ce;fe!==le;fe++){Ce=this.particles[fe],Se.set(0,0,0),Ae.set(0,0,0);for(var ye=this.neighbors[fe],_e=ye.length,ve=0,Pe,Le,Be;ve!==_e;ve++){Be=ye[ve],Ce.position.vsub(Be.position,Me);var Ne=Me.norm();Pe=-Be.mass*(this.pressures[fe]/(this.densities[fe]*this.densities[fe]+ge)+this.pressures[ve]/(this.densities[ve]*this.densities[ve]+ge)),this.gradw(Me,we),we.mult(Pe,we),Se.vadd(we,Se),Be.velocity.vsub(Ce.velocity,Re),Re.mult(1/(1e-4+this.densities[fe]*this.densities[ve])*this.viscosity*Be.mass,Re),Le=this.nablaw(Ne),Re.mult(Le,Re),Ae.vadd(Re,Ae)}Ae.mult(Ce.mass,Ae),Se.mult(Ce.mass,Se),Ce.force.vadd(Ae,Ce.force),Ce.force.vadd(Se,Ce.force)}},W.prototype.w=function(le){var pe=this.smoothingRadius;return 315/(64*_MathPI*_Mathpow(pe,9))*_Mathpow(pe*pe-le*le,3)},W.prototype.gradw=function(le,pe){var ue=le.norm(),ge=this.smoothingRadius;le.mult(945/(32*_MathPI*_Mathpow(ge,9))*_Mathpow(ge*ge-ue*ue,2),pe)},W.prototype.nablaw=function(le){var pe=this.smoothingRadius,ue=945/(32*_MathPI*_Mathpow(pe,9))*(pe*pe-le*le)*(7*le*le-3*pe*pe);return ue}},{"../material/Material":25,"../math/Quaternion":28,"../math/Vec3":30,"../objects/Body":31,"../shapes/Particle":41,"../shapes/Shape":43}],35:[function(O,G){function W(se,le,pe){pe=pe||{},this.restLength="number"==typeof pe.restLength?pe.restLength:1,this.stiffness=pe.stiffness||100,this.damping=pe.damping||1,this.bodyA=se,this.bodyB=le,this.localAnchorA=new X,this.localAnchorB=new X,pe.localAnchorA&&this.localAnchorA.copy(pe.localAnchorA),pe.localAnchorB&&this.localAnchorB.copy(pe.localAnchorB),pe.worldAnchorA&&this.setWorldAnchorA(pe.worldAnchorA),pe.worldAnchorB&&this.setWorldAnchorB(pe.worldAnchorB)}var X=O("../math/Vec3");G.exports=W,W.prototype.setWorldAnchorA=function(se){this.bodyA.pointToLocalFrame(se,this.localAnchorA)},W.prototype.setWorldAnchorB=function(se){this.bodyB.pointToLocalFrame(se,this.localAnchorB)},W.prototype.getWorldAnchorA=function(se){this.bodyA.pointToWorldFrame(this.localAnchorA,se)},W.prototype.getWorldAnchorB=function(se){this.bodyB.pointToWorldFrame(this.localAnchorB,se)};var Y=new X,Z=new X,J=new X,Q=new X,K=new X,$=new X,ee=new X,re=new X,oe=new X,ie=new X,ne=new X;W.prototype.applyForce=function(){var se=this.stiffness,le=this.damping,pe=this.restLength,ue=this.bodyA,ge=this.bodyB,fe=Y,he=Z,ye=J,_e=Q,xe=ne,ve=K,Te=$,Ee=ee,Se=re,Ae=oe,we=ie;this.getWorldAnchorA(ve),this.getWorldAnchorB(Te),ve.vsub(ue.position,Ee),Te.vsub(ge.position,Se),Te.vsub(ve,fe);var Me=fe.norm();he.copy(fe),he.normalize(),ge.velocity.vsub(ue.velocity,ye),ge.angularVelocity.cross(Se,xe),ye.vadd(xe,ye),ue.angularVelocity.cross(Ee,xe),ye.vsub(xe,ye),he.mult(-se*(Me-pe)-le*ye.dot(he),_e),ue.force.vsub(_e,ue.force),ge.force.vadd(_e,ge.force),Ee.cross(_e,Ae),Se.cross(_e,we),ue.torque.vsub(Ae,ue.torque),ge.torque.vadd(we,ge.torque)}},{"../math/Vec3":30}],36:[function(O,G){function W($){$=J.defaults($,{chassisConnectionPointLocal:new X,chassisConnectionPointWorld:new X,directionLocal:new X,directionWorld:new X,axleLocal:new X,axleWorld:new X,suspensionRestLength:1,suspensionMaxLength:2,radius:1,suspensionStiffness:100,dampingCompression:10,dampingRelaxation:10,frictionSlip:1e4,steering:0,rotation:0,deltaRotation:0,rollInfluence:0.01,maxSuspensionForce:_NumberMAX_VALUE,isFrontWheel:!0,clippedInvContactDotSuspension:1,suspensionRelativeVelocity:0,suspensionForce:0,skidInfo:0,suspensionLength:0,maxSuspensionTravel:1,useCustomSlidingRotationalSpeed:!1,customSlidingRotationalSpeed:-0.1}),this.maxSuspensionTravel=$.maxSuspensionTravel,this.customSlidingRotationalSpeed=$.customSlidingRotationalSpeed,this.useCustomSlidingRotationalSpeed=$.useCustomSlidingRotationalSpeed,this.sliding=!1,this.chassisConnectionPointLocal=$.chassisConnectionPointLocal.clone(),this.chassisConnectionPointWorld=$.chassisConnectionPointWorld.clone(),this.directionLocal=$.directionLocal.clone(),this.directionWorld=$.directionWorld.clone(),this.axleLocal=$.axleLocal.clone(),this.axleWorld=$.axleWorld.clone(),this.suspensionRestLength=$.suspensionRestLength,this.suspensionMaxLength=$.suspensionMaxLength,this.radius=$.radius,this.suspensionStiffness=$.suspensionStiffness,this.dampingCompression=$.dampingCompression,this.dampingRelaxation=$.dampingRelaxation,this.frictionSlip=$.frictionSlip,this.steering=0,this.rotation=0,this.deltaRotation=0,this.rollInfluence=$.rollInfluence,this.maxSuspensionForce=$.maxSuspensionForce,this.engineForce=0,this.brake=0,this.isFrontWheel=$.isFrontWheel,this.clippedInvContactDotSuspension=1,this.suspensionRelativeVelocity=0,this.suspensionForce=0,this.skidInfo=0,this.suspensionLength=0,this.sideImpulse=0,this.forwardImpulse=0,this.raycastResult=new Z,this.worldTransform=new Y,this.isInContact=!1}var X=O("../math/Vec3"),Y=O("../math/Transform"),Z=O("../collision/RaycastResult"),J=O("../utils/Utils");G.exports=W;var Q=new X,K=new X,Q=new X;W.prototype.updateWheel=function($){var ee=this.raycastResult;if(this.isInContact){var re=ee.hitNormalWorld.dot(ee.directionWorld);ee.hitPointWorld.vsub($.position,K),$.getVelocityAtWorldPoint(K,Q);var oe=ee.hitNormalWorld.dot(Q);if(-0.1<=re)this.suspensionRelativeVelocity=0,this.clippedInvContactDotSuspension=10;else{var ie=-1/re;this.suspensionRelativeVelocity=oe*ie,this.clippedInvContactDotSuspension=ie}}else ee.suspensionLength=this.suspensionRestLength,this.suspensionRelativeVelocity=0,ee.directionWorld.scale(-1,ee.hitNormalWorld),this.clippedInvContactDotSuspension=1}},{"../collision/RaycastResult":10,"../math/Transform":29,"../math/Vec3":30,"../utils/Utils":53}],37:[function(O,G){function W($){X.call(this),this.type=X.types.BOX,this.halfExtents=$,this.convexPolyhedronRepresentation=null,this.updateConvexPolyhedronRepresentation(),this.updateBoundingSphereRadius()}G.exports=W;var X=O("./Shape"),Y=O("../math/Vec3"),Z=O("./ConvexPolyhedron");W.prototype=new X,W.prototype.constructor=W,W.prototype.updateConvexPolyhedronRepresentation=function(){var $=this.halfExtents.x,ee=this.halfExtents.y,re=this.halfExtents.z,oe=Y,ie=[new oe(-$,-ee,-re),new oe($,-ee,-re),new oe($,ee,-re),new oe(-$,ee,-re),new oe(-$,-ee,re),new oe($,-ee,re),new oe($,ee,re),new oe(-$,ee,re)],se=[new oe(0,0,1),new oe(0,1,0),new oe(1,0,0)],le=new Z(ie,[[3,2,1,0],[4,5,6,7],[5,4,0,1],[2,3,7,6],[0,4,7,3],[1,2,6,5]]);this.convexPolyhedronRepresentation=le,le.material=this.material},W.prototype.calculateLocalInertia=function($,ee){return ee=ee||new Y,W.calculateInertia(this.halfExtents,$,ee),ee},W.calculateInertia=function($,ee,re){var oe=$;re.x=1/12*ee*(2*(2*oe.y)*oe.y+2*(2*oe.z)*oe.z),re.y=1/12*ee*(2*(2*oe.x)*oe.x+2*(2*oe.z)*oe.z),re.z=1/12*ee*(2*(2*oe.y)*oe.y+2*(2*oe.x)*oe.x)},W.prototype.getSideNormals=function($,ee){var re=$,oe=this.halfExtents;if(re[0].set(oe.x,0,0),re[1].set(0,oe.y,0),re[2].set(0,0,oe.z),re[3].set(-oe.x,0,0),re[4].set(0,-oe.y,0),re[5].set(0,0,-oe.z),void 0!==ee)for(var ie=0;ie!==re.length;ie++)ee.vmult(re[ie],re[ie]);return re},W.prototype.volume=function(){return 8*this.halfExtents.x*this.halfExtents.y*this.halfExtents.z},W.prototype.updateBoundingSphereRadius=function(){this.boundingSphereRadius=this.halfExtents.norm()};var J=new Y,Q=new Y;W.prototype.forEachWorldCorner=function($,ee,re){for(var oe=this.halfExtents,ie=[[oe.x,oe.y,oe.z],[-oe.x,oe.y,oe.z],[-oe.x,-oe.y,oe.z],[-oe.x,-oe.y,-oe.z],[oe.x,-oe.y,-oe.z],[oe.x,oe.y,-oe.z],[-oe.x,oe.y,-oe.z],[oe.x,-oe.y,oe.z]],ne=0;ne<ie.length;ne++)J.set(ie[ne][0],ie[ne][1],ie[ne][2]),ee.vmult(J,J),$.vadd(J,J),re(J.x,J.y,J.z)};var K=[new Y,new Y,new Y,new Y,new Y,new Y,new Y,new Y];W.prototype.calculateWorldAABB=function($,ee,re,oe){var ie=this.halfExtents;K[0].set(ie.x,ie.y,ie.z),K[1].set(-ie.x,ie.y,ie.z),K[2].set(-ie.x,-ie.y,ie.z),K[3].set(-ie.x,-ie.y,-ie.z),K[4].set(ie.x,-ie.y,-ie.z),K[5].set(ie.x,ie.y,-ie.z),K[6].set(-ie.x,ie.y,-ie.z),K[7].set(ie.x,-ie.y,ie.z);var ne=K[0];ee.vmult(ne,ne),$.vadd(ne,ne),oe.copy(ne),re.copy(ne);for(var se=1,ne;8>se;se++){ne=K[se],ee.vmult(ne,ne),$.vadd(ne,ne);var le=ne.x,pe=ne.y,ue=ne.z;le>oe.x&&(oe.x=le),pe>oe.y&&(oe.y=pe),ue>oe.z&&(oe.z=ue),le<re.x&&(re.x=le),pe<re.y&&(re.y=pe),ue<re.z&&(re.z=ue)}}},{"../math/Vec3":30,"./ConvexPolyhedron":38,"./Shape":43}],38:[function(O,G){function W(Be,Ne,ze){this;X.call(this),this.type=X.types.CONVEXPOLYHEDRON,this.vertices=Be||[],this.worldVertices=[],this.worldVerticesNeedsUpdate=!0,this.faces=Ne||[],this.faceNormals=[],this.computeNormals(),this.worldFaceNormalsNeedsUpdate=!0,this.worldFaceNormals=[],this.uniqueEdges=[],this.uniqueAxes=ze?ze.slice():null,this.computeEdges(),this.updateBoundingSphereRadius()}G.exports=W;var X=O("./Shape"),Y=O("../math/Vec3"),Z=O("../math/Quaternion"),J=O("../math/Transform");W.prototype=new X,W.prototype.constructor=W;var Q=new Y;W.prototype.computeEdges=function(){var Be=this.faces,Ne=this.vertices,ze=Ne.length,De=this.uniqueEdges;De.length=0;for(var Fe=Q,Ue=0;Ue!==Be.length;Ue++)for(var Oe=Be[Ue],ke=Oe.length,Ve=0,Ge;Ve!==ke;Ve++){Ge=(Ve+1)%ke,Ne[Oe[Ve]].vsub(Ne[Oe[Ge]],Fe),Fe.normalize();for(var He=!1,We=0;We!==De.length;We++)if(De[We].almostEquals(Fe)||De[We].almostEquals(Fe)){He=!0;break}He||De.push(Fe.clone())}},W.prototype.computeNormals=function(){this.faceNormals.length=this.faces.length;for(var Be=0;Be<this.faces.length;Be++){for(var Ne=0;Ne<this.faces[Be].length;Ne++)if(!this.vertices[this.faces[Be][Ne]])throw new Error("Vertex "+this.faces[Be][Ne]+" not found!");var ze=this.faceNormals[Be]||new Y;this.getFaceNormal(Be,ze),ze.negate(ze),this.faceNormals[Be]=ze;var De=this.vertices[this.faces[Be][0]];if(0>ze.dot(De)){console.error(".faceNormals["+Be+"] = Vec3("+ze.toString()+") looks like it points into the shape? The vertices follow. Make sure they are ordered CCW around the normal, using the right hand rule.");for(var Ne=0;Ne<this.faces[Be].length;Ne++)console.warn(".vertices["+this.faces[Be][Ne]+"] = Vec3("+this.vertices[this.faces[Be][Ne]].toString()+")")}}};var K=new Y,$=new Y;W.computeNormal=function(Be,Ne,ze,De){Ne.vsub(Be,$),ze.vsub(Ne,K),K.cross($,De),De.isZero()||De.normalize()},W.prototype.getFaceNormal=function(Be,Ne){var ze=this.faces[Be],De=this.vertices[ze[0]],Fe=this.vertices[ze[1]],Ue=this.vertices[ze[2]];return W.computeNormal(De,Fe,Ue,Ne)};var ee=new Y;W.prototype.clipAgainstHull=function(Be,Ne,ze,De,Fe,Ue,Oe,ke,Ve){for(var Ge=ee,He=this,je=-1,qe=-_NumberMAX_VALUE,Xe=0;Xe<ze.faces.length;Xe++){Ge.copy(ze.faceNormals[Xe]),Fe.vmult(Ge,Ge);var Ye=Ge.dot(Ue);Ye>qe&&(qe=Ye,je=Xe)}for(var Ze=[],Je=ze.faces[je],Qe=Je.length,Ke=0;Ke<Qe;Ke++){var $e=ze.vertices[Je[Ke]],et=new Y;et.copy($e),Fe.vmult(et,et),De.vadd(et,et),Ze.push(et)}0<=je&&this.clipFaceAgainstHull(Ue,Be,Ne,Ze,Oe,ke,Ve)};var re=new Y,oe=new Y,ie=new Y,ne=new Y,se=new Y,le=new Y;W.prototype.findSeparatingAxis=function(Be,Ne,ze,De,Fe,Ue,Oe,ke){var Ve=re,Ge=oe,He=ie,We=ne,je=se,qe=le,Xe=_NumberMAX_VALUE,Ye=this,Ze=0;if(!Ye.uniqueAxes)for(var Je=Oe?Oe.length:Ye.faces.length,Qe=0,Ke;Qe<Je;Qe++){Ke=Oe?Oe[Qe]:Qe,Ve.copy(Ye.faceNormals[Ke]),ze.vmult(Ve,Ve);var $e=Ye.testSepAxis(Ve,Be,Ne,ze,De,Fe);if(!1===$e)return!1;$e<Xe&&(Xe=$e,Ue.copy(Ve))}else for(var Qe=0;Qe!==Ye.uniqueAxes.length;Qe++){ze.vmult(Ye.uniqueAxes[Qe],Ve);var $e=Ye.testSepAxis(Ve,Be,Ne,ze,De,Fe);if(!1===$e)return!1;$e<Xe&&(Xe=$e,Ue.copy(Ve))}if(!Be.uniqueAxes)for(var et=ke?ke.length:Be.faces.length,Qe=0,Ke;Qe<et;Qe++){Ke=ke?ke[Qe]:Qe,Ge.copy(Be.faceNormals[Ke]),Fe.vmult(Ge,Ge),Ze++;var $e=Ye.testSepAxis(Ge,Be,Ne,ze,De,Fe);if(!1===$e)return!1;$e<Xe&&(Xe=$e,Ue.copy(Ge))}else for(var Qe=0;Qe!==Be.uniqueAxes.length;Qe++){Fe.vmult(Be.uniqueAxes[Qe],Ge),Ze++;var $e=Ye.testSepAxis(Ge,Be,Ne,ze,De,Fe);if(!1===$e)return!1;$e<Xe&&(Xe=$e,Ue.copy(Ge))}for(var tt=0;tt!==Ye.uniqueEdges.length;tt++){ze.vmult(Ye.uniqueEdges[tt],We);for(var rt=0;rt!==Be.uniqueEdges.length;rt++)if(Fe.vmult(Be.uniqueEdges[rt],je),We.cross(je,qe),!qe.almostZero()){qe.normalize();var ot=Ye.testSepAxis(qe,Be,Ne,ze,De,Fe);if(!1===ot)return!1;ot<Xe&&(Xe=ot,Ue.copy(qe))}}return De.vsub(Ne,He),0<He.dot(Ue)&&Ue.negate(Ue),!0};var pe=[],ue=[];W.prototype.testSepAxis=function(Be,Ne,ze,De,Fe,Ue){var Oe=this;W.project(Oe,Be,ze,De,pe),W.project(Ne,Be,Fe,Ue,ue);var ke=pe[0],Ve=pe[1],Ge=ue[0],He=ue[1];if(ke<He||Ge<Ve)return!1;var We=ke-He,je=Ge-Ve,qe=We<je?We:je;return qe};var ge=new Y,fe=new Y;W.prototype.calculateLocalInertia=function(Be,Ne){this.computeLocalAABB(ge,fe);var ze=fe.x-ge.x,De=fe.y-ge.y,Fe=fe.z-ge.z;Ne.x=1/12*Be*(2*(2*De)*De+2*(2*Fe)*Fe),Ne.y=1/12*Be*(2*(2*ze)*ze+2*(2*Fe)*Fe),Ne.z=1/12*Be*(2*(2*De)*De+2*(2*ze)*ze)},W.prototype.getPlaneConstantOfFace=function(Be){var Ne=this.faces[Be],ze=this.faceNormals[Be],De=this.vertices[Ne[0]],Fe=-ze.dot(De);return Fe};var he=new Y,ye=new Y,_e=new Y,xe=new Y,ve=new Y,Te=new Y,Ee=new Y,Se=new Y;W.prototype.clipFaceAgainstHull=function(Be,Ne,ze,De,Fe,Ue,Oe){for(var ke=he,Ve=ye,Ge=_e,He=xe,We=ve,je=Te,qe=Ee,Xe=Se,Ye=this,Ze=[],Je=De,Qe=Ze,Ke=-1,$e=_NumberMAX_VALUE,et=0;et<Ye.faces.length;et++){ke.copy(Ye.faceNormals[et]),ze.vmult(ke,ke);var tt=ke.dot(Be);tt<$e&&($e=tt,Ke=et)}if(!(0>Ke)){var rt=Ye.faces[Ke];rt.connectedFaces=[];for(var ot=0;ot<Ye.faces.length;ot++)for(var it=0;it<Ye.faces[ot].length;it++)-1!==rt.indexOf(Ye.faces[ot][it])&&ot!==Ke&&-1===rt.connectedFaces.indexOf(ot)&&rt.connectedFaces.push(ot);for(var nt=Je.length,ct=rt.length,mt=0;mt<ct;mt++){var ft=Ye.vertices[rt[mt]],ht=Ye.vertices[rt[(mt+1)%ct]];ft.vsub(ht,Ve),Ge.copy(Ve),ze.vmult(Ge,Ge),Ne.vadd(Ge,Ge),He.copy(this.faceNormals[Ke]),ze.vmult(He,He),Ne.vadd(He,He),Ge.cross(He,We),We.negate(We),je.copy(ft),ze.vmult(je,je),Ne.vadd(je,je);var yt=-je.dot(We),_t,xt=rt.connectedFaces[mt];qe.copy(this.faceNormals[xt]);var vt=this.getPlaneConstantOfFace(xt);Xe.copy(qe),ze.vmult(Xe,Xe);var _t=vt-Xe.dot(Ne);for(this.clipFaceAgainstPlane(Je,Qe,Xe,_t);Je.length;)Je.shift();for(;Qe.length;)Je.push(Qe.shift())}qe.copy(this.faceNormals[Ke]);var vt=this.getPlaneConstantOfFace(Ke);Xe.copy(qe),ze.vmult(Xe,Xe);for(var _t=vt-Xe.dot(Ne),ot=0,bt;ot<Je.length;ot++)if(bt=Xe.dot(Je[ot])+_t,bt<=Fe&&(console.log("clamped: depth="+bt+" to minDist="+(Fe+"")),bt=Fe),bt<=Ue){var Tt=Je[ot];if(0>=bt){var Et={point:Tt,normal:Xe,depth:bt};Oe.push(Et)}}}},W.prototype.clipFaceAgainstPlane=function(Be,Ne,ze,De){var Fe,Ue,Oe=Be.length;if(2>Oe)return Ne;var ke=Be[Be.length-1],Ve=Be[0];Fe=ze.dot(ke)+De;for(var Ge=0;Ge<Oe;Ge++){if(Ve=Be[Ge],Ue=ze.dot(Ve)+De,0>Fe){if(0>Ue){var He=new Y;He.copy(Ve),Ne.push(He)}else{var He=new Y;ke.lerp(Ve,Fe/(Fe-Ue),He),Ne.push(He)}}else if(0>Ue){var He=new Y;ke.lerp(Ve,Fe/(Fe-Ue),He),Ne.push(He),Ne.push(Ve)}ke=Ve,Fe=Ue}return Ne},W.prototype.computeWorldVertices=function(Be,Ne){for(var ze=this.vertices.length;this.worldVertices.length<ze;)this.worldVertices.push(new Y);for(var De=this.vertices,Fe=this.worldVertices,Ue=0;Ue!==ze;Ue++)Ne.vmult(De[Ue],Fe[Ue]),Be.vadd(Fe[Ue],Fe[Ue]);this.worldVerticesNeedsUpdate=!1};var Ae=new Y;W.prototype.computeLocalAABB=function(Be,Ne){var ze=this.vertices.length,De=this.vertices;Be.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),Ne.set(-_NumberMAX_VALUE,-_NumberMAX_VALUE,-_NumberMAX_VALUE);for(var Ue=0,Oe;Ue<ze;Ue++)Oe=De[Ue],Oe.x<Be.x?Be.x=Oe.x:Oe.x>Ne.x&&(Ne.x=Oe.x),Oe.y<Be.y?Be.y=Oe.y:Oe.y>Ne.y&&(Ne.y=Oe.y),Oe.z<Be.z?Be.z=Oe.z:Oe.z>Ne.z&&(Ne.z=Oe.z)},W.prototype.computeWorldFaceNormals=function(Be){for(var Ne=this.faceNormals.length;this.worldFaceNormals.length<Ne;)this.worldFaceNormals.push(new Y);for(var ze=this.faceNormals,De=this.worldFaceNormals,Fe=0;Fe!==Ne;Fe++)Be.vmult(ze[Fe],De[Fe]);this.worldFaceNormalsNeedsUpdate=!1},W.prototype.updateBoundingSphereRadius=function(){for(var Be=0,Ne=this.vertices,ze=0,De=Ne.length,Fe;ze!==De;ze++)Fe=Ne[ze].norm2(),Fe>Be&&(Be=Fe);this.boundingSphereRadius=_Mathsqrt(Be)};var we=new Y;W.prototype.calculateWorldAABB=function(Be,Ne,ze,De){for(var Fe=this.vertices.length,Ue=this.vertices,je=0,Oe,ke,Ve,Ge,He,We;je<Fe;je++){we.copy(Ue[je]),Ne.vmult(we,we),Be.vadd(we,we);var qe=we;qe.x<Oe||Oe==void 0?Oe=qe.x:(qe.x>Ge||Ge==void 0)&&(Ge=qe.x),qe.y<ke||ke==void 0?ke=qe.y:(qe.y>He||He==void 0)&&(He=qe.y),qe.z<Ve||Ve==void 0?Ve=qe.z:(qe.z>We||We==void 0)&&(We=qe.z)}ze.set(Oe,ke,Ve),De.set(Ge,He,We)},W.prototype.volume=function(){return 4*_MathPI*this.boundingSphereRadius/3},W.prototype.getAveragePointLocal=function(Be){Be=Be||new Y;for(var Ne=this.vertices.length,ze=this.vertices,De=0;De<Ne;De++)Be.vadd(ze[De],Be);return Be.mult(1/Ne,Be),Be},W.prototype.transformAllPoints=function(Be,Ne){var ze=this.vertices.length,De=this.vertices;if(Ne){for(var Fe=0,Ue;Fe<ze;Fe++)Ue=De[Fe],Ne.vmult(Ue,Ue);for(var Fe=0,Ue;Fe<this.faceNormals.length;Fe++)Ue=this.faceNormals[Fe],Ne.vmult(Ue,Ue)}if(Be)for(var Fe=0,Ue;Fe<ze;Fe++)Ue=De[Fe],Ue.vadd(Be,Ue)};var Me=new Y,Re=new Y,Ce=new Y;W.prototype.pointIsInside=function(Be){var Ne=this.vertices.length,ze=this.vertices,De=this.faces,Fe=this.faceNormals,Oe=this.faces.length,ke=Me;this.getAveragePointLocal(ke);for(var Ve=0;Ve<Oe;Ve++){var Ge=this.faces[Ve].length,Ne=Fe[Ve],He=ze[De[Ve][0]],We=Re;Be.vsub(He,We);var je=Ne.dot(We),qe=Ce;ke.vsub(He,qe);var Xe=Ne.dot(qe);if(0>je&&0<Xe||0<je&&0>Xe)return!1}return-1};var Pe=new Y,Le=new Y,Ie=new Y;W.project=function(Be,Ne,ze,De,Fe){var Ue=Be.vertices.length,ke=Le,Ve=0,Ge=0,He=Ie,We=Be.vertices;He.setZero(),J.vectorToLocalFrame(ze,De,Ne,ke),J.pointToLocalFrame(ze,De,He,He);var je=He.dot(ke);Ge=Ve=We[0].dot(ke);for(var qe=1,Xe;qe<Ue;qe++)Xe=We[qe].dot(ke),Xe>Ve&&(Ve=Xe),Xe<Ge&&(Ge=Xe);if(Ge-=je,Ve-=je,Ge>Ve){var Ye=Ge;Ge=Ve,Ve=Ye}Fe[0]=Ve,Fe[1]=Ge}},{"../math/Quaternion":28,"../math/Transform":29,"../math/Vec3":30,"./Shape":43}],39:[function(O,G){function W(Q,K,$,ee){var re=ee,oe=[],ie=[],ne=[],se=[],le=[],pe=_Mathcos,ue=_Mathsin;oe.push(new Y(K*pe(0),K*ue(0),0.5*-$)),se.push(0),oe.push(new Y(Q*pe(0),Q*ue(0),0.5*$)),le.push(1);for(var ge=0;ge<re;ge++){var fe=2*_MathPI/re*(ge+1),he=2*_MathPI/re*(ge+0.5);ge<re-1?(oe.push(new Y(K*pe(fe),K*ue(fe),0.5*-$)),se.push(2*ge+2),oe.push(new Y(Q*pe(fe),Q*ue(fe),0.5*$)),le.push(2*ge+3),ne.push([2*ge+2,2*ge+3,2*ge+1,2*ge])):ne.push([0,1,2*ge+1,2*ge]),(1==re%2||ge<re/2)&&ie.push(new Y(pe(he),ue(he),0))}ne.push(le),ie.push(new Y(0,0,1));for(var ye=[],ge=0;ge<se.length;ge++)ye.push(se[se.length-ge-1]);ne.push(ye),this.type=X.types.CONVEXPOLYHEDRON,J.call(this,oe,ne,ie)}G.exports=W;var X=O("./Shape"),Y=O("../math/Vec3"),Z=O("../math/Quaternion"),J=O("./ConvexPolyhedron");W.prototype=new J},{"../math/Quaternion":28,"../math/Vec3":30,"./ConvexPolyhedron":38,"./Shape":43}],40:[function(O,G){function W(Q,K){K=J.defaults(K,{maxValue:null,minValue:null,elementSize:1}),this.data=Q,this.maxValue=K.maxValue,this.minValue=K.minValue,this.elementSize=K.elementSize,null===K.minValue&&this.updateMinValue(),null===K.maxValue&&this.updateMaxValue(),this.cacheEnabled=!0,X.call(this),this.pillarConvex=new Y,this.pillarOffset=new Z,this.type=X.types.HEIGHTFIELD,this.updateBoundingSphereRadius(),this._cachedPillars={}}var X=O("./Shape"),Y=O("./ConvexPolyhedron"),Z=O("../math/Vec3"),J=O("../utils/Utils");G.exports=W,W.prototype=new X,W.prototype.update=function(){this._cachedPillars={}},W.prototype.updateMinValue=function(){for(var Q=this.data,K=Q[0][0],$=0;$!==Q.length;$++)for(var ee=0,re;ee!==Q[$].length;ee++)re=Q[$][ee],re<K&&(K=re);this.minValue=K},W.prototype.updateMaxValue=function(){for(var Q=this.data,K=Q[0][0],$=0;$!==Q.length;$++)for(var ee=0,re;ee!==Q[$].length;ee++)re=Q[$][ee],re>K&&(K=re);this.maxValue=K},W.prototype.setHeightValueAtIndex=function(Q,K,$){var ee=this.data;ee[Q][K]=$,this.clearCachedConvexTrianglePillar(Q,K,!1),0<Q&&(this.clearCachedConvexTrianglePillar(Q-1,K,!0),this.clearCachedConvexTrianglePillar(Q-1,K,!1)),0<K&&(this.clearCachedConvexTrianglePillar(Q,K-1,!0),this.clearCachedConvexTrianglePillar(Q,K-1,!1)),0<K&&0<Q&&this.clearCachedConvexTrianglePillar(Q-1,K-1,!0)},W.prototype.getRectMinMax=function(Q,K,$,ee,re){re=re||[];for(var oe=this.data,ie=this.minValue,ne=Q;ne<=$;ne++)for(var se=K,le;se<=ee;se++)le=oe[ne][se],le>ie&&(ie=le);re[0]=this.minValue,re[1]=ie},W.prototype.getIndexOfPosition=function(Q,K,$,ee){var re=this.elementSize,oe=this.data,ie=_Mathfloor(Q/re),ne=_Mathfloor(K/re);return $[0]=ie,$[1]=ne,ee&&(0>ie&&(ie=0),0>ne&&(ne=0),ie>=oe.length-1&&(ie=oe.length-1),ne>=oe[0].length-1&&(ne=oe[0].length-1)),0>ie||0>ne||ie>=oe.length-1||ne>=oe[0].length-1?!1:!0},W.prototype.getHeightAt=function(Q,K,$){var ee=[];this.getIndexOfPosition(Q,K,ee,$);var re=[];return this.getRectMinMax(ee[0],ee[1]+1,ee[0],ee[1]+1,re),(re[0]+re[1])/2},W.prototype.getCacheConvexTrianglePillarKey=function(Q,K,$){return Q+"_"+K+"_"+($?1:0)},W.prototype.getCachedConvexTrianglePillar=function(Q,K,$){return this._cachedPillars[this.getCacheConvexTrianglePillarKey(Q,K,$)]},W.prototype.setCachedConvexTrianglePillar=function(Q,K,$,ee,re){this._cachedPillars[this.getCacheConvexTrianglePillarKey(Q,K,$)]={convex:ee,offset:re}},W.prototype.clearCachedConvexTrianglePillar=function(Q,K,$){delete this._cachedPillars[this.getCacheConvexTrianglePillarKey(Q,K,$)]},W.prototype.getConvexTrianglePillar=function(Q,K,$){var ee=this.pillarConvex,re=this.pillarOffset;if(this.cacheEnabled){var oe=this.getCachedConvexTrianglePillar(Q,K,$);if(oe)return this.pillarConvex=oe.convex,void(this.pillarOffset=oe.offset);ee=new Y,re=new Z,this.pillarConvex=ee,this.pillarOffset=re}var oe=this.data,ie=this.elementSize,ne=ee.faces;ee.vertices.length=6;for(var se=0;6>se;se++)ee.vertices[se]||(ee.vertices[se]=new Z);ne.length=5;for(var se=0;5>se;se++)ne[se]||(ne[se]=[]);var le=ee.vertices,pe=(_Mathmin(oe[Q][K],oe[Q+1][K],oe[Q][K+1],oe[Q+1][K+1])-this.minValue)/2+this.minValue;$?(re.set((Q+0.75)*ie,(K+0.75)*ie,pe),le[0].set(0.25*ie,0.25*ie,oe[Q+1][K+1]-pe),le[1].set(-0.75*ie,0.25*ie,oe[Q][K+1]-pe),le[2].set(0.25*ie,-0.75*ie,oe[Q+1][K]-pe),le[3].set(0.25*ie,0.25*ie,-pe-1),le[4].set(-0.75*ie,0.25*ie,-pe-1),le[5].set(0.25*ie,-0.75*ie,-pe-1),ne[0][0]=0,ne[0][1]=1,ne[0][2]=2,ne[1][0]=5,ne[1][1]=4,ne[1][2]=3,ne[2][0]=2,ne[2][1]=5,ne[2][2]=3,ne[2][3]=0,ne[3][0]=3,ne[3][1]=4,ne[3][2]=1,ne[3][3]=0,ne[4][0]=1,ne[4][1]=4,ne[4][2]=5,ne[4][3]=2):(re.set((Q+0.25)*ie,(K+0.25)*ie,pe),le[0].set(-0.25*ie,-0.25*ie,oe[Q][K]-pe),le[1].set(0.75*ie,-0.25*ie,oe[Q+1][K]-pe),le[2].set(-0.25*ie,0.75*ie,oe[Q][K+1]-pe),le[3].set(-0.25*ie,-0.25*ie,-pe-1),le[4].set(0.75*ie,-0.25*ie,-pe-1),le[5].set(-0.25*ie,0.75*ie,-pe-1),ne[0][0]=0,ne[0][1]=1,ne[0][2]=2,ne[1][0]=5,ne[1][1]=4,ne[1][2]=3,ne[2][0]=0,ne[2][1]=2,ne[2][2]=5,ne[2][3]=3,ne[3][0]=1,ne[3][1]=0,ne[3][2]=3,ne[3][3]=4,ne[4][0]=4,ne[4][1]=5,ne[4][2]=2,ne[4][3]=1),ee.computeNormals(),ee.computeEdges(),ee.updateBoundingSphereRadius(),this.setCachedConvexTrianglePillar(Q,K,$,ee,re)},W.prototype.calculateLocalInertia=function(Q,K){return K=K||new Z,K.set(0,0,0),K},W.prototype.volume=function(){return _NumberMAX_VALUE},W.prototype.calculateWorldAABB=function(Q,K,$,ee){$.set(-_NumberMAX_VALUE,-_NumberMAX_VALUE,-_NumberMAX_VALUE),ee.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE)},W.prototype.updateBoundingSphereRadius=function(){var Q=this.data,K=this.elementSize;this.boundingSphereRadius=new Z(Q.length*K,Q[0].length*K,_Mathmax(_Mathabs(this.maxValue),_Mathabs(this.minValue))).norm()}},{"../math/Vec3":30,"../utils/Utils":53,"./ConvexPolyhedron":38,"./Shape":43}],41:[function(O,G){function W(){X.call(this),this.type=X.types.PARTICLE}G.exports=W;var X=O("./Shape"),Y=O("../math/Vec3");W.prototype=new X,W.prototype.constructor=W,W.prototype.calculateLocalInertia=function(Z,J){return J=J||new Y,J.set(0,0,0),J},W.prototype.volume=function(){return 0},W.prototype.updateBoundingSphereRadius=function(){this.boundingSphereRadius=0},W.prototype.calculateWorldAABB=function(Z,J,Q,K){Q.copy(Z),K.copy(Z)}},{"../math/Vec3":30,"./Shape":43}],42:[function(O,G){function W(){X.call(this),this.type=X.types.PLANE,this.worldNormal=new Y,this.worldNormalNeedsUpdate=!0,this.boundingSphereRadius=_NumberMAX_VALUE}G.exports=W;var X=O("./Shape"),Y=O("../math/Vec3");W.prototype=new X,W.prototype.constructor=W,W.prototype.computeWorldNormal=function(J){var Q=this.worldNormal;Q.set(0,0,1),J.vmult(Q,Q),this.worldNormalNeedsUpdate=!1},W.prototype.calculateLocalInertia=function(J,Q){return Q=Q||new Y,Q},W.prototype.volume=function(){return _NumberMAX_VALUE};var Z=new Y;W.prototype.calculateWorldAABB=function(J,Q,K,$){Z.set(0,0,1),Q.vmult(Z,Z);var ee=_NumberMAX_VALUE;K.set(-ee,-ee,-ee),$.set(ee,ee,ee),1===Z.x&&($.x=J.x),1===Z.y&&($.y=J.y),1===Z.z&&($.z=J.z),-1===Z.x&&(K.x=J.x),-1===Z.y&&(K.y=J.y),-1===Z.z&&(K.z=J.z)},W.prototype.updateBoundingSphereRadius=function(){this.boundingSphereRadius=_NumberMAX_VALUE}},{"../math/Vec3":30,"./Shape":43}],43:[function(O,G){function W(){this.id=W.idCounter++,this.type=0,this.boundingSphereRadius=0,this.collisionResponse=!0,this.material=null}G.exports=W;var W=O("./Shape"),X=O("../math/Vec3"),Y=O("../math/Quaternion"),Z=O("../material/Material");W.prototype.constructor=W,W.prototype.updateBoundingSphereRadius=function(){throw"computeBoundingSphereRadius() not implemented for shape type "+this.type},W.prototype.volume=function(){throw"volume() not implemented for shape type "+this.type},W.prototype.calculateLocalInertia=function(){throw"calculateLocalInertia() not implemented for shape type "+this.type},W.idCounter=0,W.types={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256}},{"../material/Material":25,"../math/Quaternion":28,"../math/Vec3":30,"./Shape":43}],44:[function(O,G){function W(Z){if(X.call(this),this.radius=void 0===Z?1:+Z,this.type=X.types.SPHERE,0>this.radius)throw new Error("The sphere radius cannot be negative.");this.updateBoundingSphereRadius()}G.exports=W;var X=O("./Shape"),Y=O("../math/Vec3");W.prototype=new X,W.prototype.constructor=W,W.prototype.calculateLocalInertia=function(Z,J){J=J||new Y;var Q=2*Z*this.radius*this.radius/5;return J.x=Q,J.y=Q,J.z=Q,J},W.prototype.volume=function(){return 4*_MathPI*this.radius/3},W.prototype.updateBoundingSphereRadius=function(){this.boundingSphereRadius=this.radius},W.prototype.calculateWorldAABB=function(Z,J,Q,K){for(var $=this.radius,ee=["x","y","z"],re=0,oe;re<ee.length;re++)oe=ee[re],Q[oe]=Z[oe]-$,K[oe]=Z[oe]+$}},{"../math/Vec3":30,"./Shape":43}],45:[function(O,G){function W(_e,xe){X.call(this),this.type=X.types.TRIMESH,this.vertices=new Float32Array(_e),this.indices=new Int16Array(xe),this.normals=new Float32Array(xe.length),this.aabb=new Q,this.edges=null,this.scale=new Y(1,1,1),this.tree=new K,this.updateEdges(),this.updateNormals(),this.updateAABB(),this.updateBoundingSphereRadius(),this.updateTree()}G.exports=W;var X=O("./Shape"),Y=O("../math/Vec3"),Z=O("../math/Quaternion"),J=O("../math/Transform"),Q=O("../collision/AABB"),K=O("../utils/Octree");W.prototype=new X,W.prototype.constructor=W;var $=new Y;W.prototype.updateTree=function(){var _e=this.tree;_e.reset(),_e.aabb.copy(this.aabb);var xe=this.scale;_e.aabb.lowerBound.x*=1/xe.x,_e.aabb.lowerBound.y*=1/xe.y,_e.aabb.lowerBound.z*=1/xe.z,_e.aabb.upperBound.x*=1/xe.x,_e.aabb.upperBound.y*=1/xe.y,_e.aabb.upperBound.z*=1/xe.z;for(var ve=new Q,Te=new Y,Ee=new Y,Se=new Y,Ae=[Te,Ee,Se],we=0,Me;we<this.indices.length/3;we++)Me=3*we,this._getUnscaledVertex(this.indices[Me],Te),this._getUnscaledVertex(this.indices[Me+1],Ee),this._getUnscaledVertex(this.indices[Me+2],Se),ve.setFromPoints(Ae),_e.insert(ve,we);_e.removeEmptyNodes()};var ee=new Q;W.prototype.getTrianglesInAABB=function(_e,xe){ee.copy(_e);var ve=this.scale,Te=ve.x,Ee=ve.y,Se=ve.z,Ae=ee.lowerBound,we=ee.upperBound;return Ae.x/=Te,Ae.y/=Ee,Ae.z/=Se,we.x/=Te,we.y/=Ee,we.z/=Se,this.tree.aabbQuery(ee,xe)},W.prototype.setScale=function(_e){var xe=this.scale.x===this.scale.y===this.scale.z,ve=_e.x===_e.y===_e.z;xe&&ve||this.updateNormals(),this.scale.copy(_e),this.updateAABB(),this.updateBoundingSphereRadius()},W.prototype.updateNormals=function(){for(var _e=$,xe=this.normals,ve=0;ve<this.indices.length/3;ve++){var Te=3*ve,Ee=this.indices[Te],Se=this.indices[Te+1],Ae=this.indices[Te+2];this.getVertex(Ee,se),this.getVertex(Se,le),this.getVertex(Ae,pe),W.computeNormal(le,se,pe,_e),xe[Te]=_e.x,xe[Te+1]=_e.y,xe[Te+2]=_e.z}},W.prototype.updateEdges=function(){for(var _e={},xe=function(){var Pe=Ee<Se?Ee+"_"+Se:Se+"_"+Ee;_e[Pe]=!0},ve=0;ve<this.indices.length/3;ve++){var Te=3*ve,Ee=this.indices[Te],Se=this.indices[Te+1],Ae=this.indices[Te+2];xe(Ee,Se),xe(Se,Ae),xe(Ae,Ee)}var we=Object.keys(_e);this.edges=new Int16Array(2*we.length);for(var ve=0,Me;ve<we.length;ve++)Me=we[ve].split("_"),this.edges[2*ve]=parseInt(Me[0],10),this.edges[2*ve+1]=parseInt(Me[1],10)},W.prototype.getEdgeVertex=function(_e,xe,ve){var Te=this.edges[2*_e+(xe?1:0)];this.getVertex(Te,ve)};var re=new Y,oe=new Y;W.prototype.getEdgeVector=function(_e,xe){var ve=re,Te=oe;this.getEdgeVertex(_e,0,ve),this.getEdgeVertex(_e,1,Te),Te.vsub(ve,xe)};var ie=new Y,ne=new Y;W.computeNormal=function(_e,xe,ve,Te){xe.vsub(_e,ne),ve.vsub(xe,ie),ie.cross(ne,Te),Te.isZero()||Te.normalize()};var se=new Y,le=new Y,pe=new Y;W.prototype.getVertex=function(_e,xe){var ve=this.scale;return this._getUnscaledVertex(_e,xe),xe.x*=ve.x,xe.y*=ve.y,xe.z*=ve.z,xe},W.prototype._getUnscaledVertex=function(_e,xe){var ve=3*_e,Te=this.vertices;return xe.set(Te[ve],Te[ve+1],Te[ve+2])},W.prototype.getWorldVertex=function(_e,xe,ve,Te){return this.getVertex(_e,Te),J.pointToWorldFrame(xe,ve,Te,Te),Te},W.prototype.getTriangleVertices=function(_e,xe,ve,Te){var Ee=3*_e;this.getVertex(this.indices[Ee],xe),this.getVertex(this.indices[Ee+1],ve),this.getVertex(this.indices[Ee+2],Te)},W.prototype.getNormal=function(_e,xe){var ve=3*_e;return xe.set(this.normals[ve],this.normals[ve+1],this.normals[ve+2])};var ue=new Q;W.prototype.calculateLocalInertia=function(_e,xe){this.computeLocalAABB(ue);var ve=ue.upperBound.x-ue.lowerBound.x,Te=ue.upperBound.y-ue.lowerBound.y,Ee=ue.upperBound.z-ue.lowerBound.z;return xe.set(1/12*_e*(2*(2*Te)*Te+2*(2*Ee)*Ee),1/12*_e*(2*(2*ve)*ve+2*(2*Ee)*Ee),1/12*_e*(2*(2*Te)*Te+2*(2*ve)*ve))};var ge=new Y;W.prototype.computeLocalAABB=function(_e){var xe=_e.lowerBound,ve=_e.upperBound,Te=this.vertices.length,Ee=this.vertices,Se=ge;this.getVertex(0,Se),xe.copy(Se),ve.copy(Se);for(var Ae=0;Ae!==Te;Ae++)this.getVertex(Ae,Se),Se.x<xe.x?xe.x=Se.x:Se.x>ve.x&&(ve.x=Se.x),Se.y<xe.y?xe.y=Se.y:Se.y>ve.y&&(ve.y=Se.y),Se.z<xe.z?xe.z=Se.z:Se.z>ve.z&&(ve.z=Se.z)},W.prototype.updateAABB=function(){this.computeLocalAABB(this.aabb)},W.prototype.updateBoundingSphereRadius=function(){for(var _e=0,xe=this.vertices,ve=new Y,Te=0,Ee=xe.length/3;Te!==Ee;Te++){this.getVertex(Te,ve);var Se=ve.norm2();Se>_e&&(_e=Se)}this.boundingSphereRadius=_Mathsqrt(_e)};var fe=new Y,he=new J,ye=new Q;W.prototype.calculateWorldAABB=function(_e,xe,ve,Te){var Ee=he,Se=ye;Ee.position=_e,Ee.quaternion=xe,this.aabb.toWorldFrame(Ee,Se),ve.copy(Se.lowerBound),Te.copy(Se.upperBound)},W.prototype.volume=function(){return 4*_MathPI*this.boundingSphereRadius/3},W.createTorus=function(_e,xe,ve,Te,Ee){_e=_e||1,xe=xe||0.5,ve=ve||8,Te=Te||6,Ee=Ee||2*_MathPI;for(var Se=[],Ae=[],we=0;we<=ve;we++)for(var Me=0;Me<=Te;Me++){var Re=Me/Te*Ee,Ce=2*(we/ve*_MathPI),Pe=(_e+xe*_Mathcos(Ce))*_Mathcos(Re),Le=(_e+xe*_Mathcos(Ce))*_Mathsin(Re),Ie=xe*_Mathsin(Ce);Se.push(Pe,Le,Ie)}for(var we=1;we<=ve;we++)for(var Me=1;Me<=Te;Me++){var Be=(Te+1)*we+Me-1,Ne=(Te+1)*(we-1)+Me-1,ze=(Te+1)*(we-1)+Me,De=(Te+1)*we+Me;Ae.push(Be,Ne,De),Ae.push(Ne,ze,De)}return new W(Se,Ae)}},{"../collision/AABB":3,"../math/Quaternion":28,"../math/Transform":29,"../math/Vec3":30,"../utils/Octree":50,"./Shape":43}],46:[function(O,G){function W(){Z.call(this),this.iterations=10,this.tolerance=1e-7}G.exports=W;var X=O("../math/Vec3"),Y=O("../math/Quaternion"),Z=O("./Solver");W.prototype=new Z;var J=[],Q=[],K=[];W.prototype.solve=function($,ee){var re=0,oe=this.iterations,ie=this.tolerance*this.tolerance,ne=this.equations,se=ne.length,le=ee.bodies,pe=le.length,fe,he,ye,_e,xe,ve;if(0!==se)for(var Te=0;Te!==pe;Te++)le[Te].updateSolveMassProperties();var Ee=Q,Se=K,Ae=J;Ee.length=se,Se.length=se,Ae.length=se;for(var Te=0,we;Te!==se;Te++)we=ne[Te],Ae[Te]=0,Se[Te]=we.computeB($),Ee[Te]=1/we.computeC();if(0!==se){for(var Te=0;Te!==pe;Te++){var Me=le[Te],Re=Me.vlambda,Ce=Me.wlambda;Re.set(0,0,0),Ce&&Ce.set(0,0,0)}for(re=0;re!==oe;re++){_e=0;for(var Pe=0,we;Pe!==se;Pe++)we=ne[Pe],fe=Se[Pe],he=Ee[Pe],ve=Ae[Pe],xe=we.computeGWlambda(),ye=he*(fe-xe-we.eps*ve),ve+ye<we.minForce?ye=we.minForce-ve:ve+ye>we.maxForce&&(ye=we.maxForce-ve),Ae[Pe]+=ye,_e+=0<ye?ye:-ye,we.addToWlambda(ye);if(_e*_e<ie)break}for(var Te=0;Te!==pe;Te++){var Me=le[Te],Le=Me.velocity,Ie=Me.angularVelocity;Le.vadd(Me.vlambda,Le),Ie&&Ie.vadd(Me.wlambda,Ie)}}return re}},{"../math/Quaternion":28,"../math/Vec3":30,"./Solver":47}],47:[function(O,G){function W(){this.equations=[]}G.exports=W,W.prototype.solve=function(){return 0},W.prototype.addEquation=function(X){X.enabled&&this.equations.push(X)},W.prototype.removeEquation=function(X){var Y=this.equations,Z=Y.indexOf(X);-1!==Z&&Y.splice(Z,1)},W.prototype.removeAllEquations=function(){this.equations.length=0}},{}],48:[function(O,G){function W(ue){for($.call(this),this.iterations=10,this.tolerance=1e-7,this.subsolver=ue,this.nodes=[],this.nodePool=[];128>this.nodePool.length;)this.nodePool.push(this.createNode())}function X(ue){for(var ge=ue.length,fe=0,he;fe!==ge;fe++)if(he=ue[fe],!he.visited&&!(he.body.type&le))return he;return!1}function Y(ue,ge,fe,he){for(pe.push(ue),ue.visited=!0,ge(ue,fe,he);pe.length;)for(var ye=pe.pop(),_e;_e=X(ye.children);)_e.visited=!0,ge(_e,fe,he),pe.push(_e)}function Z(ue,ge,fe){ge.push(ue.body);for(var he=ue.eqs.length,ye=0,_e;ye!==he;ye++)_e=ue.eqs[ye],-1===fe.indexOf(_e)&&fe.push(_e)}function J(ue,ge){return ge.id-ue.id}G.exports=W;var Q=O("../math/Vec3"),K=O("../math/Quaternion"),$=O("./Solver"),ee=O("../objects/Body");W.prototype=new $;var re=[],ie=[],se={bodies:[]},le=ee.STATIC,pe=[];W.prototype.createNode=function(){return{body:null,children:[],eqs:[],visited:!1}},W.prototype.solve=function(ue,ge){for(var fe=re,he=this.nodePool,ye=ge.bodies,_e=this.equations,xe=_e.length,ve=ye.length,Te=this.subsolver;he.length<ve;)he.push(this.createNode());fe.length=ve;for(var Ee=0;Ee<ve;Ee++)fe[Ee]=he[Ee];for(var Ee=0,Se;Ee!==ve;Ee++)Se=fe[Ee],Se.body=ye[Ee],Se.children.length=0,Se.eqs.length=0,Se.visited=!1;for(var Ae=0;Ae!==xe;Ae++){var we=_e[Ae],Ee=ye.indexOf(we.bi),Me=ye.indexOf(we.bj),Re=fe[Ee],Ce=fe[Me];Re.children.push(Ce),Re.eqs.push(we),Ce.children.push(Re),Ce.eqs.push(we)}var Le=0,Ie=ie,Pe;Te.tolerance=this.tolerance,Te.iterations=this.iterations;for(var Be=se;Pe=X(fe);){Ie.length=0,Be.bodies.length=0,Y(Pe,Z,Be.bodies,Ie);var Ne=Ie.length;Ie=Ie.sort(J);for(var Ee=0;Ee!==Ne;Ee++)Te.addEquation(Ie[Ee]);Te.solve(ue,Be);Te.removeAllEquations(),Le++}return Le}},{"../math/Quaternion":28,"../math/Vec3":30,"../objects/Body":31,"./Solver":47}],49:[function(O,G){var W=function(){};G.exports=W,W.prototype={constructor:W,addEventListener:function(X,Y){void 0===this._listeners&&(this._listeners={});var Z=this._listeners;return void 0===Z[X]&&(Z[X]=[]),-1===Z[X].indexOf(Y)&&Z[X].push(Y),this},hasEventListener:function(X,Y){if(this._listeners===void 0)return!1;var Z=this._listeners;return void 0!==Z[X]&&-1!==Z[X].indexOf(Y)},removeEventListener:function(X,Y){if(void 0===this._listeners)return this;var Z=this._listeners;if(void 0===Z[X])return this;var J=Z[X].indexOf(Y);return-1!==J&&Z[X].splice(J,1),this},dispatchEvent:function(X){if(this._listeners===void 0)return this;var Y=this._listeners,Z=Y[X.type];if(Z!==void 0){X.target=this;for(var J=0,Q=Z.length;J<Q;J++)Z[J].call(this,X)}return this}}},{}],50:[function(O,G){function W(K){K=K||{},this.root=K.root||null,this.aabb=K.aabb?K.aabb.clone():new Y,this.data=[],this.children=[]}function X(K,$){$=$||{},$.root=null,$.aabb=K,W.call(this,$),this.maxDepth="undefined"==typeof $.maxDepth?8:$.maxDepth}var Y=O("../collision/AABB"),Z=O("../math/Vec3");G.exports=X,X.prototype=new W,W.prototype.reset=function(){this.children.length=this.data.length=0},W.prototype.insert=function(K,$,ee){var re=this.data;if(ee=ee||0,!this.aabb.contains(K))return!1;var oe=this.children;if(ee<(this.maxDepth||this.root.maxDepth)){var ie=!1;oe.length||(this.subdivide(),ie=!0);for(var ne=0;8!==ne;ne++)if(oe[ne].insert(K,$,ee+1))return!0;ie&&(oe.length=0)}return re.push($),!0};var J=new Z;W.prototype.subdivide=function(){var K=this.aabb,$=K.lowerBound,ee=K.upperBound,re=this.children;re.push(new W({aabb:new Y({lowerBound:new Z(0,0,0)})}),new W({aabb:new Y({lowerBound:new Z(1,0,0)})}),new W({aabb:new Y({lowerBound:new Z(1,1,0)})}),new W({aabb:new Y({lowerBound:new Z(1,1,1)})}),new W({aabb:new Y({lowerBound:new Z(0,1,1)})}),new W({aabb:new Y({lowerBound:new Z(0,0,1)})}),new W({aabb:new Y({lowerBound:new Z(1,0,1)})}),new W({aabb:new Y({lowerBound:new Z(0,1,0)})})),ee.vsub($,J),J.scale(0.5,J);for(var oe=this.root||this,ie=0,ne;8!==ie;ie++){ne=re[ie],ne.root=oe;var se=ne.aabb.lowerBound;se.x*=J.x,se.y*=J.y,se.z*=J.z,se.vadd($,se),se.vadd(J,ne.aabb.upperBound)}},W.prototype.aabbQuery=function(K,$){for(var ee=this.data,re=this.children,oe=[this],ie;oe.length;)ie=oe.pop(),ie.aabb.overlaps(K)&&Array.prototype.push.apply($,ie.data),Array.prototype.push.apply(oe,ie.children);return $};var Q=new Y;W.prototype.rayQuery=function(K,$,ee){return K.getAABB(Q),Q.toLocalFrame($,Q),this.aabbQuery(Q,ee),ee},W.prototype.removeEmptyNodes=function(){for(var K=[this],$;K.length;){$=K.pop();for(var ee=$.children.length-1;0<=ee;ee--)$.children[ee].data.length||$.children.splice(ee,1);Array.prototype.push.apply(K,$.children)}}},{"../collision/AABB":3,"../math/Vec3":30}],51:[function(O,G){function W(){this.objects=[],this.type=Object}G.exports=W,W.prototype.release=function(){for(var X=arguments.length,Y=0;Y!==X;Y++)this.objects.push(arguments[Y])},W.prototype.get=function(){return 0===this.objects.length?this.constructObject():this.objects.pop()},W.prototype.constructObject=function(){throw new Error("constructObject() not implemented in this Pool subclass yet!")}},{}],52:[function(O,G){function W(){this.data={keys:[]}}G.exports=W,W.prototype.get=function(X,Y){if(X>Y){var Z=Y;Y=X,X=Z}return this.data[X+"-"+Y]},W.prototype.set=function(X,Y,Z){if(X>Y){var J=Y;Y=X,X=J}var Q=X+"-"+Y;this.get(X,Y)||this.data.keys.push(Q),this.data[Q]=Z},W.prototype.reset=function(){for(var X=this.data,Y=X.keys,Z;0<Y.length;)Z=Y.pop(),delete X[Z]}},{}],53:[function(O,G){function W(){}G.exports=W,W.defaults=function(X,Y){for(var Z in X=X||{},Y)Z in X||(X[Z]=Y[Z]);return X}},{}],54:[function(O,G){function W(){Y.call(this),this.type=X}G.exports=W;var X=O("../math/Vec3"),Y=O("./Pool");W.prototype=new Y,W.prototype.constructObject=function(){return new X}},{"../math/Vec3":30,"./Pool":51}],55:[function(O,G){function W(kt){this.contactPointPool=[],this.frictionEquationPool=[],this.result=[],this.frictionResult=[],this.v3pool=new ie,this.world=kt,this.currentContactMaterial=null,this.enableFrictionReduction=!1}function Y(kt,Vt,Gt){for(var Ht=null,Wt=kt.length,jt=0;jt!==Wt;jt++){var qt=kt[jt],Xt=Ge;kt[(jt+1)%Wt].vsub(qt,Xt);var Yt=He;Xt.cross(Vt,Yt);var Zt=We;Gt.vsub(qt,Zt);var Jt=Yt.dot(Zt);if(null==Ht||0<Jt&&!0===Ht||0>=Jt&&!1===Ht){null==Ht&&(Ht=0<Jt);continue}else return!1}return!0}G.exports=W;var Z=O("../collision/AABB"),J=O("../shapes/Shape"),Q=O("../collision/Ray"),K=O("../math/Vec3"),$=O("../math/Transform"),ee=O("../shapes/ConvexPolyhedron"),re=O("../math/Quaternion"),oe=O("../solver/Solver"),ie=O("../utils/Vec3Pool"),ne=O("../equations/ContactEquation"),se=O("../equations/FrictionEquation");W.prototype.createContactEquation=function(kt,Vt,Gt,Ht,Wt,jt){var qt;this.contactPointPool.length?(qt=this.contactPointPool.pop(),qt.bi=kt,qt.bj=Vt):qt=new ne(kt,Vt),qt.enabled=kt.collisionResponse&&Vt.collisionResponse&&Gt.collisionResponse&&Ht.collisionResponse;var Xt=this.currentContactMaterial;qt.restitution=Xt.restitution,qt.setSpookParams(Xt.contactEquationStiffness,Xt.contactEquationRelaxation,this.world.dt);var Yt=Gt.material||kt.material,Zt=Ht.material||Vt.material;return Yt&&Zt&&0<=Yt.restitution&&0<=Zt.restitution&&(qt.restitution=Yt.restitution*Zt.restitution),qt.si=Wt||Gt,qt.sj=jt||Ht,qt},W.prototype.createFrictionEquationsFromContact=function(kt,Vt){var Gt=kt.bi,Ht=kt.bj,Wt=kt.si,jt=kt.sj,qt=this.world,Xt=this.currentContactMaterial,Yt=Xt.friction,Zt=Wt.material||Gt.material,Jt=jt.material||Ht.material;if(Zt&&Jt&&0<=Zt.friction&&0<=Jt.friction&&(Yt=Zt.friction*Jt.friction),0<Yt){var Qt=Yt*qt.gravity.length(),Kt=Gt.invMass+Ht.invMass;0<Kt&&(Kt=1/Kt);var $t=this.frictionEquationPool,er=$t.length?$t.pop():new se(Gt,Ht,Qt*Kt),rr=$t.length?$t.pop():new se(Gt,Ht,Qt*Kt);return er.bi=rr.bi=Gt,er.bj=rr.bj=Ht,er.minForce=rr.minForce=-Qt*Kt,er.maxForce=rr.maxForce=Qt*Kt,er.ri.copy(kt.ri),er.rj.copy(kt.rj),rr.ri.copy(kt.ri),rr.rj.copy(kt.rj),kt.ni.tangents(er.t,rr.t),er.setSpookParams(Xt.frictionEquationStiffness,Xt.frictionEquationRelaxation,qt.dt),rr.setSpookParams(Xt.frictionEquationStiffness,Xt.frictionEquationRelaxation,qt.dt),er.enabled=rr.enabled=kt.enabled,Vt.push(er,rr),!0}return!1};var le=new K,pe=new K,ue=new K;W.prototype.createFrictionFromAverage=function(kt){var Vt=this.result[this.result.length-1];if(this.createFrictionEquationsFromContact(Vt,this.frictionResult)&&1!==kt){var Gt=this.frictionResult[this.frictionResult.length-2],Ht=this.frictionResult[this.frictionResult.length-1];le.setZero(),pe.setZero(),ue.setZero();for(var Wt=Vt.bi,jt=Vt.bj,qt=0;qt!==kt;qt++)Vt=this.result[this.result.length-1-qt],Vt.bodyA===Wt?(le.vsub(Vt.ni,le),pe.vadd(Vt.rj,pe),ue.vadd(Vt.ri,ue)):(le.vadd(Vt.ni,le),pe.vadd(Vt.ri,pe),ue.vadd(Vt.rj,ue));var Xt=1/kt;pe.scale(Xt,Gt.ri),ue.scale(Xt,Gt.rj),Ht.ri.copy(Gt.ri),Ht.rj.copy(Gt.rj),le.normalize(),le.tangents(Gt.t,Ht.t)}};var ge=new K,fe=new K,he=new re,ye=new re;W.prototype.getContacts=function(kt,Vt,Gt,Ht,Wt,jt,qt){this.contactPointPool=Wt,this.frictionEquationPool=qt,this.result=Ht,this.frictionResult=jt;for(var Xt=he,Yt=ye,Zt=ge,Jt=fe,Qt=0,Kt=kt.length;Qt!==Kt;Qt++){var $t=kt[Qt],er=Vt[Qt],rr=null;$t.material&&er.material&&(rr=Gt.getContactMaterial($t.material,er.material)||null);for(var or=0;or<$t.shapes.length;or++){$t.quaternion.mult($t.shapeOrientations[or],Xt),$t.quaternion.vmult($t.shapeOffsets[or],Zt),Zt.vadd($t.position,Zt);for(var ir=$t.shapes[or],sr=0;sr<er.shapes.length;sr++){er.quaternion.mult(er.shapeOrientations[sr],Yt),er.quaternion.vmult(er.shapeOffsets[sr],Jt),Jt.vadd(er.position,Jt);var lr=er.shapes[sr];if(!(Zt.distanceTo(Jt)>ir.boundingSphereRadius+lr.boundingSphereRadius)){var cr=null;ir.material&&lr.material&&(cr=Gt.getContactMaterial(ir.material,lr.material)||null),this.currentContactMaterial=cr||rr||Gt.defaultContactMaterial;var ur=this[ir.type|lr.type];ur&&(ir.type<lr.type?ur.call(this,ir,lr,Zt,Jt,Xt,Yt,$t,er,ir,lr):ur.call(this,lr,ir,Jt,Zt,Yt,Xt,er,$t,ir,lr))}}}}};var _e=0;W.prototype[J.types.BOX|J.types.BOX]=W.prototype.boxBox=function(kt,Vt,Gt,Ht,Wt,jt,qt,Xt){kt.convexPolyhedronRepresentation.material=kt.material,Vt.convexPolyhedronRepresentation.material=Vt.material,kt.convexPolyhedronRepresentation.collisionResponse=kt.collisionResponse,Vt.convexPolyhedronRepresentation.collisionResponse=Vt.collisionResponse,this.convexConvex(kt.convexPolyhedronRepresentation,Vt.convexPolyhedronRepresentation,Gt,Ht,Wt,jt,qt,Xt,kt,Vt)},W.prototype[J.types.BOX|J.types.CONVEXPOLYHEDRON]=W.prototype.boxConvex=function(kt,Vt,Gt,Ht,Wt,jt,qt,Xt){kt.convexPolyhedronRepresentation.material=kt.material,kt.convexPolyhedronRepresentation.collisionResponse=kt.collisionResponse,this.convexConvex(kt.convexPolyhedronRepresentation,Vt,Gt,Ht,Wt,jt,qt,Xt,kt,Vt)},W.prototype[J.types.BOX|J.types.PARTICLE]=W.prototype.boxParticle=function(kt,Vt,Gt,Ht,Wt,jt,qt,Xt){kt.convexPolyhedronRepresentation.material=kt.material,kt.convexPolyhedronRepresentation.collisionResponse=kt.collisionResponse,this.convexParticle(kt.convexPolyhedronRepresentation,Vt,Gt,Ht,Wt,jt,qt,Xt,kt,Vt)},W.prototype[J.types.SPHERE]=W.prototype.sphereSphere=function(kt,Vt,Gt,Ht,Wt,jt,qt,Xt){var Yt=this.createContactEquation(qt,Xt,kt,Vt);Ht.vsub(Gt,Yt.ni),Yt.ni.normalize(),Yt.ri.copy(Yt.ni),Yt.rj.copy(Yt.ni),Yt.ri.mult(kt.radius,Yt.ri),Yt.rj.mult(-Vt.radius,Yt.rj),Yt.ri.vadd(Gt,Yt.ri),Yt.ri.vsub(qt.position,Yt.ri),Yt.rj.vadd(Ht,Yt.rj),Yt.rj.vsub(Xt.position,Yt.rj),this.result.push(Yt),this.createFrictionEquationsFromContact(Yt,this.frictionResult)};var ve=new K,Te=new K,Ee=new K;W.prototype[J.types.PLANE|J.types.TRIMESH]=W.prototype.planeTrimesh=function(kt,Vt,Gt,Ht,Wt,jt,qt,Xt){var Yt=new K,Zt=ve;Zt.set(0,0,1),Wt.vmult(Zt,Zt);for(var Jt=0;Jt<Vt.vertices.length/3;Jt++){Vt.getVertex(Jt,Yt);var Qt=new K;Qt.copy(Yt),$.pointToWorldFrame(Ht,jt,Qt,Yt);var Kt=Te;Yt.vsub(Gt,Kt);var $t=Zt.dot(Kt);if(0>=$t){var er=this.createContactEquation(qt,Xt,kt,Vt);er.ni.copy(Zt);var rr=Ee;Zt.scale(Kt.dot(Zt),rr),Yt.vsub(rr,rr),er.ri.copy(rr),er.ri.vsub(qt.position,er.ri),er.rj.copy(Yt),er.rj.vsub(Xt.position,er.rj),this.result.push(er),this.createFrictionEquationsFromContact(er,this.frictionResult)}}};var Se=new K,Ae=new K,we=new K,Me=new K,Re=new K,Ce=new K,Pe=new K,Le=new K,Ie=new K,Be=new K,Ne=new K,ze=new K,De=new K,Fe=new K,Ue=new Z,Oe=[];W.prototype[J.types.SPHERE|J.types.TRIMESH]=W.prototype.sphereTrimesh=function(kt,Vt,Gt,Ht,Wt,jt,qt,Xt){var Yt=Ce,Zt=Pe,Jt=Le,Qt=Ie,Kt=Be,$t=Ne,er=Ue,rr=Re,or=Ae,ir=Oe;$.pointToLocalFrame(Ht,jt,Gt,Kt);var sr=kt.radius;er.lowerBound.set(Kt.x-sr,Kt.y-sr,Kt.z-sr),er.upperBound.set(Kt.x+sr,Kt.y+sr,Kt.z+sr),Vt.getTrianglesInAABB(er,ir);for(var lr=Me,cr=kt.radius*kt.radius,ur=0;ur<ir.length;ur++)for(var mr=0;3>mr;mr++)if(Vt.getVertex(Vt.indices[3*ir[ur]+mr],lr),lr.vsub(Kt,or),or.norm2()<=cr){rr.copy(lr),$.pointToWorldFrame(Ht,jt,rr,lr),lr.vsub(Gt,or);var gr=this.createContactEquation(qt,Xt,kt,Vt);gr.ni.copy(or),gr.ni.normalize(),gr.ri.copy(gr.ni),gr.ri.scale(kt.radius,gr.ri),gr.ri.vadd(Gt,gr.ri),gr.ri.vsub(qt.position,gr.ri),gr.rj.copy(lr),gr.rj.vsub(Xt.position,gr.rj),this.result.push(gr),this.createFrictionEquationsFromContact(gr,this.frictionResult)}for(var ur=0;ur<ir.length;ur++)for(var mr=0;3>mr;mr++){Vt.getVertex(Vt.indices[3*ir[ur]+mr],Yt),Vt.getVertex(Vt.indices[3*ir[ur]+(mr+1)%3],Zt),Zt.vsub(Yt,Jt),Kt.vsub(Zt,$t);var fr=$t.dot(Jt);Kt.vsub(Yt,$t);var hr=$t.dot(Jt);if(0<hr&&0>fr){Kt.vsub(Yt,$t),Qt.copy(Jt),Qt.normalize(),hr=$t.dot(Qt),Qt.scale(hr,$t),$t.vadd(Yt,$t);var yr=$t.distanceTo(Kt);if(yr<kt.radius){var gr=this.createContactEquation(qt,Xt,kt,Vt);$t.vsub(Kt,gr.ni),gr.ni.normalize(),gr.ni.scale(kt.radius,gr.ri),$.pointToWorldFrame(Ht,jt,$t,$t),$t.vsub(Xt.position,gr.rj),$.vectorToWorldFrame(jt,gr.ni,gr.ni),$.vectorToWorldFrame(jt,gr.ri,gr.ri),this.result.push(gr),this.createFrictionEquationsFromContact(gr,this.frictionResult)}}}for(var _r=ze,xr=De,br=Fe,Tr=Se,ur=0,Er=ir.length;ur!==Er;ur++){Vt.getTriangleVertices(ir[ur],_r,xr,br),Vt.getNormal(ir[ur],Tr),Kt.vsub(_r,$t);var yr=$t.dot(Tr);if(Tr.scale(yr,$t),Kt.vsub($t,$t),yr=$t.distanceTo(Kt),Q.pointInTriangle($t,_r,xr,br)&&yr<kt.radius){var gr=this.createContactEquation(qt,Xt,kt,Vt);$t.vsub(Kt,gr.ni),gr.ni.normalize(),gr.ni.scale(kt.radius,gr.ri),$.pointToWorldFrame(Ht,jt,$t,$t),$t.vsub(Xt.position,gr.rj),$.vectorToWorldFrame(jt,gr.ni,gr.ni),$.vectorToWorldFrame(jt,gr.ri,gr.ri),this.result.push(gr),this.createFrictionEquationsFromContact(gr,this.frictionResult)}}ir.length=0};var ke=new K,Ve=new K;W.prototype[J.types.SPHERE|J.types.PLANE]=W.prototype.spherePlane=function(kt,Vt,Gt,Ht,Wt,jt,qt,Xt){var Yt=this.createContactEquation(qt,Xt,kt,Vt);if(Yt.ni.set(0,0,1),jt.vmult(Yt.ni,Yt.ni),Yt.ni.negate(Yt.ni),Yt.ni.normalize(),Yt.ni.mult(kt.radius,Yt.ri),Gt.vsub(Ht,ke),Yt.ni.mult(Yt.ni.dot(ke),Ve),ke.vsub(Ve,Yt.rj),-ke.dot(Yt.ni)<=kt.radius){var Zt=Yt.ri,Jt=Yt.rj;Zt.vadd(Gt,Zt),Zt.vsub(qt.position,Zt),Jt.vadd(Ht,Jt),Jt.vsub(Xt.position,Jt),this.result.push(Yt),this.createFrictionEquationsFromContact(Yt,this.frictionResult)}};var Ge=new K,He=new K,We=new K,je=new K,qe=new K,Xe=new K,Ye=new K,Ze=[new K,new K,new K,new K,new K,new K],Je=new K,Qe=new K,Ke=new K,$e=new K;W.prototype[J.types.SPHERE|J.types.BOX]=W.prototype.sphereBox=function(kt,Vt,Gt,Ht,Wt,jt,qt,Xt){var Yt=this.v3pool,Zt=Ze;Gt.vsub(Ht,je),Vt.getSideNormals(Zt,jt);for(var Jt=kt.radius,Kt=!1,$t=Qe,er=Ke,rr=$e,or=null,ir=0,sr=0,lr=0,cr=null,ur=0,mr=Zt.length,gr;ur!==mr&&!1==Kt;ur++){gr=qe,gr.copy(Zt[ur]);var fr=gr.norm();gr.normalize();var hr=je.dot(gr);if(hr<fr+Jt&&0<hr){var yr=Xe,_r=Ye;yr.copy(Zt[(ur+1)%3]),_r.copy(Zt[(ur+2)%3]);var xr=yr.norm(),br=_r.norm();yr.normalize(),_r.normalize();var Tr=je.dot(yr),Er=je.dot(_r);if(Tr<xr&&Tr>-xr&&Er<br&&Er>-br){var Sr=_Mathabs(hr-fr-Jt);(null==cr||Sr<cr)&&(cr=Sr,sr=Tr,lr=Er,or=fr,$t.copy(gr),er.copy(yr),rr.copy(_r),ir++)}}}if(ir){Kt=!0;var Ar=this.createContactEquation(qt,Xt,kt,Vt);$t.mult(-Jt,Ar.ri),Ar.ni.copy($t),Ar.ni.negate(Ar.ni),$t.mult(or,$t),er.mult(sr,er),$t.vadd(er,$t),rr.mult(lr,rr),$t.vadd(rr,Ar.rj),Ar.ri.vadd(Gt,Ar.ri),Ar.ri.vsub(qt.position,Ar.ri),Ar.rj.vadd(Ht,Ar.rj),Ar.rj.vsub(Xt.position,Ar.rj),this.result.push(Ar),this.createFrictionEquationsFromContact(Ar,this.frictionResult)}for(var wr=Yt.get(),Mr=Je,Rr=0;2!==Rr&&!Kt;Rr++)for(var Cr=0;2!==Cr&&!Kt;Cr++)for(var Pr=0;2!==Pr&&!Kt;Pr++)if(wr.set(0,0,0),Rr?wr.vadd(Zt[0],wr):wr.vsub(Zt[0],wr),Cr?wr.vadd(Zt[1],wr):wr.vsub(Zt[1],wr),Pr?wr.vadd(Zt[2],wr):wr.vsub(Zt[2],wr),Ht.vadd(wr,Mr),Mr.vsub(Gt,Mr),Mr.norm2()<Jt*Jt){Kt=!0;var Ar=this.createContactEquation(qt,Xt,kt,Vt);Ar.ri.copy(Mr),Ar.ri.normalize(),Ar.ni.copy(Ar.ri),Ar.ri.mult(Jt,Ar.ri),Ar.rj.copy(wr),Ar.ri.vadd(Gt,Ar.ri),Ar.ri.vsub(qt.position,Ar.ri),Ar.rj.vadd(Ht,Ar.rj),Ar.rj.vsub(Xt.position,Ar.rj),this.result.push(Ar),this.createFrictionEquationsFromContact(Ar,this.frictionResult)}Yt.release(wr),wr=null;for(var Lr=Yt.get(),Ir=Yt.get(),Ar=Yt.get(),Br=Yt.get(),Sr=Yt.get(),Nr=Zt.length,Rr=0;Rr!==Nr&&!Kt;Rr++)for(var Cr=0;Cr!==Nr&&!Kt;Cr++)if(Rr%3!=Cr%3){Zt[Cr].cross(Zt[Rr],Lr),Lr.normalize(),Zt[Rr].vadd(Zt[Cr],Ir),Ar.copy(Gt),Ar.vsub(Ir,Ar),Ar.vsub(Ht,Ar);var zr=Ar.dot(Lr);Lr.mult(zr,Br);for(var Pr=0;Pr===Rr%3||Pr===Cr%3;)Pr++;Sr.copy(Gt),Sr.vsub(Br,Sr),Sr.vsub(Ir,Sr),Sr.vsub(Ht,Sr);var Dr=_Mathabs(zr),Fr=Sr.norm();if(Dr<Zt[Pr].norm()&&Fr<Jt){Kt=!0;var Ur=this.createContactEquation(qt,Xt,kt,Vt);Ir.vadd(Br,Ur.rj),Ur.rj.copy(Ur.rj),Sr.negate(Ur.ni),Ur.ni.normalize(),Ur.ri.copy(Ur.rj),Ur.ri.vadd(Ht,Ur.ri),Ur.ri.vsub(Gt,Ur.ri),Ur.ri.normalize(),Ur.ri.mult(Jt,Ur.ri),Ur.ri.vadd(Gt,Ur.ri),Ur.ri.vsub(qt.position,Ur.ri),Ur.rj.vadd(Ht,Ur.rj),Ur.rj.vsub(Xt.position,Ur.rj),this.result.push(Ur),this.createFrictionEquationsFromContact(Ur,this.frictionResult)}}Yt.release(Lr,Ir,Ar,Br,Sr)};var et=new K,tt=new K,rt=new K,ot=new K,it=new K,nt=new K,ct=new K,ut=new K,mt=new K,ft=new K;W.prototype[J.types.SPHERE|J.types.CONVEXPOLYHEDRON]=W.prototype.sphereConvex=function(kt,Vt,Gt,Ht,Wt,jt,qt,Xt){var Yt=this.v3pool;Gt.vsub(Ht,et);for(var Zt=Vt.faceNormals,Jt=Vt.faces,Qt=Vt.vertices,Kt=kt.radius,er=0;er!==Qt.length;er++){var rr=Qt[er],or=it;jt.vmult(rr,or),Ht.vadd(or,or);var ir=ot;if(or.vsub(Gt,ir),ir.norm2()<Kt*Kt){lr=!0;var sr=this.createContactEquation(qt,Xt,kt,Vt);return sr.ri.copy(ir),sr.ri.normalize(),sr.ni.copy(sr.ri),sr.ri.mult(Kt,sr.ri),or.vsub(Ht,sr.rj),sr.ri.vadd(Gt,sr.ri),sr.ri.vsub(qt.position,sr.ri),sr.rj.vadd(Ht,sr.rj),sr.rj.vsub(Xt.position,sr.rj),this.result.push(sr),void this.createFrictionEquationsFromContact(sr,this.frictionResult)}}for(var lr=!1,er=0,cr=Jt.length;er!==cr&&!1==lr;er++){var ur=Zt[er],mr=Jt[er],gr=nt;jt.vmult(ur,gr);var fr=ct;jt.vmult(Qt[mr[0]],fr),fr.vadd(Ht,fr);var hr=ut;gr.mult(-Kt,hr),Gt.vadd(hr,hr);var yr=mt;hr.vsub(fr,yr);var _r=yr.dot(gr),xr=ft;if(Gt.vsub(fr,xr),0>_r&&0<xr.dot(gr)){for(var br=[],Tr=0,Er=mr.length,Sr;Tr!==Er;Tr++)Sr=Yt.get(),jt.vmult(Qt[mr[Tr]],Sr),Ht.vadd(Sr,Sr),br.push(Sr);if(Y(br,gr,Gt)){lr=!0;var sr=this.createContactEquation(qt,Xt,kt,Vt);gr.mult(-Kt,sr.ri),gr.negate(sr.ni);var Ar=Yt.get();gr.mult(-_r,Ar);var wr=Yt.get();gr.mult(-Kt,wr),Gt.vsub(Ht,sr.rj),sr.rj.vadd(wr,sr.rj),sr.rj.vadd(Ar,sr.rj),sr.rj.vadd(Ht,sr.rj),sr.rj.vsub(Xt.position,sr.rj),sr.ri.vadd(Gt,sr.ri),sr.ri.vsub(qt.position,sr.ri),Yt.release(Ar),Yt.release(wr),this.result.push(sr),this.createFrictionEquationsFromContact(sr,this.frictionResult);for(var Tr=0,Mr=br.length;Tr!==Mr;Tr++)Yt.release(br[Tr]);return}for(var Tr=0;Tr!==mr.length;Tr++){var Rr=Yt.get(),Cr=Yt.get();jt.vmult(Qt[mr[(Tr+1)%mr.length]],Rr),jt.vmult(Qt[mr[(Tr+2)%mr.length]],Cr),Ht.vadd(Rr,Rr),Ht.vadd(Cr,Cr);var Pr=tt;Cr.vsub(Rr,Pr);var Lr=rt;Pr.unit(Lr);var Ir=Yt.get(),Br=Yt.get();Gt.vsub(Rr,Br);var Nr=Br.dot(Lr);Lr.mult(Nr,Ir),Ir.vadd(Rr,Ir);var zr=Yt.get();if(Ir.vsub(Gt,zr),0<Nr&&Nr*Nr<Pr.norm2()&&zr.norm2()<Kt*Kt){var sr=this.createContactEquation(qt,Xt,kt,Vt);Ir.vsub(Ht,sr.rj),Ir.vsub(Gt,sr.ni),sr.ni.normalize(),sr.ni.mult(Kt,sr.ri),sr.rj.vadd(Ht,sr.rj),sr.rj.vsub(Xt.position,sr.rj),sr.ri.vadd(Gt,sr.ri),sr.ri.vsub(qt.position,sr.ri),this.result.push(sr),this.createFrictionEquationsFromContact(sr,this.frictionResult);for(var Tr=0,Mr=br.length;Tr!==Mr;Tr++)Yt.release(br[Tr]);return Yt.release(Rr),Yt.release(Cr),Yt.release(Ir),Yt.release(zr),void Yt.release(Br)}Yt.release(Rr),Yt.release(Cr),Yt.release(Ir),Yt.release(zr),Yt.release(Br)}for(var Tr=0,Mr=br.length;Tr!==Mr;Tr++)Yt.release(br[Tr])}}};var ht=new K,yt=new K;W.prototype[J.types.PLANE|J.types.BOX]=W.prototype.planeBox=function(kt,Vt,Gt,Ht,Wt,jt,qt,Xt){Vt.convexPolyhedronRepresentation.material=Vt.material,Vt.convexPolyhedronRepresentation.collisionResponse=Vt.collisionResponse,this.planeConvex(kt,Vt.convexPolyhedronRepresentation,Gt,Ht,Wt,jt,qt,Xt)};var _t=new K,xt=new K,vt=new K,bt=new K;W.prototype[J.types.PLANE|J.types.CONVEXPOLYHEDRON]=W.prototype.planeConvex=function(kt,Vt,Gt,Ht,Wt,jt,qt,Xt){var Yt=_t,Zt=xt;Zt.set(0,0,1),Wt.vmult(Zt,Zt);for(var Jt=0,Qt=vt,Kt=0;Kt!==Vt.vertices.length;Kt++){Yt.copy(Vt.vertices[Kt]),jt.vmult(Yt,Yt),Ht.vadd(Yt,Yt),Yt.vsub(Gt,Qt);var $t=Zt.dot(Qt);if(0>=$t){var er=this.createContactEquation(qt,Xt,kt,Vt),rr=bt;Zt.mult(Zt.dot(Qt),rr),Yt.vsub(rr,rr),rr.vsub(Gt,er.ri),er.ni.copy(Zt),Yt.vsub(Ht,er.rj),er.ri.vadd(Gt,er.ri),er.ri.vsub(qt.position,er.ri),er.rj.vadd(Ht,er.rj),er.rj.vsub(Xt.position,er.rj),this.result.push(er),Jt++,this.enableFrictionReduction||this.createFrictionEquationsFromContact(er,this.frictionResult)}}this.enableFrictionReduction&&Jt&&this.createFrictionFromAverage(Jt)};var Tt=new K,Et=new K;W.prototype[J.types.CONVEXPOLYHEDRON]=W.prototype.convexConvex=function(kt,Vt,Gt,Ht,Wt,jt,qt,Xt,Yt,Zt,Jt,Qt){var Kt=Tt;if(!(Gt.distanceTo(Ht)>kt.boundingSphereRadius+Vt.boundingSphereRadius)&&kt.findSeparatingAxis(Vt,Gt,Wt,Ht,jt,Kt,Jt,Qt)){var $t=[],er=Et;kt.clipAgainstHull(Gt,Wt,Vt,Ht,jt,Kt,-100,100,$t);for(var rr=0,or=0;or!==$t.length;or++){var ir=this.createContactEquation(qt,Xt,kt,Vt,Yt,Zt),sr=ir.ri,lr=ir.rj;Kt.negate(ir.ni),$t[or].normal.negate(er),er.mult($t[or].depth,er),$t[or].point.vadd(er,sr),lr.copy($t[or].point),sr.vsub(Gt,sr),lr.vsub(Ht,lr),sr.vadd(Gt,sr),sr.vsub(qt.position,sr),lr.vadd(Ht,lr),lr.vsub(Xt.position,lr),this.result.push(ir),rr++,this.enableFrictionReduction||this.createFrictionEquationsFromContact(ir,this.frictionResult)}this.enableFrictionReduction&&rr&&this.createFrictionFromAverage(rr)}};var St=new K,At=new K,wt=new K;W.prototype[J.types.PLANE|J.types.PARTICLE]=W.prototype.planeParticle=function(kt,Vt,Gt,Ht,Wt,jt,qt,Xt){var Yt=St;Yt.set(0,0,1),qt.quaternion.vmult(Yt,Yt);var Zt=At;Ht.vsub(qt.position,Zt);var Jt=Yt.dot(Zt);if(0>=Jt){var Qt=this.createContactEquation(Xt,qt,Vt,kt);Qt.ni.copy(Yt),Qt.ni.negate(Qt.ni),Qt.ri.set(0,0,0);var Kt=wt;Yt.mult(Yt.dot(Ht),Kt),Ht.vsub(Kt,Kt),Qt.rj.copy(Kt),this.result.push(Qt),this.createFrictionEquationsFromContact(Qt,this.frictionResult)}};var Rt=new K;W.prototype[J.types.PARTICLE|J.types.SPHERE]=W.prototype.sphereParticle=function(kt,Vt,Gt,Ht,Wt,jt,qt,Xt){var Yt=Rt;Yt.set(0,0,1),Ht.vsub(Gt,Yt);var Zt=Yt.norm2();if(Zt<=kt.radius*kt.radius){var Jt=this.createContactEquation(Xt,qt,Vt,kt);Yt.normalize(),Jt.rj.copy(Yt),Jt.rj.mult(kt.radius,Jt.rj),Jt.ni.copy(Yt),Jt.ni.negate(Jt.ni),Jt.ri.set(0,0,0),this.result.push(Jt),this.createFrictionEquationsFromContact(Jt,this.frictionResult)}};var Ct=new re,Pt=new K,Lt=new K,It=new K,Bt=new K,Nt=new K;W.prototype[J.types.PARTICLE|J.types.CONVEXPOLYHEDRON]=W.prototype.convexParticle=function(kt,Vt,Gt,Ht,Wt,jt,qt,Xt){var Yt=-1,Zt=It,Jt=Nt,Qt=null,Kt=0,$t=Pt;if($t.copy(Ht),$t.vsub(Gt,$t),Wt.conjugate(Ct),Ct.vmult($t,$t),kt.pointIsInside($t)){kt.worldVerticesNeedsUpdate&&kt.computeWorldVertices(Gt,Wt),kt.worldFaceNormalsNeedsUpdate&&kt.computeWorldFaceNormals(Wt);for(var er=0,rr=kt.faces.length;er!==rr;er++){var or=[kt.worldVertices[kt.faces[er][0]]],ir=kt.worldFaceNormals[er];Ht.vsub(or[0],Bt);var sr=-ir.dot(Bt);(null==Qt||_Mathabs(sr)<_Mathabs(Qt))&&(Qt=sr,Yt=er,Zt.copy(ir),Kt++)}if(-1!==Yt){var lr=this.createContactEquation(Xt,qt,Vt,kt);Zt.mult(Qt,Jt),Jt.vadd(Ht,Jt),Jt.vsub(Gt,Jt),lr.rj.copy(Jt),Zt.negate(lr.ni),lr.ri.set(0,0,0);var cr=lr.ri,ur=lr.rj;cr.vadd(Ht,cr),cr.vsub(Xt.position,cr),ur.vadd(Gt,ur),ur.vsub(qt.position,ur),this.result.push(lr),this.createFrictionEquationsFromContact(lr,this.frictionResult)}else console.warn("Point found inside convex, but did not find penetrating face!")}},W.prototype[J.types.BOX|J.types.HEIGHTFIELD]=W.prototype.boxHeightfield=function(kt,Vt,Gt,Ht,Wt,jt,qt,Xt){kt.convexPolyhedronRepresentation.material=kt.material,kt.convexPolyhedronRepresentation.collisionResponse=kt.collisionResponse,this.convexHeightfield(kt.convexPolyhedronRepresentation,Vt,Gt,Ht,Wt,jt,qt,Xt)};var zt=new K,Dt=new K,Ft=[0];W.prototype[J.types.CONVEXPOLYHEDRON|J.types.HEIGHTFIELD]=W.prototype.convexHeightfield=function(kt,Vt,Gt,Ht,Wt,jt,qt,Xt){var Yt=Vt.data,Zt=Vt.elementSize,Jt=kt.boundingSphereRadius,Qt=Dt,Kt=Ft,$t=zt;$.pointToLocalFrame(Ht,jt,Gt,$t);var er=_Mathfloor(($t.x-Jt)/Zt)-1,rr=_Mathceil(($t.x+Jt)/Zt)+1,or=_Mathfloor(($t.y-Jt)/Zt)-1,ir=_Mathceil(($t.y+Jt)/Zt)+1;if(!(0>rr||0>ir||er>Yt.length||or>Yt[0].length)){0>er&&(er=0),0>rr&&(rr=0),0>or&&(or=0),0>ir&&(ir=0),er>=Yt.length&&(er=Yt.length-1),rr>=Yt.length&&(rr=Yt.length-1),ir>=Yt[0].length&&(ir=Yt[0].length-1),or>=Yt[0].length&&(or=Yt[0].length-1);var sr=[];Vt.getRectMinMax(er,or,rr,ir,sr);var lr=sr[0],cr=sr[1];if(!($t.z-Jt>cr||$t.z+Jt<lr))for(var ur=er;ur<rr;ur++)for(var mr=or;mr<ir;mr++)Vt.getConvexTrianglePillar(ur,mr,!1),$.pointToWorldFrame(Ht,jt,Vt.pillarOffset,Qt),Gt.distanceTo(Qt)<Vt.pillarConvex.boundingSphereRadius+kt.boundingSphereRadius&&this.convexConvex(kt,Vt.pillarConvex,Gt,Qt,Wt,jt,qt,Xt,null,null,Kt,null),Vt.getConvexTrianglePillar(ur,mr,!0),$.pointToWorldFrame(Ht,jt,Vt.pillarOffset,Qt),Gt.distanceTo(Qt)<Vt.pillarConvex.boundingSphereRadius+kt.boundingSphereRadius&&this.convexConvex(kt,Vt.pillarConvex,Gt,Qt,Wt,jt,qt,Xt,null,null,Kt,null)}};var Ut=new K,Ot=new K;W.prototype[J.types.SPHERE|J.types.HEIGHTFIELD]=W.prototype.sphereHeightfield=function(kt,Vt,Gt,Ht,Wt,jt,qt,Xt){var Yt=Vt.data,Zt=kt.radius,Jt=Vt.elementSize,Qt=Ot,Kt=Ut;$.pointToLocalFrame(Ht,jt,Gt,Kt);var $t=_Mathfloor((Kt.x-Zt)/Jt)-1,er=_Mathceil((Kt.x+Zt)/Jt)+1,rr=_Mathfloor((Kt.y-Zt)/Jt)-1,or=_Mathceil((Kt.y+Zt)/Jt)+1;if(!(0>er||0>or||$t>Yt.length||or>Yt[0].length)){0>$t&&($t=0),0>er&&(er=0),0>rr&&(rr=0),0>or&&(or=0),$t>=Yt.length&&($t=Yt.length-1),er>=Yt.length&&(er=Yt.length-1),or>=Yt[0].length&&(or=Yt[0].length-1),rr>=Yt[0].length&&(rr=Yt[0].length-1);var ir=[];Vt.getRectMinMax($t,rr,er,or,ir);var sr=ir[0],lr=ir[1];if(!(Kt.z-Zt>lr||Kt.z+Zt<sr))for(var cr=this.result,ur=$t;ur<er;ur++)for(var mr=rr,gr;mr<or;mr++){gr=cr.length,Vt.getConvexTrianglePillar(ur,mr,!1),$.pointToWorldFrame(Ht,jt,Vt.pillarOffset,Qt),Gt.distanceTo(Qt)<Vt.pillarConvex.boundingSphereRadius+kt.boundingSphereRadius&&this.sphereConvex(kt,Vt.pillarConvex,Gt,Qt,Wt,jt,qt,Xt),Vt.getConvexTrianglePillar(ur,mr,!0),$.pointToWorldFrame(Ht,jt,Vt.pillarOffset,Qt),Gt.distanceTo(Qt)<Vt.pillarConvex.boundingSphereRadius+kt.boundingSphereRadius&&this.sphereConvex(kt,Vt.pillarConvex,Gt,Qt,Wt,jt,qt,Xt);var fr=cr.length-gr;if(2<fr)return}}}},{"../collision/AABB":3,"../collision/Ray":9,"../equations/ContactEquation":19,"../equations/FrictionEquation":21,"../math/Quaternion":28,"../math/Transform":29,"../math/Vec3":30,"../shapes/ConvexPolyhedron":38,"../shapes/Shape":43,"../solver/Solver":47,"../utils/Vec3Pool":54}],56:[function(O,G){function W(){re.apply(this),this.dt=-1,this.allowSleep=!1,this.contacts=[],this.frictionEquations=[],this.quatNormalizeSkip=0,this.quatNormalizeFast=!1,this.time=0,this.stepnumber=0,this.default_dt=1/60,this.nextId=0,this.gravity=new Y,this.broadphase=new fe,this.bodies=[],this.solver=new J,this.constraints=[],this.narrowphase=new ee(this),this.collisionMatrix=new oe,this.collisionMatrixPrevious=new oe,this.materials=[],this.contactmaterials=[],this.contactMaterialTable=new le,this.defaultMaterial=new ie("default"),this.defaultContactMaterial=new ne(this.defaultMaterial,this.defaultMaterial,{friction:0.3,restitution:0}),this.doProfiling=!1,this.profile={solve:0,makeContactConstraints:0,broadphase:0,integrate:0,narrowphase:0},this.subsystems=[],this.addBodyEvent={type:"addBody",body:null},this.removeBodyEvent={type:"removeBody",body:null}}G.exports=W;var X=O("../shapes/Shape"),Y=O("../math/Vec3"),Z=O("../math/Quaternion"),J=O("../solver/GSSolver"),Q=O("../utils/Vec3Pool"),K=O("../equations/ContactEquation"),$=O("../equations/FrictionEquation"),ee=O("./Narrowphase"),re=O("../utils/EventTarget"),oe=O("../collision/ArrayCollisionMatrix"),ie=O("../material/Material"),ne=O("../material/ContactMaterial"),se=O("../objects/Body"),le=O("../utils/TupleDictionary"),pe=O("../collision/RaycastResult"),ue=O("../collision/AABB"),ge=O("../collision/Ray"),fe=O("../collision/NaiveBroadphase");W.prototype=new re;var he=new ue,_e=new ge;if(W.prototype.getContactMaterial=function(Ge,He){return this.contactMaterialTable.get(Ge.id,He.id)},W.prototype.numObjects=function(){return this.bodies.length},W.prototype.collisionMatrixTick=function(){var Ge=this.collisionMatrixPrevious;this.collisionMatrixPrevious=this.collisionMatrix,this.collisionMatrix=Ge,this.collisionMatrix.reset()},W.prototype.add=W.prototype.addBody=function(Ge){-1!==this.bodies.indexOf(Ge)||(Ge.index=this.bodies.length,this.bodies.push(Ge),Ge.world=this,Ge.initPosition.copy(Ge.position),Ge.initVelocity.copy(Ge.velocity),Ge.timeLastSleepy=this.time,Ge instanceof se&&(Ge.initAngularVelocity.copy(Ge.angularVelocity),Ge.initQuaternion.copy(Ge.quaternion)),this.collisionMatrix.setNumObjects(this.bodies.length),this.addBodyEvent.body=Ge,this.dispatchEvent(this.addBodyEvent))},W.prototype.addConstraint=function(Ge){this.constraints.push(Ge)},W.prototype.removeConstraint=function(Ge){var He=this.constraints.indexOf(Ge);-1!==He&&this.constraints.splice(He,1)},W.prototype.rayTest=function(Ge,He,We){We instanceof pe?this.raycastClosest(Ge,He,{skipBackfaces:!0},We):this.raycastAll(Ge,He,{skipBackfaces:!0},We)},W.prototype.raycastAll=function(Ge,He,We,je){return We.mode=ge.ALL,We.from=Ge,We.to=He,We.callback=je,_e.intersectWorld(this,We)},W.prototype.raycastAny=function(Ge,He,We,je){return We.mode=ge.ANY,We.from=Ge,We.to=He,We.result=je,_e.intersectWorld(this,We)},W.prototype.raycastClosest=function(Ge,He,We,je){return We.mode=ge.CLOSEST,We.from=Ge,We.to=He,We.result=je,_e.intersectWorld(this,We)},W.prototype.remove=function(Ge){Ge.world=null;var He=this.bodies.length-1,We=this.bodies,je=We.indexOf(Ge);if(-1!==je){We.splice(je,1);for(var qe=0;qe!==We.length;qe++)We[qe].index=qe;this.collisionMatrix.setNumObjects(He),this.removeBodyEvent.body=Ge,this.dispatchEvent(this.removeBodyEvent)}},W.prototype.removeBody=W.prototype.remove,W.prototype.addMaterial=function(Ge){this.materials.push(Ge)},W.prototype.addContactMaterial=function(Ge){this.contactmaterials.push(Ge),this.contactMaterialTable.set(Ge.materials[0].id,Ge.materials[1].id,Ge)},"undefined"==typeof performance&&(performance={}),!performance.now){var xe=Date.now();performance.timing&&performance.timing.navigationStart&&(xe=performance.timing.navigationStart),performance.now=function(){return Date.now()-xe}}var ve=new Y;W.prototype.step=function(Ge,He,We){if(We=We||10,He=He||0,0===He)this.internalStep(Ge),this.time+=Ge;else{var je=_Mathfloor((this.time+He)/Ge)-_Mathfloor(this.time/Ge);je=_Mathmin(je,We);for(var qe=performance.now(),Xe=0;Xe!==je&&(this.internalStep(Ge),!(performance.now()-qe>1e3*Ge));Xe++);this.time+=He;for(var Ye=this.time%Ge,Je=ve,Qe=this.bodies,Ke=0,$e;Ke!==Qe.length;Ke++)$e=Qe[Ke],$e.type!==se.STATIC&&$e.sleepState!==se.SLEEPING?($e.position.vsub($e.previousPosition,Je),Je.scale(Ye/Ge,Je),$e.position.vadd(Je,$e.interpolatedPosition)):($e.interpolatedPosition.copy($e.position),$e.interpolatedQuaternion.copy($e.quaternion))}};var Te={type:"postStep"},Ee={type:"preStep"},Se={type:"collide",body:null,contact:null},Ae=[],we=[],Me=[],Re=[],Ce=new Y,Pe=new Y,Le=new Y,Ie=new Y,Be=new Y,Ne=new Y,ze=new Y,De=new Y,Fe=new Y,Ue=new Z,Oe=new Z,ke=new Z,Ve=new Y;W.prototype.internalStep=function(Ge){this.dt=Ge;var He=this,We=this,je=this.contacts,qe=Me,Xe=Re,Ye=this.numObjects(),Ze=this.bodies,Je=this.solver,Qe=this.gravity,Ke=this.doProfiling,$e=this.profile,et=se.DYNAMIC,rt=this.constraints,ot=we,it=Qe.norm(),nt=Qe.x,ct=Qe.y,ut=Qe.z,mt=0,tt;for(Ke&&(tt=performance.now()),mt=0;mt!==Ye;mt++){var ft=Ze[mt];if(ft.type&et){var ht=ft.force,yt=ft.mass;ht.x+=yt*nt,ht.y+=yt*ct,ht.z+=yt*ut}}for(var mt=0,_t=this.subsystems.length;mt!==_t;mt++)this.subsystems[mt].update();Ke&&(tt=performance.now()),qe.length=0,Xe.length=0,this.broadphase.collisionPairs(this,qe,Xe),Ke&&($e.broadphase=performance.now()-tt);var xt=rt.length;for(mt=0;mt!==xt;mt++){var vt=rt[mt];if(!vt.collideConnected)for(var bt=qe.length-1;0<=bt;bt-=1)(vt.bodyA===qe[bt]&&vt.bodyB===Xe[bt]||vt.bodyB===qe[bt]&&vt.bodyA===Xe[bt])&&(qe.splice(bt,1),Xe.splice(bt,1))}this.collisionMatrixTick(),Ke&&(tt=performance.now());var Tt=Ae,Et=je.length;for(mt=0;mt!==Et;mt++)Tt.push(je[mt]);je.length=0;var St=this.frictionEquations.length;for(mt=0;mt!==St;mt++)ot.push(this.frictionEquations[mt]);this.frictionEquations.length=0,this.narrowphase.getContacts(qe,Xe,this,je,Tt,this.frictionEquations,ot),Ke&&($e.narrowphase=performance.now()-tt),Ke&&(tt=performance.now());for(var mt=0;mt<this.frictionEquations.length;mt++)Je.addEquation(this.frictionEquations[mt]);for(var At=je.length,wt=0;wt!==At;wt++){var vt=je[wt],ft=vt.bi,Rt=vt.bj,Ct=vt.si,Pt=vt.sj,Lt;Lt=ft.material&&Rt.material?this.getContactMaterial(ft.material,Rt.material)||this.defaultContactMaterial:this.defaultContactMaterial;var It=Lt.friction;if(ft.material&&Rt.material&&(0<=ft.material.friction&&0<=Rt.material.friction&&(It=ft.material.friction*Rt.material.friction),0<=ft.material.restitution&&0<=Rt.material.restitution&&(vt.restitution=ft.material.restitution*Rt.material.restitution)),Je.addEquation(vt),ft.allowSleep&&ft.type===se.DYNAMIC&&ft.sleepState===se.SLEEPING&&Rt.sleepState===se.AWAKE&&Rt.type!==se.STATIC){var Bt=Rt.velocity.norm2()+Rt.angularVelocity.norm2(),Nt=_Mathpow(Rt.sleepSpeedLimit,2);Bt>=2*Nt&&(ft._wakeUpAfterNarrowphase=!0)}if(Rt.allowSleep&&Rt.type===se.DYNAMIC&&Rt.sleepState===se.SLEEPING&&ft.sleepState===se.AWAKE&&ft.type!==se.STATIC){var zt=ft.velocity.norm2()+ft.angularVelocity.norm2(),Dt=_Mathpow(ft.sleepSpeedLimit,2);zt>=2*Dt&&(Rt._wakeUpAfterNarrowphase=!0)}this.collisionMatrix.set(ft,Rt,!0),this.collisionMatrixPrevious.get(ft,Rt)||(Se.body=Rt,Se.contact=vt,ft.dispatchEvent(Se),Se.body=ft,Rt.dispatchEvent(Se))}for(Ke&&($e.makeContactConstraints=performance.now()-tt,tt=performance.now()),mt=0;mt!==Ye;mt++){var ft=Ze[mt];ft._wakeUpAfterNarrowphase&&(ft.wakeUp(),ft._wakeUpAfterNarrowphase=!1)}var xt=rt.length;for(mt=0;mt!==xt;mt++){var vt=rt[mt];vt.update();for(var bt=0,Ft=vt.equations.length,Ut;bt!==Ft;bt++)Ut=vt.equations[bt],Je.addEquation(Ut)}Je.solve(Ge,this),Ke&&($e.solve=performance.now()-tt),Je.removeAllEquations();var Ot=_Mathpow;for(mt=0;mt!==Ye;mt++){var ft=Ze[mt];if(ft.type&et){var kt=Ot(1-ft.linearDamping,Ge),Vt=ft.velocity;Vt.mult(kt,Vt);var Gt=ft.angularVelocity;if(Gt){var Ht=Ot(1-ft.angularDamping,Ge);Gt.mult(Ht,Gt)}}}for(this.dispatchEvent(Ee),mt=0;mt!==Ye;mt++){var ft=Ze[mt];ft.preStep&&ft.preStep.call(ft)}Ke&&(tt=performance.now());var jt=Oe,qt=ke,Xt=this.stepnumber,Yt=se.DYNAMIC|se.KINEMATIC,Zt=0==Xt%(this.quatNormalizeSkip+1),Jt=this.quatNormalizeFast,Qt=0.5*Ge,Kt=X.types.PLANE,$t=X.types.CONVEXPOLYHEDRON;for(mt=0;mt!==Ye;mt++){var er=Ze[mt],rr=er.force,or=er.torque;if(er.type&Yt&&er.sleepState!==se.SLEEPING){var ir=er.velocity,sr=er.angularVelocity,lr=er.position,cr=er.quaternion,ur=er.invMass,mr=er.invInertiaWorld;ir.x+=rr.x*ur*Ge,ir.y+=rr.y*ur*Ge,ir.z+=rr.z*ur*Ge,er.angularVelocity&&(mr.vmult(or,Ve),Ve.mult(Ge,Ve),Ve.vadd(sr,sr)),lr.x+=ir.x*Ge,lr.y+=ir.y*Ge,lr.z+=ir.z*Ge,er.angularVelocity&&(jt.set(sr.x,sr.y,sr.z,0),jt.mult(cr,qt),cr.x+=Qt*qt.x,cr.y+=Qt*qt.y,cr.z+=Qt*qt.z,cr.w+=Qt*qt.w,Zt&&(Jt?cr.normalizeFast():cr.normalize())),er.aabb&&(er.aabbNeedsUpdate=!0),er.updateInertiaWorld&&er.updateInertiaWorld()}}for(this.clearForces(),this.broadphase.dirty=!0,Ke&&($e.integrate=performance.now()-tt),this.time+=Ge,this.stepnumber+=1,this.dispatchEvent(Te),mt=0;mt!==Ye;mt++){var ft=Ze[mt],gr=ft.postStep;gr&&gr.call(ft)}if(this.allowSleep)for(mt=0;mt!==Ye;mt++)Ze[mt].sleepTick(this.time)},W.prototype.clearForces=function(){for(var Ge=this.bodies,He=Ge.length,We=0;We!==He;We++){var je=Ge[We],qe=je.force,Xe=je.torque;je.force.set(0,0,0),je.torque.set(0,0,0)}}},{"../collision/AABB":3,"../collision/ArrayCollisionMatrix":4,"../collision/NaiveBroadphase":7,"../collision/Ray":9,"../collision/RaycastResult":10,"../equations/ContactEquation":19,"../equations/FrictionEquation":21,"../material/ContactMaterial":24,"../material/Material":25,"../math/Quaternion":28,"../math/Vec3":30,"../objects/Body":31,"../shapes/Shape":43,"../solver/GSSolver":46,"../utils/EventTarget":49,"../utils/TupleDictionary":52,"../utils/Vec3Pool":54,"./Narrowphase":55}]},{},[2])(2)})},,,,,,function(E){var A=E.exports=A||{};A.color=A.color||{},A.utils=A.utils||{},A.utils.common=function(){var L=Array.prototype.forEach,D=Array.prototype.slice;return{BREAK:{},extend:function(F){return this.each(D.call(arguments,1),function(U){for(var O in U)this.isUndefined(U[O])||(F[O]=U[O])},this),F},defaults:function(F){return this.each(D.call(arguments,1),function(U){for(var O in U)this.isUndefined(F[O])&&(F[O]=U[O])},this),F},compose:function(){var F=D.call(arguments);return function(){for(var U=D.call(arguments),O=F.length-1;0<=O;O--)U=[F[O].apply(this,U)];return U[0]}},each:function(F,U,O){if(L&&F.forEach===L)F.forEach(U,O);else if(F.length===F.length+0){for(var G=0,H=F.length;G<H;G++)if(G in F&&U.call(O,F[G],G)===this.BREAK)return;}else for(var G in F)if(U.call(O,F[G],G)===this.BREAK)return},defer:function(F){setTimeout(F,0)},toArray:function(F){return F.toArray?F.toArray():D.call(F)},isUndefined:function(F){return F===void 0},isNull:function(F){return null===F},isNaN:function(F){return F!==F},isArray:Array.isArray||function(F){return F.constructor===Array},isObject:function(F){return F===Object(F)},isNumber:function(F){return F===F+0},isString:function(F){return F===F+""},isBoolean:function(F){return!1===F||!0===F},isFunction:function(F){return"[object Function]"===Object.prototype.toString.call(F)}}}(),A.color.toString=function(L){return function(D){if(1==D.a||L.isUndefined(D.a)){for(var F=D.hex.toString(16);6>F.length;)F="0"+F;return"#"+F}return"rgba("+_Mathround(D.r)+","+_Mathround(D.g)+","+_Mathround(D.b)+","+D.a+")"}}(A.utils.common),A.Color=A.color.Color=function(L,D,F,U){function O(Y,Z,J){Object.defineProperty(Y,Z,{get:function(){return"RGB"===this.__state.space?this.__state[Z]:(H(this,Z,J),this.__state[Z])},set:function(Q){"RGB"!==this.__state.space&&(H(this,Z,J),this.__state.space="RGB"),this.__state[Z]=Q}})}function G(Y,Z){Object.defineProperty(Y,Z,{get:function(){return"HSV"===this.__state.space?this.__state[Z]:(W(this),this.__state[Z])},set:function(J){"HSV"!==this.__state.space&&(W(this),this.__state.space="HSV"),this.__state[Z]=J}})}function H(Y,Z,J){if("HEX"===Y.__state.space)Y.__state[Z]=D.component_from_hex(Y.__state.hex,J);else if("HSV"===Y.__state.space)U.extend(Y.__state,D.hsv_to_rgb(Y.__state.h,Y.__state.s,Y.__state.v));else throw"Corrupted color state"}function W(Y){var Z=D.rgb_to_hsv(Y.r,Y.g,Y.b);U.extend(Y.__state,{s:Z.s,v:Z.v}),U.isNaN(Z.h)?U.isUndefined(Y.__state.h)&&(Y.__state.h=0):Y.__state.h=Z.h}var X=function(){if(this.__state=L.apply(this,arguments),!1===this.__state)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1};return X.COMPONENTS=["r","g","b","h","s","v","hex","a"],U.extend(X.prototype,{toString:function(){return F(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),O(X.prototype,"r",2),O(X.prototype,"g",1),O(X.prototype,"b",0),G(X.prototype,"h"),G(X.prototype,"s"),G(X.prototype,"v"),Object.defineProperty(X.prototype,"a",{get:function(){return this.__state.a},set:function(Y){this.__state.a=Y}}),Object.defineProperty(X.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=D.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(Y){this.__state.space="HEX",this.__state.hex=Y}}),X}(A.color.interpret=function(L,D){var F,U,G=[{litmus:D.isString,conversions:{THREE_CHAR_HEX:{read:function(H){var W=H.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==W&&{space:"HEX",hex:parseInt("0x"+W[1].toString()+W[1].toString()+W[2].toString()+W[2].toString()+W[3].toString()+W[3].toString())}},write:L},SIX_CHAR_HEX:{read:function(H){var W=H.match(/^#([A-F0-9]{6})$/i);return null!==W&&{space:"HEX",hex:parseInt("0x"+W[1].toString())}},write:L},CSS_RGB:{read:function(H){var W=H.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==W&&{space:"RGB",r:parseFloat(W[1]),g:parseFloat(W[2]),b:parseFloat(W[3])}},write:L},CSS_RGBA:{read:function(H){var W=H.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);return null!==W&&{space:"RGB",r:parseFloat(W[1]),g:parseFloat(W[2]),b:parseFloat(W[3]),a:parseFloat(W[4])}},write:L}}},{litmus:D.isNumber,conversions:{HEX:{read:function(H){return{space:"HEX",hex:H,conversionName:"HEX"}},write:function(H){return H.hex}}}},{litmus:D.isArray,conversions:{RGB_ARRAY:{read:function(H){return!(3!=H.length)&&{space:"RGB",r:H[0],g:H[1],b:H[2]}},write:function(H){return[H.r,H.g,H.b]}},RGBA_ARRAY:{read:function(H){return!(4!=H.length)&&{space:"RGB",r:H[0],g:H[1],b:H[2],a:H[3]}},write:function(H){return[H.r,H.g,H.b,H.a]}}}},{litmus:D.isObject,conversions:{RGBA_OBJ:{read:function(H){return D.isNumber(H.r)&&D.isNumber(H.g)&&D.isNumber(H.b)&&D.isNumber(H.a)&&{space:"RGB",r:H.r,g:H.g,b:H.b,a:H.a}},write:function(H){return{r:H.r,g:H.g,b:H.b,a:H.a}}},RGB_OBJ:{read:function(H){return D.isNumber(H.r)&&D.isNumber(H.g)&&D.isNumber(H.b)&&{space:"RGB",r:H.r,g:H.g,b:H.b}},write:function(H){return{r:H.r,g:H.g,b:H.b}}},HSVA_OBJ:{read:function(H){return D.isNumber(H.h)&&D.isNumber(H.s)&&D.isNumber(H.v)&&D.isNumber(H.a)&&{space:"HSV",h:H.h,s:H.s,v:H.v,a:H.a}},write:function(H){return{h:H.h,s:H.s,v:H.v,a:H.a}}},HSV_OBJ:{read:function(H){return D.isNumber(H.h)&&D.isNumber(H.s)&&D.isNumber(H.v)&&{space:"HSV",h:H.h,s:H.s,v:H.v}},write:function(H){return{h:H.h,s:H.s,v:H.v}}}}}];return function(){U=!1;var H=1<arguments.length?D.toArray(arguments):arguments[0];return D.each(G,function(W){if(W.litmus(H))return D.each(W.conversions,function(X,Y){if(F=X.read(H),!1===U&&!1!==F)return U=F,F.conversionName=Y,F.conversion=X,D.BREAK}),D.BREAK}),U}}(A.color.toString,A.utils.common),A.color.math=function(){var L;return{hsv_to_rgb:function(D,F,U){var O=_Mathfloor(D/60)%6,G=D/60-_Mathfloor(D/60),H=U*(1-F),W=U*(1-G*F),X=U*(1-(1-G)*F),Y=[[U,X,H],[W,U,H],[H,U,X],[H,W,U],[X,H,U],[U,H,W]][O];return{r:255*Y[0],g:255*Y[1],b:255*Y[2]}},rgb_to_hsv:function(D,F,U){var O=_Mathmin(D,F,U),G=_Mathmax(D,F,U),H=G-O,W,X;if(0!=G)X=H/G;else return{h:NaN,s:0,v:0};return W=D==G?(F-U)/H:F==G?2+(U-D)/H:4+(D-F)/H,W/=6,0>W&&(W+=1),{h:360*W,s:X,v:G/255}},rgb_to_hex:function(D,F,U){var O=this.hex_with_component(0,2,D);return O=this.hex_with_component(O,1,F),O=this.hex_with_component(O,0,U),O},component_from_hex:function(D,F){return 255&D>>8*F},hex_with_component:function(D,F,U){return U<<(L=8*F)|D&~(255<<L)}}}(),A.color.toString,A.utils.common)},function(E){var A=E.exports=A||{};A.gui=A.gui||{},A.utils=A.utils||{},A.controllers=A.controllers||{},A.dom=A.dom||{},A.color=A.color||{},A.utils.css=function(){return{load:function(L,D){D=D||document;var F=D.createElement("link");F.type="text/css",F.rel="stylesheet",F.href=L,D.getElementsByTagName("head")[0].appendChild(F)},inject:function(L,D){D=D||document;var F=document.createElement("style");F.type="text/css",F.innerHTML=L,D.getElementsByTagName("head")[0].appendChild(F)}}}(),A.utils.common=function(){var L=Array.prototype.forEach,D=Array.prototype.slice;return{BREAK:{},extend:function(F){return this.each(D.call(arguments,1),function(U){for(var O in U)this.isUndefined(U[O])||(F[O]=U[O])},this),F},defaults:function(F){return this.each(D.call(arguments,1),function(U){for(var O in U)this.isUndefined(F[O])&&(F[O]=U[O])},this),F},compose:function(){var F=D.call(arguments);return function(){for(var U=D.call(arguments),O=F.length-1;0<=O;O--)U=[F[O].apply(this,U)];return U[0]}},each:function(F,U,O){if(L&&F.forEach===L)F.forEach(U,O);else if(F.length===F.length+0){for(var G=0,H=F.length;G<H;G++)if(G in F&&U.call(O,F[G],G)===this.BREAK)return;}else for(var G in F)if(U.call(O,F[G],G)===this.BREAK)return},defer:function(F){setTimeout(F,0)},toArray:function(F){return F.toArray?F.toArray():D.call(F)},isUndefined:function(F){return F===void 0},isNull:function(F){return null===F},isNaN:function(F){return F!==F},isArray:Array.isArray||function(F){return F.constructor===Array},isObject:function(F){return F===Object(F)},isNumber:function(F){return F===F+0},isString:function(F){return F===F+""},isBoolean:function(F){return!1===F||!0===F},isFunction:function(F){return"[object Function]"===Object.prototype.toString.call(F)}}}(),A.controllers.Controller=function(L){var D=function(F,U){this.initialValue=F[U],this.domElement=document.createElement("div"),this.object=F,this.property=U,this.__onChange=void 0,this.__onFinishChange=void 0};return L.extend(D.prototype,{onChange:function(F){return this.__onChange=F,this},onFinishChange:function(F){return this.__onFinishChange=F,this},setValue:function(F){return this.object[this.property]=F,this.__onChange&&this.__onChange.call(this,F),this.updateDisplay(),this},getValue:function(){return this.object[this.property]},updateDisplay:function(){return this},isModified:function(){return this.initialValue!==this.getValue()}}),D}(A.utils.common),A.dom.dom=function(L){function D(H){if("0"===H||L.isUndefined(H))return 0;var W=H.match(O);return L.isNull(W)?0:parseFloat(W[1])}var U={};L.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},function(H,W){L.each(H,function(X){U[X]=W})});var O=/(\d+(\.\d+)?)px/,G={makeSelectable:function(H,W){void 0===H||void 0===H.style||(H.onselectstart=W?function(){return!1}:function(){},H.style.MozUserSelect=W?"auto":"none",H.style.KhtmlUserSelect=W?"auto":"none",H.unselectable=W?"on":"off")},makeFullscreen:function(H,W,X){L.isUndefined(W)&&(W=!0),L.isUndefined(X)&&(X=!0),H.style.position="absolute",W&&(H.style.left=0,H.style.right=0),X&&(H.style.top=0,H.style.bottom=0)},fakeEvent:function(H,W,X,Y){X=X||{};var Z=U[W];if(!Z)throw new Error("Event type "+W+" not supported.");var J=document.createEvent(Z);switch(Z){case"MouseEvents":var Q=X.x||X.clientX||0,K=X.y||X.clientY||0;J.initMouseEvent(W,X.bubbles||!1,X.cancelable||!0,window,X.clickCount||1,0,0,Q,K,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var $=J.initKeyboardEvent||J.initKeyEvent;L.defaults(X,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),$(W,X.bubbles||!1,X.cancelable,window,X.ctrlKey,X.altKey,X.shiftKey,X.metaKey,X.keyCode,X.charCode);break;default:J.initEvent(W,X.bubbles||!1,X.cancelable||!0);}L.defaults(J,Y),H.dispatchEvent(J)},bind:function(H,W,X,Y){return Y=Y||!1,H.addEventListener?H.addEventListener(W,X,Y):H.attachEvent&&H.attachEvent("on"+W,X),G},unbind:function(H,W,X,Y){return Y=Y||!1,H.removeEventListener?H.removeEventListener(W,X,Y):H.detachEvent&&H.detachEvent("on"+W,X),G},addClass:function(H,W){if(H.className===void 0)H.className=W;else if(H.className!==W){var X=H.className.split(/ +/);-1==X.indexOf(W)&&(X.push(W),H.className=X.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return G},removeClass:function(H,W){if(!W)H.className=void 0;else if(void 0===H.className);else if(H.className===W)H.removeAttribute("class");else{var X=H.className.split(/ +/),Y=X.indexOf(W);-1!=Y&&(X.splice(Y,1),H.className=X.join(" "))}return G},hasClass:function(H,W){return new RegExp("(?:^|\\s+)"+W+"(?:\\s+|$)").test(H.className)||!1},getWidth:function(H){var W=getComputedStyle(H);return D(W["border-left-width"])+D(W["border-right-width"])+D(W["padding-left"])+D(W["padding-right"])+D(W.width)},getHeight:function(H){var W=getComputedStyle(H);return D(W["border-top-width"])+D(W["border-bottom-width"])+D(W["padding-top"])+D(W["padding-bottom"])+D(W.height)},getOffset:function(H){var W={left:0,top:0};if(H.offsetParent)do W.left+=H.offsetLeft,W.top+=H.offsetTop;while(H=H.offsetParent);return W},isActive:function(H){return H===document.activeElement&&(H.type||H.href)}};return G}(A.utils.common),A.controllers.OptionController=function(L,D,F){var U=function(O,G,H){U.superclass.call(this,O,G);var W=this;if(this.__select=document.createElement("select"),F.isArray(H)){var X={};F.each(H,function(Y){X[Y]=Y}),H=X}F.each(H,function(Y,Z){var J=document.createElement("option");J.innerHTML=Z,J.setAttribute("value",Y),W.__select.appendChild(J)}),this.updateDisplay(),D.bind(this.__select,"change",function(){var Y=this.options[this.selectedIndex].value;W.setValue(Y)}),this.domElement.appendChild(this.__select)};return U.superclass=L,F.extend(U.prototype,L.prototype,{setValue:function(O){var G=U.superclass.prototype.setValue.call(this,O);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),G},updateDisplay:function(){return this.__select.value=this.getValue(),U.superclass.prototype.updateDisplay.call(this)}}),U}(A.controllers.Controller,A.dom.dom,A.utils.common),A.controllers.NumberController=function(L,D){function F(O){return O=O.toString(),-1<O.indexOf(".")?O.length-O.indexOf(".")-1:0}var U=function(O,G,H){U.superclass.call(this,O,G),H=H||{},this.__min=H.min,this.__max=H.max,this.__step=H.step,this.__impliedStep=D.isUndefined(this.__step)?0==this.initialValue?1:_Mathpow(10,_Mathfloor(_Mathlog(this.initialValue)/Math.LN10))/10:this.__step,this.__precision=F(this.__impliedStep)};return U.superclass=L,D.extend(U.prototype,L.prototype,{setValue:function(O){return void 0!==this.__min&&O<this.__min?O=this.__min:void 0!==this.__max&&O>this.__max&&(O=this.__max),void 0!==this.__step&&0!=O%this.__step&&(O=_Mathround(O/this.__step)*this.__step),U.superclass.prototype.setValue.call(this,O)},min:function(O){return this.__min=O,this},max:function(O){return this.__max=O,this},step:function(O){return this.__step=O,this}}),U}(A.controllers.Controller,A.utils.common),A.controllers.NumberControllerBox=function(L,D,F){function U(G,H){var W=_Mathpow(10,H);return _Mathround(G*W)/W}var O=function(G,H,W){function X(){var ee=parseFloat(K.__input.value);F.isNaN(ee)||K.setValue(ee)}function J(ee){var re=$-ee.clientY;K.setValue(K.getValue()+re*K.__impliedStep),$=ee.clientY}function Q(){D.unbind(window,"mousemove",J),D.unbind(window,"mouseup",Q)}this.__truncationSuspended=!1,O.superclass.call(this,G,H,W);var K=this,$;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),D.bind(this.__input,"change",X),D.bind(this.__input,"blur",function(){X(),K.__onFinishChange&&K.__onFinishChange.call(K,K.getValue())}),D.bind(this.__input,"mousedown",function(ee){D.bind(window,"mousemove",J),D.bind(window,"mouseup",Q),$=ee.clientY}),D.bind(this.__input,"keydown",function(ee){13===ee.keyCode&&(K.__truncationSuspended=!0,this.blur(),K.__truncationSuspended=!1)}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return O.superclass=L,F.extend(O.prototype,L.prototype,{updateDisplay:function(){return this.__input.value=this.__truncationSuspended?this.getValue():U(this.getValue(),this.__precision),O.superclass.prototype.updateDisplay.call(this)}}),O}(A.controllers.NumberController,A.dom.dom,A.utils.common),A.controllers.NumberControllerSlider=function(L,D,F,U,O){function G(W,X,Y,Z,J){return Z+(J-Z)*((W-X)/(Y-X))}var H=function(W,X,Y,Z,J){function K(re){re.preventDefault();var oe=D.getOffset(ee.__background),ie=D.getWidth(ee.__background);return ee.setValue(G(re.clientX,oe.left,oe.left+ie,ee.__min,ee.__max)),!1}function $(){D.unbind(window,"mousemove",K),D.unbind(window,"mouseup",$),ee.__onFinishChange&&ee.__onFinishChange.call(ee,ee.getValue())}H.superclass.call(this,W,X,{min:Y,max:Z,step:J});var ee=this;this.__background=document.createElement("div"),this.__foreground=document.createElement("div"),D.bind(this.__background,"mousedown",function(re){D.bind(window,"mousemove",K),D.bind(window,"mouseup",$),K(re)}),D.addClass(this.__background,"slider"),D.addClass(this.__foreground,"slider-fg"),this.updateDisplay(),this.__background.appendChild(this.__foreground),this.domElement.appendChild(this.__background)};return H.superclass=L,H.useDefaultStyles=function(){F.inject(O)},U.extend(H.prototype,L.prototype,{updateDisplay:function(){var W=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*W+"%",H.superclass.prototype.updateDisplay.call(this)}}),H}(A.controllers.NumberController,A.dom.dom,A.utils.css,A.utils.common,".slider {\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\n  height: 1em;\n  border-radius: 1em;\n  background-color: #eee;\n  padding: 0 0.5em;\n  overflow: hidden;\n}\n\n.slider-fg {\n  padding: 1px 0 2px 0;\n  background-color: #aaa;\n  height: 1em;\n  margin-left: -0.5em;\n  padding-right: 0.5em;\n  border-radius: 1em 0 0 1em;\n}\n\n.slider-fg:after {\n  display: inline-block;\n  border-radius: 1em;\n  background-color: #fff;\n  border:  1px solid #aaa;\n  content: '';\n  float: right;\n  margin-right: -1em;\n  margin-top: -1px;\n  height: 0.9em;\n  width: 0.9em;\n}"),A.controllers.FunctionController=function(L,D,F){var U=function(O,G,H){U.superclass.call(this,O,G);var W=this;this.__button=document.createElement("div"),this.__button.innerHTML=void 0===H?"Fire":H,D.bind(this.__button,"click",function(X){return X.preventDefault(),W.fire(),!1}),D.addClass(this.__button,"button"),this.domElement.appendChild(this.__button)};return U.superclass=L,F.extend(U.prototype,L.prototype,{fire:function(){this.__onChange&&this.__onChange.call(this),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.getValue().call(this.object)}}),U}(A.controllers.Controller,A.dom.dom,A.utils.common),A.controllers.BooleanController=function(L,D,F){var U=function(O,G){U.superclass.call(this,O,G);var W=this;this.__prev=this.getValue(),this.__checkbox=document.createElement("input"),this.__checkbox.setAttribute("type","checkbox"),D.bind(this.__checkbox,"change",function(){W.setValue(!W.__prev)},!1),this.domElement.appendChild(this.__checkbox),this.updateDisplay()};return U.superclass=L,F.extend(U.prototype,L.prototype,{setValue:function(O){var G=U.superclass.prototype.setValue.call(this,O);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),G},updateDisplay:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0):this.__checkbox.checked=!1,U.superclass.prototype.updateDisplay.call(this)}}),U}(A.controllers.Controller,A.dom.dom,A.utils.common),A.color.toString=function(L){return function(D){if(1==D.a||L.isUndefined(D.a)){for(var F=D.hex.toString(16);6>F.length;)F="0"+F;return"#"+F}return"rgba("+_Mathround(D.r)+","+_Mathround(D.g)+","+_Mathround(D.b)+","+D.a+")"}}(A.utils.common),A.color.interpret=function(L,D){var F,U,G=[{litmus:D.isString,conversions:{THREE_CHAR_HEX:{read:function(H){var W=H.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==W&&{space:"HEX",hex:parseInt("0x"+W[1].toString()+W[1].toString()+W[2].toString()+W[2].toString()+W[3].toString()+W[3].toString())}},write:L},SIX_CHAR_HEX:{read:function(H){var W=H.match(/^#([A-F0-9]{6})$/i);return null!==W&&{space:"HEX",hex:parseInt("0x"+W[1].toString())}},write:L},CSS_RGB:{read:function(H){var W=H.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==W&&{space:"RGB",r:parseFloat(W[1]),g:parseFloat(W[2]),b:parseFloat(W[3])}},write:L},CSS_RGBA:{read:function(H){var W=H.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);return null!==W&&{space:"RGB",r:parseFloat(W[1]),g:parseFloat(W[2]),b:parseFloat(W[3]),a:parseFloat(W[4])}},write:L}}},{litmus:D.isNumber,conversions:{HEX:{read:function(H){return{space:"HEX",hex:H,conversionName:"HEX"}},write:function(H){return H.hex}}}},{litmus:D.isArray,conversions:{RGB_ARRAY:{read:function(H){return!(3!=H.length)&&{space:"RGB",r:H[0],g:H[1],b:H[2]}},write:function(H){return[H.r,H.g,H.b]}},RGBA_ARRAY:{read:function(H){return!(4!=H.length)&&{space:"RGB",r:H[0],g:H[1],b:H[2],a:H[3]}},write:function(H){return[H.r,H.g,H.b,H.a]}}}},{litmus:D.isObject,conversions:{RGBA_OBJ:{read:function(H){return D.isNumber(H.r)&&D.isNumber(H.g)&&D.isNumber(H.b)&&D.isNumber(H.a)&&{space:"RGB",r:H.r,g:H.g,b:H.b,a:H.a}},write:function(H){return{r:H.r,g:H.g,b:H.b,a:H.a}}},RGB_OBJ:{read:function(H){return D.isNumber(H.r)&&D.isNumber(H.g)&&D.isNumber(H.b)&&{space:"RGB",r:H.r,g:H.g,b:H.b}},write:function(H){return{r:H.r,g:H.g,b:H.b}}},HSVA_OBJ:{read:function(H){return D.isNumber(H.h)&&D.isNumber(H.s)&&D.isNumber(H.v)&&D.isNumber(H.a)&&{space:"HSV",h:H.h,s:H.s,v:H.v,a:H.a}},write:function(H){return{h:H.h,s:H.s,v:H.v,a:H.a}}},HSV_OBJ:{read:function(H){return D.isNumber(H.h)&&D.isNumber(H.s)&&D.isNumber(H.v)&&{space:"HSV",h:H.h,s:H.s,v:H.v}},write:function(H){return{h:H.h,s:H.s,v:H.v}}}}}];return function(){U=!1;var H=1<arguments.length?D.toArray(arguments):arguments[0];return D.each(G,function(W){if(W.litmus(H))return D.each(W.conversions,function(X,Y){if(F=X.read(H),!1===U&&!1!==F)return U=F,F.conversionName=Y,F.conversion=X,D.BREAK}),D.BREAK}),U}}(A.color.toString,A.utils.common),A.GUI=A.gui.GUI=function(L,D,F,U,O,G,H,W,X,Y,Z,J,Q,K,$){function ee(Pe,Le,Ie,Be){if(void 0===Le[Ie])throw new Error("Object "+Le+" has no property \""+Ie+"\"");var Ne;if(Be.color)Ne=new Z(Le,Ie);else{var ze=[Le,Ie].concat(Be.factoryArgs);Ne=U.apply(Pe,ze)}Be.before instanceof O&&(Be.before=Be.before.__li),ie(Pe,Ne),K.addClass(Ne.domElement,"c");var De=document.createElement("span");K.addClass(De,"property-name"),De.innerHTML=Ne.property;var Fe=document.createElement("div");Fe.appendChild(De),Fe.appendChild(Ne.domElement);var Ue=re(Pe,Fe,Be.before);return K.addClass(Ue,Ce.CLASS_CONTROLLER_ROW),K.addClass(Ue,typeof Ne.getValue()),oe(Pe,Ue,Ne),Pe.__controllers.push(Ne),Ne}function re(Pe,Le,Ie){var Be=document.createElement("li");return Le&&Be.appendChild(Le),Ie?Pe.__ul.insertBefore(Be,params.before):Pe.__ul.appendChild(Be),Pe.onResize(),Be}function oe(Pe,Le,Ie){if(Ie.__li=Le,Ie.__gui=Pe,$.extend(Ie,{options:function(ze){return 1<arguments.length?(Ie.remove(),ee(Pe,Ie.object,Ie.property,{before:Ie.__li.nextElementSibling,factoryArgs:[$.toArray(arguments)]})):$.isArray(ze)||$.isObject(ze)?(Ie.remove(),ee(Pe,Ie.object,Ie.property,{before:Ie.__li.nextElementSibling,factoryArgs:[ze]})):void 0},name:function(ze){return Ie.__li.firstElementChild.firstElementChild.innerHTML=ze,Ie},listen:function(){return Ie.__gui.listen(Ie),Ie},remove:function(){return Ie.__gui.remove(Ie),Ie}}),Ie instanceof X){var Be=new W(Ie.object,Ie.property,{min:Ie.__min,max:Ie.__max,step:Ie.__step});$.each(["updateDisplay","onChange","onFinishChange"],function(ze){var De=Ie[ze],Fe=Be[ze];Ie[ze]=Be[ze]=function(){var Ue=Array.prototype.slice.call(arguments);return De.apply(Ie,Ue),Fe.apply(Be,Ue)}}),K.addClass(Le,"has-slider"),Ie.domElement.insertBefore(Be.domElement,Ie.domElement.firstElementChild)}else if(Ie instanceof W){var Ne=function(ze){return $.isNumber(Ie.__min)&&$.isNumber(Ie.__max)?(Ie.remove(),ee(Pe,Ie.object,Ie.property,{before:Ie.__li.nextElementSibling,factoryArgs:[Ie.__min,Ie.__max,Ie.__step]})):ze};Ie.min=$.compose(Ne,Ie.min),Ie.max=$.compose(Ne,Ie.max)}else Ie instanceof G?(K.bind(Le,"click",function(){K.fakeEvent(Ie.__checkbox,"click")}),K.bind(Ie.__checkbox,"click",function(ze){ze.stopPropagation()})):Ie instanceof H?(K.bind(Le,"click",function(){K.fakeEvent(Ie.__button,"click")}),K.bind(Le,"mouseover",function(){K.addClass(Ie.__button,"hover")}),K.bind(Le,"mouseout",function(){K.removeClass(Ie.__button,"hover")})):Ie instanceof Z&&(K.addClass(Le,"color"),Ie.updateDisplay=$.compose(function(ze){return Le.style.borderLeftColor=Ie.__color.toString(),ze},Ie.updateDisplay),Ie.updateDisplay());Ie.setValue=$.compose(function(ze){return Pe.getRoot().__preset_select&&Ie.isModified()&&he(Pe.getRoot(),!0),ze},Ie.setValue)}function ie(Pe,Le){var Ie=Pe.getRoot(),Be=Ie.__rememberedObjects.indexOf(Le.object);if(-1!=Be){var Ne=Ie.__rememberedObjectIndecesToControllers[Be];if(void 0===Ne&&(Ne={},Ie.__rememberedObjectIndecesToControllers[Be]=Ne),Ne[Le.property]=Le,Ie.load&&Ie.load.remembered){var ze=Ie.load.remembered,De;if(ze[Pe.preset])De=ze[Pe.preset];else if(ze[Te])De=ze[Te];else return;if(De[Be]&&void 0!==De[Be][Le.property]){var Fe=De[Be][Le.property];Le.initialValue=Fe,Le.setValue(Fe)}}}}function ne(Pe,Le){return document.location.href+"."+Le}function se(Pe){var Le=Pe.__save_row=document.createElement("li");K.addClass(Pe.domElement,"has-save"),Pe.__ul.insertBefore(Le,Pe.__ul.firstChild),K.addClass(Le,"save-row");var Ie=document.createElement("span");Ie.innerHTML="&nbsp;",K.addClass(Ie,"button gears");var Be=document.createElement("span");Be.innerHTML="Save",K.addClass(Be,"button"),K.addClass(Be,"save");var Ne=document.createElement("span");Ne.innerHTML="New",K.addClass(Ne,"button"),K.addClass(Ne,"save-as");var ze=document.createElement("span");ze.innerHTML="Revert",K.addClass(ze,"button"),K.addClass(ze,"revert");var De=Pe.__preset_select=document.createElement("select");if(Pe.load&&Pe.load.remembered?$.each(Pe.load.remembered,function(Ve,Ge){ge(Pe,Ge,Ge==Pe.preset)}):ge(Pe,Te,!1),K.bind(De,"change",function(){for(var Ve=0;Ve<Pe.__preset_select.length;Ve++)Pe.__preset_select[Ve].innerHTML=Pe.__preset_select[Ve].value;Pe.preset=this.value}),Le.appendChild(De),Le.appendChild(Ie),Le.appendChild(Be),Le.appendChild(Ne),Le.appendChild(ze),Ee){function Ve(){Ue.style.display=Pe.useLocalStorage?"block":"none"}var Fe=document.getElementById("dg-save-locally"),Ue=document.getElementById("dg-local-explain");Fe.style.display="block";var Oe=document.getElementById("dg-local-storage");"true"===localStorage.getItem(ne(Pe,"isLocal"))&&Oe.setAttribute("checked","checked"),Ve(),K.bind(Oe,"change",function(){Pe.useLocalStorage=!Pe.useLocalStorage,Ve()})}var ke=document.getElementById("dg-new-constructor");K.bind(ke,"keydown",function(Ve){Ve.metaKey&&(67===Ve.which||67==Ve.keyCode)&&Se.hide()}),K.bind(Ie,"click",function(){ke.innerHTML=JSON.stringify(Pe.getSaveObject(),void 0,2),Se.show(),ke.focus(),ke.select()}),K.bind(Be,"click",function(){Pe.save()}),K.bind(Ne,"click",function(){var Ve=prompt("Enter a new preset name.");Ve&&Pe.saveAs(Ve)}),K.bind(ze,"click",function(){Pe.revert()})}function le(Pe){function Le(ze){return ze.preventDefault(),Ne=ze.clientX,K.addClass(Pe.__closeButton,Ce.CLASS_DRAG),K.bind(window,"mousemove",Ie),K.bind(window,"mouseup",Be),!1}function Ie(ze){return ze.preventDefault(),Pe.width+=Ne-ze.clientX,Pe.onResize(),Ne=ze.clientX,!1}function Be(){K.removeClass(Pe.__closeButton,Ce.CLASS_DRAG),K.unbind(window,"mousemove",Ie),K.unbind(window,"mouseup",Be)}Pe.__resize_handle=document.createElement("div"),$.extend(Pe.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"});var Ne;K.bind(Pe.__resize_handle,"mousedown",Le),K.bind(Pe.__closeButton,"mousedown",Le),Pe.domElement.insertBefore(Pe.__resize_handle,Pe.domElement.firstElementChild)}function pe(Pe,Le){Pe.domElement.style.width=Le+"px",Pe.__save_row&&Pe.autoPlace&&(Pe.__save_row.style.width=Le+"px"),Pe.__closeButton&&(Pe.__closeButton.style.width=Le+"px")}function ue(Pe,Le){var Ie={};return $.each(Pe.__rememberedObjects,function(Be,Ne){var ze={},De=Pe.__rememberedObjectIndecesToControllers[Ne];$.each(De,function(Fe,Ue){ze[Ue]=Le?Fe.initialValue:Fe.getValue()}),Ie[Ne]=ze}),Ie}function ge(Pe,Le,Ie){var Be=document.createElement("option");Be.innerHTML=Le,Be.value=Le,Pe.__preset_select.appendChild(Be),Ie&&(Pe.__preset_select.selectedIndex=Pe.__preset_select.length-1)}function fe(Pe){for(var Le=0;Le<Pe.__preset_select.length;Le++)Pe.__preset_select[Le].value==Pe.preset&&(Pe.__preset_select.selectedIndex=Le)}function he(Pe,Le){var Ie=Pe.__preset_select[Pe.__preset_select.selectedIndex];Ie.innerHTML=Le?Ie.value+"*":Ie.value}function ye(Pe){0!=Pe.length&&J(function(){ye(Pe)}),$.each(Pe,function(Le){Le.updateDisplay()})}L.inject(F);var _e="dg",xe=72,ve=20,Te="Default",Ee=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(Pe){return!1}}(),Ae=!0,Me=!1,Re=[],Ce=function(Pe){function Le(){localStorage.setItem(ne(Be,"gui"),JSON.stringify(Be.getSaveObject()))}var Be=this;this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),K.addClass(this.domElement,_e),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],Pe=Pe||{},Pe=$.defaults(Pe,{autoPlace:!0,width:Ce.DEFAULT_WIDTH}),Pe=$.defaults(Pe,{resizable:Pe.autoPlace,hideable:Pe.autoPlace}),$.isUndefined(Pe.load)?Pe.load={preset:Te}:Pe.preset&&(Pe.load.preset=Pe.preset),$.isUndefined(Pe.parent)&&Pe.hideable&&Re.push(this),Pe.resizable=$.isUndefined(Pe.parent)&&Pe.resizable,Pe.autoPlace&&$.isUndefined(Pe.scrollable)&&(Pe.scrollable=!0);var Ne=Ee&&"true"===localStorage.getItem(ne(this,"isLocal"));if(Object.defineProperties(this,{parent:{get:function(){return Pe.parent}},scrollable:{get:function(){return Pe.scrollable}},autoPlace:{get:function(){return Pe.autoPlace}},preset:{get:function(){return Be.parent?Be.getRoot().preset:Pe.load.preset},set:function(ke){Be.parent?Be.getRoot().preset=ke:Pe.load.preset=ke,fe(this),Be.revert()}},width:{get:function(){return Pe.width},set:function(ke){Pe.width=ke,pe(Be,ke)}},name:{get:function(){return Pe.name},set:function(ke){Pe.name=ke,De&&(De.innerHTML=Pe.name)}},closed:{get:function(){return Pe.closed},set:function(ke){Pe.closed=ke,Pe.closed?K.addClass(Be.__ul,Ce.CLASS_CLOSED):K.removeClass(Be.__ul,Ce.CLASS_CLOSED),this.onResize(),Be.__closeButton&&(Be.__closeButton.innerHTML=ke?Ce.TEXT_OPEN:Ce.TEXT_CLOSED)}},load:{get:function(){return Pe.load}},useLocalStorage:{get:function(){return Ne},set:function(ke){Ee&&(Ne=ke,ke?K.bind(window,"unload",Le):K.unbind(window,"unload",Le),localStorage.setItem(ne(Be,"isLocal"),ke))}}}),$.isUndefined(Pe.parent)){if(Pe.closed=!1,K.addClass(this.domElement,Ce.CLASS_MAIN),K.makeSelectable(this.domElement,!1),Ee&&Ne){Be.useLocalStorage=!0;var ze=localStorage.getItem(ne(this,"gui"));ze&&(Pe.load=JSON.parse(ze))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=Ce.TEXT_CLOSED,K.addClass(this.__closeButton,Ce.CLASS_CLOSE_BUTTON),this.domElement.appendChild(this.__closeButton),K.bind(this.__closeButton,"click",function(){Be.closed=!Be.closed})}else{void 0===Pe.closed&&(Pe.closed=!0);var De=document.createTextNode(Pe.name);K.addClass(De,"controller-name");var Fe=re(Be,De),Ue=function(ke){return ke.preventDefault(),Be.closed=!Be.closed,!1};K.addClass(this.__ul,Ce.CLASS_CLOSED),K.addClass(Fe,"title"),K.bind(Fe,"click",Ue),Pe.closed||(this.closed=!1)}Pe.autoPlace&&($.isUndefined(Pe.parent)&&(Ae&&(we=document.createElement("div"),K.addClass(we,_e),K.addClass(we,Ce.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(we),Ae=!1),we.appendChild(this.domElement),K.addClass(this.domElement,Ce.CLASS_AUTO_PLACE)),!this.parent&&pe(Be,Pe.width)),K.bind(window,"resize",function(){Be.onResize()}),K.bind(this.__ul,"webkitTransitionEnd",function(){Be.onResize()}),K.bind(this.__ul,"transitionend",function(){Be.onResize()}),K.bind(this.__ul,"oTransitionEnd",function(){Be.onResize()}),this.onResize(),Pe.resizable&&le(this);Be.getRoot();Pe.parent||function(){var ke=Be.getRoot();ke.width+=1,$.defer(function(){ke.width-=1})}()},Se,we;return Ce.toggleHide=function(){Me=!Me,$.each(Re,function(Pe){Pe.domElement.style.zIndex=Me?-999:999,Pe.domElement.style.opacity=Me?0:1})},Ce.CLASS_AUTO_PLACE="a",Ce.CLASS_AUTO_PLACE_CONTAINER="ac",Ce.CLASS_MAIN="main",Ce.CLASS_CONTROLLER_ROW="cr",Ce.CLASS_TOO_TALL="taller-than-window",Ce.CLASS_CLOSED="closed",Ce.CLASS_CLOSE_BUTTON="close-button",Ce.CLASS_DRAG="drag",Ce.DEFAULT_WIDTH=245,Ce.TEXT_CLOSED="Close Controls",Ce.TEXT_OPEN="Open Controls",K.bind(window,"keydown",function(Pe){"text"!==document.activeElement.type&&(Pe.which===xe||Pe.keyCode==xe)&&Ce.toggleHide()},!1),$.extend(Ce.prototype,{add:function(Pe,Le){return ee(this,Pe,Le,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(Pe,Le){return ee(this,Pe,Le,{color:!0})},remove:function(Pe){this.__ul.removeChild(Pe.__li),this.__controllers.slice(this.__controllers.indexOf(Pe),1);var Le=this;$.defer(function(){Le.onResize()})},destroy:function(){this.autoPlace&&we.removeChild(this.domElement)},addFolder:function(Pe){if(void 0!==this.__folders[Pe])throw new Error("You already have a folder in this GUI by the name \""+Pe+"\"");var Le={name:Pe,parent:this};Le.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[Pe]&&(Le.closed=this.load.folders[Pe].closed,Le.load=this.load.folders[Pe]);var Ie=new Ce(Le);this.__folders[Pe]=Ie;var Be=re(this,Ie.domElement);return K.addClass(Be,"folder"),Ie},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var Pe=this.getRoot();if(Pe.scrollable){var Le=K.getOffset(Pe.__ul).top,Ie=0;$.each(Pe.__ul.childNodes,function(Be){Pe.autoPlace&&Be===Pe.__save_row||(Ie+=K.getHeight(Be))}),window.innerHeight-Le-ve<Ie?(K.addClass(Pe.domElement,Ce.CLASS_TOO_TALL),Pe.__ul.style.height=window.innerHeight-Le-ve+"px"):(K.removeClass(Pe.domElement,Ce.CLASS_TOO_TALL),Pe.__ul.style.height="auto")}Pe.__resize_handle&&$.defer(function(){Pe.__resize_handle.style.height=Pe.__ul.offsetHeight+"px"}),Pe.__closeButton&&(Pe.__closeButton.style.width=Pe.width+"px")},remember:function(){if($.isUndefined(Se)&&(Se=new Q,Se.domElement.innerHTML=D),this.parent)throw new Error("You can only call remember on a top level GUI.");var Pe=this;$.each(Array.prototype.slice.call(arguments),function(Le){0==Pe.__rememberedObjects.length&&se(Pe),-1==Pe.__rememberedObjects.indexOf(Le)&&Pe.__rememberedObjects.push(Le)}),this.autoPlace&&pe(this,this.width)},getRoot:function(){for(var Pe=this;Pe.parent;)Pe=Pe.parent;return Pe},getSaveObject:function(){var Pe=this.load;return Pe.closed=this.closed,0<this.__rememberedObjects.length&&(Pe.preset=this.preset,!Pe.remembered&&(Pe.remembered={}),Pe.remembered[this.preset]=ue(this)),Pe.folders={},$.each(this.__folders,function(Le,Ie){Pe.folders[Ie]=Le.getSaveObject()}),Pe},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=ue(this),he(this,!1)},saveAs:function(Pe){this.load.remembered||(this.load.remembered={},this.load.remembered[Te]=ue(this,!0)),this.load.remembered[Pe]=ue(this),this.preset=Pe,ge(this,Pe,!0)},revert:function(Pe){$.each(this.__controllers,function(Le){this.getRoot().load.remembered?ie(Pe||this.getRoot(),Le):Le.setValue(Le.initialValue)},this),$.each(this.__folders,function(Le){Le.revert(Le)}),Pe||he(this.getRoot(),!1)},listen:function(Pe){var Le=0==this.__listening.length;this.__listening.push(Pe),Le&&ye(this.__listening)}}),Ce}(A.utils.css,"<div id=\"dg-save\" class=\"dg dialogue\">\n\n  Here's the new load parameter for your <code>GUI</code>'s constructor:\n\n  <textarea id=\"dg-new-constructor\"></textarea>\n\n  <div id=\"dg-save-locally\">\n\n    <input id=\"dg-local-storage\" type=\"checkbox\"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id=\"dg-local-explain\">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n      \n    </div>\n    \n  </div>\n\n</div>",".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear;border:0;position:absolute;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-x:hidden}.dg.a.has-save ul{margin-top:27px}.dg.a.has-save ul.closed{margin-top:0}.dg.a .save-row{position:fixed;top:0;z-index:1002}.dg li{-webkit-transition:height 0.1s ease-out;-o-transition:height 0.1s ease-out;-moz-transition:height 0.1s ease-out;transition:height 0.1s ease-out}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;overflow:hidden;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li > *{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:9px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2fa1d6}.dg .cr.number input[type=text]{color:#2fa1d6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2fa1d6}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n",A.controllers.factory=function(L,D,F,U,O,G,H){return function(W,X){var Y=W[X];return H.isArray(arguments[2])||H.isObject(arguments[2])?new L(W,X,arguments[2]):H.isNumber(Y)?H.isNumber(arguments[2])&&H.isNumber(arguments[3])?new F(W,X,arguments[2],arguments[3]):new D(W,X,{min:arguments[2],max:arguments[3]}):H.isString(Y)?new U(W,X):H.isFunction(Y)?new O(W,X,""):H.isBoolean(Y)?new G(W,X):void 0}}(A.controllers.OptionController,A.controllers.NumberControllerBox,A.controllers.NumberControllerSlider,A.controllers.StringController=function(L,D,F){var U=function(O,G){function H(){X.setValue(X.__input.value)}U.superclass.call(this,O,G);var X=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),D.bind(this.__input,"keyup",H),D.bind(this.__input,"change",H),D.bind(this.__input,"blur",function(){X.__onFinishChange&&X.__onFinishChange.call(X,X.getValue())}),D.bind(this.__input,"keydown",function(Y){13===Y.keyCode&&this.blur()}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return U.superclass=L,F.extend(U.prototype,L.prototype,{updateDisplay:function(){return D.isActive(this.__input)||(this.__input.value=this.getValue()),U.superclass.prototype.updateDisplay.call(this)}}),U}(A.controllers.Controller,A.dom.dom,A.utils.common),A.controllers.FunctionController,A.controllers.BooleanController,A.utils.common),A.controllers.Controller,A.controllers.BooleanController,A.controllers.FunctionController,A.controllers.NumberControllerBox,A.controllers.NumberControllerSlider,A.controllers.OptionController,A.controllers.ColorController=function(L,D,F,U,O){function G(Y,Z,J,Q){Y.style.background="",O.each(X,function(K){Y.style.cssText+="background: "+K+"linear-gradient("+Z+", "+J+" 0%, "+Q+" 100%); "})}function H(Y){Y.style.background="",Y.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",Y.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",Y.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",Y.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",Y.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}var W=function(Y,Z){function J(ne){ee(ne),D.bind(window,"mousemove",ee),D.bind(window,"mouseup",Q)}function Q(){D.unbind(window,"mousemove",ee),D.unbind(window,"mouseup",Q)}function K(){var ne=U(this.value);!1===ne?this.value=oe.__color.toString():(oe.__color.__state=ne,oe.setValue(oe.__color.toOriginal()))}function $(){D.unbind(window,"mousemove",re),D.unbind(window,"mouseup",$)}function ee(ne){ne.preventDefault();var se=D.getWidth(oe.__saturation_field),le=D.getOffset(oe.__saturation_field),pe=(ne.clientX-le.left+document.body.scrollLeft)/se,ue=1-(ne.clientY-le.top+document.body.scrollTop)/se;return 1<ue?ue=1:0>ue&&(ue=0),1<pe?pe=1:0>pe&&(pe=0),oe.__color.v=ue,oe.__color.s=pe,oe.setValue(oe.__color.toOriginal()),!1}function re(ne){ne.preventDefault();var se=D.getHeight(oe.__hue_field),le=D.getOffset(oe.__hue_field),pe=1-(ne.clientY-le.top+document.body.scrollTop)/se;return 1<pe?pe=1:0>pe&&(pe=0),oe.__color.h=360*pe,oe.setValue(oe.__color.toOriginal()),!1}W.superclass.call(this,Y,Z),this.__color=new F(this.getValue()),this.__temp=new F(0);var oe=this;this.domElement=document.createElement("div"),D.makeSelectable(this.domElement,!1),this.__selector=document.createElement("div"),this.__selector.className="selector",this.__saturation_field=document.createElement("div"),this.__saturation_field.className="saturation-field",this.__field_knob=document.createElement("div"),this.__field_knob.className="field-knob",this.__field_knob_border="2px solid ",this.__hue_knob=document.createElement("div"),this.__hue_knob.className="hue-knob",this.__hue_field=document.createElement("div"),this.__hue_field.className="hue-field",this.__input=document.createElement("input"),this.__input.type="text",this.__input_textShadow="0 1px 1px ",D.bind(this.__input,"keydown",function(ne){13===ne.keyCode&&K.call(this)}),D.bind(this.__input,"blur",K),D.bind(this.__selector,"mousedown",function(){D.addClass(this,"drag").bind(window,"mouseup",function(){D.removeClass(oe.__selector,"drag")})});var ie=document.createElement("div");O.extend(this.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),O.extend(this.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:this.__field_knob_border+(.5>this.__color.v?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),O.extend(this.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),O.extend(this.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),O.extend(ie.style,{width:"100%",height:"100%",background:"none"}),G(ie,"top","rgba(0,0,0,0)","#000"),O.extend(this.__hue_field.style,{width:"15px",height:"100px",display:"inline-block",border:"1px solid #555",cursor:"ns-resize"}),H(this.__hue_field),O.extend(this.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:this.__input_textShadow+"rgba(0,0,0,0.7)"}),D.bind(this.__saturation_field,"mousedown",J),D.bind(this.__field_knob,"mousedown",J),D.bind(this.__hue_field,"mousedown",function(ne){re(ne),D.bind(window,"mousemove",re),D.bind(window,"mouseup",$)}),this.__saturation_field.appendChild(ie),this.__selector.appendChild(this.__field_knob),this.__selector.appendChild(this.__saturation_field),this.__selector.appendChild(this.__hue_field),this.__hue_field.appendChild(this.__hue_knob),this.domElement.appendChild(this.__input),this.domElement.appendChild(this.__selector),this.updateDisplay()};W.superclass=L,O.extend(W.prototype,L.prototype,{updateDisplay:function(){var Y=U(this.getValue());if(!1!==Y){var Z=!1;O.each(F.COMPONENTS,function(K){if(!O.isUndefined(Y[K])&&!O.isUndefined(this.__color.__state[K])&&Y[K]!==this.__color.__state[K])return Z=!0,{}},this),Z&&O.extend(this.__color.__state,Y)}O.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var J=.5>this.__color.v||.5<this.__color.s?255:0,Q=255-J;O.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toString(),border:this.__field_knob_border+"rgb("+J+","+J+","+J+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,G(this.__saturation_field,"left","#fff",this.__temp.toString()),O.extend(this.__input.style,{backgroundColor:this.__input.value=this.__color.toString(),color:"rgb("+J+","+J+","+J+")",textShadow:this.__input_textShadow+"rgba("+Q+","+Q+","+Q+",.7)"})}});var X=["-moz-","-o-","-webkit-","-ms-",""];return W}(A.controllers.Controller,A.dom.dom,A.color.Color=function(L,D,F,U){function O(Y,Z,J){Object.defineProperty(Y,Z,{get:function(){return"RGB"===this.__state.space?this.__state[Z]:(H(this,Z,J),this.__state[Z])},set:function(Q){"RGB"!==this.__state.space&&(H(this,Z,J),this.__state.space="RGB"),this.__state[Z]=Q}})}function G(Y,Z){Object.defineProperty(Y,Z,{get:function(){return"HSV"===this.__state.space?this.__state[Z]:(W(this),this.__state[Z])},set:function(J){"HSV"!==this.__state.space&&(W(this),this.__state.space="HSV"),this.__state[Z]=J}})}function H(Y,Z,J){if("HEX"===Y.__state.space)Y.__state[Z]=D.component_from_hex(Y.__state.hex,J);else if("HSV"===Y.__state.space)U.extend(Y.__state,D.hsv_to_rgb(Y.__state.h,Y.__state.s,Y.__state.v));else throw"Corrupted color state"}function W(Y){var Z=D.rgb_to_hsv(Y.r,Y.g,Y.b);U.extend(Y.__state,{s:Z.s,v:Z.v}),U.isNaN(Z.h)?U.isUndefined(Y.__state.h)&&(Y.__state.h=0):Y.__state.h=Z.h}var X=function(){if(this.__state=L.apply(this,arguments),!1===this.__state)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1};return X.COMPONENTS=["r","g","b","h","s","v","hex","a"],U.extend(X.prototype,{toString:function(){return F(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),O(X.prototype,"r",2),O(X.prototype,"g",1),O(X.prototype,"b",0),G(X.prototype,"h"),G(X.prototype,"s"),G(X.prototype,"v"),Object.defineProperty(X.prototype,"a",{get:function(){return this.__state.a},set:function(Y){this.__state.a=Y}}),Object.defineProperty(X.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=D.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(Y){this.__state.space="HEX",this.__state.hex=Y}}),X}(A.color.interpret,A.color.math=function(){var L;return{hsv_to_rgb:function(D,F,U){var O=_Mathfloor(D/60)%6,G=D/60-_Mathfloor(D/60),H=U*(1-F),W=U*(1-G*F),X=U*(1-(1-G)*F),Y=[[U,X,H],[W,U,H],[H,U,X],[H,W,U],[X,H,U],[U,H,W]][O];return{r:255*Y[0],g:255*Y[1],b:255*Y[2]}},rgb_to_hsv:function(D,F,U){var O=_Mathmin(D,F,U),G=_Mathmax(D,F,U),H=G-O,W,X;if(0!=G)X=H/G;else return{h:NaN,s:0,v:0};return W=D==G?(F-U)/H:F==G?2+(U-D)/H:4+(D-F)/H,W/=6,0>W&&(W+=1),{h:360*W,s:X,v:G/255}},rgb_to_hex:function(D,F,U){var O=this.hex_with_component(0,2,D);return O=this.hex_with_component(O,1,F),O=this.hex_with_component(O,0,U),O},component_from_hex:function(D,F){return 255&D>>8*F},hex_with_component:function(D,F,U){return U<<(L=8*F)|D&~(255<<L)}}}(),A.color.toString,A.utils.common),A.color.interpret,A.utils.common),A.utils.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(L){window.setTimeout(L,1e3/60)}}(),A.dom.CenteredDiv=function(L,D){var U=function(){this.backgroundElement=document.createElement("div"),D.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear"}),L.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),D.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var O=this;L.bind(this.backgroundElement,"click",function(){O.hide()})};return U.prototype.show=function(){var O=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),D.defer(function(){O.backgroundElement.style.opacity=1,O.domElement.style.opacity=1,O.domElement.style.webkitTransform="scale(1)"})},U.prototype.hide=function(){var O=this,G=function(){O.domElement.style.display="none",O.backgroundElement.style.display="none",L.unbind(O.domElement,"webkitTransitionEnd",G),L.unbind(O.domElement,"transitionend",G),L.unbind(O.domElement,"oTransitionEnd",G)};L.bind(this.domElement,"webkitTransitionEnd",G),L.bind(this.domElement,"transitionend",G),L.bind(this.domElement,"oTransitionEnd",G),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"},U.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-L.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-L.getHeight(this.domElement)/2+"px"},U}(A.dom.dom,A.utils.common),A.dom.dom,A.utils.common)},,,,,,,,,,function(E){E.exports=function(A){return A.webpackPolyfill||(A.deprecate=function(){},A.paths=[],!A.children&&(A.children=[]),Object.defineProperty(A,"loaded",{enumerable:!0,get:function(){return A.l}}),Object.defineProperty(A,"id",{enumerable:!0,get:function(){return A.i}}),A.webpackPolyfill=1),A}},function(E,S,A){A(0),A(6),A(4),A(3),E.exports=A(2)}]);